################################################################
## Packages / Alexa
################################################################

################################################
## Customize
################################################

homeassistant:
  customize:
    ################################################
    ## Node Anchors
    ################################################

    package.node_anchors:
      customize: &customize
        package: 'alexa'

      expose: &expose
        <<: *customize
        haaska_hidden: false
        homebridge_hidden: false

################################################
## Intent Scripts
################################################
intent_script:
  # Give status of household members
  WhereAreWeIntent:
    speech:
      text: >
        {%- if is_state('device_tracker.bruce_phone', 'home') and is_state('device_tracker.teresa_dills_phone', 'home') and is_state('device_tracker.chris_miller_phone', 'home') -%}
          Everyone is currently home
        {%- else -%}
          The last known locations of the household are as follows: {% if is_state('device_tracker.chris_miller_phone', 'home') %}Chris is at home.{% else %}Chris is at {{ states.sensor.chris_location.attributes['Street'] }}, {{states.sensor.chris_location.attributes['City'] }}{% endif %} {% if is_state('device_tracker.teresa_dills_phone', 'home') %}Teresa is at home.{% else %}Teresa is at {{ states.sensor.teresa_location.attributes['Street'] }}, {{states.sensor.teresa_location.attributes['City'] }}{% endif %} {% if is_state('device_tracker.bruce_phone', 'home') %}Bruce is at home.{% else %}Bruce is away{% endif %}
        {% endif %}

  # List off who is currently at home
  WhosHomeIntent:
    speech:
      text: >
        {% if is_state('device_tracker.bruce_phone', 'home') %}Bruce, {% endif %}{% if is_state('device_tracker.teresa_dills_phone', 'home') %}Teresa, {% endif %}{% if is_state('device_tracker.chris_miller_phone', 'home') %}Chris,{% endif %} curerently are home.

  NetworkConditionsIntent:
    speech:
      text: "Currently the network is operating at {{ states.sensor.speedtest_download.state }} download, {{ states.sensor.speedtest_upload.state }} upload, with a ping time of {{ states.sensor.speedtest_ping.state }}."
{"version":3,"sources":["webpack:///./node_modules/@polymer/paper-item/paper-item-body.js","webpack:///./node_modules/@polymer/iron-autogrow-textarea/iron-autogrow-textarea.js","webpack:///./node_modules/@polymer/paper-input/paper-textarea.js","webpack:///./node_modules/@polymer/paper-item/paper-icon-item.js","webpack:///./node_modules/@vaadin/vaadin-overlay/theme/lumo/vaadin-overlay-styles.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/theme/lumo/vaadin-combo-box-dropdown-styles.js","webpack:///./node_modules/@vaadin/vaadin-item/theme/lumo/vaadin-item-styles.js","webpack:///./node_modules/@vaadin/vaadin-item/src/vaadin-item-mixin.js","webpack:///./node_modules/@vaadin/vaadin-item/src/vaadin-item.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/theme/lumo/vaadin-combo-box-item-styles.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-mixin.js","webpack:///./node_modules/@polymer/iron-list/iron-list.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-item.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-dropdown.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-dropdown-wrapper.js","webpack:///./node_modules/@vaadin/vaadin-combo-box/src/vaadin-combo-box-light.js"],"names":["_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__","__webpack_require__","Object","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__","a","_template","is","171","module","__webpack_exports__","iron_control_state","iron_validatable_behavior","polymer_fn","html_tag","polymer_dom","behaviors","properties","value","observer","type","String","notify","bindValue","rows","Number","maxRows","autocomplete","autofocus","Boolean","inputmode","placeholder","readonly","required","minlength","maxlength","label","listeners","input","textarea","this","$","selectionStart","selectionEnd","attached","navigator","userAgent","match","style","marginLeft","validate","valid","validity","hasValidator","call","invalid","fire","_bindValueChanged","_valueChanged","mirror","innerHTML","_valueForMirror","_onInput","event","eventPath","b","path","target","_constrain","tokens","_tokens","length","slice","push","join","replace","split","_updateCached","paper_input_behavior","iron_form_element_behavior","_ariaLabelledBy","_ariaDescribedBy","start","end","_ariaLabelledByChanged","ariaLabelledBy","_focusableElement","setAttribute","_ariaDescribedByChanged","ariaDescribedBy","inputElement","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_6__","_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_5__","_paper_item_behavior_js__WEBPACK_IMPORTED_MODULE_3__","188","$_documentContainer","document","createElement","head","appendChild","content","vaadin_combo_box_dropdown_styles_$_documentContainer","vaadin_item_styles_$_documentContainer","ItemMixin","superClass","_hasVaadinItemMixin","disabled","reflectToAttribute","selected","_value","constructor","super","textContent","trim","ready","attrValue","getAttribute","addEventListener","e","_setFocused","_setActive","_mousedown","mouseUpListener","removeEventListener","_onKeydown","_onKeyup","disconnectedCallback","hasAttribute","_selectedChanged","_disabledChanged","blur","removeAttribute","focused","active","test","key","preventDefault","click","vaadin_item_ItemElement","vaadin_themable_mixin","polymer_element","template","version","customElements","define","vaadin_combo_box_item_styles_$_documentContainer","ComboBoxMixin","subclass","opened","items","Array","allowCustomValue","filteredItems","_lastCommittedValue","loading","_focusedIndex","filter","selectedItem","itemLabelPath","itemValuePath","name","_toggleElement","_clearElement","_inputElementValue","_closeOnBlurIsPrevented","_previousDocumentPointerEvents","observers","close","iron_a11y_announcer","requestAvailability","overlay","_overlaySelectedItemChanged","bind","_onClosed","_onOpened","_onKeyDown","_onClick","_onOverlayTouchAction","composedPath","_clear","open","_openedChanged","old","_openedWithFocusRing","focusElement","touchDevice","focus","indexOf","_isEventKey","_onArrowDown","_onArrowUp","_onEnter","_onEscape","k","iron_a11y_keys_behavior","keyboardEventMatchesKeys","_getItemLabel","item","getItemLabel","_getItemValue","get","toString","_items","Math","min","_prefillFocusedItemLabel","max","setTimeout","_focusedItem","_markAllSelectionRange","_setSelectionRange","_nativeInput","setSelectionRange","ignore","_clearSelectionRange","pos","_stopPropagation","_revertInputValue","cancel","_toggleElementChanged","toggleElement","_detectAndDispatchChange","_revertInputValueToValue","flush","ensureItemsRendered","_selector","toggleScrollListener","updateViewportBoundaries","utils_async","microTask","run","adjustScrollPosition","dropdown","notifyResize","focusedItem","CustomEvent","detail","composed","cancelable","bubbles","dispatchEvent","defaultPrevented","customValue","_inputValueChanged","_filterFromInput","_filterChanged","_filterItems","_filteredItemsChanged","_loadingChanged","_updateHasValue","hasValue","_selectedItemChanged","_selectedItem","oldVal","_isValidValue","valueIndex","_indexOfValue","_itemsChanged","_setOverlayItems","indexOfLabel","arr","toLowerCase","set","i","stopPropagation","checkValidity","_instanceProps","index","_ensureTemplatized","_TemplateClass","tpl","querySelector","templatize","c","instanceProps","forwardHostProp","prop","querySelectorAll","prototype","forEach","_itemTemplateInstance","notifyPath","_preventInputBlur","_preventDefault","_restoreInputBlur","IOS","IOS_TOUCH_SCROLLING","IS_V2","ANIMATION_FRAME","animationFrame","IDLE_TIME","idlePeriod","MICRO_TASK","mutable_data_behavior","Polymer","OptionalMutableDataBehavior","as","indexAs","selectedAs","grid","selectionEnabled","selectedItems","multiSelection","scrollOffset","templatizer_behavior","iron_resizable_behavior","iron_scroll_target_behavior","_ratio","_scrollerPaddingTop","_scrollPosition","_physicalSize","_physicalAverage","_physicalAverageCount","_physicalTop","_virtualCount","_estScrollHeight","_scrollHeight","_viewportHeight","_viewportWidth","_physicalItems","_physicalSizes","_firstVisibleIndexVal","_collection","_lastVisibleIndexVal","_maxPages","_focusedVirtualIndex","_focusedPhysicalIndex","_offscreenFocusedItem","_focusBackfillItem","_itemsPerRow","_itemWidth","_rowHeight","_templateCost","_parentModel","_physicalBottom","_scrollBottom","_virtualEnd","_virtualStart","_physicalCount","_hiddenContentSize","_physicalRows","_itemsParent","_userTemplate","parentNode","_maxScrollTop","_scrollOffset","_maxVirtualStart","virtualCount","_convertIndexToCompleteRow","val","_clamp","_virtualStartVal","_physicalStart","_physicalStartVal","_physicalEnd","_physicalCountVal","_optPhysicalSize","Infinity","_isVisible","offsetWidth","offsetHeight","firstVisibleIndex","idx","physicalOffset","_iterateItems","pidx","vidx","_getPhysicalSizeIncrement","lastVisibleIndex","_estRowsInView","_defaultScrollTarget","_virtualRowCount","ceil","_didFocus","_debounce","_render","listen","detached","unlisten","_setOverflow","scrollTarget","webkitOverflowScrolling","overflowY","styles","window","getComputedStyle","parseInt","_isRTL","direction","_scrollTargetHeight","_updateGridMetrics","_scrollHandler","scrollTop","_scrollTop","delta","isScrollingDown","abs","idxAdjustment","round","floor","_update","reusables","_getReusables","physicalTop","indexes","_increasePoolIfNeeded","fromTop","ith","offsetContent","physicalItemHeight","idxs","protectedOffsetContent","virtualStart","virtualEnd","physicalCount","top","bottom","scrollBottom","itemSet","movingUp","_manageFocus","_assignModels","_updateMetrics","pop","_positionItems","_updateScrollerSize","_createPool","size","inst","physicalItems","stamp","root","_isClientFull","count","nextPhysicalCount","correction","nextIncrease","ts","performance","now","apply","_isIndexRendered","_getPhysicalIndex","isAttached","ctor","queryEffectiveChildren","console","warn","tabIndex","mutableData","_gridChanged","newGrid","oldGrid","change","_physicalIndexForKey","_resetScrollPosition","_removeFocusedItem","_adjustVirtualIndex","indexSplices","activeElement","_getActiveElement","contains","affectedIndexRendered","some","splice","addedCount","_forwardItemPath","isIndexRendered","dot","offscreenInstance","modelForElement","substring","__key__","_setPendingPropertyOrPath","_flushProperties","splices","removed","_removeItem","selector","deselect","fn","rtn","arguments","_computeVidx","el","getKey","_forwardProperty","isSelected","newPhysicalSize","oldPhysicalSize","prevAvgCount","prevPhysicalAvg","getBoundingClientRect","width","_adjustScrollPosition","y","totalItemWidth","rowOffset","modulus","x","translate3d","_shouldRenderNextRow","deltaHeight","forceUpdate","height","scrollToItem","scrollToIndex","currentTopItem","currentVirtualItem","targetOffsetTop","hiddenContentSize","_resetAverage","_resizeHandler","selectItem","selectIndex","clearSelection","model","updateSizeForIndex","select","deselectItem","deselectIndex","toggleSelectionForItem","toggleSelectionForIndex","isIndexSelected","_selectionEnabledChanged","_selectionHandler","modelTabIndex","activeElTabIndex","activeEl","physicalItem","localName","_multiSelectionChanged","multi","updateSizeForItem","fidx","_restoreFocusedItem","_createFocusBackfillItem","_isIndexVisible","focusItem","_focusPhysicalItem","focusable","removeChild","fpidx","onScreenItem","onScreenInstance","offScreenInstance","targetModel","focusedModel","hasOffscreenFocusedItem","_keydownHandler","keyCode","v","cb","asyncModule","_debouncers","debounce","_setPendingProperty","_forwardHostPropV2","concat","_notifyInstancePropV2","_getStampedChildren","_forwardInstancePath","_forwardParentPath","_forwardParentProp","itemsHost","node","domHost","vaadin_combo_box_item_ComboBoxItemElement","connectedCallback","comboBox","getRootNode","host","__dataHost","_updateLabel","_updateTemplateInstanceVariable","variable","vaadin_combo_box_dropdown_ComboBoxOverlayElement","vaadin_overlay","vaadin_combo_box_dropdown_ComboBoxDropdownElement","legacy_class","createEvent","positionTarget","alignedAbove","_boundSetPosition","_setPosition","_boundOutsideClickListener","_outsideClickListener","requestAnimationFrame","position","_isPositionFixed","element","offsetParent","_getOffsetParent","assignedSlot","parentElement","parent","nodeType","_verticalOffset","overlayRect","targetRect","_shouldAlignAbove","innerHeight","body","_translateX","left","_translateY","_devicePixelRatio","devicePixelRatio","transform","clientWidth","justifyContent","vaadin_combo_box_dropdown_wrapper_ComboBoxDropdownWrapperElement","computed","_itemLabelPath","_itemValuePath","_fireTouchAction","sourceEvent","_scroller","_templateChanged","_selectorChanged","_patchWheelOverScrolling","_setOverlayHeight","maxHeight","ShadyCSS","getComputedStyleValue","getPropertyValue","_maxOverlayHeight","scrollHeight","_getFocusedItem","focusedIndex","_isItemSelected","_onItemClick","_isItemFocused","itemIndex","_getAriaSelected","_getAriaRole","_focusedIndexChanged","_scrollIntoView","visibleItemsCount","_visibleItemsCount","targetIndex","physicalItemRect","scrollerRect","scrollTopAdjust","_viewportTotalPaddingBottom","scroller","scrolledToTop","scrolledToBottom","clientHeight","deltaY","_cachedViewportTotalPaddingBottom","itemsStyle","paddingBottom","borderBottomWidth","map","reduce","sum","flushDebouncer","_selectItem","_hidden","itemsChange","vaadin_combo_box_light_ComboBoxLightElement","attrForValue","Element","readOnly","_setInputElement","_propertyForValue","case_map","dashToCamelCase"],"mappings":";4HAAAA,EAAAC,EAAA,GA8CAC,OAAAC,EAAAC,EAAAF,EACEG,UAAWL,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAmCXM,GAAI,qBAAAC,IAAA,SAAAC,EAAAC,EAAAR,GAAA,aAAAA,EAAA,OAAAS,EAAAT,EAAA,IAAAU,GAAAV,EAAA,IAAAA,EAAA,KAAAW,EAAAX,EAAA,GAAAY,EAAAZ,EAAA,GAAAa,EAAAb,EAAA,GCtCNC,OAAAU,EAAAR,EAAAF,EACEG,UAAWQ,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAmEXP,GAAI,yBACJS,WAAYJ,EAAAP,EAAyBM,EAAAN,GAErCY,YAKEC,OAAQC,SAAU,gBAAiBC,KAAMC,OAAQC,WAOjDC,WAAYJ,SAAU,oBAAqBC,KAAMC,OAAQC,WASzDE,MAAOJ,KAAMK,OAAQP,MAAO,EAAGC,SAAU,iBAUzCO,SAAUN,KAAMK,OAAQP,MAAO,EAAGC,SAAU,iBAK5CQ,cAAeP,KAAMC,OAAQH,MAAO,OAKpCU,WAAYR,KAAMS,QAASX,UAK3BY,WAAYV,KAAMC,QAKlBU,aAAcX,KAAMC,QAKpBW,UAAWZ,KAAMC,QAKjBY,UAAWb,KAAMS,SAKjBK,WAAYd,KAAMK,QAKlBU,WAAYf,KAAMK,QAKlBW,OAAQhB,KAAMC,SAIhBgB,WAAYC,MAAS,YAMrBC,eACE,OAAOC,KAAKC,EAAEF,UAOhBG,qBACE,OAAOF,KAAKC,EAAEF,SAASG,gBAOzBC,mBACE,OAAOH,KAAKC,EAAEF,SAASI,cAMzBD,mBAAmBxB,GACjBsB,KAAKC,EAAEF,SAASG,eAAiBxB,GAMnCyB,iBAAiBzB,GACfsB,KAAKC,EAAEF,SAASI,aAAezB,GAGjC0B,SAAU,WAMKC,UAAUC,UAAUC,MAAM,sBAErCP,KAAKC,EAAEF,SAASS,MAAMC,WAAa,SAUvCC,SAAU,WAER,IAAIC,EAAQX,KAAKC,EAAEF,SAASa,SAASD,MAcrC,OAXIA,IAEEX,KAAKP,UAA2B,KAAfO,KAAKtB,MACxBiC,KACSX,KAAKa,iBACdF,EAAQvC,EAAAP,EAAwB6C,SAASI,KAAKd,KAAMA,KAAKtB,SAI7DsB,KAAKe,SAAWJ,EAChBX,KAAKgB,KAAK,uBACHL,GAGTM,kBAAmB,SAASlC,GAC1BiB,KAAKtB,MAAQK,GAGfmC,cAAe,SAASxC,GACtB,IAAIqB,EAAWC,KAAKD,SACfA,IAQDA,EAASrB,QAAUA,IACrBqB,EAASrB,MAAUA,GAAmB,IAAVA,EAAoBA,EAAL,IAG7CsB,KAAKjB,UAAYL,EACjBsB,KAAKC,EAAEkB,OAAOC,UAAYpB,KAAKqB,kBAI/BrB,KAAKgB,KAAK,sBAAuBtC,MAAOsB,KAAKjB,cAG/CuC,SAAU,SAASC,GACjB,IAAIC,EAAY7D,OAAAY,EAAAkD,EAAA9D,CAAI4D,GAAOG,KAC3B1B,KAAKtB,MAAQ8C,EAAYA,EAAU,GAAG9C,MAAQ6C,EAAMI,OAAOjD,OAG7DkD,WAAY,SAASC,GACnB,IAAIC,EASJ,IARAD,EAASA,IAAW,IAIlBC,EADE9B,KAAKd,QAAU,GAAK2C,EAAOE,OAAS/B,KAAKd,QACjC2C,EAAOG,MAAM,EAAGhC,KAAKd,SAErB2C,EAAOG,MAAM,GAElBhC,KAAKhB,KAAO,GAAK8C,EAAQC,OAAS/B,KAAKhB,MAC5C8C,EAAQG,KAAK,IAGf,OAAOH,EAAQI,KAAK,SAAW,UAGjCb,gBAAiB,WACf,IAAIvB,EAAQE,KAAKD,SACjB,GAAKD,EAUL,OAPAE,KAAK6B,OAAU/B,GAASA,EAAMpB,MAASoB,EAAMpB,MAAMyD,QAAQ,MAAO,SACtBA,QAAQ,MAAO,UACfA,QAAQ,MAAO,SACfA,QAAQ,MAAO,QACfA,QAAQ,MAAO,QACfC,MAAM,OACV,IACjCpC,KAAK4B,WAAW5B,KAAK6B,SAG9BQ,cAAe,WACbrC,KAAKC,EAAEkB,OAAOC,UAAYpB,KAAK4B,WAAW5B,KAAK6B,oDCxSnDlE,OAAAU,EAAAR,EAAAF,EACEG,UAAWQ,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAgCXP,GAAI,iBAEJS,WACE8D,EAAAzE,EACA0E,EAAA1E,GAGFY,YACE+D,iBACE7D,SAAU,yBACVC,KAAMC,QAGR4D,kBACE9D,SAAU,0BACVC,KAAMC,QAURG,MACEJ,KAAMK,OACNP,MAAO,GAWTQ,SACEN,KAAMK,OACNP,MAAO,IAOXwB,qBACE,OAAOF,KAAKC,EAAEH,MAAMC,SAASG,gBAG/BA,mBAAmBwC,GACjB1C,KAAKC,EAAEH,MAAMC,SAASG,eAAiBwC,GAMzCvC,mBACE,OAAOH,KAAKC,EAAEH,MAAMC,SAASI,cAG/BA,iBAAiBwC,GACf3C,KAAKC,EAAEH,MAAMC,SAASI,aAAewC,GAGvCC,uBAAwB,SAASC,GAC/B7C,KAAK8C,kBAAkBC,aAAa,kBAAmBF,IAGzDG,wBAAyB,SAASC,GAChCjD,KAAK8C,kBAAkBC,aAAa,mBAAoBE,IAG1DH,wBACE,OAAO9C,KAAKkD,aAAanD,2FCpJ7BoD,EAAAzF,EAAA,GAqDAC,OAAAyF,EAAAvF,EAAAF,EACEG,UAAWqF,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;EA2BXpF,GAAI,kBACJS,WAAY6E,EAAAxF,MAAAyF,IAAA,SAAArF,EAAAC,EAAAR,GAAA,aAAAA,EAAA,KAAAA,EAAA,KAAAA,EAAA,KCjFd,MAAM6F,EAAsBC,SAASC,cAAc,YACnDF,EAAoBR,aAAa,QAAS,kBAE1CQ,EAAoBnC,UAAa,gNAQjCoC,SAASE,KAAKC,YAAYJ,EAAoBK,6BCR9C,MAAMC,EAAsBL,SAASC,cAAc,OACnDI,EAAoBd,aAAa,QAAS,kBAE1Cc,EAAoBzC,UAAa,kzBA0BjCoC,SAASE,KAAKC,YAAYE,+BC5B1B,MAAMC,EAAsBN,SAASC,cAAc,YACnDK,EAAoBf,aAAa,QAAS,kBAE1Ce,EAAoB1C,UAAa,kzDAkEjCoC,SAASE,KAAKC,YAAYG,EAAoBF,6BC/DvC,MAAMG,EAAYC,kBAA4CA,EACnEvF,wBACE,OAOEwF,qBACEvF,UAMFwF,UACEtF,KAAMS,QACNX,SACAC,SAAU,mBACVwF,uBAMFC,UACExF,KAAMS,QACNX,SACAyF,sBACAxF,SAAU,oBAGZ0F,OAAQxF,QAIZyF,cACEC,QAMAvE,KAAKtB,MAGPA,YACE,gBAAOsB,KAAKqE,OAAuBrE,KAAKqE,OAASrE,KAAKwE,YAAYC,OAGpE/F,UAAUA,GACRsB,KAAKqE,OAAS3F,EAGhBgG,QACEH,MAAMG,QAEN,MAAMC,EAAY3E,KAAK4E,aAAa,SAClB,OAAdD,IACF3E,KAAKtB,MAAQiG,GAGf3E,KAAK6E,iBAAiB,QAASC,GAAK9E,KAAK+E,iBAAY,GACrD/E,KAAK6E,iBAAiB,OAAQC,GAAK9E,KAAK+E,iBAAY,GACpD/E,KAAK6E,iBAAiB,YAAaC,IACjC9E,KAAKgF,WAAWhF,KAAKiF,eACrB,MAAMC,EAAkB,KACtBlF,KAAKgF,WAAWhF,KAAKiF,eACrBzB,SAAS2B,oBAAoB,UAAWD,IAE1C1B,SAASqB,iBAAiB,UAAWK,KAEvClF,KAAK6E,iBAAiB,UAAWC,GAAK9E,KAAKoF,WAAWN,IACtD9E,KAAK6E,iBAAiB,QAASC,GAAK9E,KAAKqF,SAASP,IAMpDQ,uBACEf,MAAMe,uBAKFtF,KAAKuF,aAAa,WACpBvF,KAAK+E,gBAITS,iBAAiBpB,GACfpE,KAAK+C,aAAa,gBAAiBqB,GAGrCqB,iBAAiBvB,GACXA,GACFlE,KAAKoE,YACLpE,KAAK+C,aAAa,gBAAiB,QACnC/C,KAAK0F,QAEL1F,KAAK2F,gBAAgB,iBAIzBZ,YAAYa,GACNA,GACF5F,KAAK+C,aAAa,UAAW,IACxB/C,KAAKiF,YACRjF,KAAK+C,aAAa,aAAc,MAGlC/C,KAAK2F,gBAAgB,WACrB3F,KAAK2F,gBAAgB,cACrB3F,KAAKgF,gBAITA,WAAWa,GACLA,EACF7F,KAAK+C,aAAa,SAAU,IAE5B/C,KAAK2F,gBAAgB,UAIzBP,WAAW7D,GACL,uBAAuBuE,KAAKvE,EAAMwE,OACpCxE,EAAMyE,iBACNhG,KAAKgF,gBAITK,SAAS9D,GACHvB,KAAKuF,aAAa,YACpBvF,KAAKgF,eACLhF,KAAKiG,6BClGLC,UAAoBnC,EAAUpG,OAAAwI,EAAAtI,EAAAF,CAAcyI,EAAAvI,KAChDwI,sBACE,OAAO/H,EAAA;;;;;;;;;;;;;EAgBTP,gBACE,MAAO,cAGTuI,qBACE,MAAO,eAIXC,eAAeC,OAAON,EAAYnI,GAAImI,GCxEtC,MAAMO,EAAsBjD,SAASC,cAAc,OACnDgD,EAAoB1D,aAAa,QAAS,kBAE1C0D,EAAoBrF,UAAa,yuCA0CjCoC,SAASE,KAAKC,YAAY8C,6CC1CnB,MAAMC,EAAgBC,kBAAqDA,EAEhFlI,wBACE,OAIEmI,QACEhI,KAAMS,QACNP,UACAJ,SACAyF,sBACAxF,SAAU,kBAMZuF,UACEtF,KAAMS,QACNX,SACAyF,uBAMF3E,UACEZ,KAAMS,QACNX,SACAyF,uBAOF0C,OACEjI,KAAMkI,OASRC,kBACEnI,KAAMS,QACNX,UAQFsI,eACEpI,KAAMkI,OAYRpI,OACEE,KAAMC,OACNF,SAAU,gBACVG,UACAJ,MAAO,IAMTuI,oBAAqBpI,OAKrBqI,SACEtI,KAAMS,QACNX,SACAyF,uBAGFgD,eACEvI,KAAMK,OACNP,OAAQ,GAMV0I,QACExI,KAAMC,OACNH,MAAO,GACPI,WAMFuI,cACEzI,KAAMjB,OACNmB,WAcFwI,eACE1I,KAAMC,OACNH,MAAO,SAWT6I,eACE3I,KAAMC,OACNH,MAAO,SAMT8I,MACE5I,KAAMC,QAMRkC,SACEnC,KAAMS,QACN8E,sBACArF,UACAJ,UAGF+I,eAAgB9J,OAChB+J,cAAe/J,OAEfgK,mBAAoB9I,OAEpB+I,wBAAyBvI,QAEzBwI,+BAAgChJ,QAIpCiJ,uBACE,OACE,uDACA,uDACA,uEACA,2BACA,qCACA,yCAIJpD,QACEH,MAAMG,QAEN1E,KAAK6E,iBAAiB,WAAYC,IAC3B9E,KAAK4H,yBACR5H,KAAK+H,UAIT/H,KAAKiH,oBAAsBjH,KAAKtB,MAChCsJ,EAAAnK,EAAkBoK,sBAGlBjI,KAAKC,EAAEiI,QAAQrD,iBAAiB,oBAAqB7E,KAAKmI,4BAA4BC,KAAKpI,OAE3FA,KAAK6E,iBAAiB,mCAAoC7E,KAAKqI,UAAUD,KAAKpI,OAC9EA,KAAK6E,iBAAiB,mCAAoC7E,KAAKsI,UAAUF,KAAKpI,OAC9EA,KAAK6E,iBAAiB,UAAW7E,KAAKuI,WAAWH,KAAKpI,OACtDA,KAAK6E,iBAAiB,QAAS7E,KAAKwI,SAASJ,KAAKpI,OAElDA,KAAKC,EAAEiI,QAAQrD,iBAAiB,8BAA+B7E,KAAKyI,sBAAsBL,KAAKpI,OAE/FA,KAAK6E,iBAAiB,WAAYC,IAC3B9E,KAAK0H,eAAiB5C,EAAE4D,eAAe,KAAO1I,KAAK0H,gBAIxD5C,EAAEkB,iBACFhG,KAAK2I,YAOTC,OAEO5I,KAAKkE,UAAalE,KAAKR,WAC1BQ,KAAK4G,WAOTmB,QACE/H,KAAK4G,UAGPiC,eAAenK,EAAOoK,YAEhBA,IAIA9I,KAAK4G,QACP5G,KAAK+I,qBAAuB/I,KAAKuF,aAAa,eAAkBvF,KAAKgJ,cAAgBhJ,KAAKgJ,aAAazD,aAAa,cAG/GvF,KAAKC,EAAEiI,QAAQe,aAEbjJ,KAAK4F,SACR5F,KAAKkJ,SAGAlJ,KAAK+I,sBAAwB/I,KAAKuF,aAAa,YACxDvF,KAAKgJ,aAAajG,aAAa,aAAc,KAIjD0F,sBAAsBlH,GAGpBvB,KAAK4H,2BACL5H,KAAKkD,aAAawC,OAClB1F,KAAK4H,2BAGPY,SAAS1D,GACP9E,KAAK4H,2BAEL,MAAMlG,EAAOoD,EAAE4D,gBAC2B,IAAtChH,EAAKyH,QAAQnJ,KAAK0H,gBACpB1H,KAAK2I,SACL3I,KAAKkJ,UACyC,IAArCxH,EAAKyH,QAAQnJ,KAAKkD,gBACvBxB,EAAKyH,QAAQnJ,KAAKyH,iBAAmB,GAAKzH,KAAK4G,OACjD5G,KAAK+H,QAEL/H,KAAK4I,QAIT5I,KAAK4H,2BAOPW,WAAWzD,GACL9E,KAAKoJ,YAAYtE,EAAG,SACtB9E,KAAK4H,2BACL5H,KAAKqJ,eACLrJ,KAAK4H,2BAGL9C,EAAEkB,kBACOhG,KAAKoJ,YAAYtE,EAAG,OAC7B9E,KAAK4H,2BACL5H,KAAKsJ,aACLtJ,KAAK4H,2BAGL9C,EAAEkB,kBACOhG,KAAKoJ,YAAYtE,EAAG,SAC7B9E,KAAKuJ,SAASzE,GACL9E,KAAKoJ,YAAYtE,EAAG,QAC7B9E,KAAKwJ,UAAU1E,GAInBsE,YAAYtE,EAAG2E,GACb,OAAOC,EAAA7L,EAAqB8L,yBAAyB7E,EAAG2E,GAG1DG,cAAcC,GACZ,OAAO7J,KAAKC,EAAEiI,QAAQ4B,aAAaD,GAGrCE,cAAcF,GACZ,IAAInL,EAAQmL,EAAO7J,KAAKgK,IAAIhK,KAAKuH,cAAesC,UAIhD,gBAHInL,IACFA,EAAQmL,EAAOA,EAAKI,WAAa,IAE5BvL,EAGT2K,eACMrJ,KAAK4G,OACH5G,KAAKC,EAAEiI,QAAQgC,SACjBlK,KAAKmH,cAAgBgD,KAAKC,IAAIpK,KAAKC,EAAEiI,QAAQgC,OAAOnI,OAAS,EAAG/B,KAAKmH,cAAgB,GACrFnH,KAAKqK,4BAGPrK,KAAK4I,OAITU,aACMtJ,KAAK4G,QACH5G,KAAKmH,eAAiB,EACxBnH,KAAKmH,cAAgBgD,KAAKG,IAAI,EAAGtK,KAAKmH,cAAgB,GAElDnH,KAAKC,EAAEiI,QAAQgC,SACjBlK,KAAKmH,cAAgBnH,KAAKC,EAAEiI,QAAQgC,OAAOnI,OAAS,GAIxD/B,KAAKqK,4BAELrK,KAAK4I,OAITyB,2BACMrK,KAAKmH,eAAiB,IAGxBnH,KAAK2H,mBAAqB,GAE1B4C,WAAW,KACTvK,KAAK2H,mBAAqB3H,KAAK4J,cAAc5J,KAAKC,EAAEiI,QAAQsC,cAC5DxK,KAAKyK,0BACJ,IAIPC,mBAAmBhI,EAAOC,GAExB,MAAM7C,EAAQE,KAAK2K,cAAgB3K,KAAKkD,aAOxC,GAAIlD,KAAKuF,aAAa,YAAczF,GAASA,EAAM8K,kBACjD,IACE9K,EAAM8K,kBAAkBlI,EAAOC,GAC/B,MAAOkI,KAMbJ,kCACMzK,KAAK2H,oBACP3H,KAAK0K,mBAAmB,EAAG1K,KAAK2H,mBAAmB5F,QAIvD+I,uBACE,YAAI9K,KAAK2H,mBAAkC,CACzC,MAAMoD,EAAM/K,KAAK2H,mBAAqB3H,KAAK2H,mBAAmB5F,OAAS,EACvE/B,KAAK0K,mBAAmBK,EAAKA,IAIjCxB,SAASzE,GAGH9E,KAAK4G,SAAW5G,KAAK+G,kBAAgD,KAA5B/G,KAAK2H,oBAA6B3H,KAAKmH,eAAiB,KACnGnH,KAAK+H,QAGLjD,EAAEkB,kBAINwD,UAAU1E,GACJ9E,KAAK4G,SACP5G,KAAKgL,iBAAiBlG,GAElB9E,KAAKmH,eAAiB,GACxBnH,KAAKmH,eAAiB,EACtBnH,KAAKiL,qBAELjL,KAAKkL,UAKXC,sBAAsBC,GAChBA,GAEFA,EAAcvG,iBAAiB,YAAaC,GAAKA,EAAEkB,kBAOvD2C,SACE3I,KAAKqH,aAAe,KAEhBrH,KAAK+G,mBACP/G,KAAKtB,MAAQ,IAGVsB,KAAK4G,QACR5G,KAAKqL,2BAOTH,SACElL,KAAKsL,2BAELtL,KAAKiH,oBAAsBjH,KAAKtB,MAChCsB,KAAK+H,QAGPO,YAIEiD,EAAA9J,GAAS9D,OAAA4N,EAAA9J,EAAA9D,GAKTqC,KAAKC,EAAEiI,QAAQsD,sBACfxL,KAAKC,EAAEiI,QAAQuD,UAAUC,yBAGzB1L,KAAKC,EAAEiI,QAAQyD,2BACfC,EAAAC,UAAUC,IAAI,IAAM9L,KAAKC,EAAEiI,QAAQ6D,wBACnCxB,WAAW,IAAMvK,KAAKC,EAAEiI,QAAQjI,EAAE+L,SAASC,eAAgB,GAI3DjM,KAAKiH,oBAAsBjH,KAAKtB,MAGlC2J,YAOE,GAJIrI,KAAK4G,QACP5G,KAAK+H,QAGH/H,KAAKC,EAAEiI,QAAQgC,QAAUlK,KAAKmH,eAAiB,EAAG,CACpD,MAAM+E,EAAclM,KAAKC,EAAEiI,QAAQgC,OAAOlK,KAAKmH,eAC3CnH,KAAKqH,eAAiB6E,IACxBlM,KAAKqH,aAAe6E,GAGtBlM,KAAK2H,mBAAqB3H,KAAK4J,cAAc5J,KAAKqH,mBAC7C,GAAgC,KAA5BrH,KAAK2H,6BAA6B3H,KAAK2H,mBAChD3H,KAAKqH,aAAe,KAEhBrH,KAAK+G,mBACP/G,KAAKtB,MAAQ,SAGf,GAAIsB,KAAK+G,iBAAkB,CACzB,MAAMjC,EAAI,IAAIqH,YAAY,oBAAqBC,OAAQpM,KAAK2H,mBAAoB0E,YAAgBC,cAAkBC,aAElH,GADAvM,KAAKwM,cAAc1H,IACdA,EAAE2H,iBAAkB,CACvB,MAAMC,EAAc1M,KAAK2H,mBACzB3H,KAAKqH,aAAe,KACpBrH,KAAKtB,MAAQgO,QAGf1M,KAAK2H,mBAAqB3H,KAAK4J,cAAc5J,KAAKqH,cAItDrH,KAAKqL,2BAELrL,KAAK8K,uBAEL9K,KAAKoH,OAAS,GAMhBuF,mBAAmB7H,IAEoC,IAAjDA,EAAE4D,eAAeS,QAAQnJ,KAAKkD,gBAChClD,KAAK2H,mBAAqB3H,KAAKkD,aAAaxE,MAC5CsB,KAAK4M,oBAITA,iBAAiB9H,GACV9E,KAAK4G,QACR5G,KAAK4I,OAGH5I,KAAKoH,SAAWpH,KAAK2H,mBAIvB3H,KAAK6M,eAAe7M,KAAKoH,OAAQpH,KAAKuH,cAAevH,KAAKsH,eAE1DtH,KAAKoH,OAASpH,KAAK2H,mBAIvBkF,eAAezF,EAAQG,EAAeD,YAChCF,YAAwBG,YAA+BD,IAGvDtH,KAAK6G,MACP7G,KAAKgH,cAAgBhH,KAAK8M,aAAa9M,KAAK6G,MAAOO,GAKnDpH,KAAK+M,uBAAuBrL,KAAM,gBAAiBhD,MAAOsB,KAAKgH,eAAgBO,EAAeD,IAIlG0F,gBAAgB9F,GACVA,IACFlH,KAAKmH,eAAiB,GAI1B8D,oBACsB,KAAhBjL,KAAKoH,OACPpH,KAAK2H,mBAAqB3H,KAAKoH,OAE/BpH,KAAKsL,2BAEPtL,KAAK8K,uBAGPQ,2BACMtL,KAAK+G,mBAAqB/G,KAAKqH,aACjCrH,KAAK2H,mBAAqB3H,KAAKtB,MAE/BsB,KAAK2H,mBAAqB3H,KAAK4J,cAAc5J,KAAKqH,cAItD4F,gBAAgBC,GACVA,EACFlN,KAAK+C,aAAa,YAAa,IAE/B/C,KAAK2F,gBAAgB,aAIzBwH,qBAAqB9F,GACnB,GAAqB,OAAjBA,YAAyBA,EACvBrH,KAAKgH,gBACFhH,KAAK+G,mBACR/G,KAAKtB,MAAQ,IAGfsB,KAAKiN,gBAA+B,KAAfjN,KAAKtB,OAC1BsB,KAAK2H,mBAAqB3H,KAAKtB,WAE5B,CACL,MAAMA,EAAQsB,KAAK+J,cAAc1C,GAC7BrH,KAAKtB,QAAUA,IACjBsB,KAAKtB,MAAQA,GAGfsB,KAAKiN,oBACLjN,KAAK2H,mBAAqB3H,KAAK4J,cAAcvC,GAGzCrH,KAAKkD,eACPlD,KAAKkD,aAAaxE,MAAQsB,KAAK2H,oBAInC3H,KAAKC,EAAEiI,QAAQkF,cAAgB/F,EAC3BrH,KAAKgH,eAAiBhH,KAAKC,EAAEiI,QAAQgC,SACvClK,KAAKmH,cAAgBnH,KAAKgH,cAAcmC,QAAQ9B,IAIpDnG,cAAcxC,EAAO2O,GACnB,GAAc,KAAV3O,YAAgB2O,EAApB,CAIA,GAAIrN,KAAKsN,cAAc5O,GAAQ,CAC7B,IAAImL,EACJ,GAAI7J,KAAK+J,cAAc/J,KAAKqH,gBAAkB3I,EAAO,CACnD,MAAM6O,EAAavN,KAAKwN,cAAc9O,EAAOsB,KAAKgH,eAClDhH,KAAKqH,aAAekG,GAAc,EAAIvN,KAAKgH,cAAcuG,GAAc,UAEvE1D,EAAO7J,KAAKqH,cAGTwC,GAAQ7J,KAAK+G,mBAChB/G,KAAK2H,mBAAqBjJ,GAG5BsB,KAAKiN,gBAA+B,KAAfjN,KAAKtB,YAE1BsB,KAAKqH,aAAe,KAGtBrH,KAAKiH,4BAGPoE,2BACMrL,KAAKtB,QAAUsB,KAAKiH,sBACtBjH,KAAKwM,cAAc,IAAIL,YAAY,UAAWI,cAC9CvM,KAAKiH,oBAAsBjH,KAAKtB,OAIpC+O,cAAc3I,EAAGyC,EAAeD,GAC9B,YAAIxC,EAAEpG,gBAAuB6I,YAA+BD,IAG7C,UAAXxC,EAAEpD,MAA+B,kBAAXoD,EAAEpD,MAA0B,CACpD1B,KAAKgH,cAAgBhH,KAAK6G,MAAQ7G,KAAK6G,MAAM7E,MAAM,GAAKhC,KAAK6G,MAE7D,MAAM0G,EAAavN,KAAKwN,cAAcxN,KAAKtB,MAAOsB,KAAK6G,OACvD7G,KAAKmH,cAAgBoG,EAErB,MAAM1D,EAAO0D,GAAc,GAAKvN,KAAK6G,MAAM0G,GACvC1D,IACF7J,KAAKqH,aAAewC,IAK1BkD,sBAAsBjI,EAAGyC,EAAeD,YAClCxC,EAAEpG,gBAAuB6I,YAA+BD,IAG7C,kBAAXxC,EAAEpD,MAAuC,0BAAXoD,EAAEpD,OAClC1B,KAAK0N,iBAAiB1N,KAAKgH,eAE3BhH,KAAKmH,cAAgBnH,KAAK4G,OACxB5G,KAAKC,EAAEiI,QAAQyF,aAAa3N,KAAKoH,QACjCpH,KAAKwN,cAAcxN,KAAKtB,MAAOsB,KAAKgH,eAItCuD,WAAW,KACTvK,KAAKC,EAAEiI,QAAQjI,EAAE+L,SAASC,gBACzB,KAIPa,aAAac,EAAKxG,GAChB,OAAKwG,EAIEA,EAAIxG,OAAOyC,IAChBzC,EAASA,EAASA,EAAO6C,WAAW4D,cAAgB,GAE7C7N,KAAK4J,cAAcC,GAAMI,WAAW4D,cAAc1E,QAAQ/B,IAAW,IANrEwG,EAUXF,iBAAiB7G,GACf7G,KAAKC,EAAEiI,QAAQ4F,IAAI,SAAUjH,GAE7B7G,KAAKC,EAAEiI,QAAQjI,EAAE+L,SAASC,eAG5BuB,cAAc9O,EAAOmI,GACnB,GAAIA,GAAS7G,KAAKsN,cAAc5O,GAC9B,IAAK,IAAIqP,EAAI,EAAGA,EAAIlH,EAAM9E,OAAQgM,IAChC,GAAI/N,KAAK+J,cAAclD,EAAMkH,MAAQrP,EACnC,OAAOqP,EAKb,OAAQ,EAQVT,cAAc5O,GACZ,gBAAOA,GAAiC,OAAVA,EAGhCyJ,4BAA4BrD,GACtB9E,KAAKqH,eAAiBvC,EAAEsH,OAAOvC,OACjC7J,KAAKqH,aAAevC,EAAEsH,OAAOvC,MAG3B7J,KAAK4G,QACP5G,KAAK+H,QAIPjD,EAAEkJ,kBASJtN,WACE,QAASV,KAAKe,SAAWf,KAAKiO,iBAQhCA,gBACE,GAAIjO,KAAKkD,aAAaxC,SACpB,OAAOV,KAAKkD,aAAaxC,WAI7BwN,qBACE,OACErE,QACAsE,SACA/J,YACAwB,YAIJwI,qBACE,IAAKpO,KAAKqO,eAAgB,CACxB,MAAMC,EAAMtO,KAAKuO,cAAc,YAC3BD,IACFtO,KAAKqO,eAAiB1Q,OAAA6Q,EAAAC,EAAA9Q,CAAW2Q,EAAKtO,MACpC0O,cAAe1O,KAAKkO,eACpBS,gBAAiB,SAASC,EAAMlQ,GAC9B,MAAMmI,EAAQ7G,KAAKC,EAAEiI,QAAQuD,UAAUoD,iBAAiB,yBACxD/H,MAAMgI,UAAUC,QAAQjO,KAAK+F,EAAOgD,IAC9BA,EAAKmF,wBACPnF,EAAKmF,sBAAsBlB,IAAIc,EAAMlQ,GACrCmL,EAAKmF,sBAAsBC,WAAWL,EAAMlQ,cAS1DwQ,oBACMlP,KAAKyH,gBACPzH,KAAKyH,eAAe5C,iBAAiB,QAAS7E,KAAKmP,iBAEjDnP,KAAK0H,eACP1H,KAAK0H,cAAc7C,iBAAiB,QAAS7E,KAAKmP,iBAItDC,oBACMpP,KAAKyH,gBACPzH,KAAKyH,eAAetC,oBAAoB,QAASnF,KAAKmP,iBAEpDnP,KAAK0H,eACP1H,KAAK0H,cAAcvC,oBAAoB,QAASnF,KAAKmP,iBAIzDA,gBAAgBrK,GACdA,EAAEkB,iBAGJgF,iBAAiBlG,GACfA,EAAEkJ,gGCvjBFqB,EAAMhP,UAAUC,UAAUC,MAAM,uCAChC+O,EAAsBD,GAAOA,EAAI,IAAM,EAMvCE,EAAiB,MAAThE,EAAA9J,EACR+N,EAAkBD,EAAQ3D,EAAA6D,eAAiB,EAC3CC,EAAYH,EAAQ3D,EAAA+D,WAAa,EACjCC,EAAaL,EAAQ3D,EAAAC,UAAY,EAGhCgE,EAAAhS,IAEHiS,QAAQC,gCAGVpS,OAAAU,EAAAR,EAAAF,EACEG,UAAWQ,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAqCXP,GAAI,YAEJU,YAMEoI,OACEjI,KAAMkI,OAORkJ,IACEpR,KAAMC,OACNH,MAAO,QAOTuR,SACErR,KAAMC,OACNH,MAAO,SAOTwR,YACEtR,KAAMC,OACNH,MAAO,YAeTyR,MACEvR,KAAMS,QACNX,SACAyF,sBACAxF,SAAU,gBAUZyR,kBACExR,KAAMS,QACNX,UAOF2I,cACEzI,KAAMjB,OACNmB,WAMFuR,eACEzR,KAAMjB,OACNmB,WAQFwR,gBACE1R,KAAMS,QACNX,UAYF6R,cACE3R,KAAMK,OACNP,MAAO,IAIXoJ,WACE,yBACA,6CACA,yCACA,4CAGFtJ,WACEgS,EAAA3S,EACA4S,EAAA5S,EACA6S,EAAA7S,EACAgS,EAAAhS,GAOF8S,OAAQ,GAKRC,oBAAqB,EAKrBC,gBAAiB,EAKjBC,cAAe,EAKfC,iBAAkB,EAKlBC,sBAAuB,EAMvBC,aAAc,EAKdC,cAAe,EAKfC,iBAAkB,EAKlBC,cAAe,EAKfC,gBAAiB,EAKjBC,eAAgB,EAMhBC,eAAgB,KAMhBC,eAAgB,KAOhBC,sBAAuB,KAMvBC,YAAa,KAObC,qBAAsB,KAKtBC,UAAW,EAKXpH,aAAc,KAKdqH,sBAAuB,EAKvBC,uBAAwB,EAMxBC,sBAAuB,KAMvBC,mBAAoB,KAKpBC,aAAc,EAKdC,WAAY,EAKZC,WAAY,EAKZC,cAAe,EAMfC,gBAKAC,sBACE,OAAOtS,KAAKiR,aAAejR,KAAK8Q,eAMlCyB,oBACE,OAAOvS,KAAK6Q,gBAAkB7Q,KAAKqR,iBAMrCmB,kBACE,OAAOxS,KAAKyS,cAAgBzS,KAAK0S,eAAiB,GAMpDC,yBAEE,OADW3S,KAAKmQ,KAAOnQ,KAAK4S,cAAgB5S,KAAKmS,WAAanS,KAAK8Q,eACrD9Q,KAAKqR,iBAMrBwB,mBACE,OAAOlV,OAAAY,EAAAkD,EAAA9D,CAAIA,OAAAY,EAAAkD,EAAA9D,CAAIqC,KAAK8S,eAAeC,aAMrCC,oBACE,OAAOhT,KAAKmR,iBAAmBnR,KAAKqR,gBAAkBrR,KAAKiT,eAM7DC,uBACE,IAAIC,EAAenT,KAAKoT,2BAA2BpT,KAAKkR,eACxD,OAAO/G,KAAKG,IAAI,EAAG6I,EAAenT,KAAK0S,iBAGzCD,kBAAkBY,GAChBA,EAAMrT,KAAKsT,OAAOD,EAAK,EAAGrT,KAAKkT,kBAC3BlT,KAAKmQ,OACPkD,GAAaA,EAAMrT,KAAKiS,cAE1BjS,KAAKuT,iBAAmBF,GAG1BZ,oBACE,OAAOzS,KAAKuT,kBAAoB,GAMlCC,mBAAmBH,IACjBA,GAAYrT,KAAK0S,gBACP,IACRW,EAAMrT,KAAK0S,eAAiBW,GAE1BrT,KAAKmQ,OACPkD,GAAaA,EAAMrT,KAAKiS,cAE1BjS,KAAKyT,kBAAoBJ,GAG3BG,qBACE,OAAOxT,KAAKyT,mBAAqB,GAMnCC,mBACE,OAAQ1T,KAAKwT,eAAiBxT,KAAK0S,eAAiB,GAAK1S,KAAK0S,gBAGhEA,mBAAmBW,GACjBrT,KAAK2T,kBAAoBN,GAG3BX,qBACE,OAAO1S,KAAK2T,mBAAqB,GAUnCC,uBACE,OAAgC,IAAzB5T,KAAKqR,gBAAwBwC,IAAW7T,KAAKqR,gBAAkBrR,KAAK4R,WAM7EkC,iBACE,OAAOzU,QAAQW,KAAK+T,aAAe/T,KAAKgU,eAQ1CC,wBACE,IAAIC,EAAMlU,KAAKyR,sBACf,GAAW,MAAPyC,EAAa,CACf,IAAIC,EAAiBnU,KAAKiR,aAAejR,KAAKiT,cAE9CiB,EAAMlU,KAAKoU,cAAc,SAASC,EAAMC,GAGtC,OAFAH,GAAkBnU,KAAKuU,0BAA0BF,IAE5BrU,KAAK6Q,gBACjB7Q,KAAKmQ,KAAOmE,EAAQA,EAAOtU,KAAKiS,aAAgBqC,EAGrDtU,KAAKmQ,MAAQnQ,KAAKkR,cAAgB,IAAMoD,EACnCA,EAAQA,EAAOtU,KAAKiS,uBAEzB,EACNjS,KAAKyR,sBAAwByC,EAE/B,OAAOA,GAQTM,uBACE,IAAIN,EAAMlU,KAAK2R,qBACf,GAAW,MAAPuC,EAAa,CACf,GAAIlU,KAAKmQ,KACP+D,EAAM/J,KAAKC,IAAIpK,KAAKkR,cAChBlR,KAAKiU,kBAAoBjU,KAAKyU,eAAiBzU,KAAKiS,aAAe,OAClE,CACL,IAAIkC,EAAiBnU,KAAKiR,aAAejR,KAAKiT,cAC9CjT,KAAKoU,cAAc,SAASC,EAAMC,GAC5BH,EAAiBnU,KAAKuS,gBACxB2B,EAAMI,GAERH,GAAkBnU,KAAKuU,0BAA0BF,KAGrDrU,KAAK2R,qBAAuBuC,EAE9B,OAAOA,GAGTQ,2BACE,OAAO1U,MAGT2U,uBACE,OAAOxK,KAAKyK,KAAK5U,KAAKkR,cAAgBlR,KAAKiS,eAG7CwC,qBACE,OAAOtK,KAAKyK,KAAK5U,KAAKqR,gBAAkBrR,KAAKmS,aAG/CS,oBACE,OAAOzI,KAAKyK,KAAK5U,KAAK0S,eAAiB1S,KAAKiS,eAG9CgB,oBACE,OAAOjT,KAAK4Q,oBAAsB5Q,KAAKuQ,cAGzC7L,MAAO,WACL1E,KAAK6E,iBAAiB,QAAS7E,KAAK6U,UAAUzM,KAAKpI,WAGrDI,SAAU,WACRJ,KAAK8U,UAAU,UAAW9U,KAAK+U,QAASvF,GAGxCxP,KAAKgV,OAAOhV,KAAM,cAAe,kBACjCA,KAAKgV,OAAOhV,KAAM,UAAW,oBAG/BiV,SAAU,WACRjV,KAAKkV,SAASlV,KAAM,cAAe,kBACnCA,KAAKkV,SAASlV,KAAM,UAAW,oBAMjCmV,aAAc,SAASC,GACrBpV,KAAKQ,MAAM6U,wBAA0BD,IAAiBpV,KAAO,QAAU,GACvEA,KAAKQ,MAAM8U,UAAYF,IAAiBpV,KAAO,OAAS,GAExDA,KAAK2R,qBAAuB,KAC5B3R,KAAKyR,sBAAwB,KAC7BzR,KAAK8U,UAAU,UAAW9U,KAAK+U,QAASvF,IAS1C7D,yBAA0B,WACxB,IAAI4J,EAASC,OAAOC,iBAAiBzV,MACrCA,KAAK4Q,oBAAsB5Q,KAAKoV,eAAiBpV,KAAO,EACpD0V,SAASH,EAAO,eAAgB,IACpCvV,KAAK2V,OAAStW,QAA6B,QAArBkW,EAAOK,WAC7B5V,KAAKsR,eAAiBtR,KAAKC,EAAE4G,MAAMkN,YACnC/T,KAAKqR,gBAAkBrR,KAAK6V,oBAC5B7V,KAAKmQ,MAAQnQ,KAAK8V,sBAMpBC,eAAgB,WACd,IAAIC,EAAY7L,KAAKG,IAAI,EAAGH,KAAKC,IAAIpK,KAAKgT,cAAehT,KAAKiW,aAC1DC,EAAQF,EAAYhW,KAAK6Q,gBACzBsF,EAAkBD,GAAS,EAO/B,GALAlW,KAAK6Q,gBAAkBmF,EAEvBhW,KAAKyR,sBAAwB,KAC7BzR,KAAK2R,qBAAuB,KAExBxH,KAAKiM,IAAIF,GAASlW,KAAK8Q,eAAiB9Q,KAAK8Q,cAAgB,EAAG,CAClEoF,GAAgBlW,KAAKiT,cACrB,IAAIoD,EAAgBlM,KAAKmM,MAAMJ,EAAQlW,KAAK+Q,kBAAoB/Q,KAAKiS,aACrEjS,KAAKyS,cAAgBzS,KAAKyS,cAAgB4D,EAC1CrW,KAAKwT,eAAiBxT,KAAKwT,eAAiB6C,EAE5CrW,KAAKiR,aAAe9G,KAAKoM,MAAMvW,KAAKyS,cAAgBzS,KAAKiS,cAAgBjS,KAAK+Q,iBAC9E/Q,KAAKwW,eACA,GAAIxW,KAAK0S,eAAiB,EAAG,CAClC,IAAI+D,EAAYzW,KAAK0W,cAAcP,GAC/BA,GACFnW,KAAKiR,aAAewF,EAAUE,YAC9B3W,KAAKyS,cAAgBzS,KAAKyS,cAAgBgE,EAAUG,QAAQ7U,OAC5D/B,KAAKwT,eAAiBxT,KAAKwT,eAAiBiD,EAAUG,QAAQ7U,SAE9D/B,KAAKyS,cAAgBzS,KAAKyS,cAAgBgE,EAAUG,QAAQ7U,OAC5D/B,KAAKwT,eAAiBxT,KAAKwT,eAAiBiD,EAAUG,QAAQ7U,QAEhE/B,KAAKwW,QAAQC,EAAUG,QAAST,EAAkB,KAAOM,EAAUG,SACnE5W,KAAK8U,UAAU,wBAAyB9U,KAAK6W,sBAAsBzO,KAAKpI,KAAM,GAAI4P,KAUtF8G,cAAe,SAASI,GACtB,IAAIC,EAAcC,EAAeC,EAC7BC,KACAC,EAAyBnX,KAAK2S,mBAAqB3S,KAAK2Q,OACxDyG,EAAepX,KAAKyS,cACpB4E,EAAarX,KAAKwS,YAClB8E,EAAgBtX,KAAK0S,eACrB6E,EAAMvX,KAAKiR,aAAejR,KAAKiT,cAC/BuE,EAASxX,KAAKsS,gBAAkBtS,KAAKiT,cACrC+C,EAAYhW,KAAKiW,WACjBwB,EAAezX,KAAKuS,cAWxB,IATIuE,GACFC,EAAM/W,KAAKwT,eACDxT,KAAK0T,aACfsD,EAAgBhB,EAAYuB,IAE5BR,EAAM/W,KAAK0T,aACD1T,KAAKwT,eACfwD,EAAgBQ,EAASC,GAIzBT,GADAC,EAAqBjX,KAAKuU,0BAA0BwC,KAEhDG,EAAKnV,QAAUuV,GAAiBN,GAAiBG,IAGrD,GAAIL,EAAS,CAEX,GAAIO,EAAaH,EAAKnV,OAAS,GAAK/B,KAAKkR,cACvC,MAGF,GAAIqG,EAAMN,GAAsBjB,EAAYhW,KAAKiT,cAC/C,MAEFiE,EAAKjV,KAAK8U,GACVQ,GAAYN,EACZF,GAAOA,EAAM,GAAKO,MACb,CAEL,GAAIF,EAAeF,EAAKnV,QAAU,EAChC,MAGF,GAAIwV,EAAMvX,KAAK8Q,cAAgBmG,GAAsBQ,EACnD,MAEFP,EAAKjV,KAAK8U,GACVQ,GAAYN,EACZF,EAAe,IAARA,EAAaO,EAAgB,EAAIP,EAAM,EAGlD,OAASH,QAASM,EAAMP,YAAaY,EAAMvX,KAAKiT,gBAQlDuD,QAAS,SAASkB,EAASC,GACzB,KAAKD,GAA8B,IAAnBA,EAAQ3V,QAAyC,IAAxB/B,KAAK0S,gBAA9C,CAOA,GAJA1S,KAAK4X,eACL5X,KAAK6X,cAAcH,GACnB1X,KAAK8X,eAAeJ,GAEhBC,EACF,KAAOA,EAAS5V,QAAQ,CACtB,IAAImS,EAAMyD,EAASI,MACnB/X,KAAKiR,cAAgBjR,KAAKuU,0BAA0BL,GAGxDlU,KAAKgY,iBACLhY,KAAKiY,wBAQPC,YAAa,SAASC,GAEpB,IAAIpK,EAAGqK,EADPpY,KAAKoO,qBAEL,IAAIiK,EAAgB,IAAIvR,MAAMqR,GAC9B,IAAKpK,EAAI,EAAGA,EAAIoK,EAAMpK,IACpBqK,EAAOpY,KAAKsY,MAAM,MAIlBD,EAActK,GAAKqK,EAAKG,KAAKhK,cAAc,KAC3CvO,KAAK6S,aAAalP,YAAYyU,EAAKG,MAErC,OAAOF,GAGTG,cAAe,WACb,OAA6B,GAAtBxY,KAAKuS,eAAsBvS,KAAKsS,gBAAgB,GAAKtS,KAAKuS,eAC7DvS,KAAKiR,cAAgBjR,KAAK6Q,iBAMhCgG,sBAAuB,SAAS4B,GAC9B,IAAIC,EAAoB1Y,KAAKsT,OAAOtT,KAAK0S,eAAiB+F,EAxsBjC,EAysBGzY,KAAKkR,cAAgBlR,KAAKyS,eAEtD,GADAiG,EAAoB1Y,KAAKoT,2BAA2BsF,GAChD1Y,KAAKmQ,KAAM,CACb,IAAIwI,EAAaD,EAAoB1Y,KAAKiS,aACtC0G,GAAcD,EAAoBC,GAAc3Y,KAAK0S,iBACvDgG,GAAqB1Y,KAAKiS,cAE5ByG,GAAqBC,EAEvB,IAAIzC,EAAQwC,EAAoB1Y,KAAK0S,eACjCkG,EAAezO,KAAKmM,MAA4B,GAAtBtW,KAAK0S,gBAEnC,KAAIwD,EAAQ,GAAZ,CAGA,GAAIA,EAAQ,EAAG,CACb,IAAI2C,EAAKrD,OAAOsD,YAAYC,SAEzB9W,KAAK+W,MAAMhZ,KAAKuR,eAAgBvR,KAAKkY,YAAYhC,IAEpD,IAAK,IAAInI,EAAI,EAAGA,EAAImI,EAAOnI,IACzB/N,KAAKwR,eAAevP,KAAK,GAE3BjC,KAAK0S,eAAiB1S,KAAK0S,eAAiBwD,EAIxClW,KAAKwT,eAAiBxT,KAAK0T,cAC3B1T,KAAKiZ,iBAAiBjZ,KAAK6R,uBAC3B7R,KAAKkZ,kBAAkBlZ,KAAK6R,sBAAwB7R,KAAK0T,eAC3D1T,KAAKwT,eAAiBxT,KAAKwT,eAAiB0C,GAE9ClW,KAAKwW,UACLxW,KAAKoS,eAAiBoD,OAAOsD,YAAYC,MAAQF,GAAM3C,EACvD0C,EAAezO,KAAKmM,MAA4B,GAAtBtW,KAAK0S,gBAI7B1S,KAAKwS,aAAexS,KAAKkR,cAAgB,GAAsB,IAAjB0H,IAEtC5Y,KAAKwY,gBAONxY,KAAK8Q,cAAgB9Q,KAAK4T,kBAEnC5T,KAAK8U,UACH,wBACA9U,KAAK6W,sBAAsBzO,KACzBpI,KACAA,KAAKsT,OAAOnJ,KAAKmM,MAAM,GAAKtW,KAAKoS,eAAgB,EAAGwG,IACnDlJ,GAbL1P,KAAK8U,UACH,wBACA9U,KAAK6W,sBAAsBzO,KACzBpI,KACA4Y,GACChJ,MAeTmF,QAAS,WACP,GAAK/U,KAAKmZ,YAAenZ,KAAK8T,WAG9B,GAA4B,IAAxB9T,KAAK0S,eAAsB,CAC7B,IAAI+D,EAAYzW,KAAK0W,kBACrB1W,KAAKiR,aAAewF,EAAUE,YAC9B3W,KAAKyS,cAAgBzS,KAAKyS,cAAgBgE,EAAUG,QAAQ7U,OAC5D/B,KAAKwT,eAAiBxT,KAAKwT,eAAiBiD,EAAUG,QAAQ7U,OAC9D/B,KAAKwW,QAAQC,EAAUG,SACvB5W,KAAKwW,UACLxW,KAAK6W,sBAAsB,QAClB7W,KAAKkR,cAAgB,IAE9BlR,KAAK2L,2BACL3L,KAAK6W,sBArxBkB,KA4xB3BzI,mBAAoB,WAClB,IAAIpO,KAAKoZ,KAAT,CAGApZ,KAAK8S,cAAgB9S,KAAKqZ,uBAAuB,YAC5CrZ,KAAK8S,eACRwG,QAAQC,KAAK,6DAEf,IAAI7K,GACJA,YACAA,EAAc1O,KAAKgQ,OACnBtB,EAAc1O,KAAKiQ,YACnBvB,EAAc1O,KAAKkQ,eACnBxB,EAAc8K,YACdxZ,KAAKkO,eAAiBQ,EACtB1O,KAAKwO,WAAWxO,KAAK8S,cAAe9S,KAAKyZ,eAG3CC,aAAc,SAASC,EAASC,YACnBA,IACX5Z,KAAKiM,eACLV,EAAA9J,EAAQ9D,OAAA4N,EAAA9J,EAAA9D,GAAUA,OAAAY,EAAAkQ,EAAA9Q,GAClBgc,GAAW3Z,KAAK8V,uBAOlBrI,cAAe,SAASoM,GACtB,GAAoB,UAAhBA,EAAOnY,KACT1B,KAAKyS,cAAgB,EACrBzS,KAAKiR,aAAe,EACpBjR,KAAKkR,cAAgBlR,KAAK6G,MAAQ7G,KAAK6G,MAAM9E,OAAS,EACtD/B,KAAK0R,aAAc1R,KAAK6G,MACQ,MAChC7G,KAAK8Z,wBACL9Z,KAAKyR,sBAAwB,KAC7BzR,KAAK2R,qBAAuB,KAC5B3R,KAAK0S,eAAiB1S,KAAK0S,gBAAkB,EAC7C1S,KAAKuR,eAAiBvR,KAAKuR,mBAC3BvR,KAAKwR,eAAiBxR,KAAKwR,mBAC3BxR,KAAKwT,eAAiB,EAClBxT,KAAKiW,WAAajW,KAAKiT,eACzBjT,KAAK+Z,qBAAqB,GAE5B/Z,KAAKga,qBACLha,KAAK8U,UAAU,UAAW9U,KAAK+U,QAASvF,QACnC,GAAoB,kBAAhBqK,EAAOnY,KAA0B,CAC1C1B,KAAKia,oBAAoBJ,EAAOnb,MAAMwb,cACtCla,KAAKkR,cAAgBlR,KAAK6G,MAAQ7G,KAAK6G,MAAM9E,OAAS,EAEtD,IAAIoY,EAAgBna,KAAKoa,oBACrBpa,KAAKqa,SAASF,IAAgBA,EAAczU,OAEhD,IAAI4U,EAAwBT,EAAOnb,MAAMwb,aAAaK,KAAK,SAASC,GAClE,OAAOA,EAAOrM,MAAQqM,EAAOC,YAAcza,KAAKyS,eAC5C+H,EAAOrM,OAASnO,KAAKwS,aACxBxS,MACEA,KAAKwY,kBAAmB8B,GAC3Bta,KAAK8U,UAAU,UAAW9U,KAAK+U,QAASvF,OAEjB,iBAAhBqK,EAAOnY,MAChB1B,KAAK0a,iBAAiBb,EAAOnY,KAAMmY,EAAOnb,QAI9Cgc,iBAAkB,SAAShZ,EAAMhD,GAE/B,IAIIic,EACAtG,EACA+D,EANAwC,GADJlZ,EAAOA,EAAKM,MAAM,IACHmH,QAAQ,MACV,IAATyR,IACFA,EAAMlZ,EAAKK,QAKb,IAAI8Y,EAAoB7a,KAAK8a,gBAAgB9a,KAAK+R,uBAClD,GAAIxC,EAAO,CACT,IAAI+E,EAAOoB,SAAShU,EAAKqZ,UAAU,EAAGH,GAAM,IAS5C,IARAD,EAAkB3a,KAAKiZ,iBAAiB3E,KAEtCD,EAAOrU,KAAKkZ,kBAAkB5E,GAC9B8D,EAAOpY,KAAK8a,gBAAgB9a,KAAKuR,eAAe8C,KACvCwG,IACTzC,EAAOyC,IAGJzC,GAAQA,EAAKpY,KAAKiQ,WAAaqE,EAClC,WAEG,CAEL,IAAIvO,EAAMrE,EAAKqZ,UAAU,EAAGH,GAC5B,GAAIC,GAAqBA,EAAkBG,UAAYjV,EACrDqS,EAAOyC,OAKP,GAHAxG,EAAOrU,KAAK8Z,qBAAqB/T,KACjCqS,EAAOpY,KAAK8a,gBAAgB9a,KAAKuR,eAAe8C,MAEnC+D,EAAK4C,UAAYjV,EAC5B,OAINrE,EAAOA,EAAKqZ,UAAUH,EAAM,GAC5BlZ,EAAO1B,KAAKgQ,IAAMtO,EAAO,IAAMA,EAAO,IACtC6N,EACI6I,EAAK6C,0BAA0BvZ,EAAMhD,MAAO,GAC5C0Z,EAAKnJ,WAAWvN,EAAMhD,MAC1B0Z,EAAK8C,kBAAoB9C,EAAK8C,qBAE1BP,IACF3a,KAAK8X,gBAAgBzD,IACrBrU,KAAKgY,iBACLhY,KAAKiY,wBAOTgC,oBAAqB,SAASkB,GAC5BA,EAAQpM,QAAQ,SAASyL,GAIvB,GAFAA,EAAOY,QAAQrM,QAAQ/O,KAAKqb,YAAarb,MAErCwa,EAAOrM,MAAQnO,KAAKyS,cAAe,CACrC,IAAIyD,EAAQ/L,KAAKG,IACbkQ,EAAOC,WAAaD,EAAOY,QAAQrZ,OACnCyY,EAAOrM,MAAQnO,KAAKyS,eACxBzS,KAAKyS,cAAgBzS,KAAKyS,cAAgByD,EACtClW,KAAK6R,sBAAwB,IAC/B7R,KAAK6R,qBAAuB7R,KAAK6R,qBAAuBqE,KAG3DlW,OAGLqb,YAAa,SAASxR,GACpB7J,KAAKC,EAAEqb,SAASC,SAAS1R,GAErB7J,KAAKwK,cAAgBxK,KAAK8a,gBAAgB9a,KAAKwK,cAAcxK,KAAKgQ,MAAQnG,GAC5E7J,KAAKga,sBAWT5F,cAAe,SAASoH,EAAI9D,GAC1B,IAAIrD,EAAMC,EAAMmH,EAAK1N,EAErB,GAAyB,IAArB2N,UAAU3Z,QAAgB2V,GAC5B,IAAK3J,EAAI,EAAGA,EAAI2J,EAAQ3V,OAAQgM,IAG9B,GAFAsG,EAAOqD,EAAQ3J,GACfuG,EAAOtU,KAAK2b,aAAatH,GACgB,OAApCoH,EAAMD,EAAG1a,KAAKd,KAAMqU,EAAMC,IAC7B,OAAOmH,MAGN,CAGL,IAFApH,EAAOrU,KAAKwT,eACZc,EAAOtU,KAAKyS,cACL4B,EAAOrU,KAAK0S,eAAgB2B,IAAQC,IACzC,GAAyC,OAApCmH,EAAMD,EAAG1a,KAAKd,KAAMqU,EAAMC,IAC7B,OAAOmH,EAGX,IAAKpH,EAAO,EAAGA,EAAOrU,KAAKwT,eAAgBa,IAAQC,IACjD,GAAyC,OAApCmH,EAAMD,EAAG1a,KAAKd,KAAMqU,EAAMC,IAC7B,OAAOmH,IAYfE,aAAc,SAAStH,GACrB,OAAIA,GAAQrU,KAAKwT,eACRxT,KAAKyS,eAAiB4B,EAAOrU,KAAKwT,gBAEpCxT,KAAKyS,eAAiBzS,KAAK0S,eAAiB1S,KAAKwT,gBAAkBa,GAO5EwD,cAAe,SAASH,GACtB1X,KAAKoU,cAAc,SAASC,EAAMC,GAChC,IAAIsH,EAAK5b,KAAKuR,eAAe8C,GACzBxK,EAAO7J,KAAK6G,OAAS7G,KAAK6G,MAAMyN,GACpC,GAAY,MAARzK,EAAc,CAChB,IAAIuO,EAAOpY,KAAK8a,gBAAgBc,GAChCxD,EAAK4C,QAAUhb,KAAK0R,YAAc1R,KAAK0R,YAAYmK,OAAOhS,GAAQ,KAClE7J,KAAK8b,iBAAiB1D,EAAMpY,KAAKgQ,GAAInG,GACrC7J,KAAK8b,iBAAiB1D,EAAMpY,KAAKkQ,WAAYlQ,KAAKC,EAAEqb,SAASS,WAAWlS,IACxE7J,KAAK8b,iBAAiB1D,EAAMpY,KAAKiQ,QAASqE,GAC1CtU,KAAK8b,iBAAiB1D,EAAM,WAAYpY,KAAK6R,uBAAyByC,EAAO,GAAK,GAClFtU,KAAK8Z,qBAAqB1B,EAAK4C,SAAW3G,EAC1C+D,EAAK8C,kBAAoB9C,EAAK8C,qBAC9BU,EAAGjW,gBAAgB,eAEnBiW,EAAG7Y,aAAa,SAAU,KAE3B2U,IAQLI,eAAgB,SAASJ,GAGvBnM,EAAA9J,EAAQ9D,OAAA4N,EAAA9J,EAAA9D,GAAUA,OAAAY,EAAAkQ,EAAA9Q,GAElB,IAAIqe,EAAkB,EAClBC,EAAkB,EAClBC,EAAelc,KAAKgR,sBACpBmL,EAAkBnc,KAAK+Q,iBAE3B/Q,KAAKoU,cAAc,SAASC,EAAMC,GAChC2H,GAAmBjc,KAAKwR,eAAe6C,GACvCrU,KAAKwR,eAAe6C,GAAQrU,KAAKuR,eAAe8C,GAAML,aACtDgI,GAAmBhc,KAAKwR,eAAe6C,GACvCrU,KAAKgR,uBAAyBhR,KAAKwR,eAAe6C,GAAQ,EAAI,GAC7DqD,GAEC1X,KAAKmQ,MACPnQ,KAAK8V,qBACL9V,KAAK8Q,cAAgB3G,KAAKyK,KAAK5U,KAAK0S,eAAiB1S,KAAKiS,cAAgBjS,KAAKmS,aAE/E8J,EAAyC,IAAtBjc,KAAKiS,aAAsBgK,EAAmB9R,KAAKyK,KAAK5U,KAAK0S,eAAiB1S,KAAKiS,cAAgBjS,KAAKmS,WAC3HnS,KAAK8Q,cAAgB9Q,KAAK8Q,cAAgBkL,EAAkBC,EAC5Djc,KAAKiS,aAAe,GAGlBjS,KAAKgR,wBAA0BkL,IACjClc,KAAK+Q,iBAAmB5G,KAAKmM,OACvB6F,EAAkBD,EAAgBF,GACpChc,KAAKgR,yBAIb8E,mBAAoB,WAClB9V,KAAKkS,WAAalS,KAAK0S,eAAiB,EAAI1S,KAAKuR,eAAe,GAAG6K,wBAAwBC,MAAQ,IACnGrc,KAAKmS,WAAanS,KAAK0S,eAAiB,EAAI1S,KAAKuR,eAAe,GAAGyC,aAAe,IAClFhU,KAAKiS,aAAejS,KAAKkS,WAAa/H,KAAKoM,MAAMvW,KAAKsR,eAAiBtR,KAAKkS,YAAclS,KAAKiS,cAMjG+F,eAAgB,WACdhY,KAAKsc,wBAEL,IAAIC,EAAIvc,KAAKiR,aAEb,GAAIjR,KAAKmQ,KAAM,CACb,IAAIqM,EAAiBxc,KAAKiS,aAAejS,KAAKkS,WAC1CuK,GAAazc,KAAKsR,eAAiBkL,GAAkB,EAEzDxc,KAAKoU,cAAc,SAASC,EAAMC,GAChC,IAAIoI,EAAUpI,EAAOtU,KAAKiS,aACtB0K,EAAIxS,KAAKoM,MAAOmG,EAAU1c,KAAKkS,WAAcuK,GAC7Czc,KAAK2V,SACPgH,IAAS,GAEX3c,KAAK4c,YAAYD,EAAI,KAAMJ,EAAI,KAAM,EAAGvc,KAAKuR,eAAe8C,IACxDrU,KAAK6c,qBAAqBvI,KAC5BiI,GAAKvc,KAAKmS,mBAIdnS,KAAKoU,cAAc,SAASC,EAAMC,GAChCtU,KAAK4c,YAAY,EAAGL,EAAI,KAAM,EAAGvc,KAAKuR,eAAe8C,IACrDkI,GAAKvc,KAAKwR,eAAe6C,MAK/BE,0BAA2B,SAASF,GAClC,OAAKrU,KAAKmQ,KAGNnQ,KAAK2b,aAAatH,GAAQrU,KAAKiS,cAAiBjS,KAAKiS,aAAe,EAC/D,EAEFjS,KAAKmS,WALHnS,KAAKwR,eAAe6C,IAgB/BwI,qBAAsB,SAASvI,GAC7B,OAAOA,EAAOtU,KAAKiS,cAAiBjS,KAAKiS,aAAe,GAM1DqK,sBAAuB,WACrB,IAAIQ,EAAqC,IAAvB9c,KAAKyS,cAAsBzS,KAAKiR,aAC9C9G,KAAKC,IAAIpK,KAAK6Q,gBAAkB7Q,KAAKiR,aAAc,GAEvD,GAAoB,IAAhB6L,EAAmB,CACrB9c,KAAKiR,aAAejR,KAAKiR,aAAe6L,EACxC,IAAI9G,EAAYhW,KAAKiW,YAEhB3G,GAAuB0G,EAAY,GACtChW,KAAK+Z,qBAAqB/D,EAAY8G,KAQ5C/C,qBAAsB,SAAShP,GACzB/K,KAAKoV,cAAgBrK,GAAO,IAC9B/K,KAAKiW,WAAalL,EAClB/K,KAAK6Q,gBAAkB7Q,KAAKiW,aAShCgC,oBAAqB,SAAS8E,GACxB/c,KAAKmQ,KACPnQ,KAAKmR,iBAAmBnR,KAAK2U,iBAAmB3U,KAAKmS,WAErDnS,KAAKmR,iBAAoBnR,KAAKsS,gBAC1BnI,KAAKG,IAAItK,KAAKkR,cAAgBlR,KAAK0S,eAAiB1S,KAAKyS,cAAe,GAAKzS,KAAK+Q,mBAIxFgM,GADAA,GADAA,EAAcA,GAAsC,IAAvB/c,KAAKoR,gBACLpR,KAAK6Q,iBAAmB7Q,KAAKmR,iBAAmBnR,KAAK8Q,gBACrD9Q,KAAKmQ,MAAQnQ,KAAKC,EAAE4G,MAAMrG,MAAMwc,OAAShd,KAAKmR,mBAExDhH,KAAKiM,IAAIpW,KAAKmR,iBAAmBnR,KAAKoR,gBAAkBpR,KAAKqR,mBAC9ErR,KAAKC,EAAE4G,MAAMrG,MAAMwc,OAAShd,KAAKmR,iBAAmB,KACpDnR,KAAKoR,cAAgBpR,KAAKmR,mBAW9B8L,aAAc,SAASpT,GACrB,OAAO7J,KAAKkd,cAAcld,KAAK6G,MAAMsC,QAAQU,KAU/CqT,cAAe,SAAShJ,GACtB,KAAmB,iBAARA,GAAoBA,EAAM,GAAKA,EAAMlU,KAAK6G,MAAM9E,OAAS,KAGpEwJ,EAAA9J,EAAQ9D,OAAA4N,EAAA9J,EAAA9D,GAAUA,OAAAY,EAAAkQ,EAAA9Q,GAEU,IAAxBqC,KAAK0S,gBAAT,CAGAwB,EAAMlU,KAAKsT,OAAOY,EAAK,EAAGlU,KAAKkR,cAAc,KAExClR,KAAKiZ,iBAAiB/E,IAAQA,GAAOlU,KAAKkT,oBAC7ClT,KAAKyS,cAAgBzS,KAAKmQ,KAAQ+D,EAA0B,EAApBlU,KAAKiS,aAAqBiC,EAAM,GAE1ElU,KAAK4X,eACL5X,KAAK6X,gBACL7X,KAAK8X,iBAEL9X,KAAKiR,aAAe9G,KAAKoM,MAAMvW,KAAKyS,cAAgBzS,KAAKiS,cAAiBjS,KAAK+Q,iBAO/E,IALA,IAAIoM,EAAiBnd,KAAKwT,eACtB4J,EAAqBpd,KAAKyS,cAC1B4K,EAAkB,EAClBC,EAAoBtd,KAAK2S,mBAEtByK,EAAqBlJ,GAAOmJ,GAAmBC,GACpDD,GAAoCrd,KAAKuU,0BAA0B4I,GACnEA,GAAkBA,EAAiB,GAAKnd,KAAK0S,eAC7C0K,IAEFpd,KAAKiY,wBACLjY,KAAKgY,iBACLhY,KAAK+Z,qBAAqB/Z,KAAKiR,aAAejR,KAAKiT,cAAgBoK,GACnErd,KAAK6W,sBAAsB,GAE3B7W,KAAKyR,sBAAwB,KAC7BzR,KAAK2R,qBAAuB,OAM9B4L,cAAe,WACbvd,KAAK+Q,iBAAmB,EACxB/Q,KAAKgR,sBAAwB,GAO/BwM,eAAgB,WACdxd,KAAK8U,UAAU,UAAW,WAExB9U,KAAKyR,sBAAwB,KAC7BzR,KAAK2R,qBAAuB,KAEhBxH,KAAKiM,IAAIpW,KAAKqR,gBAAkBrR,KAAK6V,qBACjD7V,KAAK2L,2BACD3L,KAAK8T,YAEP9T,KAAK0L,yBACL1L,KAAKud,gBACLvd,KAAK+U,WAGL/U,KAAK0L,0BAEN8D,IASLiO,WAAY,SAAS5T,GACnB,OAAO7J,KAAK0d,YAAY1d,KAAK6G,MAAMsC,QAAQU,KAS7C6T,YAAa,SAASvP,GACpB,KAAIA,EAAQ,GAAKA,GAASnO,KAAKkR,eAA/B,CAMA,IAHKlR,KAAKsQ,gBAAkBtQ,KAAKqH,cAChCrH,KAAK2d,iBAEF3d,KAAKiZ,iBAAiB9K,GAAQ,CAChC,IAAIyP,EAAQ5d,KAAK8a,gBAAgB9a,KAAKuR,eAAevR,KAAKkZ,kBAAkB/K,KACxEyP,IACFA,EAAM5d,KAAKkQ,gBAEblQ,KAAK6d,mBAAmB1P,GAEtBnO,KAAKC,EAAEqb,SAASoC,YAElB1d,KAAKC,EAAEqb,SAASoC,YAAYvP,GAG5BnO,KAAKC,EAAEqb,SAASwC,OAAO9d,KAAK6G,MAAMsH,MAUtC4P,aAAc,SAASlU,GACrB,OAAO7J,KAAKge,cAAche,KAAK6G,MAAMsC,QAAQU,KAS/CmU,cAAe,SAAS7P,GAClBA,EAAQ,GAAKA,GAASnO,KAAKkR,gBAG3BlR,KAAKiZ,iBAAiB9K,KACZnO,KAAK8a,gBAAgB9a,KAAKuR,eAAevR,KAAKkZ,kBAAkB/K,KACtEnO,KAAKkQ,eACXlQ,KAAK6d,mBAAmB1P,IAEtBnO,KAAKC,EAAEqb,SAAS0C,cAElBhe,KAAKC,EAAEqb,SAAS0C,cAAc7P,GAG9BnO,KAAKC,EAAEqb,SAASC,SAASvb,KAAK6G,MAAMsH,MAWxC8P,uBAAwB,SAASpU,GAC/B,OAAO7J,KAAKke,wBAAwBle,KAAK6G,MAAMsC,QAAQU,KAUzDqU,wBAAyB,SAAS/P,IACfnO,KAAKC,EAAEqb,SAAS6C,gBAC3Bne,KAAKC,EAAEqb,SAAS6C,gBAAgBhQ,GAASnO,KAAKC,EAAEqb,SAASS,WAAW/b,KAAK6G,MAAMsH,KACtEnO,KAAKge,cAAc7P,GAASnO,KAAK0d,YAAYvP,IAQ9DwP,eAAgB,WACd3d,KAAKoU,cAAc,SAASC,EAAMC,GAChCtU,KAAK8a,gBAAgB9a,KAAKuR,eAAe8C,IAAOrU,KAAKkQ,iBAEvDlQ,KAAKC,EAAEqb,SAASqC,kBAOlBS,yBAA0B,SAAShO,IACnBA,EAAmBpQ,KAAKgV,OAAShV,KAAKkV,UAC5CpU,KAAKd,KAAMA,KAAM,MAAO,sBAMlCqe,kBAAmB,SAASvZ,GAC1B,IAAI8Y,EAAQ5d,KAAK8a,gBAAgBhW,EAAEnD,QACnC,GAAKic,EAAL,CAGA,IAAIU,EAAeC,EACf5c,EAAShE,OAAAY,EAAAkD,EAAA9D,CAAImH,GAAGpD,KAAK,GACrB8c,EAAWxe,KAAKoa,oBAChBqE,EAAeze,KAAKuR,eAAevR,KAAKkZ,kBAAkB0E,EAAM5d,KAAKiQ,WAGhD,UAArBtO,EAAO+c,WACc,WAArB/c,EAAO+c,WACc,WAArB/c,EAAO+c,YAIXJ,EAAgBV,EAAMpE,SACtBoE,EAAMpE,UAv2CY,IAw2ClB+E,EAAmBC,EAAWA,EAAShF,UAAY,EACnDoE,EAAMpE,SAAW8E,EAGbE,GAAYC,IAAiBD,GAAYC,EAAapE,SAASmE,KA52CjD,MA42C8DD,GAGhFve,KAAKie,uBAAuBL,EAAM5d,KAAKgQ,QAGzC2O,uBAAwB,SAASrO,GAC/BtQ,KAAK2d,iBACL3d,KAAKC,EAAEqb,SAASsD,MAAQtO,GAS1BuO,kBAAmB,SAAShV,GAC1B,OAAO7J,KAAK6d,mBAAmB7d,KAAK6G,MAAMsC,QAAQU,KASpDgU,mBAAoB,SAAS1P,GAC3B,OAAKnO,KAAKiZ,iBAAiB9K,IAG3BnO,KAAK8X,gBAAgB9X,KAAKkZ,kBAAkB/K,KAC5CnO,KAAKgY,iBACE,MAJE,MAcXJ,aAAc,WACZ,IAAIkH,EAAO9e,KAAK6R,qBAEZiN,GAAQ,GAAKA,EAAO9e,KAAKkR,cAGvBlR,KAAKiZ,iBAAiB6F,GACxB9e,KAAK+e,sBAEL/e,KAAKgf,2BAEEhf,KAAKkR,cAAgB,GAAKlR,KAAK0S,eAAiB,IAEzD1S,KAAK8R,sBAAwB9R,KAAKwT,eAClCxT,KAAK6R,qBAAuB7R,KAAKyS,cACjCzS,KAAKwK,aAAexK,KAAKuR,eAAevR,KAAKwT,kBAQjDJ,2BAA4B,SAASc,GAGnC,OADAlU,KAAKiS,aAAejS,KAAKiS,cAAgB,EAClCjS,KAAKmQ,KAAOhG,KAAKyK,KAAKV,EAAMlU,KAAKiS,cAAgBjS,KAAKiS,aAAeiC,GAG9E+E,iBAAkB,SAAS/E,GACzB,OAAOA,GAAOlU,KAAKyS,eAAiByB,GAAOlU,KAAKwS,aAGlDyM,gBAAiB,SAAS/K,GACxB,OAAOA,GAAOlU,KAAKiU,mBAAqBC,GAAOlU,KAAKwU,kBAGtD0E,kBAAmB,SAAS5E,GAC1B,OAAO/E,GACFvP,KAAKwT,gBAAkBc,EAAOtU,KAAKyS,gBAAkBzS,KAAK0S,eAC3D1S,KAAK8Z,qBAAqB9Z,KAAK0R,YAAYmK,OAAO7b,KAAK6G,MAAMyN,MAGnE4K,UAAW,SAAShL,GAClBlU,KAAKmf,mBAAmBjL,IAG1BiL,mBAAoB,SAASjL,GAC3B,KAAIA,EAAM,GAAKA,GAAOlU,KAAKkR,eAA3B,CAGAlR,KAAK+e,sBAEA/e,KAAKiZ,iBAAiB/E,IACzBlU,KAAKkd,cAAchJ,GAErB,IAEIkL,EAFAX,EAAeze,KAAKuR,eAAevR,KAAKkZ,kBAAkBhF,IAC1D0J,EAAQ5d,KAAK8a,gBAAgB2D,GAGjCb,EAAMpE,UAn9CY,WAq9CdiF,EAAajF,WAChB4F,EAAYX,GAGRW,IACHA,EAAYzhB,OAAAY,EAAAkD,EAAA9D,CAAI8gB,GAAclQ,cAAc,sBAG9CqP,EAAMpE,SAAW,EAEjBxZ,KAAK6R,qBAAuBqC,EAC5BkL,GAAaA,EAAUlW,UAGzB8Q,mBAAoB,WACdha,KAAK+R,uBACP/R,KAAK6S,aAAawM,YAAYrf,KAAK+R,uBAErC/R,KAAK+R,sBAAwB,KAC7B/R,KAAKgS,mBAAqB,KAC1BhS,KAAKwK,aAAe,KACpBxK,KAAK6R,sBAAwB,EAC7B7R,KAAK8R,uBAAyB,GAGhCkN,yBAA0B,WACxB,IAAIM,EAAQtf,KAAK8R,sBAEjB,KAAI9R,KAAK+R,uBAAyB/R,KAAK6R,qBAAuB,GAA9D,CAGA,IAAK7R,KAAKgS,mBAAoB,CAE5B,IAAIoG,EAAOpY,KAAKsY,MAAM,MACtBtY,KAAKgS,mBAAqBoG,EAAKG,KAAKhK,cAAc,KAClDvO,KAAK6S,aAAalP,YAAYyU,EAAKG,MAGrCvY,KAAK+R,sBAAwB/R,KAAKuR,eAAe+N,GACjDtf,KAAK8a,gBAAgB9a,KAAK+R,uBAAuByH,SAAW,EAC5DxZ,KAAKuR,eAAe+N,GAAStf,KAAKgS,mBAClChS,KAAK8R,sBAAwBwN,EAE7Btf,KAAK4c,YAAY,EAngDN,WAmgDmB,EAAG5c,KAAK+R,yBAGxCgN,oBAAqB,WACnB,GAAK/e,KAAK+R,yBAAyB/R,KAAK6R,qBAAuB,GAA/D,CAIA7R,KAAK6X,gBAEL,IAAIyH,EAAQtf,KAAK8R,sBAEbyN,EAAevf,KAAKuR,eAAe+N,GACvC,GAAKC,EAAL,CAGA,IAAIC,EAAmBxf,KAAK8a,gBAAgByE,GACxCE,EAAoBzf,KAAK8a,gBAAgB9a,KAAK+R,uBAI9CyN,EAAiBxf,KAAKgQ,MAAQyP,EAAkBzf,KAAKgQ,KAEvDhQ,KAAKgS,mBAAqBuN,EAC1BC,EAAiBhG,UAAY,EAE7BxZ,KAAKuR,eAAe+N,GAAStf,KAAK+R,sBAElC/R,KAAK4c,YAAY,EA/hDR,WA+hDqB,EAAG5c,KAAKgS,sBAEtChS,KAAKga,qBACLha,KAAKgS,mBAAqB,MAE5BhS,KAAK+R,sBAAwB,QAG/B8C,UAAW,SAAS/P,GAClB,IAAI4a,EAAc1f,KAAK8a,gBAAgBhW,EAAEnD,QACrCge,EAAe3f,KAAK8a,gBAAgB9a,KAAKwK,cACzCoV,EAAyD,OAA/B5f,KAAK+R,sBAC/B+M,EAAO9e,KAAK6R,qBACX6N,IAGDC,IAAiBD,EAEd1f,KAAKif,gBAAgBH,IACxB9e,KAAKkd,cAAc4B,IAGrB9e,KAAK+e,sBAEDY,IACFA,EAAanG,UAAY,GAG3BkG,EAAYlG,SAAW,EACvBsF,EAAOY,EAAY1f,KAAKiQ,SACxBjQ,KAAK6R,qBAAuBiN,EAC5B9e,KAAK8R,sBAAwB9R,KAAKkZ,kBAAkB4F,GACpD9e,KAAKwK,aAAexK,KAAKuR,eAAevR,KAAK8R,uBACzC8N,IAA4B5f,KAAK+R,uBACnC/R,KAAKwW,aAKXqJ,gBAAiB,SAAS/a,GACxB,OAAQA,EAAEgb,SACR,KAAsB,GACpBhb,EAAEkB,iBACFhG,KAAKmf,mBAAmBnf,KAAK6R,sBAAwB7R,KAAKmQ,KAAOnQ,KAAKiS,aAAe,IACrF,MACF,KAAuB,GACjBjS,KAAKmQ,MAAMnQ,KAAKmf,mBAAmBnf,KAAK6R,sBAAwB7R,KAAK2V,QAAU,EAAI,IACvF,MACF,KAAoB,GAClB3V,KAAKmf,mBAAmBnf,KAAK6R,sBAAwB7R,KAAKmQ,KAAOnQ,KAAKiS,aAAe,IACrF,MACF,KAAsB,GAChBjS,KAAKmQ,MAAMnQ,KAAKmf,mBAAmBnf,KAAK6R,sBAAwB7R,KAAK2V,OAAS,GAAK,IACvF,MACF,KAAiB,GACf3V,KAAKmf,mBAAmBnf,KAAK6R,sBAC7B7R,KAAKqe,kBAAkBvZ,KAK7BwO,OAAQ,SAASyM,EAAG3V,EAAKE,GACvB,OAAOH,KAAKC,IAAIE,EAAKH,KAAKG,IAAIF,EAAK2V,KAGrCjL,UAAW,SAAStN,EAAMwY,EAAIC,GACxB1Q,GACFvP,KAAKkgB,YAAclgB,KAAKkgB,gBACxBlgB,KAAKkgB,YAAY1Y,GAAQ2Y,EAAAtiB,EAAUsiB,SACjCngB,KAAKkgB,YAAY1Y,GACjByY,EACAD,EAAG5X,KAAKpI,OACVrC,OAAA4N,EAAA1N,EAAAF,CAAiBqC,KAAKkgB,YAAY1Y,KAElC7J,OAAAY,EAAAV,EAAAF,CAAaqC,KAAKmgB,SAAS3Y,EAAMwY,KAIrClE,iBAAkB,SAAS1D,EAAM5Q,EAAM9I,GACjC6Q,EACF6I,EAAKgI,oBAAoB5Y,EAAM9I,GAE/B0Z,EAAK5Q,GAAQ9I,GAKjB2hB,mBAAoB,SAASzR,EAAMlQ,IAChCsB,KAAKuR,oBACH+O,QAAQtgB,KAAK+R,sBAAuB/R,KAAKgS,qBACzCjD,QAAQ,SAASlF,GACZA,GACF7J,KAAK8a,gBAAgBjR,GAAM8E,gBAAgBC,EAAMlQ,IAElDsB,OAGPugB,sBAAuB,SAASnI,EAAMxJ,EAAMlQ,GAC3C,GAAIf,OAAA+D,EAAAoD,EAAAnH,CAAQqC,KAAKgQ,GAAIpB,GAAO,CACzB,IAAIsF,EAAMkE,EAAKpY,KAAKiQ,SAChBrB,GAAQ5O,KAAKgQ,KACfhQ,KAAK6G,MAAMqN,GAAOxV,GAEpBsB,KAAKiP,WAAWtR,OAAA+D,EAAAqM,EAAApQ,CAAUqC,KAAKgQ,GAAI,SAAWkE,EAAKtF,GAAOlQ,KAK9D8hB,oBAAqB,WACnB,OAAOxgB,KAAKuR,gBAGdkP,qBAAsB,SAASrI,EAAM1W,EAAMhD,GACL,IAAhCgD,EAAKyH,QAAQnJ,KAAKgQ,GAAK,MACzBhQ,KAAKiP,WAAW,SAAWmJ,EAAK4C,QAAU,IACtCtZ,EAAKM,MAAMhC,KAAKgQ,GAAGjO,OAAS,GAAIrD,IAIxCgiB,mBAAoB,SAAShf,EAAMhD,IAChCsB,KAAKuR,oBACH+O,QAAQtgB,KAAK+R,sBAAuB/R,KAAKgS,qBACzCjD,QAAQ,SAASlF,GACZA,GACF7J,KAAK8a,gBAAgBjR,GAAMoF,WAAWvN,EAAMhD,OAE7CsB,OAGP2gB,mBAAoB,SAAS/R,EAAMlQ,IAChCsB,KAAKuR,oBACH+O,QAAQtgB,KAAK+R,sBAAuB/R,KAAKgS,qBACzCjD,QAAQ,SAASlF,GACZA,IACF7J,KAAK8a,gBAAgBjR,GAAM+E,GAAQlQ,IAEpCsB,OAIPoa,kBAAmB,WACjB,IAAIwG,EAAY5gB,KAAK6S,aAAagO,KAAKC,QACvC,OAAOnjB,OAAAY,EAAAkD,EAAA9D,CAAIijB,EAAYA,EAAUrI,KAAO/U,UAAU2W,uBC14DhD4G,UAA4BpjB,OAAAwI,EAAAtI,EAA5BkjB,CAA0C3a,EAAAvI,IAC9CwI,sBACE,OAAO/H,EAAA;;;;;;;;;;;EAcTP,gBACE,MAAO,wBAGTU,wBACE,OAIE0P,MAAOlP,OAMP4K,KAAMlM,OAKNiC,MAAOf,OAKPuF,UACExF,KAAMS,QACNX,SACAyF,uBAMFyB,SACEhH,KAAMS,QACNX,SACAyF,uBAMF6K,sBAAuBrR,QAI3BmK,uBACE,OACE,6CACA,yEACA,uEACA,+EACA,8EAIJkZ,oBAGE,GAFAzc,MAAMyc,qBAEDhhB,KAAKgP,sBAAuB,CAE/B,MAGMiS,EAHUjhB,KAAKkhB,cAAcC,KAAKD,cAAcC,KAC7BC,WACQF,cAAcC,KACdD,cAAcC,KAC/CF,EAAS7S,qBACL6S,EAAS5S,iBACXrO,KAAKgP,sBAAwB,IAAIiS,EAAS5S,mBAC1CrO,KAAKC,EAAE2D,QAAQY,YAAc,GAC7BxE,KAAKC,EAAE2D,QAAQD,YAAY3D,KAAKgP,sBAAsBuJ,QAK5D8I,aAAazhB,EAAOoP,YACdA,GAAuChP,KAAKC,EAAE2D,UAEhD5D,KAAKC,EAAE2D,QAAQY,YAAc5E,GAIjC0hB,gCAAgCC,EAAU7iB,EAAOsQ,YAC3CuS,YAA0B7iB,YAAuBsQ,IAGrDA,EAAsBuS,GAAY7iB,IAItC6H,eAAeC,OAAOua,EAAoBhjB,GAAIgjB,qBCnHxCS,UAA+BC,EAAA5jB,EACnCE,gBACE,MAAO,4BAIXwI,eAAeC,OAAOgb,EAAuBzjB,GAAIyjB,SAQ3CE,UAAgC/jB,OAAAgkB,EAAAlgB,EAAhCigB,CAA+CjR,EAAA5S,EAAuBuI,EAAAvI,IAC1EwI,sBACE,OAAO/H,EAAA;;;;;;;;;;;;;EAgBTP,gBACE,MAAO,4BAGTU,wBACE,OACEmI,QACEhI,KAAMS,QACNP,WAGFuH,UACEzH,KAAMjB,OACNmB,WAMFmK,aACErK,KAAMS,QACN8E,sBACAzF,MAAO,KACL,IAEE,OADA8E,SAASoe,YAAY,iBAErB,MAAO9c,GACP,YAQN+c,gBACEjjB,KAAMjB,QAMRmkB,cACEljB,KAAMS,QACNX,WAKNoJ,uBACE,OAAQ,0BAGVxD,cACEC,QACAvE,KAAK+hB,kBAAoB/hB,KAAKgiB,aAAa5Z,KAAKpI,MAChDA,KAAKiiB,2BAA6BjiB,KAAKkiB,sBAAsB9Z,KAAKpI,MAGpEghB,oBACEzc,MAAMyc,oBACNhhB,KAAK6E,iBAAiB,cAAe7E,KAAK+hB,mBAG5Crd,QACEH,MAAMG,QAGN1E,KAAKC,EAAEiI,QAAQrD,iBAAiB,+BAAgCC,IAC9DA,EAAEkB,mBAINV,uBACEf,MAAMe,uBACNtF,KAAKmF,oBAAoB,cAAenF,KAAK+hB,mBAG7C/hB,KAAK4G,UAGPqF,eACE1H,MAAM0H,eAEFjM,KAAK6hB,gBAAkB7hB,KAAK4G,SAC9B5G,KAAKgiB,eAELG,sBAAsBniB,KAAKgiB,aAAa5Z,KAAKpI,QAejD6I,eAAejC,GACTA,GACF5G,KAAKC,EAAEiI,QAAQ1H,MAAM4hB,SAAWpiB,KAAKqiB,iBAAiBriB,KAAK6hB,gBAAkB,QAAU,WACvF7hB,KAAKgiB,eAELxM,OAAO3Q,iBAAiB,SAAU7E,KAAK+hB,sBACvCve,SAASqB,iBAAiB,QAAS7E,KAAKiiB,+BACxCjiB,KAAKwM,cAAc,IAAIL,YAAY,oCAAqCI,WAAeF,iBAEvFmJ,OAAOrQ,oBAAoB,SAAUnF,KAAK+hB,sBAC1Cve,SAAS2B,oBAAoB,QAASnF,KAAKiiB,+BAC3CjiB,KAAKwM,cAAc,IAAIL,YAAY,oCAAqCI,WAAeF,gBAQ3F6V,sBAAsB3gB,GACpB,MAAMC,EAAYD,EAAMmH,eACpBlH,EAAU2H,QAAQnJ,KAAK6hB,gBAAkB,GAAKrgB,EAAU2H,QAAQnJ,KAAKC,EAAEiI,SAAW,IACpFlI,KAAK4G,WAITyb,iBAAiBC,GACf,MAAMC,EAAeviB,KAAKwiB,iBAAiBF,GAE3C,MAAqD,UAA9C9M,OAAOC,iBAAiB6M,GAASF,UACrCG,GAAgBviB,KAAKqiB,iBAAiBE,GAG3CC,iBAAiBF,GACf,GAAIA,EAAQG,aACV,OAAOH,EAAQG,aAAaC,cACvB,GAAIJ,EAAQI,cACjB,OAAOJ,EAAQC,aAGjB,MAAMI,EAASL,EAAQvP,WAEvB,OAAI4P,GAA8B,KAApBA,EAAOC,UAAmBD,EAAOxB,KACtCwB,EAAOxB,YAIlB0B,gBAAgBC,EAAaC,GAC3B,OAAO/iB,KAAK8hB,cAAgBgB,EAAY9F,OAAS+F,EAAW/F,OAG9DgG,oBAOE,OALExN,OAAOyN,YACPjjB,KAAK6hB,eAAezF,wBAAwB5E,OAC5CrN,KAAKC,IAAI5G,SAAS0f,KAAKlN,UAAW,IAChCR,OAAOyN,YAES,GAGtBjB,aAAald,GACX,GAAIA,GAAKA,EAAEnD,OAAQ,CACjB,MAAMA,EAASmD,EAAEnD,SAAW6B,SAAWA,SAAS0f,KAAOpe,EAAEnD,OACnDghB,EAAS3iB,KAAKC,EAAEiI,QAAQwa,cAC9B,IAAM/gB,EAAO0Y,SAASra,KAAKC,EAAEiI,WAAYvG,EAAO0Y,SAASra,KAAK6hB,iBAAoBc,IAAWnf,SAAS0f,KACpG,OAIJ,MAAMH,EAAa/iB,KAAK6hB,eAAezF,wBACvCpc,KAAK8hB,aAAe9hB,KAAKgjB,oBAEzB,MAAMF,EAAc9iB,KAAKC,EAAEiI,QAAQkU,wBACnCpc,KAAKmjB,YAAcJ,EAAWK,KAAON,EAAYM,MAAQpjB,KAAKmjB,aAAe,GAC7EnjB,KAAKqjB,YAAcN,EAAWxL,IAAMuL,EAAYvL,KAAOvX,KAAKqjB,aAAe,GACzErjB,KAAK6iB,gBAAgBC,EAAaC,GAEpC,MAAMO,EAAoB9N,OAAO+N,kBAAoB,EACrDvjB,KAAKmjB,YAAchZ,KAAKmM,MAAMtW,KAAKmjB,YAAcG,GAAqBA,EACtEtjB,KAAKqjB,YAAclZ,KAAKmM,MAAMtW,KAAKqjB,YAAcC,GAAqBA,EACtEtjB,KAAKC,EAAEiI,QAAQ1H,MAAMgjB,yBAA2BxjB,KAAKmjB,kBAAkBnjB,KAAKqjB,oBAE5ErjB,KAAKC,EAAEiI,QAAQ1H,MAAM6b,MAAQrc,KAAK6hB,eAAe4B,YAAc,KAC/DzjB,KAAKC,EAAEiI,QAAQ1H,MAAMkjB,eAAiB1jB,KAAK8hB,aAAe,WAAa,aAGvE9hB,KAAKwM,cAAc,IAAIL,YAAY,sBAIvC5F,eAAeC,OAAOkb,EAAwB3jB,GAAI2jB,SCtO5CiC,wBAAsDvd,EAAAvI,IAC1DwI,sBACE,OAAO/H,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;EA8BTP,gBACE,MAAO,oCAGTU,wBACE,OAIEwK,aACErK,KAAMS,QACN8E,sBACAzF,MAAO,KACL,IAEE,OADA8E,SAASoe,YAAY,iBAErB,MAAO9c,GACP,YAKN8B,OAAQvH,QAKRwiB,gBACEjjB,KAAMjB,QAMRuJ,SACEtI,KAAMS,QACNX,SACAyF,sBACAxF,SAAU,qBAGZyO,eACExO,KAAMjB,QAGRuM,QACEtL,KAAMjB,QAGRwJ,eACEvI,KAAMK,OACNH,UACAJ,OAAQ,EACRC,SAAU,wBAGZ6L,cACE5L,KAAMC,OACN+kB,SAAU,kCAGZC,gBACEjlB,KAAMC,OACNH,MAAO,SAGTolB,gBACEllB,KAAMC,OACNH,MAAO,SAGT+M,UAAW9N,QAIfmK,uBACE,OAAQ,8BAA+B,4BAGzCic,iBAAiBC,GACfhkB,KAAKwM,cAAc,IAAIL,YAAY,+BACjCC,QAAS4X,YAAaA,MAI1Btf,QACEH,MAAMG,QAIF,UAAUoB,KAAKzF,UAAUC,YAC3BN,KAAKikB,UAAUlhB,aAAa,eAAgB,MAG9C/C,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQrD,iBAAiB,WAAYC,GAAK9E,KAAK+jB,iBAAiBjf,IAClF9E,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQrD,iBAAiB,YAAaC,GAAK9E,KAAK+jB,iBAAiBjf,IAGnF9E,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQrD,iBAAiB,YAAaC,GAAKA,EAAEkB,kBAGjEke,iBAAiBpf,GACf9E,KAAKyL,UAAYzL,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQtE,QAAQ2K,cAAc,aACjEvO,KAAKikB,UAAYjkB,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQtE,QAAQ2K,cAAc,aAGnEvB,gBAAgB9F,GACVA,EACFlH,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQnF,aAAa,UAAW,IAElD/C,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQvC,gBAAgB,WAI9Cwe,iBAAiB7I,GACftb,KAAKokB,2BAGPC,oBACE,IAAKrkB,KAAK6hB,iBAAmB7hB,KAAKyL,UAChC,OAGF,MAAMsX,EAAa/iB,KAAK6hB,eAAezF,wBAEvCpc,KAAKikB,UAAUzjB,MAAM8jB,WAAa9O,OAAO+O,SACvC/O,OAAO+O,SAASC,sBAAsBxkB,KAAM,yCAC5CyV,iBAAiBzV,MAAMykB,iBAAiB,2CAA6C,OAGvFzkB,KAAKC,EAAE+L,SAAS/L,EAAEiI,QAAQ1H,MAAM8jB,UAAYtkB,KAAK0kB,kBAAkB3B,GAGnE/iB,KAAKyL,UAAUjL,MAAM8jB,UAAYtkB,KAAK0kB,kBAAkB3B,GAExD/iB,KAAK2L,2BAGP+Y,kBAAkB3B,GAChB,MAEMvL,EAASrN,KAAKC,IAAIoL,OAAOyN,YAAazf,SAAS0f,KAAKyB,aAAenhB,SAAS0f,KAAKlN,WAEvF,OAAIhW,KAAKC,EAAE+L,SAAS8V,aACX3X,KAAKG,IAAIyY,EAAWxL,IALd,EAK6BpN,KAAKC,IAAI5G,SAAS0f,KAAKlN,UAAW,GAJ5D,KAI6E,KAEtF7L,KAAKG,IAAIkN,EAASuL,EAAWvL,OAPvB,EACG,KAMkD,KAItEoN,gBAAgBC,GACd,GAAIA,GAAgB,EAClB,OAAO7kB,KAAKkK,OAAO2a,GAIvBC,gBAAgBjb,EAAMxC,GACpB,OAAOwC,IAASxC,EAGlB0d,aAAajgB,GACPA,EAAEsH,QAAUtH,EAAEsH,OAAO4X,aAAelf,EAAEsH,OAAO4X,YAAYhW,iBAC3DhO,KAAKgL,iBAAiBlG,EAAEsH,OAAO4X,aAGjChkB,KAAKwM,cAAc,IAAIL,YAAY,qBAAsBC,QAASvC,KAAM/E,EAAE8Y,MAAM/T,SAOlF8D,aAAa/N,GACX,GAAII,KAAKkK,QAAUtK,EACjB,IAAK,IAAImO,EAAI,EAAGA,EAAI/N,KAAKkK,OAAOnI,OAAQgM,IACtC,GAAI/N,KAAK8J,aAAa9J,KAAKkK,OAAO6D,IAAI9D,WAAW4D,gBAC/CjO,EAAMqK,WAAW4D,cACjB,OAAOE,EAKb,OAAQ,EAOVjE,aAAaD,GACX,IAAIjK,EAAQiK,EAAO7J,KAAKgK,IAAIhK,KAAK6jB,eAAgBha,UAIjD,gBAHIjK,IACFA,EAAQiK,EAAOA,EAAKI,WAAa,IAE5BrK,EAGTolB,eAAeH,EAAcI,GAC3B,OAAOJ,GAAgBI,EAGzBC,iBAAiBL,EAAcI,GAC7B,OAAOjlB,KAAKglB,eAAeH,EAAcI,GAAWhb,WAGtDkb,aAAaF,GACX,gBAAOA,GAA0B,SAGnCG,qBAAqBjX,GACfA,GAAS,GACXnO,KAAKqlB,gBAAgBlX,GAIzBkX,gBAAgBlX,GACd,MAAMmX,EAAoBtlB,KAAKulB,qBAC/B,YAAID,EAEF,OAGF,IAAIE,EAAcrX,EAEdA,EAAQnO,KAAKyL,UAAU+I,iBAAmB,EAE5CgR,EAAcrX,EAAQmX,EAAoB,EACjCnX,EAAQnO,KAAKyL,UAAUwI,oBAGhCuR,EAAcxlB,KAAKyL,UAAUwI,mBAE/BjU,KAAKyL,UAAUyR,cAAc/S,KAAKG,IAAI,EAAGkb,IAGzC,MAAMnR,EAAOrU,KAAKyL,UAAUyN,kBAAkB/K,GAC5CsQ,EAAeze,KAAKyL,UAAU8F,eAAe8C,GAC/C,IAAKoK,EACH,OAEF,MAAMgH,EAAmBhH,EAAarC,wBACpCsJ,EAAe1lB,KAAKikB,UAAU7H,wBAC9BuJ,EAAkBF,EAAiBjO,OAASkO,EAAalO,OAASxX,KAAK4lB,4BACrED,EAAkB,IACpB3lB,KAAKikB,UAAUjO,WAAa2P,GAIhCna,sBACExL,KAAKyL,UAAUsJ,UAGjBhJ,uBACM/L,KAAKkK,QACPlK,KAAKqlB,gBAAgBrlB,KAAKmH,eAS9Bid,2BACE,MAAM9I,EAAWtb,KAAKyL,UACtB6P,EAASzW,iBAAiB,QAASC,IACjC,MAAM+gB,EAAWvK,EAAS2I,WAAa3I,EAASlG,aAC1C0Q,EAAuC,IAAvBD,EAAS7P,UACzB+P,EAAoBF,EAASlB,aAAekB,EAAS7P,UAAY6P,EAASG,cAAiB,EAE7FF,GAAiBhhB,EAAEmhB,OAAS,EAC9BnhB,EAAEkB,iBACO+f,GAAoBjhB,EAAEmhB,OAAS,GACxCnhB,EAAEkB,mBAKR2F,2BACE3L,KAAKkmB,yCACLlmB,KAAKyL,UAAUE,2BAGjBia,kCACE,YAAI5lB,KAAKkmB,kCAAiD,CACxD,MAAMC,EAAa3Q,OAAOC,iBAAiBzV,KAAKyL,UAAUxL,EAAE4G,OAC5D7G,KAAKkmB,mCACHC,EAAWC,cACXD,EAAWE,mBACXC,IAAIvG,GACGrK,SAASqK,EAAG,KAClBwG,OAAO,CAACC,EAAKzG,IACPyG,EAAMzG,GAIjB,OAAO/f,KAAKkmB,kCAGdX,qBACE,GAAKvlB,KAAKyL,UAUV,OALAzL,KAAKyL,UAAUgb,eAAe,qBAE9BzmB,KAAKyL,UAAUyR,cAAcld,KAAKyL,UAAUwI,mBAE5CjU,KAAK2L,2BACE3L,KAAKyL,UAAU+I,iBAAmBxU,KAAKyL,UAAUwI,kBAAoB,EAG9EyS,YAAY7c,GACVA,EAAwB,iBAATA,EAAqB7J,KAAKkK,OAAOL,GAAQA,EACpD7J,KAAKyL,UAAUpE,eAAiBwC,GAClC7J,KAAKyL,UAAUgS,WAAW5T,GAI9BsF,gBAAgBrK,GACVA,EAAEwH,YACJxH,EAAEkB,iBAINgF,iBAAiBlG,GACfA,EAAEkJ,kBAGJ2Y,QAAQC,EAAa1f,GACnB,QAAQA,GAAalH,KAAKkK,QAAWlK,KAAKkK,OAAOnI,SAIrDwE,eAAeC,OAAOmd,EAA+B5lB,GAAI4lB,qBCtUnDkD,UAA6BlpB,OAAAwI,EAAAtI,EAA7BgpB,CAA2CngB,EAAc/I,OAAAgkB,EAAAlgB,EAAA9D,EAC5D+L,EAAA7L,GAAuBuI,EAAAvI,MAExBwI,sBACE,OAAO/H,EAAA;;;;;EAQTP,gBACE,MAAO,yBAGTU,wBACE,OAKEqoB,cACEloB,KAAMC,OACNH,MAAO,SAGTwE,cACEtE,KAAMmoB,QACNC,cAKNtiB,QACEH,MAAMG,QACN1E,KAAKyH,eAAiBzH,KAAKuO,cAAc,kBACzCvO,KAAK0H,cAAgB1H,KAAKuO,cAAc,iBAG1C3I,cACE,OAAO5F,KAAKkhB,cAAc/G,gBAAkBna,KAAKkD,aAGnD8d,oBACEzc,MAAMyc,oBAENhhB,KAAKinB,iBAAiBjnB,KAAKuO,cADP,uEAEpBvO,KAAKiL,oBACLjL,KAAKgV,OAAOhV,KAAKkD,aAAc,QAAS,sBACxClD,KAAKkP,oBAGP5J,uBACEf,MAAMe,uBACNtF,KAAKkV,SAASlV,KAAKkD,aAAc,QAAS,sBAC1ClD,KAAKoP,oBAGP8X,wBACE,OAAOvpB,OAAAwpB,EAAAC,gBAAAzpB,CAAgBqC,KAAK8mB,cAG9Bnf,yBACE,OAAO3H,KAAKkD,cAAgBlD,KAAKkD,aAAalD,KAAKknB,mBAGrDvf,uBAAuBjJ,GACjBsB,KAAKkD,eACPlD,KAAKkD,aAAalD,KAAKknB,mBAAqBxoB,IAKlD6H,eAAeC,OAAOqgB,EAAqB9oB,GAAI8oB","file":"dbdd18a3082c2e2e0029.chunk.js","sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nUse `<paper-item-body>` in a `<paper-item>` or `<paper-icon-item>` to make two- or\nthree- line items. It is a flex item that is a vertical flexbox.\n\n    <paper-item>\n      <paper-item-body two-line>\n        <div>Show your status</div>\n        <div secondary>Your status is visible to everyone</div>\n      </paper-item-body>\n    </paper-item>\n\nThe child elements with the `secondary` attribute is given secondary text styling.\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-body-two-line-min-height`   | Minimum height of a two-line item          | `72px`\n`--paper-item-body-three-line-min-height` | Minimum height of a three-line item        | `88px`\n`--paper-item-body-secondary-color`       | Foreground color for the `secondary` area  | `--secondary-text-color`\n`--paper-item-body-secondary`             | Mixin applied to the `secondary` area      | `{}`\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/default-theme.js';\nimport '@polymer/paper-styles/typography.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        overflow: hidden; /* needed for text-overflow: ellipsis to work on ff */\n        @apply --layout-vertical;\n        @apply --layout-center-justified;\n        @apply --layout-flex;\n      }\n\n      :host([two-line]) {\n        min-height: var(--paper-item-body-two-line-min-height, 72px);\n      }\n\n      :host([three-line]) {\n        min-height: var(--paper-item-body-three-line-min-height, 88px);\n      }\n\n      :host > ::slotted(*) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      :host > ::slotted([secondary]) {\n        @apply --paper-font-body1;\n\n        color: var(--paper-item-body-secondary-color, var(--secondary-text-color));\n\n        @apply --paper-item-body-secondary;\n      }\n    </style>\n\n    <slot></slot>\n`,\n\n  is: 'paper-item-body'\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n`iron-autogrow-textarea` is an element containing a textarea that grows in height as more\nlines of input are entered. Unless an explicit height or the `maxRows` property is set, it will\nnever scroll.\n\nExample:\n\n    <iron-autogrow-textarea></iron-autogrow-textarea>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--iron-autogrow-textarea` | Mixin applied to the textarea | `{}`\n`--iron-autogrow-textarea-placeholder` | Mixin applied to the textarea placeholder | `{}`\n\n@group Iron Elements\n@hero hero.svg\n@demo demo/index.html\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { IronControlState } from '@polymer/iron-behaviors/iron-control-state.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport { IronValidatableBehavior } from '@polymer/iron-validatable-behavior/iron-validatable-behavior.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { dom } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-block;\n        position: relative;\n        width: 400px;\n        border: 1px solid;\n        padding: 2px;\n        -moz-appearance: textarea;\n        -webkit-appearance: textarea;\n        overflow: hidden;\n      }\n\n      .mirror-text {\n        visibility: hidden;\n        word-wrap: break-word;\n        @apply --iron-autogrow-textarea;\n      }\n\n      .fit {\n        @apply --layout-fit;\n      }\n\n      textarea {\n        position: relative;\n        outline: none;\n        border: none;\n        resize: none;\n        background: inherit;\n        color: inherit;\n        /* see comments in template */\n        width: 100%;\n        height: 100%;\n        font-size: inherit;\n        font-family: inherit;\n        line-height: inherit;\n        text-align: inherit;\n        @apply --iron-autogrow-textarea;\n      }\n\n      textarea::-webkit-input-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n\n      textarea:-moz-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n\n      textarea::-moz-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n\n      textarea:-ms-input-placeholder {\n        @apply --iron-autogrow-textarea-placeholder;\n      }\n    </style>\n\n    <!-- the mirror sizes the input/textarea so it grows with typing -->\n    <!-- use &#160; instead &nbsp; of to allow this element to be used in XHTML -->\n    <div id=\"mirror\" class=\"mirror-text\" aria-hidden=\"true\">&nbsp;</div>\n\n    <!-- size the input/textarea with a div, because the textarea has intrinsic size in ff -->\n    <div class=\"textarea-container fit\">\n      <textarea id=\"textarea\" name\\$=\"[[name]]\" aria-label\\$=\"[[label]]\" autocomplete\\$=\"[[autocomplete]]\" autofocus\\$=\"[[autofocus]]\" inputmode\\$=\"[[inputmode]]\" placeholder\\$=\"[[placeholder]]\" readonly\\$=\"[[readonly]]\" required\\$=\"[[required]]\" disabled\\$=\"[[disabled]]\" rows\\$=\"[[rows]]\" minlength\\$=\"[[minlength]]\" maxlength\\$=\"[[maxlength]]\"></textarea>\n    </div>\n`,\n\n  is: 'iron-autogrow-textarea',\n  behaviors: [IronValidatableBehavior, IronControlState],\n\n  properties: {\n    /**\n     * Use this property instead of `bind-value` for two-way data binding.\n     * @type {string|number}\n     */\n    value: {observer: '_valueChanged', type: String, notify: true},\n\n    /**\n     * This property is deprecated, and just mirrors `value`. Use `value`\n     * instead.\n     * @type {string|number}\n     */\n    bindValue: {observer: '_bindValueChanged', type: String, notify: true},\n\n    /**\n     * The initial number of rows.\n     *\n     * @attribute rows\n     * @type number\n     * @default 1\n     */\n    rows: {type: Number, value: 1, observer: '_updateCached'},\n\n    /**\n     * The maximum number of rows this element can grow to until it\n     * scrolls. 0 means no maximum.\n     *\n     * @attribute maxRows\n     * @type number\n     * @default 0\n     */\n    maxRows: {type: Number, value: 0, observer: '_updateCached'},\n\n    /**\n     * Bound to the textarea's `autocomplete` attribute.\n     */\n    autocomplete: {type: String, value: 'off'},\n\n    /**\n     * Bound to the textarea's `autofocus` attribute.\n     */\n    autofocus: {type: Boolean, value: false},\n\n    /**\n     * Bound to the textarea's `inputmode` attribute.\n     */\n    inputmode: {type: String},\n\n    /**\n     * Bound to the textarea's `placeholder` attribute.\n     */\n    placeholder: {type: String},\n\n    /**\n     * Bound to the textarea's `readonly` attribute.\n     */\n    readonly: {type: String},\n\n    /**\n     * Set to true to mark the textarea as required.\n     */\n    required: {type: Boolean},\n\n    /**\n     * The minimum length of the input value.\n     */\n    minlength: {type: Number},\n\n    /**\n     * The maximum length of the input value.\n     */\n    maxlength: {type: Number},\n\n    /**\n     * Bound to the textarea's `aria-label` attribute.\n     */\n    label: {type: String}\n\n  },\n\n  listeners: {'input': '_onInput'},\n\n  /**\n   * Returns the underlying textarea.\n   * @return {!HTMLTextAreaElement}\n   */\n  get textarea() {\n    return this.$.textarea;\n  },\n\n  /**\n   * Returns textarea's selection start.\n   * @return {number}\n   */\n  get selectionStart() {\n    return this.$.textarea.selectionStart;\n  },\n\n  /**\n   * Returns textarea's selection end.\n   * @return {number}\n   */\n  get selectionEnd() {\n    return this.$.textarea.selectionEnd;\n  },\n\n  /**\n   * Sets the textarea's selection start.\n   */\n  set selectionStart(value) {\n    this.$.textarea.selectionStart = value;\n  },\n\n  /**\n   * Sets the textarea's selection end.\n   */\n  set selectionEnd(value) {\n    this.$.textarea.selectionEnd = value;\n  },\n\n  attached: function() {\n    /* iOS has an arbitrary left margin of 3px that isn't present\n     * in any other browser, and means that the paper-textarea's cursor\n     * overlaps the label.\n     * See https://github.com/PolymerElements/paper-input/issues/468.\n     */\n    var IS_IOS = navigator.userAgent.match(/iP(?:[oa]d|hone)/);\n    if (IS_IOS) {\n      this.$.textarea.style.marginLeft = '-3px';\n    }\n  },\n\n  /**\n   * Returns true if `value` is valid. The validator provided in `validator`\n   * will be used first, if it exists; otherwise, the `textarea`'s validity\n   * is used.\n   * @return {boolean} True if the value is valid.\n   */\n  validate: function() {\n    // Use the nested input's native validity.\n    var valid = this.$.textarea.validity.valid;\n\n    // Only do extra checking if the browser thought this was valid.\n    if (valid) {\n      // Empty, required input is invalid\n      if (this.required && this.value === '') {\n        valid = false;\n      } else if (this.hasValidator()) {\n        valid = IronValidatableBehavior.validate.call(this, this.value);\n      }\n    }\n\n    this.invalid = !valid;\n    this.fire('iron-input-validate');\n    return valid;\n  },\n\n  _bindValueChanged: function(bindValue) {\n    this.value = bindValue;\n  },\n\n  _valueChanged: function(value) {\n    var textarea = this.textarea;\n    if (!textarea) {\n      return;\n    }\n\n    // If the bindValue changed manually, then we need to also update\n    // the underlying textarea's value. Otherwise this change was probably\n    // generated from the _onInput handler, and the two values are already\n    // the same.\n    if (textarea.value !== value) {\n      textarea.value = !(value || value === 0) ? '' : value;\n    }\n\n    this.bindValue = value;\n    this.$.mirror.innerHTML = this._valueForMirror();\n\n    // Manually notify because we don't want to notify until after setting\n    // value.\n    this.fire('bind-value-changed', {value: this.bindValue});\n  },\n\n  _onInput: function(event) {\n    var eventPath = dom(event).path;\n    this.value = eventPath ? eventPath[0].value : event.target.value;\n  },\n\n  _constrain: function(tokens) {\n    var _tokens;\n    tokens = tokens || [''];\n    // Enforce the min and max heights for a multiline input to avoid\n    // measurement\n    if (this.maxRows > 0 && tokens.length > this.maxRows) {\n      _tokens = tokens.slice(0, this.maxRows);\n    } else {\n      _tokens = tokens.slice(0);\n    }\n    while (this.rows > 0 && _tokens.length < this.rows) {\n      _tokens.push('');\n    }\n    // Use &#160; instead &nbsp; of to allow this element to be used in XHTML.\n    return _tokens.join('<br/>') + '&#160;';\n  },\n\n  _valueForMirror: function() {\n    var input = this.textarea;\n    if (!input) {\n      return;\n    }\n    this.tokens = (input && input.value) ? input.value.replace(/&/gm, '&amp;')\n                                               .replace(/\"/gm, '&quot;')\n                                               .replace(/'/gm, '&#39;')\n                                               .replace(/</gm, '&lt;')\n                                               .replace(/>/gm, '&gt;')\n                                               .split('\\n') :\n                                           [''];\n    return this._constrain(this.tokens);\n  },\n\n  _updateCached: function() {\n    this.$.mirror.innerHTML = this._constrain(this.tokens);\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\n`<paper-textarea>` is a multi-line text field with Material Design styling.\n\n    <paper-textarea label=\"Textarea label\"></paper-textarea>\n\nSee `Polymer.PaperInputBehavior` for more API docs.\n\n### Validation\n\nCurrently only `required` and `maxlength` validation is supported.\n\n### Styling\n\nSee `Polymer.PaperInputContainer` for a list of custom properties used to\nstyle this element.\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-autogrow-textarea/iron-autogrow-textarea.js';\nimport { IronFormElementBehavior } from '@polymer/iron-form-element-behavior/iron-form-element-behavior.js';\nimport { PaperInputBehavior } from './paper-input-behavior.js';\nimport './paper-input-char-counter.js';\nimport './paper-input-container.js';\nimport './paper-input-error.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      label {\n        pointer-events: none;\n      }\n    </style>\n\n    <paper-input-container no-label-float\\$=\"[[noLabelFloat]]\" always-float-label=\"[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]\" auto-validate\\$=\"[[autoValidate]]\" disabled\\$=\"[[disabled]]\" invalid=\"[[invalid]]\">\n\n      <label hidden\\$=\"[[!label]]\" aria-hidden=\"true\" for\\$=\"[[_inputId]]\" slot=\"label\">[[label]]</label>\n\n      <iron-autogrow-textarea class=\"paper-input-input\" slot=\"input\" id\\$=\"[[_inputId]]\" aria-labelledby\\$=\"[[_ariaLabelledBy]]\" aria-describedby\\$=\"[[_ariaDescribedBy]]\" bind-value=\"{{value}}\" invalid=\"{{invalid}}\" validator\\$=\"[[validator]]\" disabled\\$=\"[[disabled]]\" autocomplete\\$=\"[[autocomplete]]\" autofocus\\$=\"[[autofocus]]\" inputmode\\$=\"[[inputmode]]\" name\\$=\"[[name]]\" placeholder\\$=\"[[placeholder]]\" readonly\\$=\"[[readonly]]\" required\\$=\"[[required]]\" minlength\\$=\"[[minlength]]\" maxlength\\$=\"[[maxlength]]\" autocapitalize\\$=\"[[autocapitalize]]\" rows\\$=\"[[rows]]\" max-rows\\$=\"[[maxRows]]\" on-change=\"_onChange\"></iron-autogrow-textarea>\n\n      <template is=\"dom-if\" if=\"[[errorMessage]]\">\n        <paper-input-error aria-live=\"assertive\" slot=\"add-on\">[[errorMessage]]</paper-input-error>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[charCounter]]\">\n        <paper-input-char-counter slot=\"add-on\"></paper-input-char-counter>\n      </template>\n\n    </paper-input-container>\n`,\n\n  is: 'paper-textarea',\n\n  behaviors: [\n    PaperInputBehavior,\n    IronFormElementBehavior,\n  ],\n\n  properties: {\n    _ariaLabelledBy: {\n      observer: '_ariaLabelledByChanged',\n      type: String,\n    },\n\n    _ariaDescribedBy: {\n      observer: '_ariaDescribedByChanged',\n      type: String,\n    },\n\n    /**\n     * The initial number of rows.\n     *\n     * @attribute rows\n     * @type number\n     * @default 1\n     */\n    rows: {\n      type: Number,\n      value: 1,\n    },\n\n    /**\n     * The maximum number of rows this element can grow to until it\n     * scrolls. 0 means no maximum.\n     *\n     * @attribute maxRows\n     * @type number\n     * @default 0\n     */\n    maxRows: {\n      type: Number,\n      value: 0,\n    },\n  },\n\n  /**\n   * @return {number}\n   */\n  get selectionStart() {\n    return this.$.input.textarea.selectionStart;\n  },\n\n  set selectionStart(start) {\n    this.$.input.textarea.selectionStart = start;\n  },\n\n  /**\n   * @return {number}\n   */\n  get selectionEnd() {\n    return this.$.input.textarea.selectionEnd;\n  },\n\n  set selectionEnd(end) {\n    this.$.input.textarea.selectionEnd = end;\n  },\n\n  _ariaLabelledByChanged: function(ariaLabelledBy) {\n    this._focusableElement.setAttribute('aria-labelledby', ariaLabelledBy);\n  },\n\n  _ariaDescribedByChanged: function(ariaDescribedBy) {\n    this._focusableElement.setAttribute('aria-describedby', ariaDescribedBy);\n  },\n\n  get _focusableElement() {\n    return this.inputElement.textarea;\n  }\n});\n","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an interactive list\nitem with a fixed-width icon area, according to Material Design. This is useful if the icons are of\nvarying widths, but you want the item bodies to line up. Use this like a `<paper-item>`. The child\nnode with the slot name `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property               | Description                                    | Default\n------------------------------|------------------------------------------------|----------\n`--paper-item-icon-width`     | Width of the icon area                         | `56px`\n`--paper-item-icon`           | Mixin applied to the icon area                 | `{}`\n`--paper-icon-item`           | Mixin applied to the item                      | `{}`\n`--paper-item-selected-weight`| The font weight of a selected item             | `bold`\n`--paper-item-selected`       | Mixin applied to selected paper-items                | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items             | `--disabled-text-color`\n`--paper-item-disabled`       | Mixin applied to disabled paper-items        | `{}`\n`--paper-item-focused`        | Mixin applied to focused paper-items         | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport { PaperItemBehavior } from './paper-item-behavior.js';\nimport './paper-item-shared-styles.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","import '@vaadin/vaadin-lumo-styles/mixins/overlay.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-vaadin-overlay\" theme-for=\"vaadin-overlay\">\n  <template>\n    <style include=\"lumo-overlay\">\n      /* stylelint-disable no-empty-source */\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","import '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-overlay/theme/lumo/vaadin-overlay.js';\nimport '@vaadin/vaadin-lumo-styles/mixins/menu-overlay.js';\nconst $_documentContainer = document.createElement('div');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-combo-box-overlay\" theme-for=\"vaadin-combo-box-overlay\">\n  <template>\n    <style include=\"lumo-overlay lumo-menu-overlay-core\">\n      [part=\"content\"] {\n        padding: 0;\n      }\n\n      :host {\n        /* TODO: using a legacy mixin (unsupported) */\n        --iron-list-items-container: {\n          border-width: var(--lumo-space-xs);\n          border-style: solid;\n          border-color: transparent;\n        };\n      }\n\n      /* TODO: workaround ShadyCSS issue when using inside of the dom-if */\n      :host([opened]) {\n        --iron-list-items-container_-_border-width: var(--lumo-space-xs);\n        --iron-list-items-container_-_border-style: solid;\n        --iron-list-items-container_-_border-color: transparent;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n","import '@vaadin/vaadin-lumo-styles/font-icons.js';\nimport '@vaadin/vaadin-lumo-styles/sizing.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-lumo-styles/typography.js';\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-item\" theme-for=\"vaadin-item\">\n  <template>\n    <style>\n      :host {\n        display: flex;\n        align-items: center;\n        box-sizing: border-box;\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size-m);\n        line-height: var(--lumo-line-height-xs);\n        padding: 0.5em 1em;\n        min-height: var(--lumo-size-m);\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-tap-highlight-color: transparent;\n      }\n\n      /* Selectable items have a checkmark icon */\n      :host([tabindex])::before {\n        display: var(--_lumo-item-selected-icon-display, none);\n        content: var(--lumo-icons-checkmark);\n        font-family: lumo-icons;\n        font-size: var(--lumo-icon-size-m);\n        line-height: 1;\n        font-weight: normal;\n        width: 1em;\n        height: 1em;\n        margin: calc((1 - var(--lumo-line-height-xs)) * var(--lumo-font-size-m) / 2) 0;\n        color: var(--lumo-primary-text-color);\n        flex: none;\n        opacity: 0;\n        transition: transform 0.2s cubic-bezier(.12, .32, .54, 2), opacity 0.1s;\n      }\n\n      :host([selected])::before {\n        opacity: 1;\n      }\n\n      :host([active]:not([selected]))::before {\n        transform: scale(0.8);\n        opacity: 0;\n        transition-duration: 0s;\n      }\n\n      [part=\"content\"] {\n        flex: auto;\n      }\n\n      /* Disabled item */\n\n      :host([disabled]) {\n        color: var(--lumo-disabled-text-color);\n        cursor: default;\n        pointer-events: none;\n      }\n\n      /* Slotted icons */\n\n      :host ::slotted(iron-icon) {\n        width: var(--lumo-icon-size-m);\n        height: var(--lumo-icon-size-m);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\n/**\n * A mixin providing `focused`, `focus-ring`, `active`, `disabled` and `selected`.\n *\n * `focused`, `active` and `focus-ring` are set as only as attributes.\n * @polymerMixin\n */\nexport const ItemMixin = superClass => class VaadinItemMixin extends superClass {\n  static get properties() {\n    return {\n\n      /**\n       * Used for mixin detection because `instanceof` does not work with mixins.\n       * e.g. in VaadinListMixin it filters items by using the\n       * `element._hasVaadinItemMixin` condition.\n       */\n      _hasVaadinItemMixin: {\n        value: true\n      },\n\n      /**\n       * If true, the user cannot interact with this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        observer: '_disabledChanged',\n        reflectToAttribute: true\n      },\n\n      /**\n       * If true, the item is in selected state.\n       */\n      selected: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_selectedChanged'\n      },\n\n      _value: String\n    };\n  }\n\n  constructor() {\n    super();\n\n    /**\n     * Submittable string value. The default value is the trimmed text content of the element.\n     * @type {string}\n     */\n    this.value;\n  }\n\n  get value() {\n    return this._value !== undefined ? this._value : this.textContent.trim();\n  }\n\n  set value(value) {\n    this._value = value;\n  }\n\n  ready() {\n    super.ready();\n\n    const attrValue = this.getAttribute('value');\n    if (attrValue !== null) {\n      this.value = attrValue;\n    }\n\n    this.addEventListener('focus', e => this._setFocused(true), true);\n    this.addEventListener('blur', e => this._setFocused(false), true);\n    this.addEventListener('mousedown', e => {\n      this._setActive(this._mousedown = true);\n      const mouseUpListener = () => {\n        this._setActive(this._mousedown = false);\n        document.removeEventListener('mouseup', mouseUpListener);\n      };\n      document.addEventListener('mouseup', mouseUpListener);\n    });\n    this.addEventListener('keydown', e => this._onKeydown(e));\n    this.addEventListener('keyup', e => this._onKeyup(e));\n  }\n\n  /**\n   * @protected\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    // in Firefox and Safari, blur does not fire on the element when it is removed,\n    // especially between keydown and keyup events, being active at the same time.\n    // reproducible in `<vaadin-dropdown-menu>` when closing overlay on select.\n    if (this.hasAttribute('active')) {\n      this._setFocused(false);\n    }\n  }\n\n  _selectedChanged(selected) {\n    this.setAttribute('aria-selected', selected);\n  }\n\n  _disabledChanged(disabled) {\n    if (disabled) {\n      this.selected = false;\n      this.setAttribute('aria-disabled', 'true');\n      this.blur();\n    } else {\n      this.removeAttribute('aria-disabled');\n    }\n  }\n\n  _setFocused(focused) {\n    if (focused) {\n      this.setAttribute('focused', '');\n      if (!this._mousedown) {\n        this.setAttribute('focus-ring', '');\n      }\n    } else {\n      this.removeAttribute('focused');\n      this.removeAttribute('focus-ring');\n      this._setActive(false);\n    }\n  }\n\n  _setActive(active) {\n    if (active) {\n      this.setAttribute('active', '');\n    } else {\n      this.removeAttribute('active');\n    }\n  }\n\n  _onKeydown(event) {\n    if (/^( |SpaceBar|Enter)$/.test(event.key)) {\n      event.preventDefault();\n      this._setActive(true);\n    }\n  }\n\n  _onKeyup(event) {\n    if (this.hasAttribute('active')) {\n      this._setActive(false);\n      this.click();\n    }\n  }\n};\n","/**\n@license\nCopyright (c) 2017 Vaadin Ltd.\nThis program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n*/\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ItemMixin } from './vaadin-item-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * `<vaadin-item>` is a Polymer 2 element providing layout for items in tabs and menus.\n *\n * ```\n *   <vaadin-item>\n *     Item content\n *   </vaadin-item>\n * ```\n *\n * ### Selectable\n *\n * `<vaadin-item>` has the `selected` property and the corresponding state attribute.\n * Currently, the component sets the `selected` to false, when `disabled` property is set to true.\n * But other than that, the `<vaadin-item>` does not switch selection by itself.\n * In general, it is the wrapper component, like `<vaadin-list-box>`, which should update\n * the `selected` property on the items, e. g. on mousedown or when Enter / Spacebar is pressed.\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ---|---\n * `content` | The element that wraps the slot\n *\n * The following state attributes are available for styling:\n *\n * Attribute  | Description | Part name\n * -----------|-------------|------------\n * `disabled` | Set to a disabled item | :host\n * `focused` | Set when the element is focused | :host\n * `focus-ring` | Set when the element is keyboard focused | :host\n * `selected` | Set when the item is selected | :host\n * `active` | Set when mousedown or enter/spacebar pressed | :host\n *\n * @memberof Vaadin\n * @mixes Vaadin.ItemMixin\n * @mixes Vaadin.ThemableMixin\n */\nclass ItemElement extends ItemMixin(ThemableMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: inline-block;\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n    </style>\n    <div part=\"content\">\n      <slot></slot>\n    </div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-item';\n  }\n\n  static get version() {\n    return '2.0.0-pre.3';\n  }\n}\n\ncustomElements.define(ItemElement.is, ItemElement);\n\nexport { ItemElement };\n","import '@vaadin/vaadin-lumo-styles/color.js';\nimport '@vaadin/vaadin-lumo-styles/spacing.js';\nimport '@vaadin/vaadin-lumo-styles/style.js';\nimport '@vaadin/vaadin-item/theme/lumo/vaadin-item.js';\nconst $_documentContainer = document.createElement('div');\n$_documentContainer.setAttribute('style', 'display: none;');\n\n$_documentContainer.innerHTML = `<dom-module id=\"lumo-combo-box-item\" theme-for=\"vaadin-combo-box-item\">\n  <template>\n    <style include=\"lumo-item\">\n      /* TODO partly duplicated from vaadin-list-box styles. Should find a way to make it DRY */\n\n      :host {\n        cursor: default;\n        -webkit-tap-highlight-color: var(--lumo-primary-color-10pct);\n        padding-left: calc(var(--lumo-border-radius) / 4);\n        padding-right: calc(var(--lumo-space-l) + var(--lumo-border-radius) / 4);\n        transition: background-color 100ms;\n        border-radius: var(--lumo-border-radius);\n        overflow: hidden;\n        --_lumo-item-selected-icon-display: block;\n      }\n\n      /* ShadyCSS workaround (show the selected item checkmark) */\n      :host::before {\n        display: block;\n      }\n\n      :host(:hover) {\n        background-color: var(--lumo-primary-color-10pct);\n      }\n\n      :host([focused]:not([disabled])) {\n        box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);\n      }\n\n      @media (pointer: coarse) {\n        :host(:hover) {\n          background-color: transparent;\n        }\n\n        :host([focused]:not([disabled])) {\n          box-shadow: none;\n        }\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer);\n","import '@polymer/polymer/polymer-element.js';\nimport { templatize } from '@polymer/polymer/lib/utils/templatize.js';\nimport { IronA11yAnnouncer } from '@polymer/iron-a11y-announcer/iron-a11y-announcer.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { flush } from '@polymer/polymer/lib/utils/flush.js';\nimport { microTask } from '@polymer/polymer/lib/utils/async.js';\n\nexport const ComboBoxMixin = subclass => class VaadinComboBoxMixinElement extends subclass {\n\n  static get properties() {\n    return {\n      /**\n       * True if the dropdown is open, false otherwise.\n       */\n      opened: {\n        type: Boolean,\n        notify: true,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_openedChanged'\n      },\n\n      /**\n       * Set to true to disable this element.\n       */\n      disabled: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * When present, it specifies that the element field is read-only.\n       */\n      readonly: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * A full set of items to filter the visible options from.\n       * The items can be of either `String` or `Object` type.\n       */\n      items: {\n        type: Array\n      },\n\n      /**\n       * If `true`, the user can input a value that is not present in the items list.\n       * `value` property will be set to the input value in this case.\n       * Also, when `value` is set programmatically, the input value will be set\n       * to reflect that value.\n       */\n      allowCustomValue: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * A subset of items, filtered based on the user input. Filtered items\n       * can be assigned directly to omit the internal filtering functionality.\n       * The items can be of either `String` or `Object` type.\n       */\n      filteredItems: {\n        type: Array\n      },\n\n      /**\n       * The `String` value for the selected item of the combo box. Provides\n       * the value for `iron-form`.\n       *\n       * When theres no item selected, the value is an empty string.\n       *\n       * Use `selectedItem` property to get the raw selected item from\n       * the `items` array.\n       */\n      value: {\n        type: String,\n        observer: '_valueChanged',\n        notify: true,\n        value: ''\n      },\n\n      /**\n       * Used to detect user value changes and fire `change` events.\n       */\n      _lastCommittedValue: String,\n\n      /*\n       * When set to `true`, \"loading\" attribute is added to host and the overlay element.\n       */\n      loading: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      _focusedIndex: {\n        type: Number,\n        value: -1\n      },\n\n      /**\n       * Filtering string the user has typed into the input field.\n       */\n      filter: {\n        type: String,\n        value: '',\n        notify: true\n      },\n\n      /**\n       * The selected item from the `items` array.\n       */\n      selectedItem: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * Path for label of the item. If `items` is an array of objects, the\n       * `itemLabelPath` is used to fetch the displayed string label for each\n       * item.\n       *\n       * The item label is also used for matching items when processing user\n       * input, i.e., for filtering and selecting items.\n       *\n       * When using item templates, the property is still needed because it is used\n       * for filtering, and for displaying the selected item value in the input box.\n       */\n      itemLabelPath: {\n        type: String,\n        value: 'label'\n      },\n\n      /**\n       * Path for the value of the item. If `items` is an array of objects, the\n       * `itemValuePath:` is used to fetch the string value for the selected\n       * item.\n       *\n       * The item value is used in the `value` property of the combo box,\n       * to provide the form value.\n       */\n      itemValuePath: {\n        type: String,\n        value: 'value'\n      },\n\n      /**\n       * The name of this element.\n       */\n      name: {\n        type: String\n      },\n\n      /**\n       * Set to true if the value is invalid.\n       */\n      invalid: {\n        type: Boolean,\n        reflectToAttribute: true,\n        notify: true,\n        value: false\n      },\n\n      _toggleElement: Object,\n      _clearElement: Object,\n\n      _inputElementValue: String,\n\n      _closeOnBlurIsPrevented: Boolean,\n\n      _previousDocumentPointerEvents: String\n    };\n  }\n\n  static get observers() {\n    return [\n      '_filterChanged(filter, itemValuePath, itemLabelPath)',\n      '_itemsChanged(items.*, itemValuePath, itemLabelPath)',\n      '_filteredItemsChanged(filteredItems.*, itemValuePath, itemLabelPath)',\n      '_loadingChanged(loading)',\n      '_selectedItemChanged(selectedItem)',\n      '_toggleElementChanged(_toggleElement)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n\n    this.addEventListener('focusout', e => {\n      if (!this._closeOnBlurIsPrevented) {\n        this.close();\n      }\n    });\n\n    this._lastCommittedValue = this.value;\n    IronA11yAnnouncer.requestAvailability();\n\n    // 2.0 does not support 'overlay.selection-changed' syntax in listeners\n    this.$.overlay.addEventListener('selection-changed', this._overlaySelectedItemChanged.bind(this));\n\n    this.addEventListener('vaadin-combo-box-dropdown-closed', this._onClosed.bind(this));\n    this.addEventListener('vaadin-combo-box-dropdown-opened', this._onOpened.bind(this));\n    this.addEventListener('keydown', this._onKeyDown.bind(this));\n    this.addEventListener('click', this._onClick.bind(this));\n\n    this.$.overlay.addEventListener('vaadin-overlay-touch-action', this._onOverlayTouchAction.bind(this));\n\n    this.addEventListener('touchend', e => {\n      if (!this._clearElement || e.composedPath()[0] !== this._clearElement) {\n        return;\n      }\n\n      e.preventDefault();\n      this._clear();\n    });\n  }\n\n  /**\n   * Opens the dropdown list.\n   */\n  open() {\n    // Prevent _open() being called when input is disabled or read-only\n    if (!this.disabled && !this.readonly) {\n      this.opened = true;\n    }\n  }\n\n  /**\n   * Closes the dropdown list.\n   */\n  close() {\n    this.opened = false;\n  }\n\n  _openedChanged(value, old) {\n    // Prevent _close() being called when opened is set to its default value (false).\n    if (old === undefined) {\n      return;\n    }\n\n    if (this.opened) {\n      this._openedWithFocusRing = this.hasAttribute('focus-ring') || (this.focusElement && this.focusElement.hasAttribute('focus-ring'));\n      // For touch devices, we don't want to popup virtual keyboard on touch devices unless input\n      // is explicitly focused by the user.\n      if (!this.$.overlay.touchDevice) {\n        // Check to see if there is a focused property and if it's already true.\n        if (!this.focused) {\n          this.focus();\n        }\n      }\n    } else if (this._openedWithFocusRing && this.hasAttribute('focused')) {\n      this.focusElement.setAttribute('focus-ring', '');\n    }\n  }\n\n  _onOverlayTouchAction(event) {\n    // On touch devices, blur the input on touch start inside the overlay, in order to hide\n    // the virtual keyboard. But don't close the overlay on this blur.\n    this._closeOnBlurIsPrevented = true;\n    this.inputElement.blur();\n    this._closeOnBlurIsPrevented = false;\n  }\n\n  _onClick(e) {\n    this._closeOnBlurIsPrevented = true;\n\n    const path = e.composedPath();\n    if (path.indexOf(this._clearElement) !== -1) {\n      this._clear();\n      this.focus();\n    } else if (path.indexOf(this.inputElement) !== -1) {\n      if (path.indexOf(this._toggleElement) > -1 && this.opened) {\n        this.close();\n      } else {\n        this.open();\n      }\n    }\n\n    this._closeOnBlurIsPrevented = false;\n  }\n\n  /**\n   * Keyboard navigation\n   */\n\n  _onKeyDown(e) {\n    if (this._isEventKey(e, 'down')) {\n      this._closeOnBlurIsPrevented = true;\n      this._onArrowDown();\n      this._closeOnBlurIsPrevented = false;\n\n      // prevent caret from moving\n      e.preventDefault();\n    } else if (this._isEventKey(e, 'up')) {\n      this._closeOnBlurIsPrevented = true;\n      this._onArrowUp();\n      this._closeOnBlurIsPrevented = false;\n\n      // prevent caret from moving\n      e.preventDefault();\n    } else if (this._isEventKey(e, 'enter')) {\n      this._onEnter(e);\n    } else if (this._isEventKey(e, 'esc')) {\n      this._onEscape(e);\n    }\n  }\n\n  _isEventKey(e, k) {\n    return IronA11yKeysBehavior.keyboardEventMatchesKeys(e, k);\n  }\n\n  _getItemLabel(item) {\n    return this.$.overlay.getItemLabel(item);\n  }\n\n  _getItemValue(item) {\n    let value = item ? this.get(this.itemValuePath, item) : undefined;\n    if (value === undefined) {\n      value = item ? item.toString() : '';\n    }\n    return value;\n  }\n\n  _onArrowDown() {\n    if (this.opened) {\n      if (this.$.overlay._items) {\n        this._focusedIndex = Math.min(this.$.overlay._items.length - 1, this._focusedIndex + 1);\n        this._prefillFocusedItemLabel();\n      }\n    } else {\n      this.open();\n    }\n  }\n\n  _onArrowUp() {\n    if (this.opened) {\n      if (this._focusedIndex > -1) {\n        this._focusedIndex = Math.max(0, this._focusedIndex - 1);\n      } else {\n        if (this.$.overlay._items) {\n          this._focusedIndex = this.$.overlay._items.length - 1;\n        }\n      }\n\n      this._prefillFocusedItemLabel();\n    } else {\n      this.open();\n    }\n  }\n\n  _prefillFocusedItemLabel() {\n    if (this._focusedIndex > -1) {\n      // Reset the input value asyncronously to prevent partial value changes\n      // announce. Makes OSX VoiceOver to announce the complete value instead.\n      this._inputElementValue = '';\n      // 1ms delay needed for OSX VoiceOver to realise input value was reset\n      setTimeout(() => {\n        this._inputElementValue = this._getItemLabel(this.$.overlay._focusedItem);\n        this._markAllSelectionRange();\n      }, 1);\n    }\n  }\n\n  _setSelectionRange(start, end) {\n    // vaadin-text-field does not implement setSelectionRange, hence we need the native input\n    const input = this._nativeInput || this.inputElement;\n\n    // Setting selection range focuses and/or moves the caret in some browsers,\n    // and there's no need to modify the selection range if the input isn't focused anyway.\n    // This affects Safari. When the overlay is open, and then hiting tab, browser should focus\n    // the next focusable element instead of the combo-box itself.\n    // Checking the focused property here is enough instead of checking the activeElement.\n    if (this.hasAttribute('focused') && input && input.setSelectionRange) {\n      try {\n        input.setSelectionRange(start, end);\n      } catch (ignore) {\n        // IE11 randomly fails when running tests in Sauce.\n      }\n    }\n  }\n\n  _markAllSelectionRange() {\n    if (this._inputElementValue !== undefined) {\n      this._setSelectionRange(0, this._inputElementValue.length);\n    }\n  }\n\n  _clearSelectionRange() {\n    if (this._inputElementValue !== undefined) {\n      const pos = this._inputElementValue ? this._inputElementValue.length : 0;\n      this._setSelectionRange(pos, pos);\n    }\n  }\n\n  _onEnter(e) {\n    // should close on enter when custom values are allowed, input field is cleared, or when an existing\n    // item is focused with keyboard.\n    if (this.opened && (this.allowCustomValue || this._inputElementValue === '' || this._focusedIndex > -1)) {\n      this.close();\n\n      // Do not submit the surrounding form.\n      e.preventDefault();\n    }\n  }\n\n  _onEscape(e) {\n    if (this.opened) {\n      this._stopPropagation(e);\n\n      if (this._focusedIndex > -1) {\n        this._focusedIndex = -1;\n        this._revertInputValue();\n      } else {\n        this.cancel();\n      }\n    }\n  }\n\n  _toggleElementChanged(toggleElement) {\n    if (toggleElement) {\n      // Don't blur the input on toggle mousedown\n      toggleElement.addEventListener('mousedown', e => e.preventDefault());\n    }\n  }\n\n  /**\n   * Clears the current value.\n   */\n  _clear() {\n    this.selectedItem = null;\n\n    if (this.allowCustomValue) {\n      this.value = '';\n    }\n\n    if (!this.opened) {\n      this._detectAndDispatchChange();\n    }\n  }\n\n  /**\n   * Reverts back to original value.\n   */\n  cancel() {\n    this._revertInputValueToValue();\n    // In the next _detectAndDispatchChange() call, the change detection should not pass\n    this._lastCommittedValue = this.value;\n    this.close();\n  }\n\n  _onOpened() {\n    // Pre P2 iron-list used a debouncer to render. Now that we synchronously render items,\n    // we need to flush the DOM to make sure it doesn't get flushed in the middle of _render call\n    // because that will cause problems to say the least.\n    flush && flush();\n\n    // With iron-list v1.3.9, calling `notifyResize()` no longer renders\n    // the items synchronously. It is required to have the items rendered\n    // before we update the overlay and the list positions and sizes.\n    this.$.overlay.ensureItemsRendered();\n    this.$.overlay._selector.toggleScrollListener(true);\n\n    // Ensure metrics are up-to-date\n    this.$.overlay.updateViewportBoundaries();\n    microTask.run(() => this.$.overlay.adjustScrollPosition());\n    setTimeout(() => this.$.overlay.$.dropdown.notifyResize(), 1);\n\n\n    // _detectAndDispatchChange() should not consider value changes done before opening\n    this._lastCommittedValue = this.value;\n  }\n\n  _onClosed() {\n\n    // Happens when the overlay is closed by clicking outside\n    if (this.opened) {\n      this.close();\n    }\n\n    if (this.$.overlay._items && this._focusedIndex > -1) {\n      const focusedItem = this.$.overlay._items[this._focusedIndex];\n      if (this.selectedItem !== focusedItem) {\n        this.selectedItem = focusedItem;\n      }\n      // make sure input field is updated in case value doesn't change (i.e. FOO -> foo)\n      this._inputElementValue = this._getItemLabel(this.selectedItem);\n    } else if (this._inputElementValue === '' || this._inputElementValue === undefined) {\n      this.selectedItem = null;\n\n      if (this.allowCustomValue) {\n        this.value = '';\n      }\n    } else {\n      if (this.allowCustomValue) {\n        const e = new CustomEvent('custom-value-set', {detail: this._inputElementValue, composed: true, cancelable: true, bubbles: true});\n        this.dispatchEvent(e);\n        if (!e.defaultPrevented) {\n          const customValue = this._inputElementValue;\n          this.selectedItem = null;\n          this.value = customValue;\n        }\n      } else {\n        this._inputElementValue = this._getItemLabel(this.selectedItem);\n      }\n    }\n\n    this._detectAndDispatchChange();\n\n    this._clearSelectionRange();\n\n    this.filter = '';\n  }\n\n  /**\n   *  Filtering and items handling\n   */\n  _inputValueChanged(e) {\n    // Handle only input events from our inputElement.\n    if (e.composedPath().indexOf(this.inputElement) !== -1) {\n      this._inputElementValue = this.inputElement.value;\n      this._filterFromInput();\n    }\n  }\n\n  _filterFromInput(e) {\n    if (!this.opened) {\n      this.open();\n    }\n\n    if (this.filter === this._inputElementValue) {\n      // Filter and input value might get out of sync, while keyboard navigating for example.\n      // Afterwards, input value might be changed to the same value as used in filtering.\n      // In situation like these, we need to make sure all the filter changes handlers are run.\n      this._filterChanged(this.filter, this.itemValuePath, this.itemLabelPath);\n    } else {\n      this.filter = this._inputElementValue;\n    }\n  }\n\n  _filterChanged(filter, itemValuePath, itemLabelPath) {\n    if (filter === undefined || itemValuePath === undefined || itemLabelPath === undefined) {\n      return;\n    }\n    if (this.items) {\n      this.filteredItems = this._filterItems(this.items, filter);\n    } else {\n      // With certain use cases (e. g., external filtering), `items` are\n      // undefined. Filtering is unnecessary per se, but the filteredItems\n      // observer should still be invoked to update focused item.\n      this._filteredItemsChanged({path: 'filteredItems', value: this.filteredItems}, itemValuePath, itemLabelPath);\n    }\n  }\n\n  _loadingChanged(loading) {\n    if (loading) {\n      this._focusedIndex = -1;\n    }\n  }\n\n  _revertInputValue() {\n    if (this.filter !== '') {\n      this._inputElementValue = this.filter;\n    } else {\n      this._revertInputValueToValue();\n    }\n    this._clearSelectionRange();\n  }\n\n  _revertInputValueToValue() {\n    if (this.allowCustomValue && !this.selectedItem) {\n      this._inputElementValue = this.value;\n    } else {\n      this._inputElementValue = this._getItemLabel(this.selectedItem);\n    }\n  }\n\n  _updateHasValue(hasValue) {\n    if (hasValue) {\n      this.setAttribute('has-value', '');\n    } else {\n      this.removeAttribute('has-value');\n    }\n  }\n\n  _selectedItemChanged(selectedItem) {\n    if (selectedItem === null || selectedItem === undefined) {\n      if (this.filteredItems) {\n        if (!this.allowCustomValue) {\n          this.value = '';\n        }\n\n        this._updateHasValue(this.value !== '');\n        this._inputElementValue = this.value;\n      }\n    } else {\n      const value = this._getItemValue(selectedItem);\n      if (this.value !== value) {\n        this.value = value;\n      }\n\n      this._updateHasValue(true);\n      this._inputElementValue = this._getItemLabel(selectedItem);\n\n      // Could not be defined in 1.x because ready is called after all prop-setters\n      if (this.inputElement) {\n        this.inputElement.value = this._inputElementValue;\n      }\n    }\n\n    this.$.overlay._selectedItem = selectedItem;\n    if (this.filteredItems && this.$.overlay._items) {\n      this._focusedIndex = this.filteredItems.indexOf(selectedItem);\n    }\n  }\n\n  _valueChanged(value, oldVal) {\n    if (value === '' && oldVal === undefined) { // initializing, no need to do anything (#554)\n      return;\n    }\n\n    if (this._isValidValue(value)) {\n      let item;\n      if (this._getItemValue(this.selectedItem) !== value) {\n        const valueIndex = this._indexOfValue(value, this.filteredItems);\n        this.selectedItem = valueIndex >= 0 ? this.filteredItems[valueIndex] : null;\n      } else {\n        item = this.selectedItem;\n      }\n\n      if (!item && this.allowCustomValue) {\n        this._inputElementValue = value;\n      }\n\n      this._updateHasValue(this.value !== '');\n    } else {\n      this.selectedItem = null;\n    }\n    // In the next _detectAndDispatchChange() call, the change detection should pass\n    this._lastCommittedValue = undefined;\n  }\n\n  _detectAndDispatchChange() {\n    if (this.value !== this._lastCommittedValue) {\n      this.dispatchEvent(new CustomEvent('change', {bubbles: true}));\n      this._lastCommittedValue = this.value;\n    }\n  }\n\n  _itemsChanged(e, itemValuePath, itemLabelPath) {\n    if (e.value === undefined || itemValuePath === undefined || itemLabelPath === undefined) {\n      return;\n    }\n    if (e.path === 'items' || e.path === 'items.splices') {\n      this.filteredItems = this.items ? this.items.slice(0) : this.items;\n\n      const valueIndex = this._indexOfValue(this.value, this.items);\n      this._focusedIndex = valueIndex;\n\n      const item = valueIndex > -1 && this.items[valueIndex];\n      if (item) {\n        this.selectedItem = item;\n      }\n    }\n  }\n\n  _filteredItemsChanged(e, itemValuePath, itemLabelPath) {\n    if (e.value === undefined || itemValuePath === undefined || itemLabelPath === undefined) {\n      return;\n    }\n    if (e.path === 'filteredItems' || e.path === 'filteredItems.splices') {\n      this._setOverlayItems(this.filteredItems);\n\n      this._focusedIndex = this.opened ?\n        this.$.overlay.indexOfLabel(this.filter) :\n        this._indexOfValue(this.value, this.filteredItems);\n\n      // async needed to reposition correctly after filtering\n      // (especially when aligned on top of input)\n      setTimeout(() => {\n        this.$.overlay.$.dropdown.notifyResize();\n      }, 1);\n    }\n  }\n\n  _filterItems(arr, filter) {\n    if (!arr) {\n      return arr;\n    }\n\n    return arr.filter(item => {\n      filter = filter ? filter.toString().toLowerCase() : '';\n      // Check if item contains input value.\n      return this._getItemLabel(item).toString().toLowerCase().indexOf(filter) > -1;\n    });\n  }\n\n  _setOverlayItems(items) {\n    this.$.overlay.set('_items', items);\n\n    this.$.overlay.$.dropdown.notifyResize();\n  }\n\n  _indexOfValue(value, items) {\n    if (items && this._isValidValue(value)) {\n      for (let i = 0; i < items.length; i++) {\n        if (this._getItemValue(items[i]) === value) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Checks if the value is supported as an item value in this control.\n   *\n   * @return {boolean}\n   */\n  _isValidValue(value) {\n    return value !== undefined && value !== null;\n  }\n\n  _overlaySelectedItemChanged(e) {\n    if (this.selectedItem !== e.detail.item) {\n      this.selectedItem = e.detail.item;\n    }\n\n    if (this.opened) {\n      this.close();\n    }\n\n    // stop this private event from leaking outside.\n    e.stopPropagation();\n  }\n\n\n  /**\n   * Returns true if `value` is valid, and sets the `invalid` flag appropriately.\n   *\n   * @return {boolean} True if the value is valid and sets the `invalid` flag appropriately\n   */\n  validate() {\n    return !(this.invalid = !this.checkValidity());\n  }\n\n  /**\n   * Returns true if the current input value satisfies all constraints (if any)\n   *\n   * You can override the `checkValidity` method for custom validations.\n   */\n  checkValidity() {\n    if (this.inputElement.validate) {\n      return this.inputElement.validate();\n    }\n  }\n\n  get _instanceProps() {\n    return {\n      item: true,\n      index: true,\n      selected: true,\n      focused: true\n    };\n  }\n\n  _ensureTemplatized() {\n    if (!this._TemplateClass) {\n      const tpl = this.querySelector('template');\n      if (tpl) {\n        this._TemplateClass = templatize(tpl, this, {\n          instanceProps: this._instanceProps,\n          forwardHostProp: function(prop, value) {\n            const items = this.$.overlay._selector.querySelectorAll('vaadin-combo-box-item');\n            Array.prototype.forEach.call(items, item => {\n              if (item._itemTemplateInstance) {\n                item._itemTemplateInstance.set(prop, value);\n                item._itemTemplateInstance.notifyPath(prop, value, true);\n              }\n            });\n          }\n        });\n      }\n    }\n  }\n\n  _preventInputBlur() {\n    if (this._toggleElement) {\n      this._toggleElement.addEventListener('click', this._preventDefault);\n    }\n    if (this._clearElement) {\n      this._clearElement.addEventListener('click', this._preventDefault);\n    }\n  }\n\n  _restoreInputBlur() {\n    if (this._toggleElement) {\n      this._toggleElement.removeEventListener('click', this._preventDefault);\n    }\n    if (this._clearElement) {\n      this._clearElement.removeEventListener('click', this._preventDefault);\n    }\n  }\n\n  _preventDefault(e) {\n    e.preventDefault();\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n\n  /**\n   * Fired when the value changes.\n   *\n   * @event value-changed\n   * @param {Object} detail\n   *  @param {String} detail.value the combobox value\n   */\n\n  /**\n   * Fired when selected item changes.\n   *\n   * @event selected-item-changed\n   * @param {Object} detail\n   *  @param {Object|String} detail.value the selected item. Type is the same as the type of `items`.\n   */\n\n  /**\n   * Fired when the user sets a custom value.\n   * @event custom-value-set\n   * @param {String} detail the custom value\n   */\n\n  /**\n   * Fired when value changes.\n   * To comply with https://developer.mozilla.org/en-US/docs/Web/Events/change\n   * @event change\n   */\n};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n\n`iron-list` displays a virtual, 'infinite' list. The template inside\nthe iron-list element represents the DOM to create for each list item.\nThe `items` property specifies an array of list item data.\n\nFor performance reasons, not every item in the list is rendered at once;\ninstead a small subset of actual template elements *(enough to fill the viewport)*\nare rendered and reused as the user scrolls. As such, it is important that all\nstate of the list template is bound to the model driving it, since the view may\nbe reused with a new model at any time. Particularly, any state that may change\nas the result of a user interaction with the list item must be bound to the model\nto avoid view state inconsistency.\n\n### Sizing iron-list\n\n`iron-list` must either be explicitly sized, or delegate scrolling to an\nexplicitly sized parent. By \"explicitly sized\", we mean it either has an explicit\nCSS `height` property set via a class or inline style, or else is sized by other\nlayout means (e.g. the `flex` or `fit` classes).\n\n#### Flexbox - [jsbin](https://jsbin.com/vejoni/edit?html,output)\n\n```html\n<template is=\"x-list\">\n  <style>\n    :host {\n      display: block;\n      height: 100vh;\n      display: flex;\n      flex-direction: column;\n    }\n\n    iron-list {\n      flex: 1 1 auto;\n    }\n  </style>\n  <app-toolbar>App name</app-toolbar>\n  <iron-list items=\"[[items]]\">\n    <template>\n      <div>\n        ...\n      </div>\n    </template>\n  </iron-list>\n</template>\n```\n#### Explicit size - [jsbin](https://jsbin.com/vopucus/edit?html,output)\n```html\n<template is=\"x-list\">\n  <style>\n    :host {\n      display: block;\n    }\n\n    iron-list {\n      height: 100vh; /* don't use % values unless the parent element is sized. *\\/\n    }\n  </style>\n  <iron-list items=\"[[items]]\">\n    <template>\n      <div>\n        ...\n      </div>\n    </template>\n  </iron-list>\n</template>\n```\n#### Main document scrolling - [jsbin](https://jsbin.com/wevirow/edit?html,output)\n```html\n<head>\n  <style>\n    body {\n      height: 100vh;\n      margin: 0;\n      display: flex;\n      flex-direction: column;\n    }\n\n    app-toolbar {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n    }\n\n    iron-list {\n      /* add padding since the app-toolbar is fixed at the top *\\/\n      padding-top: 64px;\n    }\n  </style>\n</head>\n<body>\n  <app-toolbar>App name</app-toolbar>\n  <iron-list scroll-target=\"document\">\n    <template>\n      <div>\n        ...\n      </div>\n    </template>\n  </iron-list>\n</body>\n```\n\n`iron-list` must be given a `<template>` which contains exactly one element. In the examples\nabove we used a `<div>`, but you can provide any element (including custom elements).\n\n### Template model\n\nList item templates should bind to template models of the following structure:\n\n```js\n{\n  index: 0,        // index in the item array\n  selected: false, // true if the current item is selected\n  tabIndex: -1,    // a dynamically generated tabIndex for focus management\n  item: {}         // user data corresponding to items[index]\n}\n```\n\nAlternatively, you can change the property name used as data index by changing the\n`indexAs` property. The `as` property defines the name of the variable to add to the binding\nscope for the array.\n\nFor example, given the following `data` array:\n\n##### data.json\n\n```js\n[\n  {\"name\": \"Bob\"},\n  {\"name\": \"Tim\"},\n  {\"name\": \"Mike\"}\n]\n```\n\nThe following code would render the list (note the name property is bound from the model\nobject provided to the template scope):\n\n```html\n<iron-ajax url=\"data.json\" last-response=\"{{data}}\" auto></iron-ajax>\n<iron-list items=\"[[data]]\" as=\"item\">\n  <template>\n    <div>\n      Name: [[item.name]]\n    </div>\n  </template>\n</iron-list>\n```\n\n### Grid layout\n\n`iron-list` supports a grid layout in addition to linear layout by setting\nthe `grid` attribute.  In this case, the list template item must have both fixed\nwidth and height (e.g. via CSS). Based on this, the number of items\nper row are determined automatically based on the size of the list viewport.\n\n### Accessibility\n\n`iron-list` automatically manages the focus state for the items. It also provides\na `tabIndex` property within the template scope that can be used for keyboard navigation.\nFor example, users can press the up and down keys to move to previous and next\nitems in the list:\n\n```html\n<iron-list items=\"[[data]]\" as=\"item\">\n  <template>\n    <div tabindex$=\"[[tabIndex]]\">\n      Name: [[item.name]]\n    </div>\n  </template>\n</iron-list>\n```\n\n### Styling\n\nYou can use the `--iron-list-items-container` mixin to style the container of items:\n\n```css\niron-list {\n --iron-list-items-container: {\n    margin: auto;\n  };\n}\n```\n\n### Resizing\n\n`iron-list` lays out the items when it receives a notification via the `iron-resize` event.\nThis event is fired by any element that implements `IronResizableBehavior`.\n\nBy default, elements such as `iron-pages`, `paper-tabs` or `paper-dialog` will trigger\nthis event automatically. If you hide the list manually (e.g. you use `display: none`)\nyou might want to implement `IronResizableBehavior` or fire this event manually right\nafter the list became visible again. For example:\n\n```js\ndocument.querySelector('iron-list').fire('iron-resize');\n```\n\n### When should `<iron-list>` be used?\n\n`iron-list` should be used when a page has significantly more DOM nodes than the ones\nvisible on the screen. e.g. the page has 500 nodes, but only 20 are visible at a time.\nThis is why we refer to it as a `virtual` list. In this case, a `dom-repeat` will still\ncreate 500 nodes which could slow down the web app, but `iron-list` will only create 20.\n\nHowever, having an `iron-list` does not mean that you can load all the data at once.\nSay you have a million records in the database, you want to split the data into pages\nso you can bring in a page at the time. The page could contain 500 items, and iron-list\nwill only render 20.\n\n@group Iron Element\n@element iron-list\n@demo demo/index.html\n\n*/\n/*\n  FIXME(polymer-modulizer): the above comments were extracted\n  from HTML and may be out of place here. Review them and\n  then delete this comment!\n*/\nimport '@polymer/polymer/polymer-legacy.js';\n\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { IronScrollTargetBehavior } from '@polymer/iron-scroll-target-behavior/iron-scroll-target-behavior.js';\nimport { flush, enqueueDebouncer } from '@polymer/polymer/lib/utils/flush.js';\nimport { animationFrame, idlePeriod, microTask } from '@polymer/polymer/lib/utils/async.js';\nimport { OptionalMutableDataBehavior as OptionalMutableDataBehavior$0 } from '@polymer/polymer/lib/legacy/mutable-data-behavior.js';\nimport { Polymer as Polymer$0 } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { Templatizer } from '@polymer/polymer/lib/legacy/templatizer-behavior.js';\nimport { dom, flush as flush$0, addDebouncer } from '@polymer/polymer/lib/legacy/polymer.dom.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { matches, translate } from '@polymer/polymer/lib/utils/path.js';\nvar IOS = navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/);\nvar IOS_TOUCH_SCROLLING = IOS && IOS[1] >= 8;\nvar DEFAULT_PHYSICAL_COUNT = 3;\nvar HIDDEN_Y = '-10000px';\nvar ITEM_WIDTH = 0;\nvar ITEM_HEIGHT = 1;\nvar SECRET_TABINDEX = -100;\nvar IS_V2 = flush != null;\nvar ANIMATION_FRAME = IS_V2 ? animationFrame : 0;\nvar IDLE_TIME = IS_V2 ? idlePeriod : 1;\nvar MICRO_TASK = IS_V2 ? microTask : 2;\n\n/* Polymer.OptionalMutableDataBehavior is only available with Polymer 2.0. */\nif (!OptionalMutableDataBehavior$0) {\n  /** @polymerBehavior */\n  Polymer.OptionalMutableDataBehavior = {};\n}\n\nPolymer$0({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      @media only screen and (-webkit-max-device-pixel-ratio: 1) {\n        :host {\n          will-change: transform;\n        }\n      }\n\n      #items {\n        @apply --iron-list-items-container;\n        position: relative;\n      }\n\n      :host(:not([grid])) #items > ::slotted(*) {\n        width: 100%;\n      }\n\n      #items > ::slotted(*) {\n        box-sizing: border-box;\n        margin: 0;\n        position: absolute;\n        top: 0;\n        will-change: transform;\n      }\n    </style>\n\n    <array-selector id=\"selector\" items=\"{{items}}\" selected=\"{{selectedItems}}\" selected-item=\"{{selectedItem}}\"></array-selector>\n\n    <div id=\"items\">\n      <slot></slot>\n    </div>\n`,\n\n  is: 'iron-list',\n\n  properties: {\n\n    /**\n     * An array containing items determining how many instances of the template\n     * to stamp and that that each template instance should bind to.\n     */\n    items: {\n      type: Array\n    },\n\n    /**\n     * The name of the variable to add to the binding scope for the array\n     * element associated with a given template instance.\n     */\n    as: {\n      type: String,\n      value: 'item'\n    },\n\n    /**\n     * The name of the variable to add to the binding scope with the index\n     * for the row.\n     */\n    indexAs: {\n      type: String,\n      value: 'index'\n    },\n\n    /**\n     * The name of the variable to add to the binding scope to indicate\n     * if the row is selected.\n     */\n    selectedAs: {\n      type: String,\n      value: 'selected'\n    },\n\n    /**\n     * When true, the list is rendered as a grid. Grid items must have\n     * fixed width and height set via CSS. e.g.\n     *\n     * ```html\n     * <iron-list grid>\n     *   <template>\n     *      <div style=\"width: 100px; height: 100px;\"> 100x100 </div>\n     *   </template>\n     * </iron-list>\n     * ```\n     */\n    grid: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true,\n      observer: '_gridChanged'\n    },\n\n    /**\n     * When true, tapping a row will select the item, placing its data model\n     * in the set of selected items retrievable via the selection property.\n     *\n     * Note that tapping focusable elements within the list item will not\n     * result in selection, since they are presumed to have their * own action.\n     */\n    selectionEnabled: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * When `multiSelection` is false, this is the currently selected item, or `null`\n     * if no item is selected.\n     */\n    selectedItem: {\n      type: Object,\n      notify: true\n    },\n\n    /**\n     * When `multiSelection` is true, this is an array that contains the selected items.\n     */\n    selectedItems: {\n      type: Object,\n      notify: true\n    },\n\n    /**\n     * When `true`, multiple items may be selected at once (in this case,\n     * `selected` is an array of currently selected items).  When `false`,\n     * only one item may be selected at a time.\n     */\n    multiSelection: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * The offset top from the scrolling element to the iron-list element.\n     * This value can be computed using the position returned by `getBoundingClientRect()`\n     * although it's preferred to use a constant value when possible.\n     *\n     * This property is useful when an external scrolling element is used and there's\n     * some offset between the scrolling element and the list.\n     * For example: a header is placed above the list.\n     */\n    scrollOffset: {\n      type: Number,\n      value: 0\n    }\n  },\n\n  observers: [\n    '_itemsChanged(items.*)',\n    '_selectionEnabledChanged(selectionEnabled)',\n    '_multiSelectionChanged(multiSelection)',\n    '_setOverflow(scrollTarget, scrollOffset)'\n  ],\n\n  behaviors: [\n    Templatizer,\n    IronResizableBehavior,\n    IronScrollTargetBehavior,\n    OptionalMutableDataBehavior$0\n  ],\n\n  /**\n   * The ratio of hidden tiles that should remain in the scroll direction.\n   * Recommended value ~0.5, so it will distribute tiles evenly in both directions.\n   */\n  _ratio: 0.5,\n\n  /**\n   * The padding-top value for the list.\n   */\n  _scrollerPaddingTop: 0,\n\n  /**\n   * This value is the same as `scrollTop`.\n   */\n  _scrollPosition: 0,\n\n  /**\n   * The sum of the heights of all the tiles in the DOM.\n   */\n  _physicalSize: 0,\n\n  /**\n   * The average `offsetHeight` of the tiles observed till now.\n   */\n  _physicalAverage: 0,\n\n  /**\n   * The number of tiles which `offsetHeight` > 0 observed until now.\n   */\n  _physicalAverageCount: 0,\n\n  /**\n   * The Y position of the item rendered in the `_physicalStart`\n   * tile relative to the scrolling list.\n   */\n  _physicalTop: 0,\n\n  /**\n   * The number of items in the list.\n   */\n  _virtualCount: 0,\n\n  /**\n   * The estimated scroll height based on `_physicalAverage`\n   */\n  _estScrollHeight: 0,\n\n  /**\n   * The scroll height of the dom node\n   */\n  _scrollHeight: 0,\n\n  /**\n   * The height of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportHeight: 0,\n\n  /**\n   * The width of the list. This is referred as the viewport in the context of list.\n   */\n  _viewportWidth: 0,\n\n  /**\n   * An array of DOM nodes that are currently in the tree\n   * @type {?Array<!TemplatizerNode>}\n   */\n  _physicalItems: null,\n\n  /**\n   * An array of heights for each item in `_physicalItems`\n   * @type {?Array<number>}\n   */\n  _physicalSizes: null,\n\n  /**\n   * A cached value for the first visible index.\n   * See `firstVisibleIndex`\n   * @type {?number}\n   */\n  _firstVisibleIndexVal: null,\n\n  /**\n   * A Polymer collection for the items.\n   * @type {?Polymer.Collection}\n   */\n  _collection: null,\n\n  /**\n   * A cached value for the last visible index.\n   * See `lastVisibleIndex`\n   * @type {?number}\n   */\n  _lastVisibleIndexVal: null,\n\n  /**\n   * The max number of pages to render. One page is equivalent to the height of the list.\n   */\n  _maxPages: 2,\n\n  /**\n   * The currently focused physical item.\n   */\n  _focusedItem: null,\n\n  /**\n   * The virtual index of the focused item.\n   */\n  _focusedVirtualIndex: -1,\n\n  /**\n   * The physical index of the focused item.\n   */\n  _focusedPhysicalIndex: -1,\n\n  /**\n   * The the item that is focused if it is moved offscreen.\n   * @private {?TemplatizerNode}\n   */\n  _offscreenFocusedItem: null,\n\n  /**\n   * The item that backfills the `_offscreenFocusedItem` in the physical items\n   * list when that item is moved offscreen.\n   */\n  _focusBackfillItem: null,\n\n  /**\n   * The maximum items per row\n   */\n  _itemsPerRow: 1,\n\n  /**\n   * The width of each grid item\n   */\n  _itemWidth: 0,\n\n  /**\n   * The height of the row in grid layout.\n   */\n  _rowHeight: 0,\n\n  /**\n   * The cost of stamping a template in ms.\n   */\n  _templateCost: 0,\n\n  /**\n   * Needed to pass event.model property to declarative event handlers -\n   * see polymer/polymer#4339.\n   */\n  _parentModel: true,\n\n  /**\n   * The bottom of the physical content.\n   */\n  get _physicalBottom() {\n    return this._physicalTop + this._physicalSize;\n  },\n\n  /**\n   * The bottom of the scroll.\n   */\n  get _scrollBottom() {\n    return this._scrollPosition + this._viewportHeight;\n  },\n\n  /**\n   * The n-th item rendered in the last physical item.\n   */\n  get _virtualEnd() {\n    return this._virtualStart + this._physicalCount - 1;\n  },\n\n  /**\n   * The height of the physical content that isn't on the screen.\n   */\n  get _hiddenContentSize() {\n    var size = this.grid ? this._physicalRows * this._rowHeight : this._physicalSize;\n    return size - this._viewportHeight;\n  },\n\n  /**\n   * The parent node for the _userTemplate.\n   */\n  get _itemsParent() {\n    return dom(dom(this._userTemplate).parentNode);\n  },\n\n  /**\n   * The maximum scroll top value.\n   */\n  get _maxScrollTop() {\n    return this._estScrollHeight - this._viewportHeight + this._scrollOffset;\n  },\n\n  /**\n   * The largest n-th value for an item such that it can be rendered in `_physicalStart`.\n   */\n  get _maxVirtualStart() {\n    var virtualCount = this._convertIndexToCompleteRow(this._virtualCount);\n    return Math.max(0, virtualCount - this._physicalCount);\n  },\n\n  set _virtualStart(val) {\n    val = this._clamp(val, 0, this._maxVirtualStart);\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._virtualStartVal = val;\n  },\n\n  get _virtualStart() {\n    return this._virtualStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the top of the scrolling list.\n   */\n  set _physicalStart(val) {\n    val = val % this._physicalCount;\n    if (val < 0) {\n      val = this._physicalCount + val;\n    }\n    if (this.grid) {\n      val = val - (val % this._itemsPerRow);\n    }\n    this._physicalStartVal = val;\n  },\n\n  get _physicalStart() {\n    return this._physicalStartVal || 0;\n  },\n\n  /**\n   * The k-th tile that is at the bottom of the scrolling list.\n   */\n  get _physicalEnd() {\n    return (this._physicalStart + this._physicalCount - 1) % this._physicalCount;\n  },\n\n  set _physicalCount(val) {\n    this._physicalCountVal = val;\n  },\n\n  get _physicalCount() {\n    return this._physicalCountVal || 0;\n  },\n\n  /**\n   * An optimal physical size such that we will have enough physical items\n   * to fill up the viewport and recycle when the user scrolls.\n   *\n   * This default value assumes that we will at least have the equivalent\n   * to a viewport of physical items above and below the user's viewport.\n   */\n  get _optPhysicalSize() {\n    return this._viewportHeight === 0 ? Infinity : this._viewportHeight * this._maxPages;\n  },\n\n  /**\n   * True if the current list is visible.\n   */\n  get _isVisible() {\n    return Boolean(this.offsetWidth || this.offsetHeight);\n  },\n\n  /**\n   * Gets the index of the first visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get firstVisibleIndex() {\n    var idx = this._firstVisibleIndexVal;\n    if (idx == null) {\n      var physicalOffset = this._physicalTop + this._scrollOffset;\n\n      idx = this._iterateItems(function(pidx, vidx) {\n        physicalOffset += this._getPhysicalSizeIncrement(pidx);\n\n        if (physicalOffset > this._scrollPosition) {\n          return this.grid ? vidx - (vidx % this._itemsPerRow) : vidx;\n        }\n        // Handle a partially rendered final row in grid mode\n        if (this.grid && this._virtualCount - 1 === vidx) {\n          return vidx - (vidx % this._itemsPerRow);\n        }\n      }) || 0;\n      this._firstVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  /**\n   * Gets the index of the last visible item in the viewport.\n   *\n   * @type {number}\n   */\n  get lastVisibleIndex() {\n    var idx = this._lastVisibleIndexVal;\n    if (idx == null) {\n      if (this.grid) {\n        idx = Math.min(this._virtualCount,\n            this.firstVisibleIndex + this._estRowsInView * this._itemsPerRow - 1);\n      } else {\n        var physicalOffset = this._physicalTop + this._scrollOffset;\n        this._iterateItems(function(pidx, vidx) {\n          if (physicalOffset < this._scrollBottom) {\n            idx = vidx;\n          }\n          physicalOffset += this._getPhysicalSizeIncrement(pidx);\n        });\n      }\n      this._lastVisibleIndexVal = idx;\n    }\n    return idx;\n  },\n\n  get _defaultScrollTarget() {\n    return this;\n  },\n\n  get _virtualRowCount() {\n    return Math.ceil(this._virtualCount / this._itemsPerRow);\n  },\n\n  get _estRowsInView() {\n    return Math.ceil(this._viewportHeight / this._rowHeight);\n  },\n\n  get _physicalRows() {\n    return Math.ceil(this._physicalCount / this._itemsPerRow);\n  },\n\n  get _scrollOffset() {\n    return this._scrollerPaddingTop + this.scrollOffset;\n  },\n\n  ready: function() {\n    this.addEventListener('focus', this._didFocus.bind(this), true);\n  },\n\n  attached: function() {\n    this._debounce('_render', this._render, ANIMATION_FRAME);\n    // `iron-resize` is fired when the list is attached if the event is added\n    // before attached causing unnecessary work.\n    this.listen(this, 'iron-resize', '_resizeHandler');\n    this.listen(this, 'keydown', '_keydownHandler');\n  },\n\n  detached: function() {\n    this.unlisten(this, 'iron-resize', '_resizeHandler');\n    this.unlisten(this, 'keydown', '_keydownHandler');\n  },\n\n  /**\n   * Set the overflow property if this element has its own scrolling region\n   */\n  _setOverflow: function(scrollTarget) {\n    this.style.webkitOverflowScrolling = scrollTarget === this ? 'touch' : '';\n    this.style.overflowY = scrollTarget === this ? 'auto' : '';\n    // Clear cache.\n    this._lastVisibleIndexVal = null;\n    this._firstVisibleIndexVal = null;\n    this._debounce('_render', this._render, ANIMATION_FRAME);\n  },\n\n  /**\n   * Invoke this method if you dynamically update the viewport's\n   * size or CSS padding.\n   *\n   * @method updateViewportBoundaries\n   */\n  updateViewportBoundaries: function() {\n    var styles = window.getComputedStyle(this);\n    this._scrollerPaddingTop = this.scrollTarget === this ? 0 :\n        parseInt(styles['padding-top'], 10);\n    this._isRTL = Boolean(styles.direction === 'rtl');\n    this._viewportWidth = this.$.items.offsetWidth;\n    this._viewportHeight = this._scrollTargetHeight;\n    this.grid && this._updateGridMetrics();\n  },\n\n  /**\n   * Recycles the physical items when needed.\n   */\n  _scrollHandler: function() {\n    var scrollTop = Math.max(0, Math.min(this._maxScrollTop, this._scrollTop));\n    var delta = scrollTop - this._scrollPosition;\n    var isScrollingDown = delta >= 0;\n    // Track the current scroll position.\n    this._scrollPosition = scrollTop;\n    // Clear indexes for first and last visible indexes.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n    // Random access.\n    if (Math.abs(delta) > this._physicalSize && this._physicalSize > 0) {\n      delta = delta - this._scrollOffset;\n      var idxAdjustment = Math.round(delta / this._physicalAverage) * this._itemsPerRow;\n      this._virtualStart = this._virtualStart + idxAdjustment;\n      this._physicalStart = this._physicalStart + idxAdjustment;\n      // Estimate new physical offset.\n      this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow) * this._physicalAverage;\n      this._update();\n    } else if (this._physicalCount > 0) {\n      var reusables = this._getReusables(isScrollingDown);\n      if (isScrollingDown) {\n        this._physicalTop = reusables.physicalTop;\n        this._virtualStart = this._virtualStart + reusables.indexes.length;\n        this._physicalStart = this._physicalStart + reusables.indexes.length;\n      } else {\n        this._virtualStart = this._virtualStart - reusables.indexes.length;\n        this._physicalStart = this._physicalStart - reusables.indexes.length;\n      }\n      this._update(reusables.indexes, isScrollingDown ? null : reusables.indexes);\n      this._debounce('_increasePoolIfNeeded', this._increasePoolIfNeeded.bind(this, 0), MICRO_TASK);\n    }\n  },\n\n  /**\n   * Returns an object that contains the indexes of the physical items\n   * that might be reused and the physicalTop.\n   *\n   * @param {boolean} fromTop If the potential reusable items are above the scrolling region.\n   */\n  _getReusables: function(fromTop) {\n    var ith, lastIth, offsetContent, physicalItemHeight;\n    var idxs = [];\n    var protectedOffsetContent = this._hiddenContentSize * this._ratio;\n    var virtualStart = this._virtualStart;\n    var virtualEnd = this._virtualEnd;\n    var physicalCount = this._physicalCount;\n    var top = this._physicalTop + this._scrollOffset;\n    var bottom = this._physicalBottom + this._scrollOffset;\n    var scrollTop = this._scrollTop;\n    var scrollBottom = this._scrollBottom;\n\n    if (fromTop) {\n      ith = this._physicalStart;\n      lastIth = this._physicalEnd;\n      offsetContent = scrollTop - top;\n    } else {\n      ith = this._physicalEnd;\n      lastIth = this._physicalStart;\n      offsetContent = bottom - scrollBottom;\n    }\n    while (true) {\n      physicalItemHeight = this._getPhysicalSizeIncrement(ith);\n      offsetContent = offsetContent - physicalItemHeight;\n      if (idxs.length >= physicalCount || offsetContent <= protectedOffsetContent) {\n        break;\n      }\n      if (fromTop) {\n        // Check that index is within the valid range.\n        if (virtualEnd + idxs.length + 1 >= this._virtualCount) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + physicalItemHeight >= scrollTop - this._scrollOffset) {\n          break;\n        }\n        idxs.push(ith);\n        top = top + physicalItemHeight;\n        ith = (ith + 1) % physicalCount;\n      } else {\n        // Check that index is within the valid range.\n        if (virtualStart - idxs.length <= 0) {\n          break;\n        }\n        // Check that the index is not visible.\n        if (top + this._physicalSize - physicalItemHeight <= scrollBottom) {\n          break;\n        }\n        idxs.push(ith);\n        top = top - physicalItemHeight;\n        ith = (ith === 0) ? physicalCount - 1 : ith - 1;\n      }\n    }\n    return { indexes: idxs, physicalTop: top - this._scrollOffset };\n  },\n\n  /**\n   * Update the list of items, starting from the `_virtualStart` item.\n   * @param {!Array<number>=} itemSet\n   * @param {!Array<number>=} movingUp\n   */\n  _update: function(itemSet, movingUp) {\n    if ((itemSet && itemSet.length === 0) || this._physicalCount === 0) {\n      return;\n    }\n    this._manageFocus();\n    this._assignModels(itemSet);\n    this._updateMetrics(itemSet);\n    // Adjust offset after measuring.\n    if (movingUp) {\n      while (movingUp.length) {\n        var idx = movingUp.pop();\n        this._physicalTop -= this._getPhysicalSizeIncrement(idx);\n      }\n    }\n    this._positionItems();\n    this._updateScrollerSize();\n  },\n\n  /**\n   * Creates a pool of DOM elements and attaches them to the local dom.\n   *\n   * @param {number} size Size of the pool\n   */\n  _createPool: function(size) {\n    this._ensureTemplatized();\n    var i, inst;\n    var physicalItems = new Array(size);\n    for (i = 0; i < size; i++) {\n      inst = this.stamp(null);\n      // TODO(blasten):\n      // First element child is item; Safari doesn't support children[0]\n      // on a doc fragment. Test this to see if it still matters.\n      physicalItems[i] = inst.root.querySelector('*');\n      this._itemsParent.appendChild(inst.root);\n    }\n    return physicalItems;\n  },\n\n  _isClientFull: function() {\n    return this._scrollBottom != 0 && this._physicalBottom-1 >= this._scrollBottom &&\n        this._physicalTop <= this._scrollPosition;\n  },\n\n  /**\n   * Increases the pool size.\n   */\n  _increasePoolIfNeeded: function(count) {\n    var nextPhysicalCount = this._clamp(this._physicalCount + count,\n        DEFAULT_PHYSICAL_COUNT, this._virtualCount - this._virtualStart);\n    nextPhysicalCount = this._convertIndexToCompleteRow(nextPhysicalCount);\n    if (this.grid) {\n      var correction = nextPhysicalCount % this._itemsPerRow;\n      if (correction && nextPhysicalCount - correction <= this._physicalCount) {\n        nextPhysicalCount += this._itemsPerRow;\n      }\n      nextPhysicalCount -= correction;\n    }\n    var delta = nextPhysicalCount - this._physicalCount;\n    var nextIncrease = Math.round(this._physicalCount * 0.5);\n\n    if (delta < 0) {\n      return;\n    }\n    if (delta > 0) {\n      var ts = window.performance.now();\n      // Concat arrays in place.\n      [].push.apply(this._physicalItems, this._createPool(delta));\n      // Push 0s into physicalSizes. Can't use Array.fill because IE11 doesn't support it.\n      for (var i = 0; i < delta; i++) {\n        this._physicalSizes.push(0);\n      }\n      this._physicalCount = this._physicalCount + delta;\n      // Update the physical start if it needs to preserve the model of the focused item.\n      // In this situation, the focused item is currently rendered and its model would\n      // have changed after increasing the pool if the physical start remained unchanged.\n      if (this._physicalStart > this._physicalEnd &&\n          this._isIndexRendered(this._focusedVirtualIndex) &&\n          this._getPhysicalIndex(this._focusedVirtualIndex) < this._physicalEnd) {\n        this._physicalStart = this._physicalStart + delta;\n      }\n      this._update();\n      this._templateCost = (window.performance.now() - ts) / delta;\n      nextIncrease = Math.round(this._physicalCount * 0.5);\n    }\n    // The upper bounds is not fixed when dealing with a grid that doesn't\n    // fill it's last row with the exact number of items per row.\n    if (this._virtualEnd >= this._virtualCount - 1 || nextIncrease === 0) {\n      // Do nothing.\n    } else if (!this._isClientFull()) {\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          nextIncrease\n        ), MICRO_TASK);\n    } else if (this._physicalSize < this._optPhysicalSize) {\n      // Yield and increase the pool during idle time until the physical size is optimal.\n      this._debounce(\n        '_increasePoolIfNeeded',\n        this._increasePoolIfNeeded.bind(\n          this,\n          this._clamp(Math.round(50 / this._templateCost), 1, nextIncrease)\n        ), IDLE_TIME);\n    }\n  },\n\n  /**\n   * Renders the a new list.\n   */\n  _render: function() {\n    if (!this.isAttached || !this._isVisible) {\n      return;\n    }\n    if (this._physicalCount !== 0) {\n      var reusables = this._getReusables(true);\n      this._physicalTop = reusables.physicalTop;\n      this._virtualStart = this._virtualStart + reusables.indexes.length;\n      this._physicalStart = this._physicalStart + reusables.indexes.length;\n      this._update(reusables.indexes);\n      this._update();\n      this._increasePoolIfNeeded(0);\n    } else if (this._virtualCount > 0) {\n      // Initial render\n      this.updateViewportBoundaries();\n      this._increasePoolIfNeeded(DEFAULT_PHYSICAL_COUNT);\n    }\n  },\n\n  /**\n   * Templetizes the user template.\n   */\n  _ensureTemplatized: function() {\n    if (this.ctor) {\n      return;\n    }\n    this._userTemplate = this.queryEffectiveChildren('template');\n    if (!this._userTemplate) {\n      console.warn('iron-list requires a template to be provided in light-dom');\n    }\n    var instanceProps = {};\n    instanceProps.__key__ = true;\n    instanceProps[this.as] = true;\n    instanceProps[this.indexAs] = true;\n    instanceProps[this.selectedAs] = true;\n    instanceProps.tabIndex = true;\n    this._instanceProps = instanceProps;\n    this.templatize(this._userTemplate, this.mutableData);\n  },\n\n  _gridChanged: function(newGrid, oldGrid) {\n    if (typeof oldGrid === 'undefined') return;\n    this.notifyResize();\n    flush ? flush() : flush$0();\n    newGrid && this._updateGridMetrics();\n  },\n\n  /**\n   * Called when the items have changed. That is, reassignments\n   * to `items`, splices or updates to a single item.\n   */\n  _itemsChanged: function(change) {\n    if (change.path === 'items') {\n      this._virtualStart = 0;\n      this._physicalTop = 0;\n      this._virtualCount = this.items ? this.items.length : 0;\n      this._collection = this.items && undefined ?\n          undefined.get(this.items) : null;\n      this._physicalIndexForKey = {};\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      this._physicalCount = this._physicalCount || 0;\n      this._physicalItems = this._physicalItems || [];\n      this._physicalSizes = this._physicalSizes || [];\n      this._physicalStart = 0;\n      if (this._scrollTop > this._scrollOffset) {\n        this._resetScrollPosition(0);\n      }\n      this._removeFocusedItem();\n      this._debounce('_render', this._render, ANIMATION_FRAME);\n    } else if (change.path === 'items.splices') {\n      this._adjustVirtualIndex(change.value.indexSplices);\n      this._virtualCount = this.items ? this.items.length : 0;\n      // Only blur activeElement if it is a descendant of the list (#505, #507).\n      var activeElement = this._getActiveElement();\n      if (this.contains(activeElement)) activeElement.blur();\n      // Render only if the affected index is rendered.\n      var affectedIndexRendered = change.value.indexSplices.some(function(splice) {\n        return splice.index + splice.addedCount >= this._virtualStart &&\n            splice.index <= this._virtualEnd;\n      }, this);\n      if (!this._isClientFull() || affectedIndexRendered) {\n        this._debounce('_render', this._render, ANIMATION_FRAME);\n      }\n    } else if (change.path !== 'items.length') {\n      this._forwardItemPath(change.path, change.value);\n    }\n  },\n\n  _forwardItemPath: function(path, value) {\n    path = path.slice(6); // 'items.'.length == 6\n    var dot = path.indexOf('.');\n    if (dot === -1) {\n      dot = path.length;\n    }\n    var isIndexRendered;\n    var pidx;\n    var inst;\n    var offscreenInstance = this.modelForElement(this._offscreenFocusedItem);\n    if (IS_V2) {\n      var vidx = parseInt(path.substring(0, dot), 10);\n      isIndexRendered = this._isIndexRendered(vidx);\n      if (isIndexRendered) {\n        pidx = this._getPhysicalIndex(vidx);\n        inst = this.modelForElement(this._physicalItems[pidx]);\n      } else if (offscreenInstance) {\n        inst = offscreenInstance;\n      }\n\n      if (!inst || inst[this.indexAs] !== vidx) {\n        return;\n      }\n    } else {\n      // Polymer 1.x - get physical instance by key (`#1`), not index.\n      var key = path.substring(0, dot);\n      if (offscreenInstance && offscreenInstance.__key__ === key) {\n        inst = offscreenInstance;\n      } else {\n        pidx = this._physicalIndexForKey[key];\n        inst = this.modelForElement(this._physicalItems[pidx]);\n\n        if (!inst || inst.__key__ !== key) {\n          return;\n        }\n      }\n    }\n    path = path.substring(dot + 1);\n    path = this.as + (path ? '.' + path : '');\n    IS_V2\n      ? inst._setPendingPropertyOrPath(path, value, false, true)\n      : inst.notifyPath(path, value, true);\n    inst._flushProperties && inst._flushProperties(true);\n    // TODO(blasten): V1 doesn't do this and it's a bug\n    if (isIndexRendered) {\n      this._updateMetrics([pidx]);\n      this._positionItems();\n      this._updateScrollerSize();\n    }\n  },\n\n  /**\n   * @param {!Array<!PolymerSplice>} splices\n   */\n  _adjustVirtualIndex: function(splices) {\n    splices.forEach(function(splice) {\n      // deselect removed items\n      splice.removed.forEach(this._removeItem, this);\n      // We only need to care about changes happening above the current position\n      if (splice.index < this._virtualStart) {\n        var delta = Math.max(\n            splice.addedCount - splice.removed.length,\n            splice.index - this._virtualStart);\n        this._virtualStart = this._virtualStart + delta;\n        if (this._focusedVirtualIndex >= 0) {\n          this._focusedVirtualIndex = this._focusedVirtualIndex + delta;\n        }\n      }\n    }, this);\n  },\n\n  _removeItem: function(item) {\n    this.$.selector.deselect(item);\n    // remove the current focused item\n    if (this._focusedItem && this.modelForElement(this._focusedItem)[this.as] === item) {\n      this._removeFocusedItem();\n    }\n  },\n\n  /**\n   * Executes a provided function per every physical index in `itemSet`\n   * `itemSet` default value is equivalent to the entire set of physical indexes.\n   *\n   * @param {!function(number, number)} fn\n   * @param {!Array<number>=} itemSet\n   */\n  _iterateItems: function(fn, itemSet) {\n    var pidx, vidx, rtn, i;\n\n    if (arguments.length === 2 && itemSet) {\n      for (i = 0; i < itemSet.length; i++) {\n        pidx = itemSet[i];\n        vidx = this._computeVidx(pidx);\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    } else {\n      pidx = this._physicalStart;\n      vidx = this._virtualStart;\n      for (; pidx < this._physicalCount; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n      for (pidx = 0; pidx < this._physicalStart; pidx++, vidx++) {\n        if ((rtn = fn.call(this, pidx, vidx)) != null) {\n          return rtn;\n        }\n      }\n    }\n  },\n\n  /**\n   * Returns the virtual index for a given physical index\n   *\n   * @param {number} pidx Physical index\n   * @return {number}\n   */\n  _computeVidx: function(pidx) {\n    if (pidx >= this._physicalStart) {\n      return this._virtualStart + (pidx - this._physicalStart);\n    }\n    return this._virtualStart + (this._physicalCount - this._physicalStart) + pidx;\n  },\n\n  /**\n   * Assigns the data models to a given set of items.\n   * @param {!Array<number>=} itemSet\n   */\n  _assignModels: function(itemSet) {\n    this._iterateItems(function(pidx, vidx) {\n      var el = this._physicalItems[pidx];\n      var item = this.items && this.items[vidx];\n      if (item != null) {\n        var inst = this.modelForElement(el);\n        inst.__key__ = this._collection ? this._collection.getKey(item) : null;\n        this._forwardProperty(inst, this.as, item);\n        this._forwardProperty(inst, this.selectedAs, this.$.selector.isSelected(item));\n        this._forwardProperty(inst, this.indexAs, vidx);\n        this._forwardProperty(inst, 'tabIndex', this._focusedVirtualIndex === vidx ? 0 : -1);\n        this._physicalIndexForKey[inst.__key__] = pidx;\n        inst._flushProperties && inst._flushProperties(true);\n        el.removeAttribute('hidden');\n      } else {\n        el.setAttribute('hidden', '');\n      }\n    }, itemSet);\n  },\n\n  /**\n   * Updates the height for a given set of items.\n   *\n   * @param {!Array<number>=} itemSet\n   */\n  _updateMetrics: function(itemSet) {\n    // Make sure we distributed all the physical items\n    // so we can measure them.\n    flush ? flush() : flush$0();\n\n    var newPhysicalSize = 0;\n    var oldPhysicalSize = 0;\n    var prevAvgCount = this._physicalAverageCount;\n    var prevPhysicalAvg = this._physicalAverage;\n\n    this._iterateItems(function(pidx, vidx) {\n      oldPhysicalSize += this._physicalSizes[pidx];\n      this._physicalSizes[pidx] = this._physicalItems[pidx].offsetHeight;\n      newPhysicalSize += this._physicalSizes[pidx];\n      this._physicalAverageCount += this._physicalSizes[pidx] ? 1 : 0;\n    }, itemSet);\n\n    if (this.grid) {\n      this._updateGridMetrics();\n      this._physicalSize = Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n    } else {\n      oldPhysicalSize = (this._itemsPerRow === 1) ? oldPhysicalSize :  Math.ceil(this._physicalCount / this._itemsPerRow) * this._rowHeight;\n      this._physicalSize = this._physicalSize + newPhysicalSize - oldPhysicalSize;\n      this._itemsPerRow = 1;\n    }\n    // Update the average if it measured something.\n    if (this._physicalAverageCount !== prevAvgCount) {\n      this._physicalAverage = Math.round(\n          ((prevPhysicalAvg * prevAvgCount) + newPhysicalSize) /\n          this._physicalAverageCount);\n    }\n  },\n\n  _updateGridMetrics: function() {\n    this._itemWidth = this._physicalCount > 0 ? this._physicalItems[0].getBoundingClientRect().width : 200;\n    this._rowHeight = this._physicalCount > 0 ? this._physicalItems[0].offsetHeight : 200;\n    this._itemsPerRow = this._itemWidth ? Math.floor(this._viewportWidth / this._itemWidth) : this._itemsPerRow;\n  },\n\n  /**\n   * Updates the position of the physical items.\n   */\n  _positionItems: function() {\n    this._adjustScrollPosition();\n\n    var y = this._physicalTop;\n\n    if (this.grid) {\n      var totalItemWidth = this._itemsPerRow * this._itemWidth;\n      var rowOffset = (this._viewportWidth - totalItemWidth) / 2;\n\n      this._iterateItems(function(pidx, vidx) {\n        var modulus = vidx % this._itemsPerRow;\n        var x = Math.floor((modulus * this._itemWidth) + rowOffset);\n        if (this._isRTL) {\n          x = x * -1;\n        }\n        this.translate3d(x + 'px', y + 'px', 0, this._physicalItems[pidx]);\n        if (this._shouldRenderNextRow(vidx)) {\n          y += this._rowHeight;\n        }\n      });\n    } else {\n      this._iterateItems(function(pidx, vidx) {\n        this.translate3d(0, y + 'px', 0, this._physicalItems[pidx]);\n        y += this._physicalSizes[pidx];\n      });\n    }\n  },\n\n  _getPhysicalSizeIncrement: function(pidx) {\n    if (!this.grid) {\n      return this._physicalSizes[pidx];\n    }\n    if (this._computeVidx(pidx) % this._itemsPerRow !== this._itemsPerRow - 1) {\n      return 0;\n    }\n    return this._rowHeight;\n  },\n\n  /**\n   * Returns, based on the current index,\n   * whether or not the next index will need\n   * to be rendered on a new row.\n   *\n   * @param {number} vidx Virtual index\n   * @return {boolean}\n   */\n  _shouldRenderNextRow: function(vidx) {\n    return vidx % this._itemsPerRow === this._itemsPerRow - 1;\n  },\n\n  /**\n   * Adjusts the scroll position when it was overestimated.\n   */\n  _adjustScrollPosition: function() {\n    var deltaHeight = this._virtualStart === 0 ? this._physicalTop :\n        Math.min(this._scrollPosition + this._physicalTop, 0);\n    // Note: the delta can be positive or negative.\n    if (deltaHeight !== 0) {\n      this._physicalTop = this._physicalTop - deltaHeight;\n      var scrollTop = this._scrollTop;\n      // juking scroll position during interial scrolling on iOS is no bueno\n      if (!IOS_TOUCH_SCROLLING && scrollTop > 0) {\n        this._resetScrollPosition(scrollTop - deltaHeight);\n      }\n    }\n  },\n\n  /**\n   * Sets the position of the scroll.\n   */\n  _resetScrollPosition: function(pos) {\n    if (this.scrollTarget && pos >= 0) {\n      this._scrollTop = pos;\n      this._scrollPosition = this._scrollTop;\n    }\n  },\n\n  /**\n   * Sets the scroll height, that's the height of the content,\n   *\n   * @param {boolean=} forceUpdate If true, updates the height no matter what.\n   */\n  _updateScrollerSize: function(forceUpdate) {\n    if (this.grid) {\n      this._estScrollHeight = this._virtualRowCount * this._rowHeight;\n    } else {\n      this._estScrollHeight = (this._physicalBottom +\n          Math.max(this._virtualCount - this._physicalCount - this._virtualStart, 0) * this._physicalAverage);\n    }\n    forceUpdate = forceUpdate || this._scrollHeight === 0;\n    forceUpdate = forceUpdate || this._scrollPosition >= this._estScrollHeight - this._physicalSize;\n    forceUpdate = forceUpdate || this.grid && this.$.items.style.height < this._estScrollHeight;\n    // Amortize height adjustment, so it won't trigger large repaints too often.\n    if (forceUpdate || Math.abs(this._estScrollHeight - this._scrollHeight) >= this._viewportHeight) {\n      this.$.items.style.height = this._estScrollHeight + 'px';\n      this._scrollHeight = this._estScrollHeight;\n    }\n  },\n\n  /**\n   * Scroll to a specific item in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToItem\n   * @param {(Object)} item The item to be scrolled to\n   */\n  scrollToItem: function(item){\n    return this.scrollToIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Scroll to a specific index in the virtual list regardless\n   * of the physical items in the DOM tree.\n   *\n   * @method scrollToIndex\n   * @param {number} idx The index of the item\n   */\n  scrollToIndex: function(idx) {\n    if (typeof idx !== 'number' || idx < 0 || idx > this.items.length - 1) {\n      return;\n    }\n    flush ? flush() : flush$0();\n    // Items should have been rendered prior scrolling to an index.\n    if (this._physicalCount === 0) {\n      return;\n    }\n    idx = this._clamp(idx, 0, this._virtualCount-1);\n    // Update the virtual start only when needed.\n    if (!this._isIndexRendered(idx) || idx >= this._maxVirtualStart) {\n      this._virtualStart = this.grid ? (idx - this._itemsPerRow * 2) : (idx - 1);\n    }\n    this._manageFocus();\n    this._assignModels();\n    this._updateMetrics();\n    // Estimate new physical offset.\n    this._physicalTop = Math.floor(this._virtualStart / this._itemsPerRow)  * this._physicalAverage;\n\n    var currentTopItem = this._physicalStart;\n    var currentVirtualItem = this._virtualStart;\n    var targetOffsetTop = 0;\n    var hiddenContentSize = this._hiddenContentSize;\n    // scroll to the item as much as we can.\n    while (currentVirtualItem < idx && targetOffsetTop <= hiddenContentSize) {\n      targetOffsetTop = targetOffsetTop + this._getPhysicalSizeIncrement(currentTopItem);\n      currentTopItem = (currentTopItem + 1) % this._physicalCount;\n      currentVirtualItem++;\n    }\n    this._updateScrollerSize(true);\n    this._positionItems();\n    this._resetScrollPosition(this._physicalTop + this._scrollOffset + targetOffsetTop);\n    this._increasePoolIfNeeded(0);\n    // clear cached visible index.\n    this._firstVisibleIndexVal = null;\n    this._lastVisibleIndexVal = null;\n  },\n\n  /**\n   * Reset the physical average and the average count.\n   */\n  _resetAverage: function() {\n    this._physicalAverage = 0;\n    this._physicalAverageCount = 0;\n  },\n\n  /**\n   * A handler for the `iron-resize` event triggered by `IronResizableBehavior`\n   * when the element is resized.\n   */\n  _resizeHandler: function() {\n    this._debounce('_render', function() {\n      // clear cached visible index.\n      this._firstVisibleIndexVal = null;\n      this._lastVisibleIndexVal = null;\n      // Skip the resize event on touch devices when the address bar slides up.\n      var delta = Math.abs(this._viewportHeight - this._scrollTargetHeight);\n      this.updateViewportBoundaries();\n      if (this._isVisible) {\n        // Reinstall the scroll event listener.\n        this.toggleScrollListener(true);\n        this._resetAverage();\n        this._render();\n      } else {\n        // Uninstall the scroll event listener.\n        this.toggleScrollListener(false);\n      }\n    }, ANIMATION_FRAME);\n  },\n\n  /**\n   * Selects the given item.\n   *\n   * @method selectItem\n   * @param {Object} item The item instance.\n   */\n  selectItem: function(item) {\n    return this.selectIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Selects the item at the given index in the items array.\n   *\n   * @method selectIndex\n   * @param {number} index The index of the item in the items array.\n   */\n  selectIndex: function(index) {\n    if (index < 0 || index >= this._virtualCount) {\n      return;\n    }\n    if (!this.multiSelection && this.selectedItem) {\n     this.clearSelection();\n    }\n    if (this._isIndexRendered(index)) {\n      var model = this.modelForElement(this._physicalItems[this._getPhysicalIndex(index)]);\n      if (model) {\n        model[this.selectedAs] = true;\n      }\n      this.updateSizeForIndex(index);\n    }\n    if (this.$.selector.selectIndex) {\n      // v2\n      this.$.selector.selectIndex(index);\n    } else {\n      // v1\n      this.$.selector.select(this.items[index]);\n    }\n  },\n\n  /**\n   * Deselects the given item.\n   *\n   * @method deselect\n   * @param {Object} item The item instance.\n   */\n  deselectItem: function(item) {\n    return this.deselectIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Deselects the item at the given index in the items array.\n   *\n   * @method deselectIndex\n   * @param {number} index The index of the item in the items array.\n   */\n  deselectIndex: function(index) {\n    if (index < 0 || index >= this._virtualCount) {\n      return;\n    }\n    if (this._isIndexRendered(index)) {\n      var model = this.modelForElement(this._physicalItems[this._getPhysicalIndex(index)]);\n      model[this.selectedAs] = false;\n      this.updateSizeForIndex(index);\n    }\n    if (this.$.selector.deselectIndex) {\n      // v2\n      this.$.selector.deselectIndex(index);\n    } else {\n      // v1\n      this.$.selector.deselect(this.items[index]);\n    }\n  },\n\n  /**\n   * Selects or deselects a given item depending on whether the item\n   * has already been selected.\n   *\n   * @method toggleSelectionForItem\n   * @param {Object} item The item object.\n   */\n  toggleSelectionForItem: function(item) {\n    return this.toggleSelectionForIndex(this.items.indexOf(item));\n  },\n\n  /**\n   * Selects or deselects the item at the given index in the items array\n   * depending on whether the item has already been selected.\n   *\n   * @method toggleSelectionForIndex\n   * @param {number} index The index of the item in the items array.\n   */\n  toggleSelectionForIndex: function(index) {\n    var isSelected = this.$.selector.isIndexSelected\n        ? this.$.selector.isIndexSelected(index) : this.$.selector.isSelected(this.items[index]);\n      isSelected ? this.deselectIndex(index) : this.selectIndex(index);\n  },\n\n  /**\n   * Clears the current selection in the list.\n   *\n   * @method clearSelection\n   */\n  clearSelection: function() {\n    this._iterateItems(function(pidx, vidx) {\n      this.modelForElement(this._physicalItems[pidx])[this.selectedAs] = false;\n    });\n    this.$.selector.clearSelection();\n  },\n\n  /**\n   * Add an event listener to `tap` if `selectionEnabled` is true,\n   * it will remove the listener otherwise.\n   */\n  _selectionEnabledChanged: function(selectionEnabled) {\n    var handler = selectionEnabled ? this.listen : this.unlisten;\n    handler.call(this, this, 'tap', '_selectionHandler');\n  },\n\n  /**\n   * Select an item from an event object.\n   */\n  _selectionHandler: function(e) {\n    var model = this.modelForElement(e.target);\n    if (!model) {\n      return;\n    }\n    var modelTabIndex, activeElTabIndex;\n    var target = dom(e).path[0];\n    var activeEl = this._getActiveElement();\n    var physicalItem = this._physicalItems[this._getPhysicalIndex(model[this.indexAs])];\n    // Safari does not focus certain form controls via mouse\n    // https://bugs.webkit.org/show_bug.cgi?id=118043\n    if (target.localName === 'input' ||\n        target.localName === 'button' ||\n        target.localName === 'select') {\n      return;\n    }\n    // Set a temporary tabindex\n    modelTabIndex = model.tabIndex;\n    model.tabIndex = SECRET_TABINDEX;\n    activeElTabIndex = activeEl ? activeEl.tabIndex : -1;\n    model.tabIndex = modelTabIndex;\n    // Only select the item if the tap wasn't on a focusable child\n    // or the element bound to `tabIndex`\n    if (activeEl && physicalItem !== activeEl && physicalItem.contains(activeEl) && activeElTabIndex !== SECRET_TABINDEX) {\n      return;\n    }\n    this.toggleSelectionForItem(model[this.as]);\n  },\n\n  _multiSelectionChanged: function(multiSelection) {\n    this.clearSelection();\n    this.$.selector.multi = multiSelection;\n  },\n\n  /**\n   * Updates the size of a given list item.\n   *\n   * @method updateSizeForItem\n   * @param {Object} item The item instance.\n   */\n  updateSizeForItem: function(item) {\n    return this.updateSizeForIndex(this.items.indexOf(item));\n  },\n\n  /**\n  * Updates the size of the item at the given index in the items array.\n  *\n  * @method updateSizeForIndex\n  * @param {number} index The index of the item in the items array.\n  */\n  updateSizeForIndex: function(index) {\n    if (!this._isIndexRendered(index)) {\n      return null;\n    }\n    this._updateMetrics([this._getPhysicalIndex(index)]);\n    this._positionItems();\n    return null;\n  },\n\n  /**\n   * Creates a temporary backfill item in the rendered pool of physical items\n   * to replace the main focused item. The focused item has tabIndex = 0\n   * and might be currently focused by the user.\n   *\n   * This dynamic replacement helps to preserve the focus state.\n   */\n  _manageFocus: function() {\n    var fidx = this._focusedVirtualIndex;\n\n    if (fidx >= 0 && fidx < this._virtualCount) {\n      // if it's a valid index, check if that index is rendered\n      // in a physical item.\n      if (this._isIndexRendered(fidx)) {\n        this._restoreFocusedItem();\n      } else {\n        this._createFocusBackfillItem();\n      }\n    } else if (this._virtualCount > 0 && this._physicalCount > 0) {\n      // otherwise, assign the initial focused index.\n      this._focusedPhysicalIndex = this._physicalStart;\n      this._focusedVirtualIndex = this._virtualStart;\n      this._focusedItem = this._physicalItems[this._physicalStart];\n    }\n  },\n\n  /**\n   * Converts a random index to the index of the item that completes it's row.\n   * Allows for better order and fill computation when grid == true.\n   */\n  _convertIndexToCompleteRow: function(idx) {\n    // when grid == false _itemPerRow can be unset.\n    this._itemsPerRow = this._itemsPerRow || 1;\n    return this.grid ? Math.ceil(idx / this._itemsPerRow) * this._itemsPerRow : idx;\n  },\n\n  _isIndexRendered: function(idx) {\n    return idx >= this._virtualStart && idx <= this._virtualEnd;\n  },\n\n  _isIndexVisible: function(idx) {\n    return idx >= this.firstVisibleIndex && idx <= this.lastVisibleIndex;\n  },\n\n  _getPhysicalIndex: function(vidx) {\n    return IS_V2\n      ? (this._physicalStart + (vidx - this._virtualStart)) % this._physicalCount\n      : this._physicalIndexForKey[this._collection.getKey(this.items[vidx])];\n  },\n\n  focusItem: function(idx) {\n    this._focusPhysicalItem(idx);\n  },\n\n  _focusPhysicalItem: function(idx) {\n    if (idx < 0 || idx >= this._virtualCount) {\n      return;\n    }\n    this._restoreFocusedItem();\n    // scroll to index to make sure it's rendered\n    if (!this._isIndexRendered(idx)) {\n      this.scrollToIndex(idx);\n    }\n    var physicalItem = this._physicalItems[this._getPhysicalIndex(idx)];\n    var model = this.modelForElement(physicalItem);\n    var focusable;\n    // set a secret tab index\n    model.tabIndex = SECRET_TABINDEX;\n    // check if focusable element is the physical item\n    if (physicalItem.tabIndex === SECRET_TABINDEX) {\n     focusable = physicalItem;\n    }\n    // search for the element which tabindex is bound to the secret tab index\n    if (!focusable) {\n      focusable = dom(physicalItem).querySelector('[tabindex=\"' + SECRET_TABINDEX + '\"]');\n    }\n    // restore the tab index\n    model.tabIndex = 0;\n    // focus the focusable element\n    this._focusedVirtualIndex = idx;\n    focusable && focusable.focus();\n  },\n\n  _removeFocusedItem: function() {\n    if (this._offscreenFocusedItem) {\n      this._itemsParent.removeChild(this._offscreenFocusedItem);\n    }\n    this._offscreenFocusedItem = null;\n    this._focusBackfillItem = null;\n    this._focusedItem = null;\n    this._focusedVirtualIndex = -1;\n    this._focusedPhysicalIndex = -1;\n  },\n\n  _createFocusBackfillItem: function() {\n    var fpidx = this._focusedPhysicalIndex;\n\n    if (this._offscreenFocusedItem || this._focusedVirtualIndex < 0) {\n      return;\n    }\n    if (!this._focusBackfillItem) {\n      // Create a physical item.\n      var inst = this.stamp(null);\n      this._focusBackfillItem = inst.root.querySelector('*');\n      this._itemsParent.appendChild(inst.root);\n    }\n    // Set the offcreen focused physical item.\n    this._offscreenFocusedItem = this._physicalItems[fpidx];\n    this.modelForElement(this._offscreenFocusedItem).tabIndex = 0;\n    this._physicalItems[fpidx] = this._focusBackfillItem;\n    this._focusedPhysicalIndex = fpidx;\n    // Hide the focused physical.\n    this.translate3d(0, HIDDEN_Y, 0, this._offscreenFocusedItem);\n  },\n\n  _restoreFocusedItem: function() {\n    if (!this._offscreenFocusedItem || this._focusedVirtualIndex < 0) {\n      return;\n    }\n    // Assign models to the focused index.\n    this._assignModels();\n    // Get the new physical index for the focused index.\n    var fpidx = this._focusedPhysicalIndex;\n\n    var onScreenItem = this._physicalItems[fpidx];\n    if (!onScreenItem) {\n      return;\n    }\n    var onScreenInstance = this.modelForElement(onScreenItem);\n    var offScreenInstance = this.modelForElement(this._offscreenFocusedItem);\n    // Restores the physical item only when it has the same model\n    // as the offscreen one. Use key for comparison since users can set\n    // a new item via set('items.idx').\n    if (onScreenInstance[this.as] === offScreenInstance[this.as]) {\n      // Flip the focus backfill.\n      this._focusBackfillItem = onScreenItem;\n      onScreenInstance.tabIndex = -1;\n      // Restore the focused physical item.\n      this._physicalItems[fpidx] = this._offscreenFocusedItem;\n      // Hide the physical item that backfills.\n      this.translate3d(0, HIDDEN_Y, 0, this._focusBackfillItem);\n    } else {\n      this._removeFocusedItem();\n      this._focusBackfillItem = null;\n    }\n    this._offscreenFocusedItem = null;\n  },\n\n  _didFocus: function(e) {\n    var targetModel = this.modelForElement(e.target);\n    var focusedModel = this.modelForElement(this._focusedItem);\n    var hasOffscreenFocusedItem = this._offscreenFocusedItem !== null;\n    var fidx = this._focusedVirtualIndex;\n    if (!targetModel) {\n      return;\n    }\n    if (focusedModel === targetModel) {\n      // If the user focused the same item, then bring it into view if it's not visible.\n      if (!this._isIndexVisible(fidx)) {\n        this.scrollToIndex(fidx);\n      }\n    } else {\n      this._restoreFocusedItem();\n      // Restore tabIndex for the currently focused item.\n      if (focusedModel) {\n        focusedModel.tabIndex = -1;\n      }\n      // Set the tabIndex for the next focused item.\n      targetModel.tabIndex = 0;\n      fidx = targetModel[this.indexAs];\n      this._focusedVirtualIndex = fidx;\n      this._focusedPhysicalIndex = this._getPhysicalIndex(fidx);\n      this._focusedItem = this._physicalItems[this._focusedPhysicalIndex];\n      if (hasOffscreenFocusedItem && !this._offscreenFocusedItem) {\n        this._update();\n      }\n    }\n  },\n\n  _keydownHandler: function(e) {\n    switch (e.keyCode) {\n      case /* ARROW_DOWN */ 40:\n        e.preventDefault();\n        this._focusPhysicalItem(this._focusedVirtualIndex + (this.grid ? this._itemsPerRow : 1));\n        break;\n      case /* ARROW_RIGHT */ 39:\n        if (this.grid) this._focusPhysicalItem(this._focusedVirtualIndex + (this._isRTL ? -1 : 1));\n        break;\n      case /* ARROW_UP */ 38:\n        this._focusPhysicalItem(this._focusedVirtualIndex - (this.grid ? this._itemsPerRow : 1));\n        break;\n      case /* ARROW_LEFT */ 37:\n        if (this.grid) this._focusPhysicalItem(this._focusedVirtualIndex + (this._isRTL ? 1 : -1));\n        break;\n      case /* ENTER */ 13:\n        this._focusPhysicalItem(this._focusedVirtualIndex);\n        this._selectionHandler(e);\n        break;\n    }\n  },\n\n  _clamp: function(v, min, max) {\n    return Math.min(max, Math.max(min, v));\n  },\n\n  _debounce: function(name, cb, asyncModule) {\n    if (IS_V2) {\n      this._debouncers = this._debouncers || {};\n      this._debouncers[name] = Debouncer.debounce(\n        this._debouncers[name],\n        asyncModule,\n        cb.bind(this));\n      enqueueDebouncer(this._debouncers[name]);\n    } else {\n      addDebouncer(this.debounce(name, cb));\n    }\n  },\n\n  _forwardProperty: function(inst, name, value) {\n    if (IS_V2) {\n      inst._setPendingProperty(name, value);\n    } else {\n      inst[name] = value;\n    }\n  },\n\n  /* Templatizer bindings for v2 */\n  _forwardHostPropV2: function(prop, value) {\n    (this._physicalItems || [])\n      .concat([this._offscreenFocusedItem, this._focusBackfillItem])\n      .forEach(function(item) {\n        if (item) {\n          this.modelForElement(item).forwardHostProp(prop, value);\n        }\n      }, this);\n  },\n\n  _notifyInstancePropV2: function(inst, prop, value) {\n   if (matches(this.as, prop)) {\n      var idx = inst[this.indexAs];\n      if (prop == this.as) {\n        this.items[idx] = value;\n      }\n      this.notifyPath(translate(this.as, 'items.' + idx, prop), value);\n    }\n  },\n\n  /* Templatizer bindings for v1 */\n  _getStampedChildren: function() {\n    return this._physicalItems;\n  },\n\n  _forwardInstancePath: function(inst, path, value) {\n    if (path.indexOf(this.as + '.') === 0) {\n      this.notifyPath('items.' + inst.__key__ + '.' +\n          path.slice(this.as.length + 1), value);\n    }\n  },\n\n  _forwardParentPath: function(path, value) {\n    (this._physicalItems || [])\n      .concat([this._offscreenFocusedItem, this._focusBackfillItem])\n      .forEach(function(item) {\n        if (item) {\n          this.modelForElement(item).notifyPath(path, value, true);\n        }\n      }, this);\n  },\n\n  _forwardParentProp: function(prop, value) {\n    (this._physicalItems || [])\n      .concat([this._offscreenFocusedItem, this._focusBackfillItem])\n      .forEach(function(item) {\n        if (item) {\n          this.modelForElement(item)[prop] = value;\n        }\n      }, this);\n  },\n\n  /* Gets the activeElement of the shadow root/host that contains the list. */\n  _getActiveElement: function() {\n    var itemsHost = this._itemsParent.node.domHost;\n    return dom(itemsHost ? itemsHost.root : document).activeElement;\n  }\n});\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * The default element used for items in the vaadin-combo-box.\n *\n * ### Styling\n *\n * The following shadow DOM parts are available for styling:\n *\n * Part name | Description\n * ---|---\n * `content` | The element that wraps the item label or template content\n *\n * The following state attributes are exposed for styling:\n *\n * Attribute    | Description | Part name\n * -------------|-------------|------------\n * `selected` | Set when the item is selected | :host\n * `focused` | Set when the item is focused | :host\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @mixes Vaadin.ThemableMixin\n * @private\n */\nclass ComboBoxItemElement extends ThemableMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([hidden]) {\n         display: none;\n      }\n    </style>\n    <div part=\"content\" id=\"content\"></div>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-item';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * The index of the item\n       */\n      index: Number,\n\n      /**\n       * The item to render\n       * @type {(String|Object)}\n       */\n      item: Object,\n\n      /**\n       * The text label corresponding to the item\n       */\n      label: String,\n\n      /**\n       * True when item is selected\n       */\n      selected: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * True when item is focused\n       */\n      focused: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The template instance corresponding to the item\n       */\n      _itemTemplateInstance: Object\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateLabel(label, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"index\", index, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"item\", item, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"selected\", selected, _itemTemplateInstance)',\n      '_updateTemplateInstanceVariable(\"focused\", focused, _itemTemplateInstance)'\n    ];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!this._itemTemplateInstance) {\n      // 2.0 has __dataHost. Might want to consider assigning combobox reference directly to item.\n      const overlay = this.getRootNode().host.getRootNode().host;\n      const dropdown = overlay.__dataHost;\n      const comboBoxOverlay = dropdown.getRootNode().host;\n      const comboBox = comboBoxOverlay.getRootNode().host;\n      comboBox._ensureTemplatized();\n      if (comboBox._TemplateClass) {\n        this._itemTemplateInstance = new comboBox._TemplateClass({});\n        this.$.content.textContent = '';\n        this.$.content.appendChild(this._itemTemplateInstance.root);\n      }\n    }\n  }\n\n  _updateLabel(label, _itemTemplateInstance) {\n    if (_itemTemplateInstance === undefined && this.$.content) {\n      // Only set label to textContent no template\n      this.$.content.textContent = label;\n    }\n  }\n\n  _updateTemplateInstanceVariable(variable, value, _itemTemplateInstance) {\n    if (variable === undefined || value === undefined || _itemTemplateInstance === undefined) {\n      return;\n    }\n    _itemTemplateInstance[variable] = value;\n  }\n}\n\ncustomElements.define(ComboBoxItemElement.is, ComboBoxItemElement);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { OverlayElement } from '@vaadin/vaadin-overlay/src/vaadin-overlay.js';\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n/**\n * The overlay element.\n *\n * ### Styling\n *\n * See [`<vaadin-overlay>` documentation](https://github.com/vaadin/vaadin-overlay/blob/master/src/vaadin-overlay.html)\n * for `<vaadin-combo-box-overlay>` parts.\n *\n * See [ThemableMixin  how to apply styles for shadow parts](https://github.com/vaadin/vaadin-themable-mixin/wiki)\n *\n * @memberof Vaadin\n * @private\n */\nclass ComboBoxOverlayElement extends OverlayElement {\n  static get is() {\n    return 'vaadin-combo-box-overlay';\n  }\n}\n\ncustomElements.define(ComboBoxOverlayElement.is, ComboBoxOverlayElement);\n\n/**\n * Element for internal use only.\n *\n * @memberof Vaadin\n * @private\n */\nclass ComboBoxDropdownElement extends mixinBehaviors(IronResizableBehavior, PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host > #overlay {\n        display: none;\n      }\n    </style>\n    <vaadin-combo-box-overlay id=\"overlay\" hidden\\$=\"[[hidden]]\" opened=\"[[opened]]\" template=\"{{template}}\" style=\"align-items: stretch; margin: 0\">\n      <slot></slot>\n    </vaadin-combo-box-overlay>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-dropdown';\n  }\n\n  static get properties() {\n    return {\n      opened: {\n        type: Boolean,\n        notify: true\n      },\n\n      template: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * True if the device supports touch events.\n       */\n      touchDevice: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: () => {\n          try {\n            document.createEvent('TouchEvent');\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n      },\n\n      /**\n       * The element to position/align the dropdown by.\n       */\n      positionTarget: {\n        type: Object\n      },\n\n      /**\n       * If `true`, overlay is aligned above the `positionTarget`\n       */\n      alignedAbove: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n\n  static get observers() {\n    return ['_openedChanged(opened)'];\n  }\n\n  constructor() {\n    super();\n    this._boundSetPosition = this._setPosition.bind(this);\n    this._boundOutsideClickListener = this._outsideClickListener.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addEventListener('iron-resize', this._boundSetPosition);\n  }\n\n  ready() {\n    super.ready();\n\n    // Preventing the default modal behaviour of the overlay on input clicking\n    this.$.overlay.addEventListener('vaadin-overlay-outside-click', e => {\n      e.preventDefault();\n    });\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener('iron-resize', this._boundSetPosition);\n\n    // Making sure the overlay is closed and removed from DOM after detaching the dropdown.\n    this.opened = false;\n  }\n\n  notifyResize() {\n    super.notifyResize();\n\n    if (this.positionTarget && this.opened) {\n      this._setPosition();\n      // Schedule another position update (to cover virtual keyboard opening for example)\n      requestAnimationFrame(this._setPosition.bind(this));\n    }\n  }\n\n  /**\n   * Fired after the `vaadin-combo-box-dropdown` opens.\n   *\n   * @event vaadin-combo-box-dropdown-opened\n   */\n  /**\n   * Fired after the `vaadin-combo-box-dropdown` closes.\n   *\n   * @event vaadin-combo-box-dropdown-closed\n   */\n\n  _openedChanged(opened) {\n    if (opened) {\n      this.$.overlay.style.position = this._isPositionFixed(this.positionTarget) ? 'fixed' : 'absolute';\n      this._setPosition();\n\n      window.addEventListener('scroll', this._boundSetPosition, true);\n      document.addEventListener('click', this._boundOutsideClickListener, true);\n      this.dispatchEvent(new CustomEvent('vaadin-combo-box-dropdown-opened', {bubbles: true, composed: true}));\n    } else {\n      window.removeEventListener('scroll', this._boundSetPosition, true);\n      document.removeEventListener('click', this._boundOutsideClickListener, true);\n      this.dispatchEvent(new CustomEvent('vaadin-combo-box-dropdown-closed', {bubbles: true, composed: true}));\n    }\n  }\n\n\n  // We need to listen on 'click' event and capture it and close the overlay before\n  // propagating the event to the listener in the button. Otherwise, if the clicked button would call\n  // open(), this would happen: https://www.youtube.com/watch?v=Z86V_ICUCD4\n  _outsideClickListener(event) {\n    const eventPath = event.composedPath();\n    if (eventPath.indexOf(this.positionTarget) < 0 && eventPath.indexOf(this.$.overlay) < 0) {\n      this.opened = false;\n    }\n  }\n\n  _isPositionFixed(element) {\n    const offsetParent = this._getOffsetParent(element);\n\n    return window.getComputedStyle(element).position === 'fixed' ||\n      (offsetParent && this._isPositionFixed(offsetParent));\n  }\n\n  _getOffsetParent(element) {\n    if (element.assignedSlot) {\n      return element.assignedSlot.parentElement;\n    } else if (element.parentElement) {\n      return element.offsetParent;\n    }\n\n    const parent = element.parentNode;\n\n    if (parent && parent.nodeType === 11 && parent.host) {\n      return parent.host; // parent is #shadowRoot\n    }\n  }\n\n  _verticalOffset(overlayRect, targetRect) {\n    return this.alignedAbove ? -overlayRect.height : targetRect.height;\n  }\n\n  _shouldAlignAbove() {\n    const spaceBelow = (\n      window.innerHeight -\n      this.positionTarget.getBoundingClientRect().bottom -\n      Math.min(document.body.scrollTop, 0)\n    ) / window.innerHeight;\n\n    return spaceBelow < 0.30;\n  }\n\n  _setPosition(e) {\n    if (e && e.target) {\n      const target = e.target === document ? document.body : e.target;\n      const parent = this.$.overlay.parentElement;\n      if (!(target.contains(this.$.overlay) || target.contains(this.positionTarget)) || parent !== document.body) {\n        return;\n      }\n    }\n\n    const targetRect = this.positionTarget.getBoundingClientRect();\n    this.alignedAbove = this._shouldAlignAbove();\n\n    const overlayRect = this.$.overlay.getBoundingClientRect();\n    this._translateX = targetRect.left - overlayRect.left + (this._translateX || 0);\n    this._translateY = targetRect.top - overlayRect.top + (this._translateY || 0) +\n      this._verticalOffset(overlayRect, targetRect);\n\n    const _devicePixelRatio = window.devicePixelRatio || 1;\n    this._translateX = Math.round(this._translateX * _devicePixelRatio) / _devicePixelRatio;\n    this._translateY = Math.round(this._translateY * _devicePixelRatio) / _devicePixelRatio;\n    this.$.overlay.style.transform = `translate3d(${this._translateX}px, ${this._translateY}px, 0)`;\n\n    this.$.overlay.style.width = this.positionTarget.clientWidth + 'px';\n    this.$.overlay.style.justifyContent = this.alignedAbove ? 'flex-end' : 'flex-start';\n\n    // TODO: fire only when position actually changes changes\n    this.dispatchEvent(new CustomEvent('position-changed'));\n  }\n}\n\ncustomElements.define(ComboBoxDropdownElement.is, ComboBoxDropdownElement);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/polymer/lib/utils/debounce.js';\nimport '@polymer/iron-list/iron-list.js';\nimport '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport './vaadin-combo-box-item.js';\nimport './vaadin-combo-box-dropdown.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\n/**\n * Element for internal use only.\n *\n * @memberof Vaadin\n * @private\n */\nclass ComboBoxDropdownWrapperElement extends (class extends PolymerElement {}) {\n  static get template() {\n    return html`\n    <style>\n      #scroller {\n        overflow: auto;\n\n        /* Fixes item background from getting on top of scrollbars on Safari */\n        transform: translate3d(0, 0, 0);\n\n        /* Enable momentum scrolling on iOS (iron-list v1.2+ no longer does it for us) */\n        -webkit-overflow-scrolling: touch;\n\n        /* Fixes scrollbar disappearing when \"Show scroll bars: Always\" enabled in Safari */\n        box-shadow: 0 0 0 white;\n      }\n    </style>\n    <vaadin-combo-box-dropdown id=\"dropdown\" opened=\"{{opened}}\" hidden=\"[[_hidden(_items.*, loading)]]\" position-target=\"[[positionTarget]]\" on-template-changed=\"_templateChanged\" on-position-changed=\"_setOverlayHeight\">\n      <template>\n        <div id=\"scroller\" on-click=\"_stopPropagation\" hidden\\$=\"[[loading]]\">\n          <iron-list id=\"selector\" role=\"listbox\" items=\"[[_items]]\" scroll-target=\"[[_scroller]]\">\n            <template>\n              <vaadin-combo-box-item on-click=\"_onItemClick\" index=\"[[index]]\" item=\"[[item]]\" label=\"[[getItemLabel(item)]]\" selected=\"[[_isItemSelected(item, _selectedItem)]]\" role\\$=\"[[_getAriaRole(index)]]\" aria-selected\\$=\"[[_getAriaSelected(_focusedIndex,index)]]\" focused=\"[[_isItemFocused(_focusedIndex,index)]]\" touch-device\\$=\"[[touchDevice]]\" tabindex=\"-1\">\n              </vaadin-combo-box-item>\n            </template>\n          </iron-list>\n        </div>\n      </template>\n    </vaadin-combo-box-dropdown>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-dropdown-wrapper';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * True if the device supports touch events.\n       */\n      touchDevice: {\n        type: Boolean,\n        reflectToAttribute: true,\n        value: () => {\n          try {\n            document.createEvent('TouchEvent');\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n      },\n\n      opened: Boolean,\n\n      /**\n       * The element to position/align the dropdown by.\n       */\n      positionTarget: {\n        type: Object\n      },\n\n      /**\n       * `true` when new items are being loaded.\n       */\n      loading: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        observer: '_setOverlayHeight'\n      },\n\n      _selectedItem: {\n        type: Object\n      },\n\n      _items: {\n        type: Object\n      },\n\n      _focusedIndex: {\n        type: Number,\n        notify: true,\n        value: -1,\n        observer: '_focusedIndexChanged'\n      },\n\n      _focusedItem: {\n        type: String,\n        computed: '_getFocusedItem(_focusedIndex)'\n      },\n\n      _itemLabelPath: {\n        type: String,\n        value: 'label'\n      },\n\n      _itemValuePath: {\n        type: String,\n        value: 'value'\n      },\n\n      _selector: Object\n    };\n  }\n\n  static get observers() {\n    return ['_selectorChanged(_selector)', '_loadingChanged(loading)'];\n  }\n\n  _fireTouchAction(sourceEvent) {\n    this.dispatchEvent(new CustomEvent('vaadin-overlay-touch-action', {\n      detail: {sourceEvent: sourceEvent}\n    }));\n  }\n\n  ready() {\n    super.ready();\n    // IE11: when scrolling with mouse, the focus goes to the scroller.\n    // This causes the overlay closing due to defocusing the input field.\n    // Prevent focusing the scroller by setting `unselectable=\"on\"`.\n    if (/Trident/.test(navigator.userAgent)) {\n      this._scroller.setAttribute('unselectable', 'on');\n    }\n\n    this.$.dropdown.$.overlay.addEventListener('touchend', e => this._fireTouchAction(e));\n    this.$.dropdown.$.overlay.addEventListener('touchmove', e => this._fireTouchAction(e));\n\n    // Prevent blurring the input when clicking inside the overlay.\n    this.$.dropdown.$.overlay.addEventListener('mousedown', e => e.preventDefault());\n  }\n\n  _templateChanged(e) {\n    this._selector = this.$.dropdown.$.overlay.content.querySelector('#selector');\n    this._scroller = this.$.dropdown.$.overlay.content.querySelector('#scroller');\n  }\n\n  _loadingChanged(loading) {\n    if (loading) {\n      this.$.dropdown.$.overlay.setAttribute('loading', '');\n    } else {\n      this.$.dropdown.$.overlay.removeAttribute('loading');\n    }\n  }\n\n  _selectorChanged(selector) {\n    this._patchWheelOverScrolling();\n  }\n\n  _setOverlayHeight() {\n    if (!this.positionTarget || !this._selector) {\n      return;\n    }\n\n    const targetRect = this.positionTarget.getBoundingClientRect();\n\n    this._scroller.style.maxHeight = (window.ShadyCSS ?\n      window.ShadyCSS.getComputedStyleValue(this, '--vaadin-combo-box-overlay-max-height') :\n      getComputedStyle(this).getPropertyValue('--vaadin-combo-box-overlay-max-height')) || '65vh';\n\n    // overlay max height is restrained by the #scroller max height which is set to 65vh in CSS.\n    this.$.dropdown.$.overlay.style.maxHeight = this._maxOverlayHeight(targetRect);\n\n    // we need to set height for iron-list to make its `firstVisibleIndex` work correctly.\n    this._selector.style.maxHeight = this._maxOverlayHeight(targetRect);\n\n    this.updateViewportBoundaries();\n  }\n\n  _maxOverlayHeight(targetRect) {\n    const margin = 8;\n    const minHeight = 116; // Height of two items in combo-box\n    const bottom = Math.min(window.innerHeight, document.body.scrollHeight - document.body.scrollTop);\n\n    if (this.$.dropdown.alignedAbove) {\n      return Math.max(targetRect.top - margin + Math.min(document.body.scrollTop, 0), minHeight) + 'px';\n    } else {\n      return Math.max(bottom - targetRect.bottom - margin, minHeight) + 'px';\n    }\n  }\n\n  _getFocusedItem(focusedIndex) {\n    if (focusedIndex >= 0) {\n      return this._items[focusedIndex];\n    }\n  }\n\n  _isItemSelected(item, selectedItem) {\n    return item === selectedItem;\n  }\n\n  _onItemClick(e) {\n    if (e.detail && e.detail.sourceEvent && e.detail.sourceEvent.stopPropagation) {\n      this._stopPropagation(e.detail.sourceEvent);\n    }\n\n    this.dispatchEvent(new CustomEvent('selection-changed', {detail: {item: e.model.item}}));\n  }\n\n  /**\n   * Gets the index of the item with the provided label.\n   * @return {Number}\n   */\n  indexOfLabel(label) {\n    if (this._items && label) {\n      for (let i = 0; i < this._items.length; i++) {\n        if (this.getItemLabel(this._items[i]).toString().toLowerCase() ===\n          label.toString().toLowerCase()) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   * Gets the label string for the item based on the `_itemLabelPath`.\n   * @return {String}\n   */\n  getItemLabel(item) {\n    let label = item ? this.get(this._itemLabelPath, item) : undefined;\n    if (label === undefined) {\n      label = item ? item.toString() : '';\n    }\n    return label;\n  }\n\n  _isItemFocused(focusedIndex, itemIndex) {\n    return focusedIndex == itemIndex;\n  }\n\n  _getAriaSelected(focusedIndex, itemIndex) {\n    return this._isItemFocused(focusedIndex, itemIndex).toString();\n  }\n\n  _getAriaRole(itemIndex) {\n    return itemIndex !== undefined ? 'option' : false;\n  }\n\n  _focusedIndexChanged(index) {\n    if (index >= 0) {\n      this._scrollIntoView(index);\n    }\n  }\n\n  _scrollIntoView(index) {\n    const visibleItemsCount = this._visibleItemsCount();\n    if (visibleItemsCount === undefined) {\n      // Scroller is not visible. Moving is unnecessary.\n      return;\n    }\n\n    let targetIndex = index;\n\n    if (index > this._selector.lastVisibleIndex - 1) {\n      // Index is below the bottom, scrolling down. Make the item appear at the bottom.\n      targetIndex = index - visibleItemsCount + 1;\n    } else if (index > this._selector.firstVisibleIndex) {\n      // The item is already visible, scrolling is unnecessary per se. But we need to trigger iron-list to set\n      // the correct scrollTop on the scrollTarget. Scrolling to firstVisibleIndex.\n      targetIndex = this._selector.firstVisibleIndex;\n    }\n    this._selector.scrollToIndex(Math.max(0, targetIndex));\n\n    // Sometimes the item is partly below the bottom edge, detect and adjust.\n    const pidx = this._selector._getPhysicalIndex(index),\n      physicalItem = this._selector._physicalItems[pidx];\n    if (!physicalItem) {\n      return;\n    }\n    const physicalItemRect = physicalItem.getBoundingClientRect(),\n      scrollerRect = this._scroller.getBoundingClientRect(),\n      scrollTopAdjust = physicalItemRect.bottom - scrollerRect.bottom + this._viewportTotalPaddingBottom;\n    if (scrollTopAdjust > 0) {\n      this._scroller.scrollTop += scrollTopAdjust;\n    }\n  }\n\n  ensureItemsRendered() {\n    this._selector._render();\n  }\n\n  adjustScrollPosition() {\n    if (this._items) {\n      this._scrollIntoView(this._focusedIndex);\n    }\n  }\n\n  /**\n   * We want to prevent the kinetic scrolling energy from being transferred from the overlay contents over to the parent.\n   * Further improvement ideas: after the contents have been scrolled to the top or bottom and scrolling has stopped, it could allow\n   * scrolling the parent similarly to touch scrolling.\n   */\n  _patchWheelOverScrolling() {\n    const selector = this._selector;\n    selector.addEventListener('wheel', e => {\n      const scroller = selector._scroller || selector.scrollTarget;\n      const scrolledToTop = scroller.scrollTop === 0;\n      const scrolledToBottom = (scroller.scrollHeight - scroller.scrollTop - scroller.clientHeight) <= 1;\n\n      if (scrolledToTop && e.deltaY < 0) {\n        e.preventDefault();\n      } else if (scrolledToBottom && e.deltaY > 0) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  updateViewportBoundaries() {\n    this._cachedViewportTotalPaddingBottom = undefined;\n    this._selector.updateViewportBoundaries();\n  }\n\n  get _viewportTotalPaddingBottom() {\n    if (this._cachedViewportTotalPaddingBottom === undefined) {\n      const itemsStyle = window.getComputedStyle(this._selector.$.items);\n      this._cachedViewportTotalPaddingBottom = [\n        itemsStyle.paddingBottom,\n        itemsStyle.borderBottomWidth\n      ].map(v => {\n        return parseInt(v, 10);\n      }).reduce((sum, v) => {\n        return sum + v;\n      });\n    }\n\n    return this._cachedViewportTotalPaddingBottom;\n  }\n\n  _visibleItemsCount() {\n    if (!this._selector) {\n      return;\n    }\n\n    // Ensure items are rendered\n    this._selector.flushDebouncer('_debounceTemplate');\n    // Ensure items are positioned\n    this._selector.scrollToIndex(this._selector.firstVisibleIndex);\n    // Ensure viewport boundaries are up-to-date\n    this.updateViewportBoundaries();\n    return this._selector.lastVisibleIndex - this._selector.firstVisibleIndex + 1;\n  }\n\n  _selectItem(item) {\n    item = (typeof item === 'number') ? this._items[item] : item;\n    if (this._selector.selectedItem !== item) {\n      this._selector.selectItem(item);\n    }\n  }\n\n  _preventDefault(e) {\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n  }\n\n  _stopPropagation(e) {\n    e.stopPropagation();\n  }\n\n  _hidden(itemsChange, loading) {\n    return !loading && (!this._items || !this._items.length);\n  }\n}\n\ncustomElements.define(ComboBoxDropdownWrapperElement.is, ComboBoxDropdownWrapperElement);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { IronA11yKeysBehavior } from '@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js';\nimport { ThemableMixin } from '@vaadin/vaadin-themable-mixin/vaadin-themable-mixin.js';\nimport { ComboBoxMixin } from './vaadin-combo-box-mixin.js';\nimport './vaadin-combo-box-dropdown-wrapper.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { dashToCamelCase } from '@polymer/polymer/lib/utils/case-map.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n/**\n * `<vaadin-combo-box-light>` is a customizable version of the `<vaadin-combo-box>` providing\n * only the dropdown functionality and leaving the input field definition to the user.\n *\n * The element has the same API as `<vaadin-combo-box>`.\n *\n * To create a custom input field, you need to add a child element which has a two-way\n * data-bindable property representing the input value. The property name is expected\n * to be `value` by default. See the example below for a simplest possible example\n * using a `<vaadin-text-field>` element.\n *\n * ```html\n * <vaadin-combo-box-light>\n *   <vaadin-text-field>\n *   </vaadin-text-field>\n * </vaadin-combo-box-light>\n * ```\n *\n * If you are using other custom input fields like `<iron-input>`, you\n * need to define the name of the bindable property with the `attrForValue` attribute.\n *\n * ```html\n * <vaadin-combo-box-light attr-for-value=\"bind-value\">\n *   <iron-input>\n *     <input>\n *   </iron-input>\n * </vaadin-combo-box-light>\n * ```\n *\n * In the next example you can see how to create a custom input field based\n * on a `<paper-input>` decorated with a custom `<iron-icon>` and\n * two `<paper-button>`s to act as the clear and toggle controls.\n *\n * ```html\n * <vaadin-combo-box-light>\n *   <paper-input label=\"Elements\" class=\"input\">\n *     <iron-icon icon=\"toll\" slot=\"prefix\"></iron-icon>\n *     <paper-button slot=\"suffix\" class=\"clear-button\">Clear</paper-button>\n *     <paper-button slot=\"suffix\" class=\"toggle-button\">Toggle</paper-button>\n *   </paper-input>\n * </vaadin-combo-box-light>\n * ```\n * @memberof Vaadin\n * @mixes Vaadin.ComboBoxMixin\n * @mixes Vaadin.ThemableMixin\n */\nclass ComboBoxLightElement extends ThemableMixin(ComboBoxMixin(mixinBehaviors(\n  [IronA11yKeysBehavior], PolymerElement\n))) {\n  static get template() {\n    return html`\n    <slot></slot>\n\n    <vaadin-combo-box-dropdown-wrapper id=\"overlay\" opened=\"[[opened]]\" position-target=\"[[inputElement]]\" _focused-index=\"[[_focusedIndex]]\" _item-label-path=\"[[itemLabelPath]]\" loading=\"[[loading]]\">\n    </vaadin-combo-box-dropdown-wrapper>\n`;\n  }\n\n  static get is() {\n    return 'vaadin-combo-box-light';\n  }\n\n  static get properties() {\n    return {\n      /**\n       * Name of the two-way data-bindable property representing the\n       * value of the custom input field.\n       */\n      attrForValue: {\n        type: String,\n        value: 'value'\n      },\n\n      inputElement: {\n        type: Element,\n        readOnly: true\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._toggleElement = this.querySelector('.toggle-button');\n    this._clearElement = this.querySelector('.clear-button');\n  }\n\n  get focused() {\n    return this.getRootNode().activeElement === this.inputElement;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    const cssSelector = 'vaadin-text-field,iron-input,paper-input,.paper-input-input,.input';\n    this._setInputElement(this.querySelector(cssSelector));\n    this._revertInputValue();\n    this.listen(this.inputElement, 'input', '_inputValueChanged');\n    this._preventInputBlur();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.unlisten(this.inputElement, 'input', '_inputValueChanged');\n    this._restoreInputBlur();\n  }\n\n  get _propertyForValue() {\n    return dashToCamelCase(this.attrForValue);\n  }\n\n  get _inputElementValue() {\n    return this.inputElement && this.inputElement[this._propertyForValue];\n  }\n\n  set _inputElementValue(value) {\n    if (this.inputElement) {\n      this.inputElement[this._propertyForValue] = value;\n    }\n  }\n}\n\ncustomElements.define(ComboBoxLightElement.is, ComboBoxLightElement);\n\nexport { ComboBoxLightElement };\n"],"sourceRoot":""}
<html><head></head><body><dom-module id="ha-panel-dev-service"><template><style include="ha-style">:host{-ms-user-select:initial;-webkit-user-select:initial;-moz-user-select:initial;}.content{padding:16px;}.ha-form{margin-right:16px;max-width:500px;}.description{margin-top:24px;white-space:pre-wrap;}.header{@apply (--paper-font-title);}.attributes th{text-align:left;}.attributes tr{vertical-align:top;}.attributes tr:nth-child(odd){background-color:var(--table-row-background-color,#eee);}.attributes tr:nth-child(even){background-color:var(--table-row-alternative-background-color,#eee);}.attributes td:nth-child(3){white-space:pre-wrap;word-break:break-word;}pre{margin:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Services</div></app-toolbar></app-header><app-localstorage-document key="panel-dev-service-state-domain" data="{{domain}}"></app-localstorage-document><app-localstorage-document key="[[computeServiceKey(domain)]]" data="{{service}}"></app-localstorage-document><app-localstorage-document key="[[computeServicedataKey(domain, service)]]" data="{{serviceData}}"></app-localstorage-document><div class="content"><p>Call a service from a component.</p><div class="ha-form"><vaadin-combo-box label="Domain" items="[[computeDomains(serviceDomains)]]" value="{{domain}}"></vaadin-combo-box><vaadin-combo-box label="Service" items="[[computeServices(serviceDomains, domain)]]" value="{{service}}"></vaadin-combo-box><paper-textarea always-float-label="" label="Service Data (JSON, optional)" value="{{serviceData}}"></paper-textarea><paper-button on-tap="callService" raised="">Call Service</paper-button></div><template is="dom-if" if="[[!domain]]"><h1>Select a domain and service to see the description</h1></template><template is="dom-if" if="[[domain]]"><template is="dom-if" if="[[!service]]"><h1>Select a service to see the description</h1></template></template><template is="dom-if" if="[[domain]]"><template is="dom-if" if="[[service]]"><template is="dom-if" if="[[!_description]]"><h1>No description is available</h1></template><template is="dom-if" if="[[_description]]"><h3>[[_description]]</h3></template><template is="dom-if" if="[[_attributes.length]]"><h1>Valid Parameters</h1><table class="attributes"><tbody><tr><th>Parameter</th><th>Description</th><th>Example</th></tr><template is="dom-repeat" items="[[_attributes]]" as="attribute"><tr><td><pre>[[attribute.key]]</pre></td><td>[[attribute.description]]</td><td>[[attribute.example]]</td></tr></template></tbody></table></template></template></template></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),HaPanelDevService=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeServiceDomains",value:function(e){return e.config.services}},{key:"computeAttributesArray",value:function(e,t,r){if(!e)return[];if(!(t in e))return[];if(!(r in e[t]))return[];var n=e[t][r].fields;return Object.keys(n).map(function(e){return Object.assign({},n[e],{key:e})})}},{key:"computeDescription",value:function(e,t,r){if(e&&t in e&&r in e[t])return e[t][r].description}},{key:"computeDomains",value:function(e){return Object.keys(e).sort()}},{key:"computeServices",value:function(e,t){return t in e?Object.keys(e[t]).sort():[]}},{key:"computeServiceKey",value:function(e){return e?"panel-dev-service-state-service."+e:"panel-dev-service-state-service"}},{key:"computeServicedataKey",value:function(e,t){return e&&t?"panel-dev-service-state-servicedata."+e+"."+t:"panel-dev-service-state-servicedata"}},{key:"domainChanged",value:function(){this.service="",this.serviceData=""}},{key:"serviceChanged",value:function(){this.serviceData=""}},{key:"callService",value:function(){var e;try{e=this.serviceData?JSON.parse(this.serviceData):{}}catch(e){return void alert("Error parsing JSON: "+e)}this.hass.callService(this.domain,this.service,e)}}],[{key:"is",get:function(){return"ha-panel-dev-service"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean,value:!1},showMenu:{type:Boolean,value:!1},domain:{type:String,value:"",observer:"domainChanged"},service:{type:String,value:"",observer:"serviceChanged"},serviceData:{type:String,value:""},_attributes:{type:Array,computed:"computeAttributesArray(serviceDomains, domain, service)"},_description:{type:String,computed:"computeDescription(serviceDomains, domain, service)"},serviceDomains:{type:Object,computed:"computeServiceDomains(hass)"}}}}]),t}();customElements.define(HaPanelDevService.is,HaPanelDevService);</script></body></html>
<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="ha-config-section"><template><style include="iron-flex ha-style">.content{padding:28px 20px 0;max-width:1040px;margin:0 auto;}.header{@apply (--paper-font-display1);opacity:var(--dark-primary-opacity);}.together{margin-top:32px;}.intro{@apply (--paper-font-subhead);width:100%;max-width:400px;margin-right:40px;opacity:var(--dark-primary-opacity);}.panel{margin-top:-24px;}.panel ::slotted(*){margin-top:24px;display:block;}.narrow.content{max-width:640px;}.narrow .together{margin-top:20px;}.narrow .header{@apply (--paper-font-headline);}.narrow .intro{font-size:14px;padding-bottom:20px;margin-right:0;max-width:500px;}</style><div class$="[[computeContentClasses(isWide)]]"><div class="header"><slot name="header"></slot></div><div class$="[[computeClasses(isWide)]]"><div class="intro"><slot name="introduction"></slot></div><div class="flex panel"><slot></slot></div></div></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigSection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeContentClasses",value:function(e){return e?"content ":"content narrow"}},{key:"computeClasses",value:function(e){return"together layout "+(e?"horizontal":"vertical narrow")}}],[{key:"is",get:function(){return"ha-config-section"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},isWide:{type:Boolean,value:!1}}}}]),t}();customElements.define(HaConfigSection.is,HaConfigSection);</script><dom-module id="ha-config-navigation" assetpath="dashboard/"><template><style include="iron-flex">paper-card{display:block;}paper-item{cursor:pointer;}</style><paper-card><template is="dom-repeat" items="[[pages]]"><template is="dom-if" if="[[_computeLoaded(hass, item)]]"><paper-item on-tap="_navigate"><paper-item-body two-line="">[[_computeCaption(item)]]<div secondary="">[[_computeDescription(item)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></template></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigNavigation=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"_computeLoaded",value:function(e,t){return t.loaded||window.hassUtil.isComponentLoaded(e,t.domain)}},{key:"_computeCaption",value:function(e){return e.caption}},{key:"_computeDescription",value:function(e){return e.description}},{key:"_navigate",value:function(e){history.pushState(null,null,"/config/"+e.model.item.domain),this.fire("location-changed")}}],[{key:"is",get:function(){return"ha-config-navigation"}},{key:"properties",get:function(){return{hass:{type:Object},pages:{type:Array,value:[{domain:"core",caption:"General",description:"Validate your configuration file and control the server.",loaded:!0},{domain:"customize",caption:"Customization",description:"Customize your entities.",loaded:!0},{domain:"automation",caption:"Automation",description:"Create and edit automations."},{domain:"script",caption:"Script",description:"Create and edit scripts."},{domain:"zwave",caption:"Z-Wave",description:"Manage your Z-Wave network."}]}}}}]),t}();customElements.define(HaConfigNavigation.is,HaConfigNavigation);</script><dom-module id="ha-config-cloud-menu" assetpath="dashboard/"><template><style include="iron-flex">paper-card{display:block;}paper-item{cursor:pointer;}</style><paper-card><paper-item on-tap="_navigate"><paper-item-body two-line="">Home Assistant Cloud<template is="dom-if" if="[[account]]"><div secondary="">Logged in as [[account.email]]</div></template><template is="dom-if" if="[[!account]]"><div secondary="">Not logged in</div></template></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCloudMenu=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"_navigate",value:function(){this.navigate("/config/cloud")}}],[{key:"is",get:function(){return"ha-config-cloud-menu"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,account:Object}}}]),t}();customElements.define(HaConfigCloudMenu.is,HaConfigCloudMenu);</script><dom-module id="ha-config-dashboard" assetpath="dashboard/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Configuration</div></app-toolbar></app-header><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Configure Home Assistant</span> <span slot="introduction">Here it is possible to configure your components and Home Assistant. Not everything is possible to configure from the UI yet, but we're working on it.</span><template is="dom-if" if="[[computeIsCloudLoaded(hass)]]"><ha-config-cloud-menu hass="[[hass]]" account="[[account]]"></ha-config-cloud-menu></template><ha-config-navigation hass="[[hass]]"></ha-config-navigation></ha-config-section></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),HaConfigDashboard=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeIsCloudLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"cloud")}}],[{key:"is",get:function(){return"ha-config-dashboard"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,account:Object,narrow:Boolean,showMenu:Boolean}}}]),t}();customElements.define(HaConfigDashboard.is,HaConfigDashboard);</script><dom-module id="ha-config-section-core" assetpath="core/"><template><style include="iron-flex ha-style">.validate-container{@apply (--layout-vertical);@apply (--layout-center-center);height:140px;}.validate-result{color:var(--google-green-500);font-weight:500;margin-bottom:1em;}.config-invalid{margin:1em 0;}.config-invalid .text{color:var(--google-red-500);font-weight:500;}.config-invalid paper-button{float:right;}.validate-log{white-space:pre-wrap;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Configuration and Server Control</span> <span slot="introduction">Changing your configuration can be a tiresome process. We know. This section will try to make your life a little bit easier.</span><paper-card heading="Configuration Validation"><div class="card-content">Validate your configuration if you recently made some changes to your configuration and want to make sure that it is all valid.<template is="dom-if" if="[[!validateLog]]"><div class="validate-container"><template is="dom-if" if="[[!validating]]"><div class="validate-result" id="result">[[validateResult]]</div><paper-button raised="" on-tap="validateConfig">check config</paper-button></template><template is="dom-if" if="[[validating]]"><paper-spinner active=""></paper-spinner></template></div></template><template is="dom-if" if="[[validateLog]]"><div class="config-invalid"><span class="text">Configuration invalid.</span><paper-button raised="" on-tap="validateConfig">check config</paper-button></div><div id="configLog" class="validate-log">[[validateLog]]</div></template></div></paper-card><paper-card heading="Configuration Reloading"><div class="card-content">Some parts of Home Assistant can reload without requiring a restart. Hitting reload will unload their current configuration and load the new one.</div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="homeassistant" service="reload_core_config">Reload Core</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="group" service="reload" hidden$="[[!groupLoaded(hass)]]">Reload Groups</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="automation" service="reload" hidden$="[[!automationLoaded(hass)]]">Reload Automation</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="script" service="reload" hidden$="[[!scriptLoaded(hass)]]">Reload Scripts</ha-call-service-button></div></paper-card><paper-card heading="Server Management"><div class="card-content">Control your Home Assistant server… from Home Assistant.</div><div class="card-actions warning"><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="restart">Restart</ha-call-service-button><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="stop">Stop</ha-call-service-button></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigSectionCore=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"groupLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"group")}},{key:"automationLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"automation")}},{key:"scriptLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"script")}},{key:"validateConfig",value:function(){this.validating=!0,this.validateLog="",this.validateResult="";var e=this;this.hass.callApi("POST","config/core/check_config").then(function(t){e.validating=!1;(e.configValid="valid"===t.result)?e.validateResult="Valid!":e.validateLog=t.errors})}}],[{key:"is",get:function(){return"ha-config-section-core"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean,value:!1},validating:{type:Boolean,value:!1},validateResult:{type:String,value:""},validateLog:{type:String,value:""}}}}]),t}();customElements.define(HaConfigSectionCore.is,HaConfigSectionCore);</script><dom-module id="ha-config-section-hassbian" assetpath="core/"><template><style include="iron-flex ha-style">.header{font-size:16px;margin-bottom:1em;}.header .status{font-size:14px;float:right;}.card-actions paper-button{color:var(--default-primary-color);font-weight:500;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Bring Hassbian to the next level</span> <span slot="introduction">Discover exciting add-ons to enhance your Home Assistant installation. Add an MQTT server or control a connected TV via HDMI-CEC.</span><template is="dom-if" if="[[suiteStatus]]"><template is="dom-repeat" items="[[computeSuiteKeys(suiteStatus)]]" as="suiteKey"><paper-card><div class="card-content"><div class="header">[[computeTitle(suiteKey)]] <span class="status">[[computeSuiteStatus(suiteStatus, suiteKey)]]</span></div>[[computeSuiteDescription(suiteStatus, suiteKey)]]</div><div class="card-actions"><paper-button on-tap="suiteMoreInfoTapped">LEARN MORE</paper-button><template is="dom-if" if="[[computeShowInstall(suiteStatus, suiteKey)]]"><paper-button on-tap="suiteActionTapped">INSTALL</paper-button></template></div></paper-card></template></template></ha-config-section></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},HaConfigSectionHassbian=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"updateStatus",value:function(){this.hass.callApi("GET","config/hassbian/suites").then(function(t){var e=this;this.suiteStatus=t;for(var n=!1,i=Object.keys(t),o=0;o<i.length;o++)if("installing"===t[i[o]].state){n=!0;break}n&&setTimeout(function(){return e.updateStatus()},5e3)}.bind(this))}},{key:"connectedCallback",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),this.updateStatus=this.updateStatus.bind(this),this.updateStatus()}},{key:"computeSuiteKeys",value:function(t){return Object.keys(t).sort(function(e,n){var i="installing"===t[e].state,o="installing"===t[n].state;if(i&&o);else{if(i)return-1;if(o)return 1}return e<n?-1:e>n?1:0})}},{key:"computeSuiteDescription",value:function(t,e){return t[e].description}},{key:"computeTitle",value:function(t){return t.substr(0,1).toUpperCase()+t.substr(1)}},{key:"computeSuiteStatus",value:function(t,e){var n=t[e].state.replace(/_/," ");return n.substr(0,1).toUpperCase()+n.substr(1)}},{key:"computeShowStatus",value:function(t,e){var n=t[e].state;return"installing"!==n&&"not_installed"!==n}},{key:"computeShowInstall",value:function(t,e){return"not_installed"===t[e].state}},{key:"suiteMoreInfoTapped",value:function(){}},{key:"suiteActionTapped",value:function(){this.hass.callApi("POST","config/hassbian/suites/openzwave/install").then(this.updateStatus)}}],[{key:"is",get:function(){return"ha-config-section-hassbian"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},suiteStatus:{type:Object,value:null}}}}]),e}();customElements.define(HaConfigSectionHassbian.is,HaConfigSectionHassbian);</script><dom-module id="ha-config-section-translation" assetpath="core/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">Choose a Language</span> <span slot="introduction">Choose a language for the Home Assistant interface on this device.</span><paper-card><div class="card-content"><paper-dropdown-menu label="Language" dynamic-align=""><paper-listbox slot="dropdown-content" on-selected-item-changed="handleLanguageSelect" attr-for-selected="language-tag" selected="[[language]]"><template is="dom-repeat" items="[[languages]]"><paper-item language-tag="[[item.tag]]">[[item.nativeName]]</paper-item></template></paper-listbox>&gt;</paper-dropdown-menu></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),HaConfigSectionTranslation=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(t,[{key:"computeLanguages",value:function(e){return e&&e.translationMetadata?Object.keys(e.translationMetadata).map(function(t){return{tag:t,nativeName:e.translationMetadata[t].nativeName}}):[]}},{key:"handleLanguageSelect",value:function(e){e.detail.value&&e.detail.value.languageTag!==this.language&&this.fire("hass-language-select",{language:e.detail.value.languageTag})}}],[{key:"is",get:function(){return"ha-config-section-translation"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},languages:{type:Array,computed:"computeLanguages(hass)"}}}}]),t}();customElements.define(HaConfigSectionTranslation.is,HaConfigSectionTranslation);</script><dom-module id="ha-config-section-themes" assetpath="core/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">Set a theme</span> <span slot="introduction">Choose 'Backend-selected' to use whatever theme the backend chooses or pick a theme for this device.</span><paper-card><div class="card-content"><paper-dropdown-menu label="Theme" dynamic-align=""><paper-listbox slot="dropdown-content" selected="{{selectedTheme}}"><template is="dom-repeat" items="[[themes]]" as="theme"><paper-item>[[theme]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_get=function e(t,n,s){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,s)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(s)},HaConfigSectionThemes=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.hass.selectedTheme&&this.themes.indexOf(this.hass.selectedTheme)>0?this.selectedTheme=this.themes.indexOf(this.hass.selectedTheme):this.hass.selectedTheme||(this.selectedTheme=0)}},{key:"computeThemes",value:function(e){return e?["Backend-selected","default"].concat(Object.keys(e.themes.themes).sort()):[]}},{key:"selectionChanged",value:function(e,t){t>0&&t<this.themes.length?e.selectedTheme!==this.themes[t]&&this.fire("settheme",this.themes[t]):0===t&&""!==e.selectedTheme&&this.fire("settheme","")}}],[{key:"is",get:function(){return"ha-config-section-themes"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},themes:{type:Array,computed:"computeThemes(hass)"},selectedTheme:{type:Number}}}},{key:"observers",get:function(){return["selectionChanged(hass, selectedTheme)"]}}]),t}();customElements.define(HaConfigSectionThemes.is,HaConfigSectionThemes);</script><dom-module id="ha-config-core" assetpath="core/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}.border{margin:32px auto 0;border-bottom:1px solid rgba(0, 0, 0, 0.12);max-width:1040px;}.narrow .border{max-width:640px;}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">General</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section-core is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-core><template is="dom-if" if="[[computeIsTranslationLoaded(hass)]]"><div class="border"></div><ha-config-section-translation is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-translation></template><template is="dom-if" if="[[computeIsThemesLoaded(hass)]]"><div class="border"></div><ha-config-section-themes is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-themes></template><template is="dom-if" if="[[computeIsHassbianLoaded(hass)]]"><div class="border"></div><ha-config-section-hassbian is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-hassbian></template></div></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCore=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeClasses",value:function(e){return e?"content":"content narrow"}},{key:"computeIsHassbianLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"config.hassbian")}},{key:"computeIsZwaveLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"config.zwave")}},{key:"computeIsTranslationLoaded",value:function(e){return e.translationMetadata&&Object.keys(e.translationMetadata).length}},{key:"computeIsThemesLoaded",value:function(e){return e.themes&&e.themes.themes&&Object.keys(e.themes.themes).length}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-config-core"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean}}}]),t}();customElements.define(HaConfigCore.is,HaConfigCore);</script><dom-module id="hass-subpage" assetpath="../../src/layouts/"><template><style include="ha-style"></style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">[[title]]</div></app-toolbar></app-header><slot></slot></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HassSubpage=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"hass-subpage"}},{key:"properties",get:function(){return{title:String}}}]),t}();customElements.define(HassSubpage.is,HassSubpage);</script><dom-module id="ha-config-cloud-login" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;}paper-item{cursor:pointer;}paper-card:last-child{margin-top:24px;}h1{@apply (--paper-font-headline);margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}[hidden]{display:none;}</style><hass-subpage title="Cloud Login"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Home Assistant Cloud</span> <span slot="introduction">The Home Assistant Cloud allows your local Home Assistant instance to connect with cloud-only services like Amazon Alexa.</span><paper-card><div class="card-content"><h1>Sign In</h1><paper-input label="Email" id="emailInput" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input><paper-input label="Password" value="{{_password}}" type="password" on-keydown="_keyDown"></paper-input><div class="error" hidden$="[[!error]]">[[error]]</div></div><div class="card-actions"><ha-progress-button on-tap="_handleLogin" progress="[[_requestInProgress]]">Sign in</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleForgotPassword">forgot password?</button></div></paper-card><paper-card><paper-item on-tap="_handleRegister"><paper-item-body two-line="">Create Account<div secondary="">Get up and running quickly.</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></paper-card></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _createClass=function(){function e(e,o){for(var n=0;n<o.length;n++){var r=o[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(o,n,r){return n&&e(o.prototype,n),r&&e(o,r),o}}(),HaConfigCloudLogin=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,window.hassMixins.NavigateMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(o,[{key:"_inputChanged",value:function(){this.error=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._handleLogin(),e.preventDefault())}},{key:"_handleLogin",value:function(){var e=this;this.email?this._password||(this.error="Password is required."):this.error="Email is required.",this.error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/login",{email:this.email,password:this._password}).then(function(o){e.fire("ha-account-refreshed",{account:o}),e.email="",e._password=""},function(o){if(e._password="",e._requestInProgress=!1,o&&o.body&&o.body.message){if("UserNotConfirmed"===o.body.code)return alert("You need to confirm your email before logging in."),void e.navigate("/config/cloud/register#confirm");"PasswordChangeRequired"===o.body.code&&(alert("You need to change your password before logging in."),e.navigate("/config/cloud/forgot-password")),e.error=o.body.message}else e.error="Unknown error"}))}},{key:"_handleRegister",value:function(){this.navigate("/config/cloud/register")}},{key:"_handleForgotPassword",value:function(){this.navigate("/config/cloud/forgot-password")}}],[{key:"is",get:function(){return"ha-config-cloud-login"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,email:{type:String,notify:!0},_password:{type:String,value:""},_requestInProgress:{type:Boolean,value:!1}}}},{key:"observers",get:function(){return["_inputChanged(email, _password)"]}}]),o}();customElements.define(HaConfigCloudLogin.is,HaConfigCloudLogin);</script><dom-module id="ha-config-cloud-register" assetpath="cloud/"><template><style include="iron-flex ha-style">a{color:var(--primary-color);}paper-card{display:block;}paper-item{cursor:pointer;}paper-card:last-child{margin-top:24px;}h1{@apply (--paper-font-headline);margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}[hidden]{display:none;}</style><hass-subpage title="Register Account"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Register with the Home Assistant Cloud</span> <span slot="introduction">Register today to easily connect with the Home Assistant Cloud. This will allow you to unlock great new services and functionality, like Amazon Alexa integration.<p>By registering an account you agree to the following terms and conditions.</p><ul><li><a href="https://home-assistant.io/tos/" target="_blank">Terms and Conditions</a></li><li><a href="https://home-assistant.io/privacy/" target="_blank">Privacy Policy</a></li></ul><p></p></span><template is="dom-if" if="[[!_hasConfirmationCode]]"><paper-card><div class="card-content"><div class="header"><h1>Register</h1><div class="error" hidden$="[[!_error]]">[[_error]]</div></div><paper-input autofocus="" label="Email address" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input><paper-input label="Password" value="{{_password}}" type="password" on-keydown="_keyDown"></paper-input></div><div class="card-actions"><ha-progress-button on-tap="_handleRegister" progress="[[_requestInProgress]]">Create Account</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleShowVerifyAccount">have confirmation code?</button></div></paper-card></template><template is="dom-if" if="[[_hasConfirmationCode]]"><paper-card><div class="card-content"><div class="header"><h1>Verify email</h1><div class="error" hidden$="[[!_error]]">[[_error]]</div></div><p>Check your email address, we've emailed you a verification code to activate your account.</p><template is="dom-if" if="[[_showEmailInputForConfirmation]]"><paper-input label="Email address" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input></template><paper-input label="Confirmation code" value="{{_confirmationCode}}" on-keydown="_keyDown" type="number"></paper-input></div><div class="card-actions"><ha-progress-button on-tap="_handleVerifyEmail" progress="[[_requestInProgress]]">Verify Email</ha-progress-button></div></paper-card></template></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _createClass=function(){function e(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,r,t){return r&&e(o.prototype,r),t&&e(o,t),o}}(),HaConfigCloudRegister=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,window.hassMixins.NavigateMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(o,[{key:"_inputChanged",value:function(){this._error=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._hasConfirmationCode?this._handleVerifyEmail():this._handleRegister(),e.preventDefault())}},{key:"_handleRegister",value:function(){var e=this;this.email?this._password||(this._error="Password is required."):this._error="Email is required.",this._error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/register",{email:this.email,password:this._password}).then(function(){e._requestInProgress=!1,e._hasConfirmationCode=!0},function(o){e._password="",e._requestInProgress=!1,e._error=o&&o.body&&o.body.message?o.body.message:"Unknown error"}))}},{key:"_handleShowVerifyAccount",value:function(){this._error="",this._showEmailInputForConfirmation=!0,this._hasConfirmationCode=!0}},{key:"_handleVerifyEmail",value:function(){var e=this;this.email?this._confirmationCode||(this._error="Confirmation code is required."):this._error="Email is required.",this._error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/confirm_register",{email:this.email,confirmation_code:this._confirmationCode}).then(function(){alert("Confirmation successful. You can now login."),e.navigate("config/cloud/login")},function(o){e._confirmationCode="",e._error=o&&o.body&&o.body.message?o.body.message:"Unknown error",e._requestInProgress=!1}))}}],[{key:"is",get:function(){return"ha-config-cloud-register"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,email:{type:String,notify:!0},_requestInProgress:{type:Boolean,value:!1},_password:{type:String,value:""},_showEmailInputForConfirmation:{type:Boolean,value:!1},_hasConfirmationCode:{type:Boolean,value:function(){return"#confirm"===document.location.hash}}}}},{key:"observers",get:function(){return["_inputChanged(email, _password)"]}}]),o}();customElements.define(HaConfigCloudRegister.is,HaConfigCloudRegister);</script><dom-module id="ha-config-cloud-forgot-password" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;max-width:600px;margin:0 auto;margin-top:24px;}h1{@apply (--paper-font-headline);margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}.card-actions a{color:var(--primary-text-color);}[hidden]{display:none;}</style><hass-subpage title="Forgot Password"><div class="content"><template is="dom-if" if="[[!_hasToken]]"><paper-card><div class="card-content"><h1>Forgot Password</h1><p>Enter your email address and we will send you a link to reset your password.</p><paper-input autofocus="" label="E-mail" value="{{email}}" type="email" on-keydown="_keyDown"></paper-input><div class="error" hidden$="[[!error]]">[[error]]</div></div><div class="card-actions"><ha-progress-button on-tap="_handleEmailPasswordReset" progress="[[_requestInProgress]]">Send reset email</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleHaveToken">have a token?</button></div></paper-card></template><template is="dom-if" if="[[_hasToken]]"><paper-card><div class="card-content"><h1>Confirm new password</h1><template is="dom-if" if="[[_showEmailInputForConfirmation]]"><paper-input label="E-mail" type="email" value="{{email}}" on-keydown="_keyDown"></paper-input></template><paper-input label="Confirmation code" value="{{_confirmationCode}}" on-keydown="_keyDown" type="number"></paper-input><paper-input label="New password" value="{{_newPassword}}" on-keydown="_keyDown" type="password"></paper-input><div class="error" hidden$="[[!error]]">[[error]]</div></div><div class="card-actions"><ha-progress-button on-tap="_handleConfirmPasswordReset" progress="[[_requestInProgress]]">Reset Password</ha-progress-button></div></paper-card></template></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _createClass=function(){function e(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,r,t){return r&&e(o.prototype,r),t&&e(o,t),o}}(),HaConfigCloudForgotPassword=function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return _inherits(o,window.hassMixins.NavigateMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(o,[{key:"_inputChanged",value:function(){this.error=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._hasToken?this._handleConfirmPasswordReset():this._handleEmailPasswordReset(),e.preventDefault())}},{key:"_handleEmailPasswordReset",value:function(){var e=this;this.email||(this.error="Email is required."),this.error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/forgot_password",{email:this.email}).then(function(){e._hasToken=!0,e._requestInProgress=!1},function(o){e._requestInProgress=!1,e.error=o&&o.body&&o.body.message?o.body.message:"Unknown error"}))}},{key:"_handleHaveToken",value:function(){this._error="",this._showEmailInputForConfirmation=!0,this._hasToken=!0}},{key:"_handleConfirmPasswordReset",value:function(){var e=this;this.error="",this.email||(this.error+="Email is required. "),this._confirmationCode||(this.error+="Confirmation code is required. "),this._newPassword?this._newPassword.length<6&&(this.error+="New password should be at least 6 characters."):this.error+="New password is required. ",this.error||(this._requestInProgress=!0,this.hass.callApi("post","cloud/confirm_forgot_password",{email:this.email,confirmation_code:this._confirmationCode,new_password:this._newPassword}).then(function(){alert("Password reset successful! You can now login."),e.navigate("config/cloud/login")},function(o){e._requestInProgress=!1,e.error=o&&o.body&&o.body.message?o.body.message:"Unknown error"}))}}],[{key:"is",get:function(){return"ha-config-cloud-forgot-password"}},{key:"properties",get:function(){return{hass:Object,email:{type:String,notify:!0},_hasToken:{type:Boolean,value:!1},_newPassword:{type:String,value:""},_confirmationCode:{type:String,value:""},_showEmailInputForConfirmation:{type:Boolean,value:!1},_requestInProgress:{type:Boolean,value:!1}}}},{key:"observers",get:function(){return["_inputChanged(email, _newPassword)"]}}]),o}();customElements.define(HaConfigCloudForgotPassword.is,HaConfigCloudForgotPassword);</script><dom-module id="ha-config-cloud-account" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;}.account-row{display:flex;padding:0 16px;}paper-button{align-self:center;}.soon{font-style:italic;margin-top:24px;text-align:center;}.nowrap{white-space:nowrap;}.wrap{white-space:normal;}.status{padding:16px;}paper-button{color:var(--primary-color);font-weight:500;}</style><hass-subpage title="Cloud Account"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Home Assistant Cloud</span> <span slot="introduction">Thank you for supporting Home Assistant. It's because of people like you that we are able to run this project and make a great home automation experience for everyone. Thank you!</span><paper-card><div class="account-row"><paper-item-body two-line="">[[account.email]]<div secondary="" class="wrap"><span class="nowrap">Subscription expires on </span><span class="nowrap">[[_formatExpiration(account.sub_exp)]]</span></div></paper-item-body><paper-button on-tap="handleLogout">Sign out</paper-button></div><div class="account-row"><paper-item-body>Cloud connection status</paper-item-body><div class="status">[[account.cloud]]</div></div></paper-card><div class="soon">More configuration options coming soon.</div></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCloudAccount=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"handleLogout",value:function(){var e=this;this.hass.callApi("post","cloud/logout").then(function(){return e.fire("ha-account-refreshed",{account:null})})}},{key:"_formatExpiration",value:function(e){return window.hassUtil.formatDateTime(new Date(e))}}],[{key:"is",get:function(){return"ha-config-cloud-account"}},{key:"properties",get:function(){return{hass:Object,account:Object}}}]),t}();customElements.define(HaConfigCloudAccount.is,HaConfigCloudAccount);</script><dom-module id="ha-config-cloud" assetpath="cloud/"><template><style>iron-pages{height:100%;}</style><app-route route="[[route]]" pattern="/:page" data="{{_routeData}}" tail="{{_routeTail}}"></app-route><template is="dom-if" if="[[account]]" restamp=""><ha-config-cloud-account hass="[[hass]]" account="[[account]]" is-wide="[[isWide]]"></ha-config-cloud-account></template><template is="dom-if" if="[[!account]]" restamp=""><template is="dom-if" if="[[_isLoginPage(_routeData.page)]]" restamp=""><ha-config-cloud-login page-name="login" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-login></template><template is="dom-if" if="[[_isRegisterPage(_routeData.page)]]" restamp=""><ha-config-cloud-register page-name="register" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-register></template><template is="dom-if" if="[[_isForgotPasswordPage(_routeData.page)]]" restamp=""><ha-config-cloud-forgot-password page-name="forgot-password" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-forgot-password></template></template></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),HaConfigCloud=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"_checkRoute",value:function(e,t){e&&"/config/cloud"===e.prefix&&(t||-1!==["/forgot-password","/register"].indexOf(e.path)?t&&-1!==["/login","/register","/forgot-password"].indexOf(e.path)&&this.navigate("/config/cloud/account",!0):this.navigate("/config/cloud/login",!0))}},{key:"_isRegisterPage",value:function(e){return"register"===e}},{key:"_isForgotPasswordPage",value:function(e){return"forgot-password"===e}},{key:"_isLoginPage",value:function(e){return"login"===e}}],[{key:"is",get:function(){return"ha-config-cloud"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,loadingAccount:{type:Boolean,value:!1},account:{type:Object,value:null},route:Object,_routeData:Object,_routeTail:Object,_loginEmail:String}}},{key:"observers",get:function(){return["_checkRoute(route, account)"]}}]),t}();customElements.define(HaConfigCloud.is,HaConfigCloud);</script><dom-module id="paper-fab" assetpath="../../bower_components/paper-fab/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-vertical;@apply --layout-center-center;background:var(--paper-fab-background, var(--accent-color));border-radius:50%;box-sizing:border-box;color:var(--text-primary-color);cursor:pointer;height:56px;min-width:0;outline:none;padding:16px;position:relative;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;width:56px;z-index:0;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;@apply --paper-fab;}[hidden]{display:none !important;}:host([mini]){width:40px;height:40px;padding:8px;@apply --paper-fab-mini;}:host([disabled]){color:var(--paper-fab-disabled-text, var(--paper-grey-500));background:var(--paper-fab-disabled-background, var(--paper-grey-300));@apply --paper-fab-disabled;}iron-icon{@apply --paper-fab-iron-icon;}span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;@apply --paper-fab-label;}:host(.keyboard-focus){background:var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon><span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span></template><script>Polymer({is:"paper-fab",behaviors:[Polymer.PaperButtonBehavior],properties:{src:{type:String,value:""},icon:{type:String,value:""},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:"_labelChanged"}},_labelChanged:function(){this.setAttribute("aria-label",this.label)},_computeIsIconFab:function(e,t){return e.length>0||t.length>0}});</script></dom-module><dom-module id="ha-automation-picker" assetpath="automation/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Automations</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Automation Editor</div><div slot="introduction">The automation editor allows you to create and edit automations. Please read <a href="https://home-assistant.io/docs/automation/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick automation to edit"><template is="dom-if" if="[[!automations.length]]"><div class="card-content"><p>We couldn't find any editable automations.</p></div></template><template is="dom-repeat" items="[[automations]]" as="automation"><paper-item><paper-item-body two-line="" on-tap="automationTapped"><div>[[computeName(automation)]]</div><div secondary="">[[computeDescription(automation)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Automation" on-tap="addAutomation"></paper-fab></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaAutomationPicker=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"automationTapped",value:function(e){history.pushState(null,null,"/config/automation/edit/"+this.automations[e.model.index].attributes.id),this.fire("location-changed")}},{key:"addAutomation",value:function(){history.pushState(null,null,"/config/automation/new"),this.fire("location-changed")}},{key:"computeName",value:function(e){return window.hassUtil.computeStateName(e)}},{key:"computeDescription",value:function(e){return""}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-automation-picker"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},automations:{type:Array},isWide:{type:Boolean}}}}]),t}();customElements.define(HaAutomationPicker.is,HaAutomationPicker);</script><dom-module id="paper-radio-button" assetpath="../../bower_components/paper-radio-button/"><template strip-whitespace=""><style>:host{display:inline-block;line-height:0;white-space:nowrap;cursor:pointer;@apply --paper-font-common-base;--calculated-paper-radio-button-size:var(--paper-radio-button-size, 16px);--calculated-paper-radio-button-ink-size:var(--paper-radio-button-ink-size, -1px);}:host(:focus){outline:none;}#radioContainer{@apply --layout-inline;@apply --layout-center-center;position:relative;width:var(--calculated-paper-radio-button-size);height:var(--calculated-paper-radio-button-size);vertical-align:middle;@apply --paper-radio-button-radio-container;}#ink{position:absolute;top:50%;left:50%;right:auto;width:var(--calculated-paper-radio-button-ink-size);height:var(--calculated-paper-radio-button-ink-size);color:var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);}#ink[checked]{color:var(--paper-radio-button-checked-ink-color, var(--primary-color));}#offRadio, #onRadio{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;height:100%;border-radius:50%;}#offRadio{border:2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));background-color:var(--paper-radio-button-unchecked-background-color, transparent);transition:border-color 0.28s;}#onRadio{background-color:var(--paper-radio-button-checked-color, var(--primary-color));-webkit-transform:scale(0);transform:scale(0);transition:-webkit-transform ease 0.28s;transition:transform ease 0.28s;will-change:transform;}:host([checked]) #offRadio{border-color:var(--paper-radio-button-checked-color, var(--primary-color));}:host([checked]) #onRadio{-webkit-transform:scale(0.5);transform:scale(0.5);}#radioLabel{line-height:normal;position:relative;display:inline-block;vertical-align:middle;margin-left:var(--paper-radio-button-label-spacing, 10px);white-space:normal;color:var(--paper-radio-button-label-color, var(--primary-text-color));@apply --paper-radio-button-label;}:host([checked]) #radioLabel{@apply --paper-radio-button-label-checked;}:host-context([dir="rtl"]) #radioLabel{margin-left:0;margin-right:var(--paper-radio-button-label-spacing, 10px);}#radioLabel[hidden]{display:none;}:host([disabled]) #offRadio{border-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled][checked]) #onRadio{background-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #radioLabel{opacity:0.65;}</style><div id="radioContainer"><div id="offRadio"></div><div id="onRadio"></div></div><div id="radioLabel"><slot></slot></div></template><script>Polymer({is:"paper-radio-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"radio","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},ready:function(){this._rippleContainer=this.$.radioContainer},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-radio-button-ink-size").trim()){var e=parseFloat(this.getComputedStyleValue("--calculated-paper-radio-button-size").trim()),t=Math.floor(3*e);t%2!=e%2&&t++,this.updateStyles({"--paper-radio-button-ink-size":t+"px"})}})}});</script></dom-module><dom-module id="paper-radio-group" assetpath="../../bower_components/paper-radio-group/"><template><style>:host{display:inline-block;}:host ::slotted(*){padding:var(--paper-radio-group-item-padding, 12px);}</style><slot></slot></template></dom-module><script>Polymer({is:"paper-radio-group",behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:"radiogroup",tabindex:0},properties:{attrForSelected:{type:String,value:"name"},selectedAttribute:{type:String,value:"checked"},selectable:{type:String,value:"paper-radio-button"},allowEmptySelection:{type:Boolean,value:!1}},select:function(e){var t=this._valueToItem(e);if(!t||!t.hasAttribute("disabled")){if(this.selected){var i=this._valueToItem(this.selected);if(this.selected==e){if(!this.allowEmptySelection)return void(i&&(i.checked=!0));e=""}i&&(i.checked=!1)}Polymer.IronSelectableBehavior.select.apply(this,[e]),this.fire("paper-radio-group-changed")}},_activateFocusedItem:function(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function(e){this._focusPrevious(),e.preventDefault(),this._activateFocusedItem()},_onDownKey:function(e){this._focusNext(),e.preventDefault(),this._activateFocusedItem()},_onLeftKey:function(e){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments),this._activateFocusedItem()},_onRightKey:function(e){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments),this._activateFocusedItem()}});</script><script>function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(e,t){var n,o,r,a,i=P;for(a=arguments.length;a-- >2;)x.push(arguments[a]);for(t&&null!=t.children&&(x.length||x.push(t.children),delete t.children);x.length;)if((o=x.pop())&&void 0!==o.pop)for(a=o.length;a--;)x.push(o[a]);else"boolean"==typeof o&&(o=null),(r="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&n?i[i.length-1]+=o:i===P?i=[o]:i.push(o),n=r;var l=new function(){};return l.nodeName=e,l.children=i,l.attributes=null==t?void 0:t,l.key=null==t?void 0:t.key,void 0!==w.vnode&&w.vnode(l),l}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){!e._dirty&&(e._dirty=!0)&&1==T.push(e)&&(w.debounceRendering||S)(o)}function o(){var e,t=T;for(T=[];e=t.pop();)e._dirty&&C(e)}function r(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function i(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function l(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==(void 0===o?"undefined":_typeof(o))){if("string"!=typeof n)for(var a in n)a in o||(e.style[a]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===j.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,u,i):e.removeEventListener(t,u,i),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var l=r&&t!==(t=t.replace(/^xlink\:?/,""));null==o||!1===o?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function u(e){return this._listeners[e.type](w.event&&w.event(e)||e)}function c(){for(var e;e=N.pop();)w.afterMount&&w.afterMount(e),e.componentDidMount&&e.componentDidMount()}function p(e,t,n,o,r,a){D++||(R=null!=r&&void 0!==r.ownerSVGElement,A=null!=e&&!("__preactattr_"in e));var i=d(e,t,n,o,a);return r&&i.parentNode!==r&&r.appendChild(i),--D||(A=!1,a||c()),i}function d(e,t,n,o,u){var c=e,p=R;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||u)?e.nodeValue!=t&&(e.nodeValue=t):(c=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(c,e),h(e,!0))),c.__preactattr_=!0,c;var f=t.nodeName;if("function"==typeof f)return function(e,t,n,o){for(var r=e&&e._component,a=r,l=e,s=r&&e._componentConstructor===t.nodeName,u=s,c=i(t);r&&!u&&(r=r._parentComponent);)u=r.constructor===t.nodeName;return r&&u&&(!o||r._component)?(_(r,c,3,n,o),e=r.base):(a&&!s&&(b(a),e=l=null),r=g(t.nodeName,c,n),e&&!r.nextBase&&(r.nextBase=e,l=null),_(r,c,1,n,o),e=r.base,l&&e!==l&&(l._component=null,h(l,!1))),e}(e,t,n,o);if(R="svg"===f||"foreignObject"!==f&&R,f=String(f),(!e||!a(e,f))&&(c=function(e,t){var n=R?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(f),e)){for(;e.firstChild;)c.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(c,e),h(e,!0)}var v=c.firstChild,C=c.__preactattr_,y=t.children;if(null==C){C=c.__preactattr_={};for(var m=c.attributes,k=m.length;k--;)C[m[k].name]=m[k].value}return!A&&y&&1===y.length&&"string"==typeof y[0]&&null!=v&&void 0!==v.splitText&&null==v.nextSibling?v.nodeValue!=y[0]&&(v.nodeValue=y[0]):(y&&y.length||null!=v)&&function(e,t,n,o,a){var i,s,u,c,p,f=e.childNodes,g=[],v={},_=0,C=0,b=f.length,y=0,m=t?t.length:0;if(0!==b)for(x=0;x<b;x++){var k=f[x],O=k.__preactattr_;null!=(w=m&&O?k._component?k._component.__key:O.key:null)?(_++,v[w]=k):(O||(void 0!==k.splitText?!a||k.nodeValue.trim():a))&&(g[y++]=k)}if(0!==m)for(x=0;x<m;x++){p=null;var w=(c=t[x]).key;if(null!=w)_&&void 0!==v[w]&&(p=v[w],v[w]=void 0,_--);else if(!p&&C<y)for(i=C;i<y;i++)if(void 0!==g[i]&&r(s=g[i],c,a)){p=s,g[i]=void 0,i===y-1&&y--,i===C&&C++;break}p=d(p,c,n,o),u=f[x],p&&p!==e&&p!==u&&(null==u?e.appendChild(p):p===u.nextSibling?l(u):e.insertBefore(p,u))}if(_)for(var x in v)void 0!==v[x]&&h(v[x],!1);for(;C<=y;)void 0!==(p=g[y--])&&h(p,!1)}(c,y,n,o,A||null!=C.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,R);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],R)}(c,t.attributes,C),R=p,c}function h(e,t){var n=e._component;n?b(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||l(e),f(e))}function f(e){for(e=e.lastChild;e;){var t=e.previousSibling;h(e,!0),e=t}}function g(e,t,n){var o,r=E[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),y.call(o,t,n)):((o=new y(t,n)).constructor=e,o.render=v),r)for(var a=r.length;a--;)if(r[a].constructor===e){o.nextBase=r[a].nextBase,r.splice(a,1);break}return o}function v(e,t,n){return this.constructor(e,n)}function _(e,t,o,r,a){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==o&&(1!==o&&!1===w.syncComponentUpdates&&e.base?n(e):C(e,1,a)),e.__ref&&e.__ref(e))}function C(e,n,o,r){if(!e._disable){var a,l,s,u=e.props,d=e.state,f=e.context,v=e.prevProps||u,y=e.prevState||d,m=e.prevContext||f,k=e.base,O=e.nextBase,x=k||O,P=e._component,S=!1;if(k&&(e.props=v,e.state=y,e.context=m,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,d,f)?S=!0:e.componentWillUpdate&&e.componentWillUpdate(u,d,f),e.props=u,e.state=d,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!S){a=e.render(u,d,f),e.getChildContext&&(f=t(t({},f),e.getChildContext()));var j,T,R=a&&a.nodeName;if("function"==typeof R){var A=i(a);(l=P)&&l.constructor===R&&A.key==l.__key?_(l,A,1,f,!1):(j=l,e._component=l=g(R,A,f),l.nextBase=l.nextBase||O,l._parentComponent=e,_(l,A,0,f,!1),C(l,1,o,!0)),T=l.base}else s=x,(j=P)&&(s=e._component=null),(x||1===n)&&(s&&(s._component=null),T=p(s,a,f,o||!k,x&&x.parentNode,!0));if(x&&T!==x&&l!==P){var E=x.parentNode;E&&T!==E&&(E.replaceChild(T,x),j||(x._component=null,h(x,!1)))}if(j&&b(j),e.base=T,T&&!r){for(var L=e,U=e;U=U._parentComponent;)(L=U).base=T;T._component=L,T._componentConstructor=L.constructor}}if(!k||o?N.unshift(e):S||(e.componentDidUpdate&&e.componentDidUpdate(v,y,m),w.afterUpdate&&w.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);D||r||c()}}function b(e){w.beforeUnmount&&w.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?b(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,l(t),function(e){var t=e.constructor.name;(E[t]||(E[t]=[])).push(e)}(e),f(t)),e.__ref&&e.__ref(null)}function y(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function m(e,t,n){return p(n,e,{},!1,t,!1)}function k(e,t){var n=U({},this.props[e]);t.target.value!==n[t.target.name]&&(t.target.value?n[t.target.name]=t.target.value:delete n[t.target.name],this.props.onChange(this.props.index,n))}function O(e){for(var t=Object.keys(he),n=0;n<t.length;n++)if(he[t[n]].configKey in e)return t[n];return null}var w={},x=[],P=[],S="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,j=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,T=[],N=[],D=0,R=!1,A=!1,E={};t(y.prototype,{setState:function(e,o){var r=this.state;this.prevState||(this.prevState=t({},r)),t(r,"function"==typeof e?e(r,this.props):e),o&&(this._renderCallbacks=this._renderCallbacks||[]).push(o),n(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),C(this,2)},render:function(){}});var L=function(t){function n(e){var t;return _classCallCheck(this,n),t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),t.state.isValid=!0,t.state.value=JSON.stringify(e.value||{},null,2),t.onChange=t.onChange.bind(t),t}return _inherits(n,y),_createClass(n,[{key:"onChange",value:function(e){var t=e.target.value,n=void 0,o=void 0;try{n=JSON.parse(t),o=!0}catch(e){o=!1}this.setState({value:t,isValid:o}),o&&this.props.onChange(n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({value:JSON.stringify(t,null,2),isValid:!0})}},{key:"render",value:function(t,n){var o=t.label,r=n.value,a={minWidth:300,width:"100%"};return n.isValid||(a.border="1px solid red"),e("paper-textarea",{label:o,value:r,style:a,"onvalue-changed":this.onChange})}}]),n}();!function(){function e(e){function t(o,r){try{var a=e[o](r),i=a.value;i instanceof function(e){this.value=e}?Promise.resolve(i.value).then(function(e){t("next",e)},function(e){t("throw",e)}):n(a.done?"return":"normal",a.value)}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":o.resolve({value:n,done:!0});break;case"throw":o.reject(n);break;default:o.resolve({value:n,done:!1})}(o=o.next)?t(o.key,o.arg):r=null}var o,r;this._invoke=function(e,n){return new Promise(function(a,i){var l={key:e,arg:n,resolve:a,reject:i,next:null};r?r=r.next=l:(o=r=l,t(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}();var U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},z=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e.eventDataChanged=e.eventDataChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"eventDataChanged",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event_data:e}))}},{key:"render",value:function(t){var n=t.trigger,o=n.event_type,r=n.event_data;return e("div",null,e("paper-input",{label:"Event Type",name:"event_type",value:o,onChange:this.onChange}),e(L,{label:"Event Data",value:r,onChange:this.eventDataChanged}))}}]),n}();z.defaultConfig={event_type:"",event_data:{}};var G=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(t){var n=t.trigger.event;return e("div",null,e("label",{id:"eventlabel"},"Event:"),e("paper-radio-group",{selected:n,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},e("paper-radio-button",{name:"start"},"Start"),e("paper-radio-button",{name:"shutdown"},"Shutdown")))}}]),n}();G.defaultConfig={event:"start"};var B=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.trigger,o=n.topic,r=n.payload;return e("div",null,e("paper-input",{label:"Topic",name:"topic",value:o,onChange:this.onChange}),e("paper-input",{label:"Payload (Optional)",name:"payload",value:r,onChange:this.onChange}))}}]),n}();B.defaultConfig={topic:""};var I=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.trigger,o=n.value_template,r=n.entity_id,a=n.below,i=n.above;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),e("paper-input",{label:"Above",name:"above",value:i,onChange:this.onChange}),e("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),e("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),n}();I.defaultConfig={entity_id:""};var V=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.trigger,o=n.entity_id,r=n.to,a=n.from,i=n.for;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),e("paper-input",{label:"From",name:"from",value:a,onChange:this.onChange}),e("paper-input",{label:"To",name:"to",value:r,onChange:this.onChange}),i&&e("pre",null,"For: ",JSON.stringify(i,null,2)))}}]),n}();V.defaultConfig={entity_id:""};var M=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(t){var n=t.trigger,o=n.offset,r=n.event;return e("div",null,e("label",{id:"eventlabel"},"Event:"),e("paper-radio-group",{selected:r,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},e("paper-radio-button",{name:"sunrise"},"Sunrise"),e("paper-radio-button",{name:"sunset"},"Sunset")),e("paper-input",{label:"Offset (optional)",name:"offset",value:o,onChange:this.onChange}))}}]),n}();M.defaultConfig={event:"sunrise"};var W=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){return e("div",null,e("paper-textarea",{label:"Value Template",name:"value_template",value:t.trigger.value_template,"onvalue-changed":this.onChange}))}}]),n}();W.defaultConfig={value_template:""};var H=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){return e("div",null,e("paper-input",{label:"At",name:"at",value:t.trigger.at,onChange:this.onChange}))}}]),n}();H.defaultConfig={at:""};var J=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(t){var n=t.trigger,o=n.entity_id,r=n.zone,a=n.event;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),e("paper-input",{label:"Zone",name:"zone",value:r,onChange:this.onChange}),e("label",{id:"eventlabel"},"Event:"),e("paper-radio-group",{selected:a,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},e("paper-radio-button",{name:"enter"},"Enter"),e("paper-radio-button",{name:"leave"},"Leave")))}}]),n}();J.defaultConfig={entity_id:"",zone:"",event:"enter"};var K={event:z,state:V,homeassistant:G,mqtt:B,numeric_state:I,sun:M,template:W,time:H,zone:J},F=Object.keys(K).sort(),Z=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;t!==this.props.trigger.platform&&this.props.onChange(this.props.index,U({platform:t},K[t].defaultConfig))}},{key:"render",value:function(t){var n=t.index,o=t.trigger,r=t.onChange,a=K[o.platform],i=F.indexOf(o.platform);return a?e("div",null,e("paper-dropdown-menu-light",{label:"Trigger Type","no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:i,"oniron-select":this.typeChanged},F.map(function(t){return e("paper-item",null,t)}))),e(a,{index:n,trigger:o,onChange:r})):e("div",null,"Unsupported platform: ",o.platform,e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),$=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onDelete=e.onDelete.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(t){return e("paper-card",null,e("div",{class:"card-menu"},e("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},e("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),e("paper-listbox",{slot:"dropdown-content"},e("paper-item",{disabled:!0},"Duplicate"),e("paper-item",{onTap:this.onDelete},"Delete")))),e("div",{class:"card-content"},e(Z,t)))}}]),n}(),q=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.addTrigger=e.addTrigger.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"addTrigger",value:function(){var e=this.props.trigger.concat(U({platform:"state"},V.defaultConfig));this.props.onChange(e)}},{key:"triggerChanged",value:function(e,t){var n=this.props.trigger.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(t){var n=this;return e("div",{class:"triggers"},t.trigger.map(function(t,o){return e($,{index:o,trigger:t,onChange:n.triggerChanged})}),e("paper-card",null,e("div",{class:"card-actions add-card"},e("paper-button",{onTap:this.addTrigger},"Add trigger"))))}}]),n}(),Q=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.value_template,r=n.entity_id,a=n.below,i=n.above;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),e("paper-input",{label:"Above",name:"above",value:i,onChange:this.onChange}),e("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),e("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),n}();Q.defaultConfig={entity_id:""};var X=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.entity_id,r=n.state,a=n.for;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),e("paper-input",{label:"State",name:"state",value:r,onChange:this.onChange}),a&&e("pre",null,"For: ",JSON.stringify(a,null,2)))}}]),n}();X.defaultConfig={entity_id:"",state:""};var Y=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e.afterPicked=e.radioGroupPicked.bind(e,"after"),e.beforePicked=e.radioGroupPicked.bind(e,"before"),e}return _inherits(n,y),_createClass(n,[{key:"radioGroupPicked",value:function(e,t){var n=U({},this.props.condition);t.target.selected?n[e]=t.target.selected:delete n[e],this.props.onChange(this.props.index,n)}},{key:"render",value:function(t){var n=t.condition,o=n.after,r=n.after_offset,a=n.before,i=n.before_offset;return e("div",null,e("label",{id:"beforelabel"},"Before:"),e("paper-radio-group",{"allow-empty-selection":!0,selected:a,"aria-labelledby":"beforelabel","onpaper-radio-group-changed":this.beforePicked},e("paper-radio-button",{name:"sunrise"},"Sunrise"),e("paper-radio-button",{name:"sunset"},"Sunset")),e("paper-input",{label:"Before offset (optional)",name:"before_offset",value:i,onChange:this.onChange,disabled:void 0===a}),e("label",{id:"afterlabel"},"After:"),e("paper-radio-group",{"allow-empty-selection":!0,selected:o,"aria-labelledby":"afterlabel","onpaper-radio-group-changed":this.afterPicked},e("paper-radio-button",{name:"sunrise"},"Sunrise"),e("paper-radio-button",{name:"sunset"},"Sunset")),e("paper-input",{label:"After offset (optional)",name:"after_offset",value:r,onChange:this.onChange,disabled:void 0===o}))}}]),n}();Y.defaultConfig={};var ee=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){return e("div",null,e("paper-textarea",{label:"Value Template",name:"value_template",value:t.condition.value_template,"onvalue-changed":this.onChange}))}}]),n}();ee.defaultConfig={value_template:""};var te=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.after,r=n.before;return e("div",null,e("paper-input",{label:"After",name:"after",value:o,onChange:this.onChange}),e("paper-input",{label:"Before",name:"before",value:r,onChange:this.onChange}))}}]),n}();te.defaultConfig={};var ne=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.entity_id,r=n.zone;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),e("paper-input",{label:"Zone entity id",name:"zone",value:r,onChange:this.onChange}))}}]),n}();ne.defaultConfig={entity_id:"",zone:""};var oe={state:X,numeric_state:Q,sun:Y,template:ee,time:te,zone:ne},re=Object.keys(oe).sort(),ae=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;t!==this.props.condition.condition&&this.props.onChange(this.props.index,U({condition:t},oe[t].defaultConfig))}},{key:"render",value:function(t){var n=t.index,o=t.condition,r=t.onChange,a=oe[o.condition],i=re.indexOf(o.condition);return a?e("div",null,e("paper-dropdown-menu-light",{label:"Condition Type","no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:i,"oniron-select":this.typeChanged},re.map(function(t){return e("paper-item",null,t)}))),e(a,{index:n,condition:o,onChange:r})):e("div",null,"Unsupported condition: ",o.condition,e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),ie=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onDelete=e.onDelete.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(t){return e("paper-card",null,e("div",{class:"card-menu"},e("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},e("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),e("paper-listbox",{slot:"dropdown-content"},e("paper-item",{disabled:!0},"Duplicate"),e("paper-item",{onTap:this.onDelete},"Delete")))),e("div",{class:"card-content"},e(ae,t)))}}]),n}(),le=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.addCondition=e.addCondition.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"addCondition",value:function(){var e=this.props.condition.concat({condition:"state"});this.props.onChange(e)}},{key:"conditionChanged",value:function(e,t){var n=this.props.condition.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(t){var n=this;return e("div",{class:"triggers"},t.condition.map(function(t,o){return e(ie,{index:o,condition:t,onChange:n.conditionChanged})}),e("paper-card",null,e("div",{class:"card-actions add-card"},e("paper-button",{onTap:this.addCondition},"Add condition"))))}}]),n}(),se=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,U({},this.props.action,{data:e}))}},{key:"render",value:function(t){var n=t.action,o=n.alias,r=n.service,a=n.data;return e("div",null,e("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),e("paper-input",{label:"Service",name:"service",value:r,onChange:this.onChange}),e(L,{label:"Service Data",value:a,onChange:this.serviceDataChanged}))}}]),n}();se.configKey="service",se.defaultConfig={alias:"",service:"",data:{}};var ue=function(t){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.action,o=t.index,r=t.onChange;return e(ae,{condition:n,onChange:r,index:o})}}]),n}();ue.configKey="condition",ue.defaultConfig=U({condition:"state"},X.defaultConfig);var ce=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){return e("div",null,e("paper-input",{label:"Delay",name:"delay",value:t.action.delay,onChange:this.onChange}))}}]),n}();ce.configKey="delay",ce.defaultConfig={delay:""};var pe=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,U({},this.props.action,{data:e}))}},{key:"render",value:function(t){var n=t.action,o=n.event,r=n.event_data;return e("div",null,e("paper-input",{label:"Event",name:"event",value:o,onChange:this.onChange}),e(L,{label:"Service Data",value:r,onChange:this.serviceDataChanged}))}}]),n}();pe.configKey="event",pe.defaultConfig={event:"",event_data:{}};var de=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e.onTemplateChange=e.onTemplateChange.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onTemplateChange",value:function(e){this.props.onChange(this.props.index,U({},this.props.trigger,_defineProperty({},e.target.name,e.target.value)))}},{key:"render",value:function(t){var n=t.action,o=n.wait_template,r=n.timeout;return e("div",null,e("paper-textarea",{label:"Wait Template",name:"wait_template",value:o,"onvalue-changed":this.onTemplateChange}),e("paper-input",{label:"Timeout (Optional)",name:"timeout",value:r,onChange:this.onChange}))}}]),n}();de.configKey="wait_template",de.defaultConfig={wait_template:"",timeout:""};var he={"Call Service":se,Delay:ce,Wait:de,Condition:ue,"Fire Event":pe},fe=Object.keys(he).sort(),ge=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;O(this.props.action)!==t&&this.props.onChange(this.props.index,he[t].defaultConfig)}},{key:"render",value:function(t){var n=t.index,o=t.action,r=t.onChange,a=O(o),i=a&&he[a],l=fe.indexOf(a);return i?e("div",null,e("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},fe.map(function(t){return e("paper-item",null,t)}))),e(i,{index:n,action:o,onChange:r})):e("div",null,"Unsupported action",e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),ve=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onDelete=e.onDelete.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(t){return e("paper-card",null,e("div",{class:"card-menu"},e("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},e("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),e("paper-listbox",{slot:"dropdown-content"},e("paper-item",{disabled:!0},"Duplicate"),e("paper-item",{onTap:this.onDelete},"Delete")))),e("div",{class:"card-content"},e(ge,t)))}}]),n}(),_e=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,t){var n=this.props.script.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(t){var n=this;return e("div",{class:"script"},t.script.map(function(t,o){return e(ve,{index:o,action:t,onChange:n.actionChanged})}),e("paper-card",null,e("div",{class:"card-actions add-card"},e("paper-button",{onTap:this.addAction},"Add action"))))}}]),n}(),Ce=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=e.onChange.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onChange",value:function(e){this.props.onChange(U({},this.props.automation,_defineProperty({},e.target.name,e.target.value)))}},{key:"triggerChanged",value:function(e){this.props.onChange(U({},this.props.automation,{trigger:e}))}},{key:"conditionChanged",value:function(e){this.props.onChange(U({},this.props.automation,{condition:e}))}},{key:"actionChanged",value:function(e){this.props.onChange(U({},this.props.automation,{action:e}))}},{key:"render",value:function(t){var n=t.automation,o=t.isWide,r=n.alias,a=n.trigger,i=n.condition,l=n.action;return e("div",null,e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},r),e("span",{slot:"introduction"},"Use automations to bring your home alive."),e("paper-card",null,e("div",{class:"card-content"},e("paper-input",{label:"Name",name:"alias",value:r,onChange:this.onChange})))),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},"Triggers"),e("span",{slot:"introduction"},"Triggers are what starts the processing of an automation rule. It is possible to specify multiple triggers for the same rule. Once a trigger starts, Home Assistant will validate the conditions, if any, and call the action.",e("p",null,e("a",{href:"https://home-assistant.io/docs/automation/trigger/",target:"_blank"},"Learn more about triggers."))),e(q,{trigger:a,onChange:this.triggerChanged})),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},"Conditions"),e("span",{slot:"introduction"},"Conditions are an optional part of an automation rule and can be used to prevent an action from happening when triggered. Conditions look very similar to triggers but are very different. A trigger will look at events happening in the system while a condition only looks at how the system looks right now. A trigger can observe that a switch is being turned on. A condition can only see if a switch is currently on or off.",e("p",null,e("a",{href:"https://home-assistant.io/docs/scripts/conditions/",target:"_blank"},"Learn more about conditions."))),e(le,{condition:i||[],onChange:this.conditionChanged})),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},"Action"),e("span",{slot:"introduction"},"The actions are what Home Assistant will do when the automation is triggered.",e("p",null,e("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about actions."))),e(_e,{script:l,onChange:this.actionChanged})))}}]),n}();window.AutomationEditor=function(t,n,o){return m(e(Ce,n),t,o)},window.unmountPreact=function(e,t){m(function(){return null},e,t)}}();</script><dom-module id="ha-automation-editor" assetpath="automation/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Automation [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveAutomation"></paper-fab></div></app-header-layout></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_get=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(o)},HaAutomationEditor=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(e,[{key:"ready",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ready",this).call(this),this.configChanged=this.configChanged.bind(this),this._rendered=null}},{key:"disconnectedCallback",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),this._rendered&&window.unmountPreact(this._rendered)}},{key:"configChanged",value:function(t){null!==this._rendered&&(this.config=t,this.errors=null,this.dirty=!0,this._updateComponent(t))}},{key:"automationChanged",value:function(t,e){t&&(this.hass?e&&e.attributes.id===t.attributes.id||this.hass.callApi("get","config/automation/config/"+t.attributes.id).then(function(t){["trigger","condition","action"].forEach(function(e){var n=t[e];n&&!Array.isArray(n)&&(t[e]=[n])}),this.dirty=!1,this.config=t,this._updateComponent()}.bind(this)):setTimeout(this.automationChanged.bind(this,t,e),0))}},{key:"creatingNewChanged",value:function(t){t&&(this.dirty=!1,this.config={alias:"New Automation",trigger:[{platform:"state"}],condition:[],action:[{service:""}]},this._updateComponent())}},{key:"isWideChanged",value:function(){null!==this.config&&this._updateComponent()}},{key:"backTapped",value:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()}},{key:"_updateComponent",value:function(){this._rendered=window.AutomationEditor(this.$.root,{automation:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)}},{key:"saveAutomation",value:function(){var t=this.creatingNew?""+Date.now():this.automation.attributes.id;this.hass.callApi("post","config/automation/config/"+t,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.replaceState(null,null,"/config/automation/edit/"+t),this.fire("location-changed"))}.bind(this),function(t){throw this.errors=t.body.message,t}.bind(this))}},{key:"computeName",value:function(t){return t&&window.hassUtil.computeStateName(t)}}],[{key:"is",get:function(){return"ha-automation-editor"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},automation:{type:Object,observer:"automationChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(automation)"},isWide:{type:Boolean,observer:"isWideChanged"}}}}]),e}();customElements.define(HaAutomationEditor.is,HaAutomationEditor);</script><dom-module id="ha-config-automation" assetpath="automation/"><template><style>ha-automation-picker,
      ha-automation-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:automation" data="{{_routeData}}" active="{{_edittingAutomation}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-automation-picker narrow="[[narrow]]" show-menu="[[showMenu]]" automations="[[automations]]" is-wide="[[isWide]]"></ha-automation-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-automation-editor hass="[[hass]]" automation="[[automation]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-automation-editor></template></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),HaConfigAutomation=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"computeAutomation",value:function(t,e,o){if(!t||!e)return null;for(var n=0;n<t.length;n++)if(t[n].attributes.id===o.automation)return t[n];return null}},{key:"computeAutomations",value:function(t){var e=[];return Object.keys(t.states).forEach(function(o){var n=t.states[o];"automation"===window.hassUtil.computeDomain(n)&&"id"in n.attributes&&e.push(n)}),e.sort(function(t,e){var o=(t.attributes.alias||t.entity_id).toLowerCase(),n=(e.attributes.alias||e.entity_id).toLowerCase();return o<n?-1:o>n?1:0})}},{key:"computeShowEditor",value:function(t,e){return e||t}}],[{key:"is",get:function(){return"ha-config-automation"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingAutomation:Boolean,automations:{type:Array,computed:"computeAutomations(hass)"},automation:{type:Object,computed:"computeAutomation(automations, _edittingAutomation, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingAutomation, _creatingNew)"}}}}]),e}();customElements.define(HaConfigAutomation.is,HaConfigAutomation);</script><dom-module id="ha-script-picker" assetpath="script/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Scripts</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Script Editor</div><div slot="introduction">The script editor allows you to create and edit scripts. Please read <a href="https://home-assistant.io/docs/scripts/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick script to edit"><template is="dom-if" if="[[!scripts.length]]"><div class="card-content"><p>We couldn't find any editable scripts.</p></div></template><template is="dom-repeat" items="[[scripts]]" as="script"><paper-item><paper-item-body two-line="" on-tap="scriptTapped"><div>[[computeName(script)]]</div><div secondary="">[[computeDescription(script)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Script" on-tap="addScript"></paper-fab></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaScriptPicker=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"scriptTapped",value:function(e){history.pushState(null,null,"/config/script/edit/"+this.scripts[e.model.index].entity_id),this.fire("location-changed")}},{key:"addScript",value:function(){history.pushState(null,null,"/config/script/new"),this.fire("location-changed")}},{key:"computeName",value:function(e){return window.hassUtil.computeStateName(e)}},{key:"computeDescription",value:function(e){return""}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-script-picker"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},scripts:{type:Array},isWide:{type:Boolean}}}}]),t}();customElements.define(HaScriptPicker.is,HaScriptPicker);</script><script>function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(e,t){var n,o,r,a,i=P;for(a=arguments.length;a-- >2;)O.push(arguments[a]);for(t&&null!=t.children&&(O.length||O.push(t.children),delete t.children);O.length;)if((o=O.pop())&&void 0!==o.pop)for(a=o.length;a--;)O.push(o[a]);else"boolean"==typeof o&&(o=null),(r="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&n?i[i.length-1]+=o:i===P?i=[o]:i.push(o),n=r;var l=new function(){};return l.nodeName=e,l.children=i,l.attributes=null==t?void 0:t,l.key=null==t?void 0:t.key,void 0!==w.vnode&&w.vnode(l),l}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){!e._dirty&&(e._dirty=!0)&&1==j.push(e)&&(w.debounceRendering||S)(o)}function o(){var e,t=j;for(j=[];e=t.pop();)e._dirty&&g(e)}function r(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function i(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function l(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,n,o,r){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||r)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==(void 0===o?"undefined":_typeof(o))){if("string"!=typeof n)for(var a in n)a in o||(e.style[a]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===N.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,u,i):e.removeEventListener(t,u,i),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var l=r&&t!==(t=t.replace(/^xlink\:?/,""));null==o||!1===o?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function u(e){return this._listeners[e.type](w.event&&w.event(e)||e)}function c(){for(var e;e=T.pop();)w.afterMount&&w.afterMount(e),e.componentDidMount&&e.componentDidMount()}function p(e,t,n,o,r,a){R++||(D=null!=r&&void 0!==r.ownerSVGElement,U=null!=e&&!("__preactattr_"in e));var i=d(e,t,n,o,a);return r&&i.parentNode!==r&&r.appendChild(i),--R||(U=!1,a||c()),i}function d(e,t,n,o,u){var c=e,p=D;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||u)?e.nodeValue!=t&&(e.nodeValue=t):(c=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(c,e),f(e,!0))),c.__preactattr_=!0,c;var h=t.nodeName;if("function"==typeof h)return function(e,t,n,o){for(var r=e&&e._component,a=r,l=e,s=r&&e._componentConstructor===t.nodeName,u=s,c=i(t);r&&!u&&(r=r._parentComponent);)u=r.constructor===t.nodeName;return r&&u&&(!o||r._component)?(C(r,c,3,n,o),e=r.base):(a&&!s&&(b(a),e=l=null),r=v(t.nodeName,c,n),e&&!r.nextBase&&(r.nextBase=e,l=null),C(r,c,1,n,o),e=r.base,l&&e!==l&&(l._component=null,f(l,!1))),e}(e,t,n,o);if(D="svg"===h||"foreignObject"!==h&&D,h=String(h),(!e||!a(e,h))&&(c=function(e,t){var n=D?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(h),e)){for(;e.firstChild;)c.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(c,e),f(e,!0)}var _=c.firstChild,g=c.__preactattr_,y=t.children;if(null==g){g=c.__preactattr_={};for(var m=c.attributes,k=m.length;k--;)g[m[k].name]=m[k].value}return!U&&y&&1===y.length&&"string"==typeof y[0]&&null!=_&&void 0!==_.splitText&&null==_.nextSibling?_.nodeValue!=y[0]&&(_.nodeValue=y[0]):(y&&y.length||null!=_)&&function(e,t,n,o,a){var i,s,u,c,p,h=e.childNodes,v=[],_={},C=0,g=0,b=h.length,y=0,m=t?t.length:0;if(0!==b)for(O=0;O<b;O++){var k=h[O],x=k.__preactattr_;null!=(w=m&&x?k._component?k._component.__key:x.key:null)?(C++,_[w]=k):(x||(void 0!==k.splitText?!a||k.nodeValue.trim():a))&&(v[y++]=k)}if(0!==m)for(O=0;O<m;O++){p=null;var w=(c=t[O]).key;if(null!=w)C&&void 0!==_[w]&&(p=_[w],_[w]=void 0,C--);else if(!p&&g<y)for(i=g;i<y;i++)if(void 0!==v[i]&&r(s=v[i],c,a)){p=s,v[i]=void 0,i===y-1&&y--,i===g&&g++;break}p=d(p,c,n,o),u=h[O],p&&p!==e&&p!==u&&(null==u?e.appendChild(p):p===u.nextSibling?l(u):e.insertBefore(p,u))}if(C)for(var O in _)void 0!==_[O]&&f(_[O],!1);for(;g<=y;)void 0!==(p=v[y--])&&f(p,!1)}(c,y,n,o,U||null!=g.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,D);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],D)}(c,t.attributes,g),D=p,c}function f(e,t){var n=e._component;n?b(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||l(e),h(e))}function h(e){for(e=e.lastChild;e;){var t=e.previousSibling;f(e,!0),e=t}}function v(e,t,n){var o,r=A[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),y.call(o,t,n)):((o=new y(t,n)).constructor=e,o.render=_),r)for(var a=r.length;a--;)if(r[a].constructor===e){o.nextBase=r[a].nextBase,r.splice(a,1);break}return o}function _(e,t,n){return this.constructor(e,n)}function C(e,t,o,r,a){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==o&&(1!==o&&!1===w.syncComponentUpdates&&e.base?n(e):g(e,1,a)),e.__ref&&e.__ref(e))}function g(e,n,o,r){if(!e._disable){var a,l,s,u=e.props,d=e.state,h=e.context,_=e.prevProps||u,y=e.prevState||d,m=e.prevContext||h,k=e.base,x=e.nextBase,O=k||x,P=e._component,S=!1;if(k&&(e.props=_,e.state=y,e.context=m,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,d,h)?S=!0:e.componentWillUpdate&&e.componentWillUpdate(u,d,h),e.props=u,e.state=d,e.context=h),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!S){a=e.render(u,d,h),e.getChildContext&&(h=t(t({},h),e.getChildContext()));var N,j,D=a&&a.nodeName;if("function"==typeof D){var U=i(a);(l=P)&&l.constructor===D&&U.key==l.__key?C(l,U,1,h,!1):(N=l,e._component=l=v(D,U,h),l.nextBase=l.nextBase||x,l._parentComponent=e,C(l,U,0,h,!1),g(l,1,o,!0)),j=l.base}else s=O,(N=P)&&(s=e._component=null),(O||1===n)&&(s&&(s._component=null),j=p(s,a,h,o||!k,O&&O.parentNode,!0));if(O&&j!==O&&l!==P){var A=O.parentNode;A&&j!==A&&(A.replaceChild(j,O),N||(O._component=null,f(O,!1)))}if(N&&b(N),e.base=j,j&&!r){for(var B=e,E=e;E=E._parentComponent;)(B=E).base=j;j._component=B,j._componentConstructor=B.constructor}}if(!k||o?T.unshift(e):S||(e.componentDidUpdate&&e.componentDidUpdate(_,y,m),w.afterUpdate&&w.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);R||r||c()}}function b(e){w.beforeUnmount&&w.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?b(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,l(t),function(e){var t=e.constructor.name;(A[t]||(A[t]=[])).push(e)}(e),h(t)),e.__ref&&e.__ref(null)}function y(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function m(e,t,n){return p(n,e,{},!1,t,!1)}function k(e,t){var n=E({},this.props[e]);t.target.value!==n[t.target.name]&&(t.target.value?n[t.target.name]=t.target.value:delete n[t.target.name],this.props.onChange(this.props.index,n))}function x(e){for(var t=Object.keys(Q),n=0;n<t.length;n++)if(Q[t[n]].configKey in e)return t[n];return null}var w={},O=[],P=[],S="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,N=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,j=[],T=[],R=0,D=!1,U=!1,A={};t(y.prototype,{setState:function(e,o){var r=this.state;this.prevState||(this.prevState=t({},r)),t(r,"function"==typeof e?e(r,this.props):e),o&&(this._renderCallbacks=this._renderCallbacks||[]).push(o),n(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),g(this,2)},render:function(){}});var B=function(t){function n(e){var t;return _classCallCheck(this,n),t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),t.state.isValid=!0,t.state.value=JSON.stringify(e.value||{},null,2),t.onChange=t.onChange.bind(t),t}return _inherits(n,y),_createClass(n,[{key:"onChange",value:function(e){var t=e.target.value,n=void 0,o=void 0;try{n=JSON.parse(t),o=!0}catch(e){o=!1}this.setState({value:t,isValid:o}),o&&this.props.onChange(n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({value:JSON.stringify(t,null,2),isValid:!0})}},{key:"render",value:function(t,n){var o=t.label,r=n.value,a={minWidth:300,width:"100%"};return n.isValid||(a.border="1px solid red"),e("paper-textarea",{label:o,value:r,style:a,"onvalue-changed":this.onChange})}}]),n}();!function(){function e(e){function t(o,r){try{var a=e[o](r),i=a.value;i instanceof function(e){this.value=e}?Promise.resolve(i.value).then(function(e){t("next",e)},function(e){t("throw",e)}):n(a.done?"return":"normal",a.value)}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":o.resolve({value:n,done:!0});break;case"throw":o.reject(n);break;default:o.resolve({value:n,done:!1})}(o=o.next)?t(o.key,o.arg):r=null}var o,r;this._invoke=function(e,n){return new Promise(function(a,i){var l={key:e,arg:n,resolve:a,reject:i,next:null};r?r=r.next=l:(o=r=l,t(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}();var E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},L=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,E({},this.props.action,{data:e}))}},{key:"render",value:function(t){var n=t.action,o=n.alias,r=n.service,a=n.data;return e("div",null,e("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),e("paper-input",{label:"Service",name:"service",value:r,onChange:this.onChange}),e(B,{label:"Service Data",value:a,onChange:this.serviceDataChanged}))}}]),n}();L.configKey="service",L.defaultConfig={alias:"",service:"",data:{}};var W=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.entity_id,r=n.state,a=n.for;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),e("paper-input",{label:"State",name:"state",value:r,onChange:this.onChange}),a&&e("pre",null,"For: ",JSON.stringify(a,null,2)))}}]),n}();W.defaultConfig={entity_id:"",state:""};var M=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.value_template,r=n.entity_id,a=n.below,i=n.above;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),e("paper-input",{label:"Above",name:"above",value:i,onChange:this.onChange}),e("paper-input",{label:"Below",name:"below",value:a,onChange:this.onChange}),e("paper-textarea",{label:"Value template (optional)",name:"value_template",value:o,"onvalue-changed":this.onChange}))}}]),n}();M.defaultConfig={entity_id:""};var V=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e.afterPicked=e.radioGroupPicked.bind(e,"after"),e.beforePicked=e.radioGroupPicked.bind(e,"before"),e}return _inherits(n,y),_createClass(n,[{key:"radioGroupPicked",value:function(e,t){var n=E({},this.props.condition);t.target.selected?n[e]=t.target.selected:delete n[e],this.props.onChange(this.props.index,n)}},{key:"render",value:function(t){var n=t.condition,o=n.after,r=n.after_offset,a=n.before,i=n.before_offset;return e("div",null,e("label",{id:"beforelabel"},"Before:"),e("paper-radio-group",{"allow-empty-selection":!0,selected:a,"aria-labelledby":"beforelabel","onpaper-radio-group-changed":this.beforePicked},e("paper-radio-button",{name:"sunrise"},"Sunrise"),e("paper-radio-button",{name:"sunset"},"Sunset")),e("paper-input",{label:"Before offset (optional)",name:"before_offset",value:i,onChange:this.onChange,disabled:void 0===a}),e("label",{id:"afterlabel"},"After:"),e("paper-radio-group",{"allow-empty-selection":!0,selected:o,"aria-labelledby":"afterlabel","onpaper-radio-group-changed":this.afterPicked},e("paper-radio-button",{name:"sunrise"},"Sunrise"),e("paper-radio-button",{name:"sunset"},"Sunset")),e("paper-input",{label:"After offset (optional)",name:"after_offset",value:r,onChange:this.onChange,disabled:void 0===o}))}}]),n}();V.defaultConfig={};var q=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){return e("div",null,e("paper-textarea",{label:"Value Template",name:"value_template",value:t.condition.value_template,"onvalue-changed":this.onChange}))}}]),n}();q.defaultConfig={value_template:""};var z=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.after,r=n.before;return e("div",null,e("paper-input",{label:"After",name:"after",value:o,onChange:this.onChange}),e("paper-input",{label:"Before",name:"before",value:r,onChange:this.onChange}))}}]),n}();z.defaultConfig={};var I=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"condition"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=n.entity_id,r=n.zone;return e("div",null,e("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),e("paper-input",{label:"Zone entity id",name:"zone",value:r,onChange:this.onChange}))}}]),n}();I.defaultConfig={entity_id:"",zone:""};var H={state:W,numeric_state:M,sun:V,template:q,time:z,zone:I},J=Object.keys(H).sort(),K=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;t!==this.props.condition.condition&&this.props.onChange(this.props.index,E({condition:t},H[t].defaultConfig))}},{key:"render",value:function(t){var n=t.index,o=t.condition,r=t.onChange,a=H[o.condition],i=J.indexOf(o.condition);return a?e("div",null,e("paper-dropdown-menu-light",{label:"Condition Type","no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:i,"oniron-select":this.typeChanged},J.map(function(t){return e("paper-item",null,t)}))),e(a,{index:n,condition:o,onChange:r})):e("div",null,"Unsupported condition: ",o.condition,e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),G=function(t){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){var n=t.action,o=t.index,r=t.onChange;return e(K,{condition:n,onChange:r,index:o})}}]),n}();G.configKey="condition",G.defaultConfig=E({condition:"state"},W.defaultConfig);var F=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e}return _inherits(n,y),_createClass(n,[{key:"render",value:function(t){return e("div",null,e("paper-input",{label:"Delay",name:"delay",value:t.action.delay,onChange:this.onChange}))}}]),n}();F.configKey="delay",F.defaultConfig={delay:""};var $=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,E({},this.props.action,{data:e}))}},{key:"render",value:function(t){var n=t.action,o=n.event,r=n.event_data;return e("div",null,e("paper-input",{label:"Event",name:"event",value:o,onChange:this.onChange}),e(B,{label:"Service Data",value:r,onChange:this.serviceDataChanged}))}}]),n}();$.configKey="event",$.defaultConfig={event:"",event_data:{}};var Z=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=k.bind(e,"action"),e.onTemplateChange=e.onTemplateChange.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onTemplateChange",value:function(e){this.props.onChange(this.props.index,E({},this.props.trigger,_defineProperty({},e.target.name,e.target.value)))}},{key:"render",value:function(t){var n=t.action,o=n.wait_template,r=n.timeout;return e("div",null,e("paper-textarea",{label:"Wait Template",name:"wait_template",value:o,"onvalue-changed":this.onTemplateChange}),e("paper-input",{label:"Timeout (Optional)",name:"timeout",value:r,onChange:this.onChange}))}}]),n}();Z.configKey="wait_template",Z.defaultConfig={wait_template:"",timeout:""};var Q={"Call Service":L,Delay:F,Wait:Z,Condition:G,"Fire Event":$},X=Object.keys(Q).sort(),Y=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.innerHTML;x(this.props.action)!==t&&this.props.onChange(this.props.index,Q[t].defaultConfig)}},{key:"render",value:function(t){var n=t.index,o=t.action,r=t.onChange,a=x(o),i=a&&Q[a],l=X.indexOf(a);return i?e("div",null,e("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},X.map(function(t){return e("paper-item",null,t)}))),e(i,{index:n,action:o,onChange:r})):e("div",null,"Unsupported action",e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),ee=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onDelete=e.onDelete.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(t){return e("paper-card",null,e("div",{class:"card-menu"},e("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},e("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),e("paper-listbox",{slot:"dropdown-content"},e("paper-item",{disabled:!0},"Duplicate"),e("paper-item",{onTap:this.onDelete},"Delete")))),e("div",{class:"card-content"},e(Y,t)))}}]),n}(),te=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,t){var n=this.props.script.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(t){var n=this;return e("div",{class:"script"},t.script.map(function(t,o){return e(ee,{index:o,action:t,onChange:n.actionChanged})}),e("paper-card",null,e("div",{class:"card-actions add-card"},e("paper-button",{onTap:this.addAction},"Add action"))))}}]),n}(),ne=function(t){function n(){var e;return _classCallCheck(this,n),e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e.onChange=e.onChange.bind(e),e.sequenceChanged=e.sequenceChanged.bind(e),e}return _inherits(n,y),_createClass(n,[{key:"onChange",value:function(e){this.props.onChange(E({},this.props.script,_defineProperty({},e.target.name,e.target.value)))}},{key:"sequenceChanged",value:function(e){this.props.onChange(E({},this.props.script,{sequence:e}))}},{key:"render",value:function(t){var n=t.script,o=t.isWide,r=n.alias,a=n.sequence;return e("div",null,e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},r),e("span",{slot:"introduction"},"Use scripts to execute a sequence of actions."),e("paper-card",null,e("div",{class:"card-content"},e("paper-input",{label:"Name",name:"alias",value:r,onChange:this.onChange})))),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},"Sequence"),e("span",{slot:"introduction"},"The sequence of actions of this script.",e("p",null,e("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about available actions."))),e(te,{script:a,onChange:this.sequenceChanged})))}}]),n}();window.ScriptEditor=function(t,n,o){return m(e(ne,n),t,o)},window.unmountPreact=function(e,t){m(function(){return null},e,t)}}();</script><dom-module id="ha-script-editor" assetpath="script/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Script [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveScript"></paper-fab></div></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},HaScriptEditor=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.configChanged=this.configChanged.bind(this),this._rendered=null}},{key:"disconnectedCallback",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disconnectedCallback",this).call(this),this._rendered&&window.unmountPreact(this._rendered)}},{key:"configChanged",value:function(e){null!==this._rendered&&(this.config=e,this.errors=null,this.dirty=!0,this._updateComponent(e))}},{key:"scriptChanged",value:function(e,t){e&&(this.hass?t&&t.entity_id===e.entity_id||this.hass.callApi("get","config/script/config/"+window.hassUtil.computeObjectId(e)).then(function(e){var t=e.sequence;t&&!Array.isArray(t)&&(e.sequence=[t]),this.dirty=!1,this.config=e,this._updateComponent()}.bind(this)):setTimeout(this.scriptChanged.bind(this,e,t),0))}},{key:"creatingNewChanged",value:function(e){e&&(this.dirty=!1,this.config={alias:"New Script",sequence:[{service:"",data:{}}]},this._updateComponent())}},{key:"isWideChanged",value:function(){null!==this.config&&this._updateComponent()}},{key:"backTapped",value:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()}},{key:"_updateComponent",value:function(){this._rendered=window.ScriptEditor(this.$.root,{script:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)}},{key:"saveScript",value:function(){var e=this.creatingNew?""+Date.now():window.hassUtil.computeObjectId(this.script);this.hass.callApi("post","config/script/config/"+e,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.replaceState(null,null,"/config/script/edit/"+e),this.fire("location-changed"))}.bind(this),function(e){throw this.errors=e.body.message,e}.bind(this))}},{key:"computeName",value:function(e){return e&&window.hassUtil.computeStateName(e)}}],[{key:"is",get:function(){return"ha-script-editor"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},script:{type:Object,observer:"scriptChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(script)"},isWide:{type:Boolean,observer:"isWideChanged"}}}}]),t}();customElements.define(HaScriptEditor.is,HaScriptEditor);</script><dom-module id="ha-config-script" assetpath="script/"><template><style>ha-script-picker,
      ha-script-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:script" data="{{_routeData}}" active="{{_edittingScript}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-script-picker narrow="[[narrow]]" show-menu="[[showMenu]]" scripts="[[scripts]]" is-wide="[[isWide]]"></ha-script-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-script-editor hass="[[hass]]" script="[[script]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-script-editor></template></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),HaConfigScript=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"computeScript",value:function(t,e,r){if(!t||!e)return null;for(var o=0;o<t.length;o++)if(t[o].entity_id===r.script)return t[o];return null}},{key:"computeScripts",value:function(t){var e=[];return Object.keys(t.states).forEach(function(r){var o=t.states[r];"script"===window.hassUtil.computeDomain(o)&&e.push(o)}),e.sort(function(t,e){var r=window.hassUtil.computeStateName(t),o=window.hassUtil.computeStateName(e);return r<o?-1:r>o?1:0})}},{key:"computeShowEditor",value:function(t,e){return e||t}}],[{key:"is",get:function(){return"ha-config-script"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingScript:Boolean,scripts:{type:Array,computed:"computeScripts(hass)"},script:{type:Object,computed:"computeScript(scripts, _edittingScript, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingScript, _creatingNew)"}}}}]),e}();customElements.define(HaConfigScript.is,HaConfigScript);</script><dom-module id="ha-service-description" assetpath="../../src/components/"><template>[[_getDescription(hass, domain, service)]]</template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),HaServiceDescription=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"_getDescription",value:function(e,t,r){var n=e.config.services[t];if(!n)return"";var o=n[r];return o?o.description:""}}],[{key:"is",get:function(){return"ha-service-description"}},{key:"properties",get:function(){return{hass:Object,domain:String,service:String}}}]),t}();customElements.define(HaServiceDescription.is,HaServiceDescription);</script><dom-module id="ha-form-style"><template><style>.form-group{@apply (--layout-horizontal);@apply (--layout-center);padding:8px 16px;}.form-group label{@apply (--layout-flex-2);}.form-group .form-control{@apply (--layout-flex);}.form-group.vertical{@apply (--layout-vertical);@apply (--layout-start);}paper-dropdown-menu.form-control{margin:-9px 0;}</style></template></dom-module><dom-module id="ozw-log" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">OZW Log</span><paper-card><div class="device-picker"><paper-input label="Number of last log lines." type="number" min="0" max="1000" step="10" value="{{numLogLines}}"></paper-input></div><div class="card-actions"><paper-button raised="" on-tap="refreshLog">Refresh</paper-button></div><div class="help-text"><pre>[[ozwLogs]]</pre></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),OzwLog=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"refreshLog",value:function(){var e=this;this.ozwLogs="Loading ozw log...",this.hass.callApi("GET","zwave/ozwlog?lines="+this.numLogLines).then(function(t){e.ozwLogs=t})}}],[{key:"is",get:function(){return"ozw-log"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean,value:!1},ozwLogs:{type:String,value:"Refresh to pull log"},numLogLines:{type:Number,value:0}}}}]),t}();customElements.define(OzwLog.is,OzwLog);</script><dom-module id="zwave-network" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.card-actions.warning ha-call-service-button{color:var(--google-red-500);}.toggle-help-icon{position:absolute;top:-6px;right:0;color:var(--primary-color);}ha-service-description{display:block;color:grey;}[hidden]{display:none;}</style><ha-config-section is-wide="[[isWide]]"><div style="position: relative" slot="header"><span>Z-Wave Network Management</span><paper-icon-button class="toggle-help-icon" on-tap="helpTap" icon="mdi:help-circle"></paper-icon-button></div><span slot="introduction">Run commands that affect the Z-Wave network. You won't get feedback on whether the command succeeded, but you can look in the OZW Log to try to figure out.</span><paper-card class="content"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node_secure">Add Node Secure</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node_secure" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node">Add Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_node">Remove Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_node" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions warning"><ha-call-service-button hass="[[hass]]" domain="zwave" service="cancel_command">Cancel Command</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="cancel_command" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_network">Heal Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="start_network">Start Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="start_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="stop_network">Stop Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="stop_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="soft_reset">Soft Reset</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="soft_reset" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_network">Test Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="test_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-api-button hass="[[hass]]" path="zwave/saveconfig">Save Config</ha-call-api-button></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ZwaveNetwork=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"helpTap",value:function(){this.showDescription=!this.showDescription}}],[{key:"is",get:function(){return"zwave-network"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean,value:!1},showDescription:{type:Boolean,value:!1}}}}]),t}();customElements.define(ZwaveNetwork.is,ZwaveNetwork);</script><dom-module id="zwave-node-information" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}paper-card{display:block;margin:0 auto;max-width:600px;}paper-button[toggles][active]{background:lightgray;}</style><div class="content"><paper-card heading="Node Information"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{nodeInfoActive}}">Show</paper-button></div><template is="dom-if" if="{{nodeInfoActive}}"><template is="dom-repeat" items="[[selectedNodeAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ZwaveNodeInformation=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"nodeChanged",value:function(e){if(this.nodes&&-1!==e){var t=this.nodes[this.selectedNode].attributes,n=[];Object.keys(t).forEach(function(e){n.push(e+": "+t[e])}),this.selectedNodeAttrs=n.sort()}}}],[{key:"is",get:function(){return"zwave-node-information"}},{key:"properties",get:function(){return{nodes:{type:Array,observer:"nodeChanged"},selectedNode:{type:Number,value:-1,observer:"nodeChanged"},selectedNodeAttrs:{type:Array},nodeInfoActive:{type:Boolean}}}}]),t}();customElements.define(ZwaveNodeInformation.is,ZwaveNodeInformation);</script><dom-module id="zwave-values" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node Values"><div class="device-picker"><paper-dropdown-menu label="Value" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedValue}}"><template is="dom-repeat" items="[[values]]" as="item"><paper-item>[[computeSelectCaption(item)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsValueSelected(selectedValue)]]"><div class="card-actions"><paper-input float-label="Value Name" type="text" value="{{newValueNameInput}}" placeholder="[[computeGetValueName(selectedValue)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_value" service-data="[[computeValueNameServiceData(newValueNameInput)]]">Rename Value</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},ZwaveValues=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){var t=this;e.detail.success&&setTimeout(function(){t.refreshValues(t.selectedNode)},5e3)}},{key:"computeSelectCaption",value:function(e){return e.value.label+" (Instance: "+e.value.instance+", Index: "+e.value.index+")"}},{key:"computeGetValueName",value:function(e){return this.values[e].value.label}},{key:"computeIsValueSelected",value:function(e){return!this.nodes||-1===this.selectedNode||-1===e}},{key:"refreshValues",value:function(e){var t=[];this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(n){t.push({key:n,value:e[n]})}),this.values=t,this.selectedValueChanged(this.selectedValue)}.bind(this))}},{key:"computeValueNameServiceData",value:function(e){return-1===!this.selectedNode||-1===this.selectedValue?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.values[this.selectedValue].key,name:e}}},{key:"selectedValueChanged",value:function(e){if(-1!==!this.selectedNode&&-1!==this.selectedValue){var t=this;this.hass.callApi("GET","config/zwave/device_config/"+this.values[e].value.entity_id).then(function(n){t.entityIgnored=n.ignored||!1,t.entityPollingIntensity=t.values[e].value.poll_intensity})}}}],[{key:"is",get:function(){return"zwave-values"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array},values:{type:Array},selectedNode:{type:Number},selectedValue:{type:Number,value:-1,observer:"selectedValueChanged"}}}}]),t}();customElements.define(ZwaveValues.is,ZwaveValues);</script><dom-module id="zwave-groups" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;padding-bottom:12px;}</style><paper-card class="content" heading="Node group associations"><div class="device-picker"><paper-dropdown-menu label="Group" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedGroup}}"><template is="dom-repeat" items="[[groups]]" as="state"><paper-item>[[computeSelectCaptionGroup(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[computeIsGroupSelected(selectedGroup)]]"><div class="device-picker"><paper-dropdown-menu label="Node to control" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedTargetNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="help-text"><span>Other Nodes in this group:</span><template is="dom-repeat" items="[[otherGroupNodes]]" as="state"><div>[[state]]</div></template></div><div class="help-text"><span>Max Associations:</span> <span>[[maxAssociations]]</span></div></template><template is="dom-if" if="[[computeIsTargetNodeSelected(selectedTargetNode)]]"><div class="card-actions"><template is="dom-if" if="[[!noAssociationsLeft]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]">Add To Group</ha-call-service-button></template><template is="dom-if" if="[[computeTargetInGroup(selectedGroup, selectedTargetNode)]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]">Remove From Group</ha-call-service-button></template></div></template></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),_get=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,o,r)}if("value"in n)return n.value;var u=n.get;if(void 0!==u)return u.call(r)},ZwaveGroups=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshGroups(t.selectedNode)},5e3)}}},{key:"computeAssociationsLeft",value:function(e){return-1===e||this.maxAssociations===this.otherGroupNodes.length}},{key:"computeMaxAssociations",value:function(e){if(-1===e)return-1;var t=this.groups[e].value.max_associations;return t||"None"}},{key:"computeOtherGroupNodes",value:function(e){var t=this;if(-1===e)return-1;var o=Object.values(this.groups[e].value.association_instances);return o.length?o.map(function(e){if(!e.length||2!==e.length)return"Unknown Node: "+e;var o=e[0],r=e[1],n=t.nodes.find(function(e){return e.attributes.node_id===o});if(!n)return"Unknown Node (id: "+(r?o+"."+r:o)+")";var s=t.computeSelectCaption(n);return r&&(s+="/ Instance: "+r),s}):["None"]}},{key:"computeTargetInGroup",value:function(e,t){if(-1===e||-1===t)return!1;var o=Object.values(this.groups[e].value.associations);return!!o.length&&-1!==o.indexOf(this.nodes[t].attributes.node_id)}},{key:"computeSelectCaption",value:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"}},{key:"computeSelectCaptionGroup",value:function(e){return e.key+": "+e.value.label}},{key:"computeIsTargetNodeSelected",value:function(e){return this.nodes&&-1!==e}},{key:"computeIsGroupSelected",value:function(e){return this.nodes&&-1!==this.selectedNode&&-1!==e}},{key:"computeAssocServiceData",value:function(e,t){return-1===!this.groups||-1===e||-1===this.selectedNode?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,association:t,target_node_id:this.nodes[this.selectedTargetNode].attributes.node_id,group:this.groups[e].key}}},{key:"refreshGroups",value:function(e){var t=[];this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(o){t.push({key:o,value:e[o]})}),this.groups=t,this.selectedGroupChanged(this.selectedGroup)}.bind(this))}},{key:"selectedGroupChanged",value:function(e){-1!==this.selectedGroup&&-1!==e&&(this.maxAssociations=this.groups[e].value.max_associations,this.otherGroupNodes=Object.values(this.groups[e].value.associations))}}],[{key:"is",get:function(){return"zwave-groups"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array},groups:{type:Array},selectedNode:{type:Number},selectedTargetNode:{type:Number,value:-1},selectedGroup:{type:Number,value:-1,observer:"selectedGroupChanged"},otherGroupNodes:{type:Array,value:-1,computed:"computeOtherGroupNodes(selectedGroup)"},maxAssociations:{type:String,value:"",computed:"computeMaxAssociations(selectedGroup)"},noAssociationsLeft:{type:Boolean,value:!0,computed:"computeAssociationsLeft(selectedGroup)"}}}}]),t}();customElements.define(ZwaveGroups.is,ZwaveGroups);</script><dom-module id="zwave-node-config" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node config options"><template is="dom-if" if="[[wakeupNode]]"><div class="card-actions"><paper-input float-label="Wakeup Interval" type="number" value="{{wakeupInput}}" placeholder="[[computeGetWakeupValue(selectedNode)]]"><div suffix="">seconds</div></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_wakeup" service-data="[[computeWakeupServiceData(wakeupInput)]]">Set Wakeup</ha-call-service-button></div></template><div class="device-picker"><paper-dropdown-menu label="Config parameter" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedConfigParameter}}"><template is="dom-repeat" items="[[config]]" as="state"><paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'List')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" dynamic-align="" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]"><div class="card-actions"><paper-input label="{{selectedConfigParameterNumValues}}" type="number" value="{{selectedConfigValue}}" max="{{configParameterMax}}" min="{{configParameterMin}}"></paper-input></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" dynamic-align="" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><div class="help-text"><span>[[configValueHelpText]]</span></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_config_parameter" service-data="[[computeSetConfigParameterServiceData(selectedConfigValue)]]">Set Config Parameter</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function e(t,a,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},ZwaveNodeConfig=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshConfig(t.selectedNode)},5e3)}}},{key:"nodesChanged",value:function(){this.nodes&&(this.wakeupNode=0===this.nodes[this.selectedNode].attributes.wake_up_interval||this.nodes[this.selectedNode].attributes.wake_up_interval,this.wakeupNode&&(0===this.nodes[this.selectedNode].attributes.wake_up_interval?this.wakeupInput="":this.wakeupInput=this.nodes[this.selectedNode].attributes.wake_up_interval))}},{key:"computeGetWakeupValue",value:function(e){return-1!==this.selectedNode&&this.nodes[e].attributes.wake_up_interval?this.nodes[e].attributes.wake_up_interval:"unknown"}},{key:"computeWakeupServiceData",value:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,value:e}}},{key:"computeConfigValueHelp",value:function(e){if(-1===e)return"";var t=this.config[e].value.help;return t||["No helptext available"]}},{key:"computeSetConfigParameterServiceData",value:function(e){if(-1===this.selectedNode||-1===this.selectedConfigParameter)return-1;var t=null;return"Short Byte Int".includes(this.selectedConfigParameterType)&&(t=parseInt(e,10)),"Bool Button".includes(this.selectedConfigParameterType)&&(t=this.selectedConfigParameterValues[e]),"List"===this.selectedConfigParameterType&&(t=this.selectedConfigParameterValues[e]),{node_id:this.nodes[this.selectedNode].attributes.node_id,parameter:this.config[this.selectedConfigParameter].key,value:t}}},{key:"selectedConfigParameterChanged",value:function(e){-1!==e&&(this.selectedConfigValue=-1,this.loadedConfigValue=-1,this.selectedConfigParameterValues=[],this.selectedConfigParameterType=this.config[e].value.type,this.configParameterMax=this.config[e].value.max,this.configParameterMin=this.config[e].value.min,this.loadedConfigValue=this.config[e].value.data,this.configValueHelpText=this.config[e].value.help,"Short Byte Int".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterNumValues=this.config[e].value.data_items,this.selectedConfigValue=this.loadedConfigValue),"Bool Button".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=["True","False"],this.config[e].value.data?this.loadedConfigValue="True":this.loadedConfigValue="False"),"List".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=this.config[e].value.data_items))}},{key:"isConfigParameterSelected",value:function(e,t){return-1!==e&&(this.config[e].value.type===t||!!t.includes(this.config[e].value.type))}},{key:"computeSelectCaptionConfigParameter",value:function(e){return e.key+": "+e.value.label}},{key:"refreshConfig",value:function(e){var t=[];this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(a){t.push({key:a,value:e[a]})}),this.config=t,this.selectedConfigParameterChanged(this.selectedConfigParameter)}.bind(this))}}],[{key:"is",get:function(){return"zwave-node-config"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array,observer:"nodesChanged"},selectedNode:{type:Number,value:-1,observer:"nodesChanged"},config:{type:Array,value:function(){return[]}},selectedConfigParameter:{type:Number,value:-1,observer:"selectedConfigParameterChanged"},configParameterMax:{type:Number,value:-1},configParameterMin:{type:Number,value:-1},configValueHelpText:{type:String,value:"",computed:"computeConfigValueHelp(selectedConfigParameter)"},selectedConfigParameterType:{type:String,value:""},selectedConfigValue:{type:Number,value:-1,observer:"computeSetConfigParameterServiceData"},selectedConfigParameterValues:{type:Array,value:function(){return[]}},selectedConfigParameterNumValues:{type:String,value:""},loadedConfigValue:{type:Number,value:-1},wakeupInput:{type:Number},wakeupNode:{type:Boolean,value:!1}}}}]),t}();customElements.define(ZwaveNodeConfig.is,ZwaveNodeConfig);</script><dom-module id="zwave-usercodes" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><div class="content"><paper-card heading="Node user codes"><div class="device-picker"><paper-dropdown-menu label="Code slot" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedUserCode}}"><template is="dom-repeat" items="[[userCodes]]" as="state"><paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isUserCodeSelected(selectedUserCode)]]"><div class="card-actions"><paper-input label="User code" type="number" value="{{selectedUserCodeValue}}" maxlength="{{userCodeMaxLen}}" min="0"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="lock" service="set_usercode" service-data="[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]">Set Usercode</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="lock" service="clear_usercode" service-data="[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]">Delete Usercode</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),_get=function e(t,r,s){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,s)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(s)},ZwaveUsercodes=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshUserCodes(t.selectedNode)},5e3)}}},{key:"isUserCodeSelected",value:function(e){return-1!==e}},{key:"computeSelectCaptionUserCodes",value:function(e){return e.key+": "+e.value.label}},{key:"selectedUserCodeChanged",value:function(e){if(-1!==this.selectedUserCode&&-1!==e){var t=parseInt(this.userCodes[e].value.code.trim());this.userCodeMaxLen=this.userCodes[e].value.length,isNaN(t)?this.selectedUserCodeValue="":this.selectedUserCodeValue=t}}},{key:"computeUserCodeServiceData",value:function(e,t){if(-1===this.selectedNode||!e)return-1;var r=null,s=null;return"Add"===t&&(s=e,r={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode,usercode:s}),"Delete"===t&&(r={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode}),r}},{key:"refreshUserCodes",value:function(e){this.selectedUserCodeValue="";var t=[];this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(r){t.push({key:r,value:e[r]})}),this.userCodes=t,this.selectedUserCodeChanged(this.selectedUserCode)}.bind(this))}}],[{key:"is",get:function(){return"zwave-usercodes"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array},selectedNode:{type:Number},userCodes:{type:Object},userCodeMaxLen:{type:Number,value:4},selectedUserCode:{type:Number,value:-1,observer:"selectedUserCodeChanged"},selectedUserCodeValue:{type:Number,value:-1}}}}]),t}();customElements.define(ZwaveUsercodes.is,ZwaveUsercodes);</script><dom-module id="ha-config-zwave" assetpath="zwave/"><template><style include="iron-flex ha-style ha-form-style">.content{margin-top:24px;}.node-info{margin-left:16px;}.help-text{padding-left:24px;padding-right:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}ha-service-description{display:block;color:grey;}[hidden]{display:none;}.toggle-help-icon{position:absolute;top:6px;right:0;color:var(--primary-color);}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Z-Wave Manager</div></app-toolbar></app-header><zwave-network id="zwave-network" is-wide="[[isWide]]" hass="[[hass]]"></zwave-network><ha-config-section is-wide="[[isWide]]"><div style="position: relative" slot="header"><span>Z-Wave Node Management</span><paper-icon-button class="toggle-help-icon" on-tap="toggleHelp" icon="mdi:help-circle"></paper-icon-button></div><span slot="introduction">Run Z-Wave commands that affect a single node. Pick a node to see a list of available commands.</span><paper-card class="content"><div class="device-picker"><paper-dropdown-menu dynamic-align="" label="Nodes" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsNodeSelected(selectedNode)]]"><template is="dom-if" if="[[showHelp]]"><div style="color: grey; padding: 12px">Select node to view per-node options</div></template></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_node" service-data="[[computeNodeServiceData(selectedNode)]]">Refresh Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Remove Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="replace_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Replace Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="replace_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="print_node" service-data="[[computeNodeServiceData(selectedNode)]]">Print Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="print_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_node" service-data="[[computeHealNodeServiceData(selectedNode)]]">Heal Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="heal_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_node" service-data="[[computeNodeServiceData(selectedNode)]]">Test Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="test_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="card-actions"><paper-input float-label="New node name" type="text" value="{{newNodeNameInput}}" placeholder="[[computeGetNodeName(selectedNode)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_node" service-data="[[computeNodeNameServiceData(newNodeNameInput)]]">Rename Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="rename_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="device-picker"><paper-dropdown-menu label="Entities of this node" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaptionEnt(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsEntitySelected(selectedEntity)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_entity" service-data="[[computeRefreshEntityServiceData(selectedEntity)]]">Refresh Entity</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_entity" hidden$="[[!showHelp]]"></ha-service-description></div><div class="form-group"><paper-checkbox checked="{{entityIgnored}}" class="form-control">Exclude this entity from Home Assistant</paper-checkbox><paper-input disabled="{{entityIgnored}}" label="Polling intensity" type="number" min="0" value="{{entityPollingIntensity}}"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_poll_intensity" service-data="[[computePollIntensityServiceData(entityPollingIntensity)]]">Save</ha-call-service-button></div><div class="content"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{entityInfoActive}}">Entity Attributes</paper-button></div><template is="dom-if" if="{{entityInfoActive}}"><template is="dom-repeat" items="[[selectedEntityAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></div></template></template></paper-card><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-information id="zwave-node-information" nodes="[[nodes]]" selected-node="[[selectedNode]]"></zwave-node-information><zwave-values hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" values="[[values]]"></zwave-values><zwave-groups hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" groups="[[groups]]"></zwave-groups><zwave-node-config hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" config="[[config]]"></zwave-node-config></template></ha-config-section><template is="dom-if" if="{{hasNodeUserCodes}}"><zwave-usercodes id="zwave-usercodes" hass="[[hass]]" nodes="[[nodes]]" user-codes="[[userCodes]]" selected-node="[[selectedNode]]"></zwave-usercodes></template><ozw-log is-wide="[[isWide]]" hass="[[hass]]"></ozw-log></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},HaConfigZwave=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){e.detail.success&&"set_poll_intensity"===e.detail.service&&this.saveEntity()}},{key:"computeNodes",value:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(e){return!e.attributes.hidden&&e.entity_id.match("zwave[.]")}).sort(window.hassUtil.sortByName)}},{key:"computeEntities",value:function(e){if(!this.nodes||-1===e)return-1;var t=this.hass,n=this.nodes[this.selectedNode].attributes.node_id;return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return void 0!==e.attributes.node_id&&(!e.attributes.hidden&&"node_id"in e.attributes&&e.attributes.node_id===n&&!e.entity_id.match("zwave[.]"))}).sort(window.hassUtil.sortByName)}},{key:"selectedNodeChanged",value:function(e){var t=this;this.newNodeNameInput="",-1!==e&&(this.selectedConfigParameter=-1,this.selectedConfigParameterValue=-1,this.selectedGroup=-1,this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){t.config=t._objToArray(e)}),this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){t.values=t._objToArray(e)}),this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){t.groups=t._objToArray(e)}),this.hasNodeUserCodes=!1,this.notifyPath("hasNodeUserCodes"),this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){t.userCodes=t._objToArray(e),t.hasNodeUserCodes=t.userCodes.length>0,t.notifyPath("hasNodeUserCodes")}))}},{key:"selectedEntityChanged",value:function(e){if(-1!==e){var t=this;t.hass.callApi("GET","zwave/values/"+t.nodes[t.selectedNode].attributes.node_id).then(function(e){t.values=t._objToArray(e)});var n=t.entities[e].attributes.value_id,i=t.values.find(function(e){return e.key===n}),o=t.values.indexOf(i);t.hass.callApi("GET","config/zwave/device_config/"+n).then(function(e){t.entityIgnored=e.ignored||!1,t.entityPollingIntensity=t.values[o].value.poll_intensity})}}},{key:"computeSelectedEntityAttrs",value:function(e){if(-1===e)return"No entity selected";var t=this.entities[e].attributes,n=[];return Object.keys(t).forEach(function(e){n.push(e+": "+t[e])}),n.sort()}},{key:"computeSelectCaption",value:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"}},{key:"computeSelectCaptionEnt",value:function(e){return window.hassUtil.computeDomain(e)+"."+window.hassUtil.computeStateName(e)}},{key:"computeIsNodeSelected",value:function(){return this.nodes&&-1!==this.selectedNode}},{key:"computeIsEntitySelected",value:function(e){return-1===e}},{key:"computeNodeServiceData",value:function(e){return{node_id:this.nodes[e].attributes.node_id}}},{key:"computeHealNodeServiceData",value:function(e){return{node_id:this.nodes[e].attributes.node_id,return_routes:!0}}},{key:"computeGetNodeName",value:function(e){return-1!==this.selectedNode&&this.nodes[e].entity_id?this.nodes[e].attributes.node_name:-1}},{key:"computeNodeNameServiceData",value:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,name:e}}},{key:"computeRefreshEntityServiceData",value:function(e){return-1===e?-1:{entity_id:this.entities[e].entity_id}}},{key:"computePollIntensityServiceData",value:function(e){return-1===!this.selectedNode||-1===this.selectedEntity?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.entities[this.selectedEntity].attributes.value_id,poll_intensity:parseInt(e)}}},{key:"saveEntity",value:function(){var e={ignored:this.entityIgnored,polling_intensity:parseInt(this.entityPollingIntensity)};return this.hass.callApi("POST","config/zwave/device_config/"+this.entities[this.selectedEntity].entity_id,e)}},{key:"toggleHelp",value:function(){this.showHelp=!this.showHelp}},{key:"_objToArray",value:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push({key:n,value:e[n]})}),t}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-config-zwave"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,nodes:{type:Array,computed:"computeNodes(hass)"},selectedNode:{type:Number,value:-1,observer:"selectedNodeChanged"},config:{type:Array,value:function(){return[]}},entities:{type:Array,computed:"computeEntities(selectedNode)"},entityInfoActive:{type:Boolean},selectedEntity:{type:Number,value:-1,observer:"selectedEntityChanged"},selectedEntityAttrs:{type:Array,computed:"computeSelectedEntityAttrs(selectedEntity)"},values:{type:Array},groups:{type:Array},newNodeNameInput:{type:String},userCodes:{type:Array,value:function(){return[]}},hasNodeUserCodes:{type:Boolean,value:!1},showHelp:{type:Boolean,value:!1},entityIgnored:{type:Boolean},entityPollingIntensity:{type:Number}}}}]),t}();customElements.define(HaConfigZwave.is,HaConfigZwave);</script><dom-module id="ha-customize-array" assetpath="customize/types/"><template><style>paper-dropdown-menu{margin:-9px 0;}</style><paper-dropdown-menu label="[[item.description]]" disabled="[[item.secondary]]" selected-item-label="{{item.value}}" dynamic-align=""><paper-listbox slot="dropdown-content" selected="[[computeSelected(item)]]"><template is="dom-repeat" items="[[getOptions(item)]]" as="option"><paper-item>[[option]]</paper-item></template></paper-listbox></paper-dropdown-menu></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeArray=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"getOptions",value:function(e){var t=e.domain||"*",n=e.options[t]||e.options["*"];return n?n.sort():(this.item.type="string",this.fire("item-changed"),[])}},{key:"computeSelected",value:function(e){return this.getOptions(e).indexOf(e.value)}}],[{key:"is",get:function(){return"ha-customize-array"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeArray.is,HaCustomizeArray);</script><dom-module id="ha-customize-boolean" assetpath="customize/types/"><template><paper-checkbox disabled="[[item.secondary]]" checked="{{item.value}}">[[item.description]]</paper-checkbox></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaCustomizeBoolean=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-boolean"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeBoolean.is,HaCustomizeBoolean);</script><dom-module id="ha-customize-icon" assetpath="customize/types/"><template><style>:host{@apply (--layout-horizontal);}.icon-image{border:1px solid grey;padding:8px;margin-right:20px;margin-top:10px;}</style><iron-icon class="icon-image" icon="[[item.value]]"></iron-icon><paper-input auto-validate="" pattern="(mdi:.*)?" error-message="Must start with 'mdi:'" disabled="[[item.secondary]]" label="icon" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaCustomizeIcon=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-icon"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeIcon.is,HaCustomizeIcon);</script><dom-module id="ha-customize-key-value" assetpath="customize/types/"><template><style>:host{@apply (--layout-horizontal);}paper-input{@apply (--layout-flex);}.key{padding-right:20px;}</style><paper-input disabled="[[item.secondary]]" class="key" label="Attribute name" value="{{item.attribute}}"></paper-input><paper-input disabled="[[item.secondary]]" label="Attribute value" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeKeyValue=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-key-value"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeKeyValue.is,HaCustomizeKeyValue);</script><dom-module id="ha-customize-string" assetpath="customize/types/"><template><paper-input disabled="[[item.secondary]]" label="[[getLabel(item)]]" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeString=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"getLabel",value:function(e){return e.description+("json"===e.type?" (JSON formatted)":"")}}],[{key:"is",get:function(){return"ha-customize-string"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeString.is,HaCustomizeString);</script><dom-module id="ha-customize-attribute" assetpath="customize/"><template><style include="ha-form-style">:host{display:block;position:relative;padding-right:40px;}.button{position:absolute;margin-top:-20px;top:50%;right:0;}</style><div id="wrapper" class="form-group"></div><paper-icon-button class="button" icon="[[getIcon(item.secondary)]]" on-tap="tapButton"></paper-icon-button></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),HaCustomizeAttribute=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"tapButton",value:function(){this.item.secondary?this.item=Object.assign({},this.item,{secondary:!1}):this.item=Object.assign({},this.item,{closed:!0})}},{key:"getIcon",value:function(e){return e?"mdi:pencil":"mdi:close"}},{key:"itemObserver",value:function(e){var t=this,i=this.$.wrapper,n=window.hassAttributeUtil.TYPE_TO_TAG[e.type].toUpperCase(),r=void 0;i.lastChild&&i.lastChild.tagName===n?r=i.lastChild:(i.lastChild&&i.removeChild(i.lastChild),this.$.child=r=document.createElement(n.toLowerCase()),r.className="form-control",r.addEventListener("item-changed",function(){t.item=Object.assign({},r.item)})),r.setProperties({item:this.item}),null===r.parentNode&&i.appendChild(r)}}],[{key:"is",get:function(){return"ha-customize-attribute"}},{key:"properties",get:function(){return{item:{type:Object,notify:!0,observer:"itemObserver"}}}}]),t}();customElements.define(HaCustomizeAttribute.is,HaCustomizeAttribute);</script><dom-module id="ha-form-customize-attributes" assetpath="customize/"><template><style>[hidden]{display:none;}</style><template is="dom-repeat" items="{{attributes}}" mutable-data=""><ha-customize-attribute item="{{item}}" hidden$="[[item.closed]]"></ha-customize-attribute></template></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),HaFormCustomizeAttributes=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.MutableData(Polymer.Element)),_createClass(e,null,[{key:"is",get:function(){return"ha-form-customize-attributes"}},{key:"properties",get:function(){return{attributes:{type:Array,notify:!0}}}}]),e}();customElements.define(HaFormCustomizeAttributes.is,HaFormCustomizeAttributes);</script><dom-module id="ha-form-customize" assetpath="customize/"><template><style include="iron-flex ha-style ha-form-style">.warning{color:red;}.attributes-text{padding-left:20px;}</style><template is="dom-if" if="[[computeShowWarning(localConfig, globalConfig)]]"><div class="warning">It seems that your configuration.yaml doesn't properly include customize.yaml<br>Changes made here won't affect your configuration.</div></template><template is="dom-if" if="[[hasLocalAttributes]]"><h4 class="attributes-text">The following attributes are already set in customize.yaml<br></h4><ha-form-customize-attributes attributes="{{localAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasGlobalAttributes]]"><h4 class="attributes-text">The following attributes are customized from outside of customize.yaml<br>Possibly via a domain, a glob or a different include.</h4><ha-form-customize-attributes attributes="{{globalAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasExistingAttributes]]"><h4 class="attributes-text">The following attributes of the entity are set programatically.<br>You can override them if you like.</h4><ha-form-customize-attributes attributes="{{existingAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasNewAttributes]]"><h4 class="attributes-text">The following attributes weren't set. Set them if you like.</h4><ha-form-customize-attributes attributes="{{newAttributes}}"></ha-form-customize-attributes></template><div class="form-group"><paper-dropdown-menu label="Pick an attribute to override" class="flex" dynamic-align=""><paper-listbox slot="dropdown-content" selected="{{selectedNewAttribute}}"><template is="dom-repeat" items="[[newAttributesOptions]]" as="option"><paper-item>[[option]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),HaFormCustomize=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"_initOpenObject",value:function(t,e,i,r){return Object.assign({attribute:t,value:e,closed:!1,domain:window.hassUtil.computeDomain(this.entity),secondary:i,description:t},r)}},{key:"loadEntity",value:function(t){var e=this;return this.entity=t,this.hass.callApi("GET","config/customize/config/"+t.entity_id).then(function(t){e.localConfig=t.local,e.globalConfig=t.global,e.newAttributes=[]})}},{key:"saveEntity",value:function(){var t={};this.localAttributes.concat(this.globalAttributes,this.existingAttributes,this.newAttributes).forEach(function(e){if(!e.closed&&!e.secondary&&e.attribute&&e.value){var i="json"===e.type?JSON.parse(e.value):e.value;i&&(t[e.attribute]=i)}});var e=this.entity.entity_id;return this.hass.callApi("POST","config/customize/config/"+e,t)}},{key:"_computeSingleAttribute",value:function(t,e,i){var r=window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[t]||{type:window.hassAttributeUtil.UNKNOWN_TYPE};return this._initOpenObject(t,"json"===r.type?JSON.stringify(e):e,i,r)}},{key:"_computeAttributes",value:function(t,e,i){var r=this;return e.map(function(e){return r._computeSingleAttribute(e,t[e],i)})}},{key:"computeLocalAttributes",value:function(t){if(!t)return[];var e=Object.keys(t);return this._computeAttributes(t,e,!1)}},{key:"computeGlobalAttributes",value:function(t,e){if(!t||!e)return[];var i=Object.keys(t),r=Object.keys(e).filter(function(t){return!i.includes(t)});return this._computeAttributes(e,r,!0)}},{key:"computeExistingAttributes",value:function(t,e,i){if(!t||!e||!i)return[];var r=Object.keys(t),s=Object.keys(e),n=Object.keys(i.attributes).filter(function(t){return!r.includes(t)&&!s.includes(t)});return this._computeAttributes(i.attributes,n,!0)}},{key:"computeShowWarning",value:function(t,e){return!(!t||!e)&&Object.keys(t).some(function(i){return JSON.stringify(e[i])!==JSON.stringify(t[i])})}},{key:"filterFromAttributes",value:function(t){return function(e){return!t||t.every(function(t){return t.attribute!==e||t.closed})}}},{key:"getNewAttributesOptions",value:function(t,e,i,r){var s=this;return Object.keys(window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES).filter(function(t){var e=window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[t];return e&&(!e.domains||!s.entity||e.domains.includes(window.hassUtil.computeDomain(s.entity)))}).filter(this.filterFromAttributes(t)).filter(this.filterFromAttributes(e)).filter(this.filterFromAttributes(i)).filter(this.filterFromAttributes(r)).sort().concat("Other")}},{key:"selectedNewAttributeObserver",value:function(t){if(!(t<0)){var e=this.newAttributesOptions[t];if(t===this.newAttributesOptions.length-1){var i=this._initOpenObject("","",!1,{type:window.hassAttributeUtil.ADD_TYPE});return this.push("newAttributes",i),void(this.selectedNewAttribute=-1)}var r=this.localAttributes.findIndex(function(t){return t.attribute===e});if(r>=0)return this.set("localAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.globalAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("globalAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.existingAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("existingAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.newAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("newAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);var s=this._computeSingleAttribute(e,"",!1);this.push("newAttributes",s),this.selectedNewAttribute=-1}}},{key:"attributesObserver",value:function(){this.hasLocalAttributes=this.localAttributes&&this.localAttributes.some(function(t){return!t.closed}),this.hasGlobalAttributes=this.globalAttributes&&this.globalAttributes.some(function(t){return!t.closed}),this.hasExistingAttributes=this.existingAttributes&&this.existingAttributes.some(function(t){return!t.closed}),this.hasNewAttributes=this.newAttributes&&this.newAttributes.some(function(t){return!t.closed}),this.newAttributesOptions=this.getNewAttributesOptions(this.localAttributes,this.globalAttributes,this.existingAttributes,this.newAttributes)}}],[{key:"is",get:function(){return"ha-form-customize"}},{key:"properties",get:function(){return{hass:{type:Object},entity:Object,localAttributes:{type:Array,computed:"computeLocalAttributes(localConfig)"},hasLocalAttributes:Boolean,globalAttributes:{type:Array,computed:"computeGlobalAttributes(localConfig, globalConfig)"},hasGlobalAttributes:Boolean,existingAttributes:{type:Array,computed:"computeExistingAttributes(localConfig, globalConfig, entity)"},hasExistingAttributes:Boolean,newAttributes:{type:Array,value:[]},hasNewAttributes:Boolean,newAttributesOptions:Array,selectedNewAttribute:{type:Number,value:-1,observer:"selectedNewAttributeObserver"},localConfig:Object,globalConfig:Object}}},{key:"observers",get:function(){return["attributesObserver(localAttributes.*, globalAttributes.*, existingAttributes.*, newAttributes.*)"]}}]),e}();customElements.define(HaFormCustomize.is,HaFormCustomize);</script><dom-module id="ha-entity-config"><template><style include="iron-flex ha-style">paper-card{display:block;}.device-picker{@apply (--layout-horizontal);padding-bottom:24px;}.form-placeholder{@apply (--layout-vertical);@apply (--layout-center-center);height:96px;}[hidden]:{display:none;};.card-actions{@apply (--layout-horizontal);@apply (--layout-justified);}</style><paper-card><div class="card-content"><div class="device-picker"><paper-dropdown-menu label="[[label]]" class="flex" disabled="[[!entities.length]]"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="form-container"><template is="dom-if" if="[[computeShowPlaceholder(formState)]]"><div class="form-placeholder"><template is="dom-if" if="[[computeShowNoDevices(formState)]]">No entities found! :-(</template><template is="dom-if" if="[[computeShowSpinner(formState)]]"><paper-spinner active="" alt="[[formState]]"></paper-spinner>[[formState]]</template></div></template><div hidden$="[[!computeShowForm(formState)]]" id="form"></div></div></div><div class="card-actions"><paper-button on-tap="saveEntity" disabled="[[computeShowPlaceholder(formState)]]">SAVE</paper-button><template is="dom-if" if="[[allowDelete]]"><paper-button class="warning" on-tap="deleteEntity" disabled="[[computeShowPlaceholder(formState)]]">DELETE</paper-button></template></div></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},HaEntityConfig=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"connectedCallback",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this),this.formEl=document.createElement(this.config.component),this.formEl.hass=this.hass,this.$.form.appendChild(this.formEl),this.entityChanged(this.selectedEntity)}},{key:"computeSelectCaption",value:function(e){return this.config.computeSelectCaption?this.config.computeSelectCaption(e):window.hassUtil.computeStateName(e)}},{key:"computeShowNoDevices",value:function(e){return"no-devices"===e}},{key:"computeShowSpinner",value:function(e){return"loading"===e||"saving"===e}},{key:"computeShowPlaceholder",value:function(e){return"editing"!==e}},{key:"computeShowForm",value:function(e){return"editing"===e}},{key:"hassChanged",value:function(e){this.formEl&&(this.formEl.hass=e)}},{key:"entitiesChanged",value:function(e,t){if(0!==e.length)if(t){var n=t[this.selectedEntity].entity_id,i=e.findIndex(function(e){return e.entity_id===n});-1===i?this.selectedEntity=0:i!==this.selectedEntity&&(this.selectedEntity=i)}else this.selectedEntity=0;else this.formState="no-devices"}},{key:"entityChanged",value:function(e){if(this.entities&&this.formEl){var t=this.entities[e];if(t){this.formState="loading";var n=this;this.formEl.loadEntity(t).then(function(){n.formState="editing"})}}}},{key:"saveEntity",value:function(){this.formState="saving";var e=this;this.formEl.saveEntity().then(function(){e.formState="editing"})}}],[{key:"is",get:function(){return"ha-entity-config"}},{key:"properties",get:function(){return{hass:{type:Object,observer:"hassChanged"},label:{type:String,value:"Device"},entities:{type:Array,observer:"entitiesChanged"},allowDelete:{type:Boolean,value:!1},selectedEntity:{type:Number,value:-1,observer:"entityChanged"},formState:{type:String,value:"no-devices"},config:{type:Object}}}}]),t}();customElements.define(HaEntityConfig.is,HaEntityConfig);</script><dom-module id="ha-config-customize" assetpath="customize/"><template><style include="ha-style"></style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Customization</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section is-wide="[[isWide]]"><span slot="header">Customization</span> <span slot="introduction">Tweak per-entity attributes.<br>Added/edited customizations will take effect immediately. Removed customizations will take effect when the entity is updated.</span><ha-entity-config hass="[[hass]]" label="Entity" entities="[[entities]]" config="[[entityConfig]]"></ha-entity-config></ha-config-section></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCustomize=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeClasses",value:function(e){return e?"content":"content narrow"}},{key:"_backTapped",value:function(){history.back()}},{key:"computeEntities",value:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).sort(window.hassUtil.sortByName)}}],[{key:"is",get:function(){return"ha-config-customize"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,entities:{type:Array,computed:"computeEntities(hass)"},entityConfig:{type:Object,value:{component:"ha-form-customize",computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" ("+window.hassUtil.computeDomain(e)+")"}}}}}}]),t}();customElements.define(HaConfigCustomize.is,HaConfigCustomize);</script></div><dom-module id="ha-panel-config"><template><style>iron-pages{height:100%;}</style><app-route route="[[route]]" pattern="/:page" data="{{_routeData}}" tail="{{_routeTail}}"></app-route><iron-media-query query="(min-width: 1040px)" query-matches="{{wide}}"></iron-media-query><iron-media-query query="(min-width: 1296px)" query-matches="{{wideSidebar}}"></iron-media-query><iron-pages selected="[[_routeData.page]]" attr-for-selected="page-name" fallback-selection="not-found" selected-attribute="visible"><ha-config-core page-name="core" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-core><ha-config-cloud page-name="cloud" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]" account="[[account]]"></ha-config-cloud><ha-config-dashboard page-name="dashboard" hass="[[hass]]" is-wide="[[isWide]]" account="[[account]]" narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-config-dashboard><ha-config-automation page-name="automation" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-automation><ha-config-script page-name="script" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-script><ha-config-zwave page-name="zwave" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-zwave><ha-config-customize page-name="customize" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-customize><hass-error-screen page-name="not-found" error="Page not found." title="Configuration"></hass-error-screen></iron-pages></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_get=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},HaPanelConfig=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),window.hassUtil.isComponentLoaded(this.hass,"cloud")&&this.hass.callApi("get","cloud/account").then(function(t){e.account=t}),this.addEventListener("ha-account-refreshed",function(t){e.account=t.detail.account})}},{key:"computeIsWide",value:function(e,t,n){return e?t:n}},{key:"_routeChanged",value:function(e){""===e.path&&"/config"===e.prefix&&(history.replaceState(null,null,"/config/dashboard"),this.fire("location-changed"))}}],[{key:"is",get:function(){return"ha-panel-config"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,account:{type:Object,value:null},route:{type:Object,observer:"_routeChanged"},_routeData:Object,_routeTail:Object,wide:Boolean,wideSidebar:Boolean,isWide:{type:Boolean,computed:"computeIsWide(showMenu, wideSidebar, wide)"}}}}]),t}();customElements.define(HaPanelConfig.is,HaPanelConfig);</script></body></html>
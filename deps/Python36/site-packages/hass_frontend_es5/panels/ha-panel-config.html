<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="hass-error-screen" assetpath="../../src/layouts/"><template><style include="iron-flex ha-style">.placeholder{height:100%;}.layout{height:calc(100% - 64px);}paper-button{font-weight:bold;color:var(--primary-color);}</style><div class="placeholder"><app-toolbar><div main-title="">[[title]]</div></app-toolbar><div class="layout vertical center-center"><h3>[[error]]</h3><paper-button on-click="backTapped">go back</paper-button></div></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),HassErrorScreen=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"hass-error-screen"}},{key:"properties",get:function(){return{title:{type:String,value:"Home Assistant"},error:{type:String,value:"Oops! It looks like something went wrong."}}}}]),t}();customElements.define(HassErrorScreen.is,HassErrorScreen);</script><dom-module id="ha-config-section"><template><style include="iron-flex ha-style">.content{padding:28px 20px 0;max-width:1040px;margin:0 auto;}.header{@apply --paper-font-display1;opacity:var(--dark-primary-opacity);}.together{margin-top:32px;}.intro{@apply --paper-font-subhead;width:100%;max-width:400px;margin-right:40px;opacity:var(--dark-primary-opacity);}.panel{margin-top:-24px;}.panel ::slotted(*){margin-top:24px;display:block;}.narrow.content{max-width:640px;}.narrow .together{margin-top:20px;}.narrow .header{@apply --paper-font-headline;}.narrow .intro{font-size:14px;padding-bottom:20px;margin-right:0;max-width:500px;}</style><div class$="[[computeContentClasses(isWide)]]"><div class="header"><slot name="header"></slot></div><div class$="[[computeClasses(isWide)]]"><div class="intro"><slot name="introduction"></slot></div><div class="flex panel"><slot></slot></div></div></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigSection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeContentClasses",value:function(e){return e?"content ":"content narrow"}},{key:"computeClasses",value:function(e){return"together layout "+(e?"horizontal":"vertical narrow")}}],[{key:"is",get:function(){return"ha-config-section"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},isWide:{type:Boolean,value:!1}}}}]),t}();customElements.define(HaConfigSection.is,HaConfigSection);</script><dom-module id="ha-config-navigation" assetpath="dashboard/"><template><style include="iron-flex">paper-card{display:block;}paper-item{cursor:pointer;}</style><paper-card><template is="dom-repeat" items="[[pages]]"><template is="dom-if" if="[[_computeLoaded(hass, item)]]"><paper-item on-click="_navigate"><paper-item-body two-line="">[[_computeCaption(item, localize)]]<div secondary="">[[_computeDescription(item, localize)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></template></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),CORE_PAGES=["core","customize"],HaConfigNavigation=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(t,[{key:"_computeLoaded",value:function(e,t){return CORE_PAGES.includes(t)||window.hassUtil.isComponentLoaded(e,t)}},{key:"_computeCaption",value:function(e,t){return t("ui.panel.config."+e+".caption")}},{key:"_computeDescription",value:function(e,t){return t("ui.panel.config."+e+".description")}},{key:"_navigate",value:function(e){history.pushState(null,null,"/config/"+e.model.item),this.fire("location-changed")}}],[{key:"is",get:function(){return"ha-config-navigation"}},{key:"properties",get:function(){return{hass:{type:Object},pages:{type:Array,value:["core","customize","automation","script","zwave"]}}}}]),t}();customElements.define(HaConfigNavigation.is,HaConfigNavigation);</script><dom-module id="ha-config-cloud-menu" assetpath="dashboard/"><template><style include="iron-flex">paper-card{display:block;}paper-item{cursor:pointer;}</style><paper-card><paper-item on-click="_navigate"><paper-item-body two-line="">Home Assistant Cloud<template is="dom-if" if="[[account]]"><div secondary="">Logged in as [[account.email]]</div></template><template is="dom-if" if="[[!account]]"><div secondary="">Not logged in</div></template></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCloudMenu=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"_navigate",value:function(){this.navigate("/config/cloud")}}],[{key:"is",get:function(){return"ha-config-cloud-menu"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,account:Object}}}]),t}();customElements.define(HaConfigCloudMenu.is,HaConfigCloudMenu);</script><dom-module id="ha-config-entries-menu" assetpath="dashboard/"><template><style include="iron-flex">paper-card{display:block;}paper-item{cursor:pointer;}</style><paper-card><paper-item on-click="_navigate"><paper-item-body two-line="">Integrations<div secondary="">EXPERIMENTAL â€“ Manage connected devices and services</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaConfigEntriesMenu=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"_navigate",value:function(){this.navigate("/config/integrations")}}],[{key:"is",get:function(){return"ha-config-entries-menu"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,account:Object}}}]),t}();customElements.define(HaConfigEntriesMenu.is,HaConfigEntriesMenu);</script><dom-module id="ha-config-dashboard" assetpath="dashboard/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">[[localize('panel.configuration')]]</div></app-toolbar></app-header><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">[[localize('ui.panel.config.header')]]</span> <span slot="introduction">[[localize('ui.panel.config.introduction')]]</span><template is="dom-if" if="[[computeIsLoaded(hass, &quot;cloud&quot;)]]"><ha-config-cloud-menu hass="[[hass]]" account="[[account]]"></ha-config-cloud-menu></template><template is="dom-if" if="[[computeIsLoaded(hass, &quot;config.config_entries&quot;)]]"><ha-config-entries-menu hass="[[hass]]"></ha-config-entries-menu></template><ha-config-navigation hass="[[hass]]"></ha-config-navigation></ha-config-section></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigDashboard=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,[{key:"computeIsLoaded",value:function(e,t){return window.hassUtil.isComponentLoaded(e,t)}}],[{key:"is",get:function(){return"ha-config-dashboard"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,account:Object,narrow:Boolean,showMenu:Boolean}}}]),t}();customElements.define(HaConfigDashboard.is,HaConfigDashboard);</script><dom-module id="ha-config-section-core" assetpath="core/"><template><style include="iron-flex ha-style">.validate-container{@apply --layout-vertical;@apply --layout-center-center;height:140px;}.validate-result{color:var(--google-green-500);font-weight:500;margin-bottom:1em;}.config-invalid{margin:1em 0;}.config-invalid .text{color:var(--google-red-500);font-weight:500;}.config-invalid paper-button{float:right;}.validate-log{white-space:pre-wrap;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">[[localize('ui.panel.config.core.section.core.header')]]</span> <span slot="introduction">[[localize('ui.panel.config.core.section.core.introduction')]]</span><paper-card heading="[[localize('ui.panel.config.core.section.core.validation.heading')]]"><div class="card-content">[[localize('ui.panel.config.core.section.core.validation.introduction')]]<template is="dom-if" if="[[!validateLog]]"><div class="validate-container"><template is="dom-if" if="[[!validating]]"><template is="dom-if" if="[[isValid]]"><div class="validate-result" id="result">[[localize('ui.panel.config.core.section.core.validation.valid')]]</div></template><paper-button raised="" on-click="validateConfig">[[localize('ui.panel.config.core.section.core.validation.check_config')]]</paper-button></template><template is="dom-if" if="[[validating]]"><paper-spinner active=""></paper-spinner></template></div></template><template is="dom-if" if="[[validateLog]]"><div class="config-invalid"><span class="text">[[localize('ui.panel.config.core.section.core.validation.invalid')]]</span><paper-button raised="" on-click="validateConfig">[[localize('ui.panel.config.core.section.core.validation.check_config')]]</paper-button></div><div id="configLog" class="validate-log">[[validateLog]]</div></template></div></paper-card><paper-card heading="[[localize('ui.panel.config.core.section.core.reloading.heading')]]"><div class="card-content">[[localize('ui.panel.config.core.section.core.reloading.introduction')]]</div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="homeassistant" service="reload_core_config">[[localize('ui.panel.config.core.section.core.reloading.core')]]</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="group" service="reload" hidden$="[[!groupLoaded(hass)]]">[[localize('ui.panel.config.core.section.core.reloading.group')]]</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="automation" service="reload" hidden$="[[!automationLoaded(hass)]]">[[localize('ui.panel.config.core.section.core.reloading.automation')]]</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="script" service="reload" hidden$="[[!scriptLoaded(hass)]]">[[localize('ui.panel.config.core.section.core.reloading.script')]]</ha-call-service-button></div></paper-card><paper-card heading="[[localize('ui.panel.config.core.section.core.server_management.heading')]]"><div class="card-content">[[localize('ui.panel.config.core.section.core.server_management.introduction')]]</div><div class="card-actions warning"><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="restart">[[localize('ui.panel.config.core.section.core.server_management.restart')]]</ha-call-service-button><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="stop">[[localize('ui.panel.config.core.section.core.server_management.stop')]]</ha-call-service-button></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigSectionCore=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,[{key:"groupLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"group")}},{key:"automationLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"automation")}},{key:"scriptLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"script")}},{key:"validateConfig",value:function(){var e=this;this.validating=!0,this.validateLog="",this.isValid=null,this.hass.callApi("POST","config/core/check_config").then(function(t){e.validating=!1,e.isValid="valid"===t.result,e.isValid||(e.validateLog=t.errors)})}}],[{key:"is",get:function(){return"ha-config-section-core"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean,value:!1},validating:{type:Boolean,value:!1},isValid:{type:Boolean,value:null},validateLog:{type:String,value:""}}}}]),t}();customElements.define(HaConfigSectionCore.is,HaConfigSectionCore);</script><dom-module id="ha-config-section-hassbian" assetpath="core/"><template><style include="iron-flex ha-style">.header{font-size:16px;margin-bottom:1em;}.header .status{font-size:14px;float:right;}.card-actions paper-button{color:var(--default-primary-color);font-weight:500;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">[[localize('ui.panel.config.core.section.hassbian.header')]]</span> <span slot="introduction">[[localize('ui.panel.config.core.section.hassbian.introduction')]]</span><template is="dom-if" if="[[suiteStatus]]"><template is="dom-repeat" items="[[computeSuiteKeys(suiteStatus)]]" as="suiteKey"><paper-card><div class="card-content"><div class="header">[[computeTitle(suiteKey)]] <span class="status">[[computeSuiteStatus(suiteStatus, suiteKey)]]</span></div>[[computeSuiteDescription(suiteStatus, suiteKey)]]</div><div class="card-actions"><paper-button on-click="suiteMoreInfoTapped">[[localize('ui.panel.config.core.section.hassbian.learn_more')]]</paper-button><template is="dom-if" if="[[computeShowInstall(suiteStatus, suiteKey)]]"><paper-button on-click="suiteActionTapped">[[localize('ui.panel.config.core.section.hassbian.install')]]</paper-button></template></div></paper-card></template></template></ha-config-section></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},HaConfigSectionHassbian=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(e,[{key:"updateStatus",value:function(){this.hass.callApi("GET","config/hassbian/suites").then(function(t){var e=this;this.suiteStatus=t;for(var n=!1,i=Object.keys(t),o=0;o<i.length;o++)if("installing"===t[i[o]].state){n=!0;break}n&&setTimeout(function(){return e.updateStatus()},5e3)}.bind(this))}},{key:"connectedCallback",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),this.updateStatus=this.updateStatus.bind(this),this.updateStatus()}},{key:"computeSuiteKeys",value:function(t){return Object.keys(t).sort(function(e,n){var i="installing"===t[e].state,o="installing"===t[n].state;if(i&&o);else{if(i)return-1;if(o)return 1}return e<n?-1:e>n?1:0})}},{key:"computeSuiteDescription",value:function(t,e){return t[e].description}},{key:"computeTitle",value:function(t){return t.substr(0,1).toUpperCase()+t.substr(1)}},{key:"computeSuiteStatus",value:function(t,e){var n=t[e].state.replace(/_/," ");return n.substr(0,1).toUpperCase()+n.substr(1)}},{key:"computeShowStatus",value:function(t,e){var n=t[e].state;return"installing"!==n&&"not_installed"!==n}},{key:"computeShowInstall",value:function(t,e){return"not_installed"===t[e].state}},{key:"suiteMoreInfoTapped",value:function(){}},{key:"suiteActionTapped",value:function(){this.hass.callApi("POST","config/hassbian/suites/openzwave/install").then(this.updateStatus)}}],[{key:"is",get:function(){return"ha-config-section-hassbian"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},suiteStatus:{type:Object,value:null}}}}]),e}();customElements.define(HaConfigSectionHassbian.is,HaConfigSectionHassbian);</script><dom-module id="iron-label" assetpath="../../bower_components/iron-label/"><script>Polymer.IronLabel=Polymer({is:"iron-label",listeners:{tap:"_tapHandler"},properties:{for:{type:String,value:"",reflectToAttribute:!0,observer:"_forChanged"},_forElement:Object},attached:function(){this._forChanged()},ready:function(){this._generateLabelId()},_generateLabelId:function(){if(!this.id){var e="iron-label-"+Polymer.IronLabel._labelNumber++;Polymer.dom(this).setAttribute("id",e)}},_findTarget:function(){if(this.for){var e=Polymer.dom(this).getOwnerRoot();return Polymer.dom(e).querySelector("#"+this.for)}var t=Polymer.dom(this).querySelector("[iron-label-target]");return t||(t=Polymer.dom(this).firstElementChild),t},_tapHandler:function(e){if(this._forElement){Polymer.dom(e).localTarget!==this._forElement&&(this._forElement.focus(),this._forElement.click())}},_applyLabelledBy:function(){this._forElement&&Polymer.dom(this._forElement).setAttribute("aria-labelledby",this.id)},_forChanged:function(){this._forElement&&Polymer.dom(this._forElement).removeAttribute("aria-labelledby"),this._forElement=this._findTarget(),this._applyLabelledBy()}}),Polymer.IronLabel._labelNumber=0;</script></dom-module><dom-module id="ha-push-notifications-toggle" assetpath="../../src/components/"><template><paper-toggle-button hidden$="[[!pushSupported]]" disabled="[[loading]]" checked="{{pushChecked}}"></paper-toggle-button></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_get=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(o)},HaPushNotificationsToggle=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this),this.pushSupported&&navigator.serviceWorker.ready.then(function(t){t.pushManager.getSubscription().then(function(t){e.loading=!1,e.pushChecked=!!t})},function(){e._setPushSupported(!1)})}},{key:"handlePushChange",value:function(e){this.pushSupported&&(e?this.subscribePushNotifications():this.unsubscribePushNotifications())}},{key:"subscribePushNotifications",value:function(){var e=this;navigator.serviceWorker.ready.then(function(e){return e.pushManager.subscribe({userVisibleOnly:!0})}).then(function(t){var n=void 0;return n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?"firefox":"chrome",e.hass.callApi("POST","notify.html5",{subscription:t,browser:n})},function(t){var n=void 0;n=t.message&&-1!==t.message.indexOf("gcm_sender_id")?"Please setup the notify.html5 platform.":"Notification registration failed.",console.error(t),e.fire("hass-notification",{message:n}),e.pushChecked=!1})}},{key:"unsubscribePushNotifications",value:function(){var e=this;navigator.serviceWorker.ready.then(function(e){return e.pushManager.getSubscription()}).then(function(t){return t?e.hass.callApi("DELETE","notify.html5",{subscription:t}).then(function(){t.unsubscribe()}):Promise.resolve()}).catch(function(t){console.error("Error in unsub push",t),e.fire("hass-notification",{message:"Failed unsubscribing for push notifications."})})}}],[{key:"is",get:function(){return"ha-push-notifications-toggle"}},{key:"properties",get:function(){return{hass:{type:Object,value:null},pushSupported:{type:Boolean,readOnly:!0,notify:!0,value:"serviceWorker"in navigator&&"PushManager"in window&&("https:"===document.location.protocol||"localhost"===document.location.hostname||"127.0.0.1"===document.location.hostname)},pushChecked:{type:Boolean,value:"Notification"in window&&"granted"===Notification.permission,observer:"handlePushChange"},loading:{type:Boolean,value:!0}}}}]),t}();customElements.define(HaPushNotificationsToggle.is,HaPushNotificationsToggle);</script><dom-module id="ha-config-section-push-notifications" assetpath="core/"><template><style include="iron-flex iron-flex-alignment iron-positioning">ha-push-notifications-toggle{margin-left:16px;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">[[localize('ui.panel.config.core.section.push_notifications.header')]]</span> <span slot="introduction">[[localize('ui.panel.config.core.section.push_notifications.introduction')]]</span><paper-card><div class="card-content"><iron-label class="horizontal layout">[[localize('ui.panel.config.core.section.push_notifications.push_notifications')]]<ha-push-notifications-toggle hass="[[hass]]" push-supported="{{pushSupported}}"></ha-push-notifications-toggle></iron-label></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigSectionPushNotifications=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,null,[{key:"is",get:function(){return"ha-config-section-push-notifications"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,pushSupported:{type:Boolean,notify:!0}}}}]),t}();customElements.define(HaConfigSectionPushNotifications.is,HaConfigSectionPushNotifications);</script><dom-module id="ha-config-section-translation" assetpath="core/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">[[localize('ui.panel.config.core.section.translation.header')]]</span> <span slot="introduction">[[localize('ui.panel.config.core.section.translation.introduction')]]</span><paper-card><div class="card-content"><paper-dropdown-menu label="[[localize('ui.panel.config.core.section.translation.language')]]" dynamic-align=""><paper-listbox slot="dropdown-content" on-selected-item-changed="handleLanguageSelect" attr-for-selected="language-tag" selected="[[language]]"><template is="dom-repeat" items="[[languages]]"><paper-item language-tag="[[item.tag]]">[[item.nativeName]]</paper-item></template></paper-listbox>&gt;</paper-dropdown-menu></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),HaConfigSectionTranslation=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(t,[{key:"computeLanguages",value:function(e){return e&&e.translationMetadata?Object.keys(e.translationMetadata.translations).map(function(t){return{tag:t,nativeName:e.translationMetadata.translations[t].nativeName}}):[]}},{key:"handleLanguageSelect",value:function(e){e.detail.value&&e.detail.value.languageTag!==this.language&&this.fire("hass-language-select",{language:e.detail.value.languageTag})}}],[{key:"is",get:function(){return"ha-config-section-translation"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},languages:{type:Array,computed:"computeLanguages(hass)"}}}}]),t}();customElements.define(HaConfigSectionTranslation.is,HaConfigSectionTranslation);</script><dom-module id="ha-config-section-themes" assetpath="core/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">[[localize('ui.panel.config.core.section.themes.header')]]</span> <span slot="introduction">[[localize('ui.panel.config.core.section.themes.introduction')]]</span><paper-card><div class="card-content"><paper-dropdown-menu label="[[localize('ui.panel.config.core.section.themes.header')]]" dynamic-align=""><paper-listbox slot="dropdown-content" selected="{{selectedTheme}}"><template is="dom-repeat" items="[[themes]]" as="theme"><paper-item>[[theme]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_get=function e(t,n,s){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,s)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(s)},HaConfigSectionThemes=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(t,[{key:"ready",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.hass.selectedTheme&&this.themes.indexOf(this.hass.selectedTheme)>0?this.selectedTheme=this.themes.indexOf(this.hass.selectedTheme):this.hass.selectedTheme||(this.selectedTheme=0)}},{key:"computeThemes",value:function(e){return e?["Backend-selected","default"].concat(Object.keys(e.themes.themes).sort()):[]}},{key:"selectionChanged",value:function(e,t){t>0&&t<this.themes.length?e.selectedTheme!==this.themes[t]&&this.fire("settheme",this.themes[t]):0===t&&""!==e.selectedTheme&&this.fire("settheme","")}}],[{key:"is",get:function(){return"ha-config-section-themes"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean},themes:{type:Array,computed:"computeThemes(hass)"},selectedTheme:{type:Number}}}},{key:"observers",get:function(){return["selectionChanged(hass, selectedTheme)"]}}]),t}();customElements.define(HaConfigSectionThemes.is,HaConfigSectionThemes);</script><dom-module id="ha-config-core" assetpath="core/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}.border{margin:32px auto 0;border-bottom:1px solid rgba(0, 0, 0, 0.12);max-width:1040px;}.narrow .border{max-width:640px;}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="_backTapped"></paper-icon-button><div main-title="">[[localize('ui.panel.config.core.caption')]]</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section-core is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-core><template is="dom-if" if="[[pushSupported]]"><div class="border"></div><ha-config-section-push-notifications is-wide="[[isWide]]" hass="[[hass]]" push-supported="{{pushSupported}}"></ha-config-section-push-notifications></template><template is="dom-if" if="[[computeIsTranslationLoaded(hass)]]"><div class="border"></div><ha-config-section-translation is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-translation></template><template is="dom-if" if="[[computeIsThemesLoaded(hass)]]"><div class="border"></div><ha-config-section-themes is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-themes></template><template is="dom-if" if="[[computeIsHassbianLoaded(hass)]]"><div class="border"></div><ha-config-section-hassbian is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-hassbian></template></div></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCore=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,[{key:"computeClasses",value:function(e){return e?"content":"content narrow"}},{key:"computeIsHassbianLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"config.hassbian")}},{key:"computeIsZwaveLoaded",value:function(e){return window.hassUtil.isComponentLoaded(e,"config.zwave")}},{key:"computeIsTranslationLoaded",value:function(e){return e.translationMetadata&&Object.keys(e.translationMetadata.translations).length}},{key:"computeIsThemesLoaded",value:function(e){return e.themes&&e.themes.themes&&Object.keys(e.themes.themes).length}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-config-core"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,pushSupported:{type:Boolean,value:!0}}}}]),t}();customElements.define(HaConfigCore.is,HaConfigCore);</script><dom-module id="hass-subpage" assetpath="../../src/layouts/"><template><style include="ha-style"></style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="_backTapped"></paper-icon-button><div main-title="">[[title]]</div></app-toolbar></app-header><slot></slot></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HassSubpage=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"hass-subpage"}},{key:"properties",get:function(){return{title:String}}}]),t}();customElements.define(HassSubpage.is,HassSubpage);</script><dom-module id="ha-config-cloud-login" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}[slot=introduction] a{color:var(--primary-color);}paper-card{display:block;}paper-item{cursor:pointer;}paper-card:last-child{margin-top:24px;}h1{@apply --paper-font-headline;margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}[hidden]{display:none;}.flash-msg{padding-right:44px;}.flash-msg paper-icon-button{position:absolute;top:8px;right:8px;color:var(--secondary-text-color);}</style><hass-subpage title="Cloud Login"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Home Assistant Cloud</span> <span slot="introduction">The Home Assistant Cloud allows your local Home Assistant instance to connect with cloud-only services like Amazon Alexa.<p><a href="https://home-assistant.io/components/cloud/" target="_blank">Learn more</a></p></span><paper-card hidden$="[[!flashMessage]]"><div class="card-content flash-msg">[[flashMessage]]<paper-icon-button icon="mdi:close" on-click="_dismissFlash">Dismiss</paper-icon-button><paper-ripple id="flashRipple" noink=""></paper-ripple></div></paper-card><paper-card><div class="card-content"><h1>Sign In</h1><div class="error" hidden$="[[!_error]]">[[_error]]</div><paper-input label="Email" id="email" type="email" value="{{email}}" on-keydown="_keyDown" error-message="Invalid email"></paper-input><paper-input id="password" label="Password" value="{{_password}}" type="password" on-keydown="_keyDown" error-message="Passwords are at least 8 characters"></paper-input></div><div class="card-actions"><ha-progress-button on-click="_handleLogin" progress="[[_requestInProgress]]">Sign in</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleForgotPassword">forgot password?</button></div></paper-card><paper-card><paper-item on-click="_handleRegister"><paper-item-body two-line="">Create Account<div secondary="">Get up and running quickly.</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></paper-card></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),_get=function e(t,o,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,o);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,n)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(n)},HaConfigCloudLogin=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this),this.flashMessage&&requestAnimationFrame(function(){return requestAnimationFrame(function(){return e.$.flashRipple.simulatedRipple()})})}},{key:"_inputChanged",value:function(){this.$.email.invalid=!1,this.$.password.invalid=!1,this._error=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._handleLogin(),e.preventDefault())}},{key:"_handleLogin",value:function(){var e=this,t=!1;this.email&&this.email.includes("@")||(this.$.email.invalid=!0,this.$.email.focus(),t=!0),this._password.length<8&&(this.$.password.invalid=!0,t||(t=!0,this.$.password.focus())),t||(this._requestInProgress=!0,this.hass.callApi("post","cloud/login",{email:this.email,password:this._password}).then(function(t){e.fire("ha-account-refreshed",{account:t}),e.setProperties({email:"",_password:""})},function(t){e._password="";var o=t&&t.body&&t.body.code;if("PasswordChangeRequired"===o)return alert("You need to change your password before logging in."),void e.navigate("/config/cloud/forgot-password");var n={_requestInProgress:!1,_error:t&&t.body&&t.body.message?t.body.message:"Unknown error"};"UserNotConfirmed"===o&&(n._error="You need to confirm your email before logging in."),e.setProperties(n),e.$.email.focus()}))}},{key:"_handleRegister",value:function(){this.flashMessage="",this.navigate("/config/cloud/register")}},{key:"_handleForgotPassword",value:function(){this.flashMessage="",this.navigate("/config/cloud/forgot-password")}},{key:"_dismissFlash",value:function(){var e=this;setTimeout(function(){e.flashMessage=""},200)}}],[{key:"is",get:function(){return"ha-config-cloud-login"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,email:{type:String,notify:!0},_password:{type:String,value:""},_requestInProgress:{type:Boolean,value:!1},flashMessage:{type:String,notify:!0},_error:String}}},{key:"observers",get:function(){return["_inputChanged(email, _password)"]}}]),t}();customElements.define(HaConfigCloudLogin.is,HaConfigCloudLogin);</script><dom-module id="ha-config-cloud-register" assetpath="cloud/"><template><style include="iron-flex ha-style">a{color:var(--primary-color);}paper-card{display:block;}paper-item{cursor:pointer;}paper-card:last-child{margin-top:24px;}h1{@apply --paper-font-headline;margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}[hidden]{display:none;}</style><hass-subpage title="Register Account"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Register with the Home Assistant Cloud</span> <span slot="introduction">Register today to easily connect with the Home Assistant Cloud. This will allow you to unlock great new services and functionality, like Amazon Alexa integration.<p>By registering an account you agree to the following terms and conditions.</p><ul><li><a href="https://home-assistant.io/tos/" target="_blank">Terms and Conditions</a></li><li><a href="https://home-assistant.io/privacy/" target="_blank">Privacy Policy</a></li></ul><p></p></span><paper-card><div class="card-content"><div class="header"><h1>Register</h1><div class="error" hidden$="[[!_error]]">[[_error]]</div></div><paper-input autofocus="" id="email" label="Email address" type="email" value="{{email}}" on-keydown="_keyDown" error-message="Invalid email"></paper-input><paper-input id="password" label="Password" value="{{_password}}" type="password" on-keydown="_keyDown" error-message="Your password needs to be at least 8 characters"></paper-input></div><div class="card-actions"><ha-progress-button on-click="_handleRegister" progress="[[_requestInProgress]]">Create Account</ha-progress-button><button class="link" hidden="[[_requestInProgress]]" on-click="_handleResendVerifyEmail">Resend confirmation email</button></div></paper-card></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),HaConfigCloudRegister=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"_inputChanged",value:function(){this._error="",this.$.email.invalid=!1,this.$.password.invalid=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._handleRegister(),e.preventDefault())}},{key:"_handleRegister",value:function(){var e=this,t=!1;this.email&&this.email.includes("@")||(this.$.email.invalid=!0,this.$.email.focus(),t=!0),this._password.length<8&&(this.$.password.invalid=!0,t||(t=!0,this.$.password.focus())),t||(this._requestInProgress=!0,this.hass.callApi("post","cloud/register",{email:this.email,password:this._password}).then(function(){return e._verificationEmailSent()},function(t){e._password="",e.setProperties({_requestInProgress:!1,_error:t&&t.body&&t.body.message?t.body.message:"Unknown error"})}))}},{key:"_handleResendVerifyEmail",value:function(){var e=this;this.email?this.hass.callApi("post","cloud/resend_confirm",{email:this.email}).then(function(){return e._verificationEmailSent()},function(t){return e.setProperties({_error:t&&t.body&&t.body.message?t.body.message:"Unknown error"})}):this.$.email.invalid=!0}},{key:"_verificationEmailSent",value:function(){this.setProperties({_requestInProgress:!1,_password:""}),this.fire("cloud-done",{flashMessage:"Account created! Check your email for instructions on how to activate your account."})}}],[{key:"is",get:function(){return"ha-config-cloud-register"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,email:{type:String,notify:!0},_requestInProgress:{type:Boolean,value:!1},_password:{type:String,value:""},_error:{type:String,value:""}}}},{key:"observers",get:function(){return["_inputChanged(email, _password)"]}}]),t}();customElements.define(HaConfigCloudRegister.is,HaConfigCloudRegister);</script><dom-module id="ha-config-cloud-forgot-password" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;max-width:600px;margin:0 auto;margin-top:24px;}h1{@apply --paper-font-headline;margin:0;}.error{color:var(--google-red-500);}.card-actions{display:flex;justify-content:space-between;align-items:center;}.card-actions a{color:var(--primary-text-color);}[hidden]{display:none;}</style><hass-subpage title="Forgot Password"><div class="content"><paper-card><div class="card-content"><h1>Forgot your password?</h1><p>Enter your email address and we will send you a link to reset your password.</p><div class="error" hidden$="[[!_error]]">[[_error]]</div><paper-input autofocus="" id="email" label="E-mail" value="{{email}}" type="email" on-keydown="_keyDown" error-message="Invalid email"></paper-input></div><div class="card-actions"><ha-progress-button on-click="_handleEmailPasswordReset" progress="[[_requestInProgress]]">Send reset email</ha-progress-button></div></paper-card></div></hass-subpage></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),HaConfigCloudForgotPassword=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"_emailChanged",value:function(){this._error="",this.$.email.invalid=!1}},{key:"_keyDown",value:function(e){13===e.keyCode&&(this._handleEmailPasswordReset(),e.preventDefault())}},{key:"_handleEmailPasswordReset",value:function(){var e=this;this.email&&this.email.includes("@")||(this.$.email.invalid=!0),this.$.email.invalid||(this._requestInProgress=!0,this.hass.callApi("post","cloud/forgot_password",{email:this.email}).then(function(){e._requestInProgress=!1,e.fire("cloud-done",{flashMessage:"Check your email for instructions on how to reset your password."})},function(t){return e.setProperties({_requestInProgress:!1,_error:t&&t.body&&t.body.message?t.body.message:"Unknown error"})}))}}],[{key:"is",get:function(){return"ha-config-cloud-forgot-password"}},{key:"properties",get:function(){return{hass:Object,email:{type:String,notify:!0,observer:"_emailChanged"},_requestInProgress:{type:Boolean,value:!1},_error:{type:String,value:""}}}}]),t}();customElements.define(HaConfigCloudForgotPassword.is,HaConfigCloudForgotPassword);</script><dom-module id="ha-config-cloud-account" assetpath="cloud/"><template><style include="iron-flex ha-style">.content{padding-bottom:24px;}paper-card{display:block;}.account-row{display:flex;padding:0 16px;}paper-button{align-self:center;}.soon{font-style:italic;margin-top:24px;text-align:center;}.nowrap{white-space:nowrap;}.wrap{white-space:normal;}.status{text-transform:capitalize;padding:16px;}paper-button{color:var(--primary-color);font-weight:500;}</style><hass-subpage title="Cloud Account"><div class="content"><ha-config-section is-wide="[[isWide]]"><span slot="header">Home Assistant Cloud</span> <span slot="introduction">Thank you for supporting Home Assistant. It's because of people like you that we are able to run this project and make a great home automation experience for everyone. Thank you!</span><paper-card heading="Account"><div class="account-row"><paper-item-body two-line="">[[account.email]]<div secondary="" class="wrap"><span class="nowrap">Subscription expires on </span><span class="nowrap">[[_formatExpiration(account.sub_exp)]]</span></div></paper-item-body><paper-button on-click="handleLogout">Sign out</paper-button></div><div class="account-row"><paper-item-body>Cloud connection status</paper-item-body><div class="status">[[account.cloud]]</div></div></paper-card></ha-config-section><ha-config-section is-wide="[[isWide]]"><span slot="header">Integrations</span> <span slot="introduction">Integrations for Home Assistant Cloud allow you to connect with services in the cloud without having to expose your Home Assistant instance publicy on the internet.</span><paper-card heading="Alexa"><div class="card-content">With the Alexa integration for Home Assistant Cloud you'll be able to control all your Home Assistant devices via any Alexa-enabled device.<p><em>This integration requires an Alexa-enabled device like the Amazon Echo.</em></p></div><div class="card-actions"><a href="https://alexa.amazon.com/spa/index.html#skills/dp/B0772J1QKB/?ref=skill_dsk_skb_sr_2" target="_blank"><paper-button>Home Assistant Alexa skill</paper-button></a><a href="https://home-assistant.io/components/cloud.alexa/" target="_blank"><paper-button>Documentation</paper-button></a></div></paper-card></ha-config-section></div></hass-subpage></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),HaConfigCloudAccount=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(e,[{key:"handleLogout",value:function(){var t=this;this.hass.callApi("post","cloud/logout").then(function(){return t.fire("ha-account-refreshed",{account:null})})}},{key:"_formatExpiration",value:function(t){return window.hassUtil.formatDateTime(new Date(t))}},{key:"_accountChanged",value:function(t){var e=this;t&&"connecting"===t.cloud?this._accountUpdater||setTimeout(function(){e._accountUpdater=null,e.hass.callApi("get","cloud/account").then(function(t){return e.fire("ha-account-refreshed",{account:t})})},5e3):this._accountUpdater&&(clearTimeout(this._accountUpdater),this._accountUpdater=null)}}],[{key:"is",get:function(){return"ha-config-cloud-account"}},{key:"properties",get:function(){return{hass:Object,account:{type:Object,observer:"_accountChanged"}}}}]),e}();customElements.define(HaConfigCloudAccount.is,HaConfigCloudAccount);</script><dom-module id="ha-config-cloud" assetpath="cloud/"><template><app-route route="[[route]]" pattern="/cloud/:page" data="{{_routeData}}" tail="{{_routeTail}}"></app-route><template is="dom-if" if="[[_equals(_routeData.page, &quot;account&quot;)]]" restamp=""><ha-config-cloud-account hass="[[hass]]" account="[[account]]" is-wide="[[isWide]]"></ha-config-cloud-account></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;login&quot;)]]" restamp=""><ha-config-cloud-login page-name="login" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}" flash-message="{{_flashMessage}}"></ha-config-cloud-login></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;register&quot;)]]" restamp=""><ha-config-cloud-register page-name="register" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-register></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;forgot-password&quot;)]]" restamp=""><ha-config-cloud-forgot-password page-name="forgot-password" hass="[[hass]]" is-wide="[[isWide]]" email="{{_loginEmail}}"></ha-config-cloud-forgot-password></template></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),_get=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,o,n)}if("value"in r)return r.value;var c=r.get;if(void 0!==c)return c.call(n)},LOGGED_IN_URLS=["/cloud/account"],NOT_LOGGED_IN_URLS=["/cloud/login","/cloud/register","/cloud/forgot-password"],HaConfigCloud=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("cloud-done",function(t){e._flashMessage=t.detail.flashMessage,e.navigate("/config/cloud/login")})}},{key:"_checkRoute",value:function(e){var t=this;e&&"/cloud"===e.path.substr(0,6)&&(this._debouncer=Polymer.Debouncer.debounce(this._debouncer,Polymer.Async.timeOut.after(0),function(){t.account||NOT_LOGGED_IN_URLS.includes(e.path)?t.account&&!LOGGED_IN_URLS.includes(e.path)&&t.navigate("/config/cloud/account",!0):t.navigate("/config/cloud/login",!0)}))}},{key:"_equals",value:function(e,t){return e===t}}],[{key:"is",get:function(){return"ha-config-cloud"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,loadingAccount:{type:Boolean,value:!1},account:{type:Object},_flashMessage:{type:String,value:""},route:Object,_routeData:Object,_routeTail:Object,_loginEmail:String}}},{key:"observers",get:function(){return["_checkRoute(route, account)"]}}]),t}();customElements.define(HaConfigCloud.is,HaConfigCloud);</script><dom-module id="paper-fab" assetpath="../../bower_components/paper-fab/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-vertical;@apply --layout-center-center;background:var(--paper-fab-background, var(--accent-color));border-radius:50%;box-sizing:border-box;color:var(--text-primary-color);cursor:pointer;height:56px;min-width:0;outline:none;padding:16px;position:relative;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;width:56px;z-index:0;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;@apply --paper-fab;}[hidden]{display:none !important;}:host([mini]){width:40px;height:40px;padding:8px;@apply --paper-fab-mini;}:host([disabled]){color:var(--paper-fab-disabled-text, var(--paper-grey-500));background:var(--paper-fab-disabled-background, var(--paper-grey-300));@apply --paper-fab-disabled;}iron-icon{@apply --paper-fab-iron-icon;}span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;@apply --paper-fab-label;}:host(.keyboard-focus){background:var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon><span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span></template><script>Polymer({is:"paper-fab",behaviors:[Polymer.PaperButtonBehavior],properties:{src:{type:String,value:""},icon:{type:String,value:""},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:"_labelChanged"}},_labelChanged:function(){this.setAttribute("aria-label",this.label)},_computeIsIconFab:function(e,t){return e.length>0||t.length>0}});</script></dom-module><dom-module id="ha-automation-picker" assetpath="automation/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}ha-markdown p{margin:0px;}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="_backTapped"></paper-icon-button><div main-title="">[[localize('ui.panel.config.automation.caption')]]</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">[[localize('ui.panel.config.automation.picker.header')]]</div><div slot="introduction"><ha-markdown content="[[localize('ui.panel.config.automation.picker.introduction')]]"></ha-markdown></div><paper-card heading="[[localize('ui.panel.config.automation.picker.pick_automation')]]"><template is="dom-if" if="[[!automations.length]]"><div class="card-content"><p>[[localize('ui.panel.config.automation.picker.no_automations')]]</p></div></template><template is="dom-repeat" items="[[automations]]" as="automation"><paper-item><paper-item-body two-line="" on-click="automationTapped"><div>[[computeName(automation)]]</div><div secondary="">[[computeDescription(automation)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab slot="fab" is-wide$="[[isWide]]" icon="mdi:plus" title="[[localize('ui.panel.config.automation.picker.add_automation')]]" on-click="addAutomation"></paper-fab></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaAutomationPicker=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(t,[{key:"automationTapped",value:function(e){history.pushState(null,null,"/config/automation/edit/"+this.automations[e.model.index].attributes.id),this.fire("location-changed")}},{key:"addAutomation",value:function(){history.pushState(null,null,"/config/automation/new"),this.fire("location-changed")}},{key:"computeName",value:function(e){return window.hassUtil.computeStateName(e)}},{key:"computeDescription",value:function(e){return""}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-automation-picker"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},automations:{type:Array},isWide:{type:Boolean}}}}]),t}();customElements.define(HaAutomationPicker.is,HaAutomationPicker);</script><dom-module id="paper-radio-button" assetpath="../../bower_components/paper-radio-button/"><template strip-whitespace=""><style>:host{display:inline-block;line-height:0;white-space:nowrap;cursor:pointer;@apply --paper-font-common-base;--calculated-paper-radio-button-size:var(--paper-radio-button-size, 16px);--calculated-paper-radio-button-ink-size:var(--paper-radio-button-ink-size, -1px);}:host(:focus){outline:none;}#radioContainer{@apply --layout-inline;@apply --layout-center-center;position:relative;width:var(--calculated-paper-radio-button-size);height:var(--calculated-paper-radio-button-size);vertical-align:middle;@apply --paper-radio-button-radio-container;}#ink{position:absolute;top:50%;left:50%;right:auto;width:var(--calculated-paper-radio-button-ink-size);height:var(--calculated-paper-radio-button-ink-size);color:var(--paper-radio-button-unchecked-ink-color, var(--primary-text-color));opacity:0.6;pointer-events:none;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);}#ink[checked]{color:var(--paper-radio-button-checked-ink-color, var(--primary-color));}#offRadio, #onRadio{position:absolute;box-sizing:border-box;top:0;left:0;width:100%;height:100%;border-radius:50%;}#offRadio{border:2px solid var(--paper-radio-button-unchecked-color, var(--primary-text-color));background-color:var(--paper-radio-button-unchecked-background-color, transparent);transition:border-color 0.28s;}#onRadio{background-color:var(--paper-radio-button-checked-color, var(--primary-color));-webkit-transform:scale(0);transform:scale(0);transition:-webkit-transform ease 0.28s;transition:transform ease 0.28s;will-change:transform;}:host([checked]) #offRadio{border-color:var(--paper-radio-button-checked-color, var(--primary-color));}:host([checked]) #onRadio{-webkit-transform:scale(0.5);transform:scale(0.5);}#radioLabel{line-height:normal;position:relative;display:inline-block;vertical-align:middle;margin-left:var(--paper-radio-button-label-spacing, 10px);white-space:normal;color:var(--paper-radio-button-label-color, var(--primary-text-color));@apply --paper-radio-button-label;}:host([checked]) #radioLabel{@apply --paper-radio-button-label-checked;}:host-context([dir="rtl"]) #radioLabel{margin-left:0;margin-right:var(--paper-radio-button-label-spacing, 10px);}#radioLabel[hidden]{display:none;}:host([disabled]) #offRadio{border-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled][checked]) #onRadio{background-color:var(--paper-radio-button-unchecked-color, var(--primary-text-color));opacity:0.5;}:host([disabled]) #radioLabel{opacity:0.65;}</style><div id="radioContainer"><div id="offRadio"></div><div id="onRadio"></div></div><div id="radioLabel"><slot></slot></div></template><script>Polymer({is:"paper-radio-button",behaviors:[Polymer.PaperCheckedElementBehavior],hostAttributes:{role:"radio","aria-checked":!1,tabindex:0},properties:{ariaActiveAttribute:{type:String,value:"aria-checked"}},ready:function(){this._rippleContainer=this.$.radioContainer},attached:function(){Polymer.RenderStatus.afterNextRender(this,function(){if("-1px"===this.getComputedStyleValue("--calculated-paper-radio-button-ink-size").trim()){var e=parseFloat(this.getComputedStyleValue("--calculated-paper-radio-button-size").trim()),t=Math.floor(3*e);t%2!=e%2&&t++,this.updateStyles({"--paper-radio-button-ink-size":t+"px"})}})}});</script></dom-module><dom-module id="paper-radio-group" assetpath="../../bower_components/paper-radio-group/"><template><style>:host{display:inline-block;}:host ::slotted(*){padding:var(--paper-radio-group-item-padding, 12px);}</style><slot></slot></template></dom-module><script>Polymer({is:"paper-radio-group",behaviors:[Polymer.IronMenubarBehavior],hostAttributes:{role:"radiogroup"},properties:{attrForSelected:{type:String,value:"name"},selectedAttribute:{type:String,value:"checked"},selectable:{type:String,value:"paper-radio-button"},allowEmptySelection:{type:Boolean,value:!1}},select:function(e){var t=this._valueToItem(e);if(!t||!t.hasAttribute("disabled")){if(this.selected){var i=this._valueToItem(this.selected);if(this.selected==e){if(!this.allowEmptySelection)return void(i&&(i.checked=!0));e=""}i&&(i.checked=!1)}Polymer.IronSelectableBehavior.select.apply(this,[e]),this.fire("paper-radio-group-changed")}},_activateFocusedItem:function(){this._itemActivate(this._valueForItem(this.focusedItem),this.focusedItem)},_onUpKey:function(e){this._focusPrevious(),e.preventDefault(),this._activateFocusedItem()},_onDownKey:function(e){this._focusNext(),e.preventDefault(),this._activateFocusedItem()},_onLeftKey:function(e){Polymer.IronMenubarBehaviorImpl._onLeftKey.apply(this,arguments),this._activateFocusedItem()},_onRightKey:function(e){Polymer.IronMenubarBehaviorImpl._onRightKey.apply(this,arguments),this._activateFocusedItem()}});</script><dom-module id="paper-dropdown-menu-light" assetpath="../../bower_components/paper-dropdown-menu/"><template><style include="paper-dropdown-menu-shared-styles">:host(:focus){outline:none;}:host{width:200px;}[slot="dropdown-trigger"]{box-sizing:border-box;position:relative;width:100%;padding:16px 0 8px 0;}:host([disabled]) [slot="dropdown-trigger"]{pointer-events:none;opacity:var(--paper-dropdown-menu-disabled-opacity, 0.33);}:host([no-label-float]) [slot="dropdown-trigger"]{padding-top:8px;}#input{@apply --paper-font-subhead;@apply --paper-font-common-nowrap;line-height:1.5;border-bottom:1px solid var(--paper-dropdown-menu-color, var(--secondary-text-color));color:var(--paper-dropdown-menu-color, var(--primary-text-color));width:100%;box-sizing:border-box;padding:12px 20px 0 0;outline:none;@apply --paper-dropdown-menu-input;}#input:dir(rtl){padding-right:0px;padding-left:20px;}:host([disabled]) #input{border-bottom:1px dashed var(--paper-dropdown-menu-color, var(--secondary-text-color));}:host([invalid]) #input{border-bottom:2px solid var(--paper-dropdown-error-color, var(--error-color));}:host([no-label-float]) #input{padding-top:0;}label{@apply --paper-font-subhead;@apply --paper-font-common-nowrap;display:block;position:absolute;bottom:0;left:0;right:0;top:28px;box-sizing:border-box;width:100%;padding-right:20px;text-align:left;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);color:var(--paper-dropdown-menu-color, var(--secondary-text-color));@apply --paper-dropdown-menu-label;}label:dir(rtl){padding-right:0px;padding-left:20px;}:host([no-label-float]) label{top:8px;transition-duration:0s;}label.label-is-floating{font-size:12px;top:8px;}label.label-is-hidden{visibility:hidden;}:host([focused]) label.label-is-floating{color:var(--paper-dropdown-menu-focus-color, var(--primary-color));}:host([invalid]) label.label-is-floating{color:var(--paper-dropdown-error-color, var(--error-color));}label:after{background-color:var(--paper-dropdown-menu-focus-color, var(--primary-color));bottom:7px;content:'';height:2px;left:45%;position:absolute;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);visibility:hidden;width:8px;z-index:10;}:host([invalid]) label:after{background-color:var(--paper-dropdown-error-color, var(--error-color));}:host([no-label-float]) label:after{bottom:7px;}:host([focused]:not([disabled])) label:after{left:0;visibility:visible;width:100%;}iron-icon{position:absolute;right:0px;bottom:8px;@apply --paper-font-subhead;color:var(--disabled-text-color);@apply --paper-dropdown-menu-icon;}iron-icon:dir(rtl){left:0;right:auto;}:host([no-label-float]) iron-icon{margin-top:0px;}.error{display:inline-block;visibility:hidden;color:var(--paper-dropdown-error-color, var(--error-color));@apply --paper-font-caption;position:absolute;left:0;right:0;bottom:-12px;}:host([invalid]) .error{visibility:visible;}</style><span role="button"></span><paper-menu-button id="menuButton" vertical-align="[[verticalAlign]]" horizontal-align="[[horizontalAlign]]" vertical-offset="[[_computeMenuVerticalOffset(noLabelFloat)]]" disabled="[[disabled]]" no-animations="[[noAnimations]]" on-iron-select="_onIronSelect" on-iron-deselect="_onIronDeselect" opened="{{opened}}" close-on-activate="" allow-outside-scroll="[[allowOutsideScroll]]"><div class="dropdown-trigger" slot="dropdown-trigger"><label class$="[[_computeLabelClass(noLabelFloat,alwaysFloatLabel,hasContent)]]">[[label]]</label><div id="input" tabindex="-1">&nbsp;</div><iron-icon icon="paper-dropdown-menu:arrow-drop-down"></iron-icon><span class="error">[[errorMessage]]</span></div><slot id="content" name="dropdown-content" slot="dropdown-content"></slot></paper-menu-button></template><script>!function(){"use strict";Polymer({is:"paper-dropdown-menu-light",behaviors:[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior],properties:{selectedItemLabel:{type:String,notify:!0,readOnly:!0},selectedItem:{type:Object,notify:!0,readOnly:!0},value:{type:String,notify:!0,readOnly:!0,observer:"_valueChanged"},label:{type:String},placeholder:{type:String},opened:{type:Boolean,notify:!0,value:!1,observer:"_openedChanged"},allowOutsideScroll:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1,reflectToAttribute:!0},alwaysFloatLabel:{type:Boolean,value:!1},noAnimations:{type:Boolean,value:!1},horizontalAlign:{type:String,value:"right"},verticalAlign:{type:String,value:"top"},hasContent:{type:Boolean,readOnly:!0}},listeners:{tap:"_onTap"},keyBindings:{"up down":"open",esc:"close"},hostAttributes:{tabindex:0,role:"combobox","aria-autocomplete":"none","aria-haspopup":"true"},observers:["_selectedItemChanged(selectedItem)"],attached:function(){var e=this.contentElement;e&&e.selectedItem&&this._setSelectedItem(e.selectedItem)},get contentElement(){for(var e=Polymer.dom(this.$.content).getDistributedNodes(),t=0,n=e.length;t<n;t++)if(e[t].nodeType===Node.ELEMENT_NODE)return e[t]},open:function(){this.$.menuButton.open()},close:function(){this.$.menuButton.close()},_onIronSelect:function(e){this._setSelectedItem(e.detail.item)},_onIronDeselect:function(e){this._setSelectedItem(null)},_onTap:function(e){Polymer.Gestures.findOriginalTarget(e)===this&&this.open()},_selectedItemChanged:function(e){var t="";t=e?e.label||e.getAttribute("label")||e.textContent.trim():"",this._setValue(t),this._setSelectedItemLabel(t)},_computeMenuVerticalOffset:function(e){return e?-4:8},_getValidity:function(e){return this.disabled||!this.required||this.required&&!!this.value},_openedChanged:function(){var e=this.opened?"true":"false",t=this.contentElement;t&&t.setAttribute("aria-expanded",e)},_computeLabelClass:function(e,t,n){var o="";return!0===e?n?"label-is-hidden":"":((n||!0===t)&&(o+=" label-is-floating"),o)},_valueChanged:function(){this.$.input&&this.$.input.textContent!==this.value&&(this.$.input.textContent=this.value),this._setHasContent(!!this.value)}})}();</script></dom-module><script>function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(e,t){var n,o,i,a,r=R;for(a=arguments.length;a-- >2;)N.push(arguments[a]);for(t&&null!=t.children&&(N.length||N.push(t.children),delete t.children);N.length;)if((o=N.pop())&&void 0!==o.pop)for(a=o.length;a--;)N.push(o[a]);else"boolean"==typeof o&&(o=null),(i="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(i=!1)),i&&n?r[r.length-1]+=o:r===R?r=[o]:r.push(o),n=i;var l=new function(){};return l.nodeName=e,l.children=r,l.attributes=null==t?void 0:t,l.key=null==t?void 0:t.key,void 0!==j.vnode&&j.vnode(l),l}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){!e._dirty&&(e._dirty=!0)&&1==T.push(e)&&(j.debounceRendering||S)(o)}function o(){var e,t=T;for(T=[];e=t.pop();)e._dirty&&C(e)}function i(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&a(e,t.nodeName):n||e._componentConstructor===t.nodeName}function a(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function r(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var i in o)void 0===n[i]&&(n[i]=o[i]);return n}function l(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e,t,n,o,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||i)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"===(void 0===o?"undefined":_typeof(o))){if("string"!=typeof n)for(var a in n)a in o||(e.style[a]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===D.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var r=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,u,r):e.removeEventListener(t,u,r),(e._listeners||(e._listeners={}))[t]=o}else if("list"!==t&&"type"!==t&&!i&&t in e)!function(e,t,n){try{e[t]=n}catch(e){}}(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t);else{var l=i&&t!==(t=t.replace(/^xlink\:?/,""));null==o||!1===o?l?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(l?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function u(e){return this._listeners[e.type](j.event&&j.event(e)||e)}function c(){for(var e;e=E.pop();)j.afterMount&&j.afterMount(e),e.componentDidMount&&e.componentDidMount()}function p(e,t,n,o,i,a){G++||(U=null!=i&&void 0!==i.ownerSVGElement,q=null!=e&&!("__preactattr_"in e));var r=d(e,t,n,o,a);return i&&r.parentNode!==i&&i.appendChild(r),--G||(q=!1,a||c()),r}function d(e,t,n,o,u){var c=e,p=U;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||u)?e.nodeValue!=t&&(e.nodeValue=t):(c=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(c,e),h(e,!0))),c.__preactattr_=!0,c;var g=t.nodeName;if("function"==typeof g)return function(e,t,n,o){var i=e&&e._component,a=i,l=e,s=i&&e._componentConstructor===t.nodeName,u=s,c=r(t);for(;i&&!u&&(i=i._parentComponent);)u=i.constructor===t.nodeName;i&&u&&(!o||i._component)?(_(i,c,3,n,o),e=i.base):(a&&!s&&(y(a),e=l=null),i=f(t.nodeName,c,n),e&&!i.nextBase&&(i.nextBase=e,l=null),_(i,c,1,n,o),e=i.base,l&&e!==l&&(l._component=null,h(l,!1)));return e}(e,t,n,o);if(U="svg"===g||"foreignObject"!==g&&U,g=String(g),(!e||!a(e,g))&&(c=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(g,U),e)){for(;e.firstChild;)c.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(c,e),h(e,!0)}var v=c.firstChild,C=c.__preactattr_,m=t.children;if(null==C){C=c.__preactattr_={};for(var b=c.attributes,k=b.length;k--;)C[b[k].name]=b[k].value}return!q&&m&&1===m.length&&"string"==typeof m[0]&&null!=v&&void 0!==v.splitText&&null==v.nextSibling?v.nodeValue!=m[0]&&(v.nodeValue=m[0]):(m&&m.length||null!=v)&&function(e,t,n,o,a){var r,s,u,c,p,g=e.childNodes,f=[],v={},_=0,C=0,y=g.length,m=0,b=t?t.length:0;if(0!==y)for(w=0;w<y;w++){var k=g[w],P=k.__preactattr_;null!=(x=b&&P?k._component?k._component.__key:P.key:null)?(_++,v[x]=k):(P||(void 0!==k.splitText?!a||k.nodeValue.trim():a))&&(f[m++]=k)}if(0!==b)for(w=0;w<b;w++){c=t[w],p=null;var x=c.key;if(null!=x)_&&void 0!==v[x]&&(p=v[x],v[x]=void 0,_--);else if(!p&&C<m)for(r=C;r<m;r++)if(void 0!==f[r]&&i(s=f[r],c,a)){p=s,f[r]=void 0,r===m-1&&m--,r===C&&C++;break}p=d(p,c,n,o),u=g[w],p&&p!==e&&p!==u&&(null==u?e.appendChild(p):p===u.nextSibling?l(u):e.insertBefore(p,u))}if(_)for(var w in v)void 0!==v[w]&&h(v[w],!1);for(;C<=m;)void 0!==(p=f[m--])&&h(p,!1)}(c,m,n,o,q||null!=C.dangerouslySetInnerHTML),function(e,t,n){var o;for(o in n)t&&null!=t[o]||null==n[o]||s(e,o,n[o],n[o]=void 0,U);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||s(e,o,n[o],n[o]=t[o],U)}(c,t.attributes,C),U=p,c}function h(e,t){var n=e._component;n?y(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||l(e),g(e))}function g(e){for(e=e.lastChild;e;){var t=e.previousSibling;h(e,!0),e=t}}function f(e,t,n){var o,i=L[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),m.call(o,t,n)):((o=new m(t,n)).constructor=e,o.render=v),i)for(var a=i.length;a--;)if(i[a].constructor===e){o.nextBase=i[a].nextBase,i.splice(a,1);break}return o}function v(e,t,n){return this.constructor(e,n)}function _(e,t,o,i,a){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==o&&(1!==o&&!1===j.syncComponentUpdates&&e.base?n(e):C(e,1,a)),e.__ref&&e.__ref(e))}function C(e,n,o,i){if(!e._disable){var a,l,s,u=e.props,d=e.state,g=e.context,v=e.prevProps||u,m=e.prevState||d,b=e.prevContext||g,k=e.base,P=e.nextBase,x=k||P,w=e._component,O=!1;if(k&&(e.props=v,e.state=m,e.context=b,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(u,d,g)?O=!0:e.componentWillUpdate&&e.componentWillUpdate(u,d,g),e.props=u,e.state=d,e.context=g),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!O){a=e.render(u,d,g),e.getChildContext&&(g=t(t({},g),e.getChildContext()));var z,N,R=a&&a.nodeName;if("function"==typeof R){var S=r(a);(l=w)&&l.constructor===R&&S.key==l.__key?_(l,S,1,g,!1):(z=l,e._component=l=f(R,S,g),l.nextBase=l.nextBase||P,l._parentComponent=e,_(l,S,0,g,!1),C(l,1,o,!0)),N=l.base}else s=x,(z=w)&&(s=e._component=null),(x||1===n)&&(s&&(s._component=null),N=p(s,a,g,o||!k,x&&x.parentNode,!0));if(x&&N!==x&&l!==w){var D=x.parentNode;D&&N!==D&&(D.replaceChild(N,x),z||(x._component=null,h(x,!1)))}if(z&&y(z),e.base=N,N&&!i){for(var T=e,U=e;U=U._parentComponent;)(T=U).base=N;N._component=T,N._componentConstructor=T.constructor}}if(!k||o?E.unshift(e):O||(e.componentDidUpdate&&e.componentDidUpdate(v,m,b),j.afterUpdate&&j.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);G||i||c()}}function y(e){j.beforeUnmount&&j.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?y(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,l(t),function(e){var t=e.constructor.name;(L[t]||(L[t]=[])).push(e)}(e),g(t)),e.__ref&&e.__ref(null)}function m(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function b(e,t,n){return p(n,e,{},!1,t,!1)}function k(e,t){var n=this.props[e];if(t.target.value!==n[t.target.name]){var o=A({},n);t.target.value?o[t.target.name]=t.target.value:delete o[t.target.name],this.props.onChange(this.props.index,o)}}function P(e){return"latitude"in e.attributes&&"longitude"in e.attributes}function x(e){return e._domain||(e._domain=function(e){return e.substr(0,e.indexOf("."))}(e.entity_id)),e._domain}function w(e){return P(e)&&"zone"!==x(e)}function O(e){return P(e)&&"zone"!==x(e)}function z(e){for(var t=Object.keys(_e),n=0;n<t.length;n++)if(t[n]in e)return t[n];return null}var j={},N=[],R=[],S="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,T=[],E=[],G=0,U=!1,q=!1,L={};t(m.prototype,{setState:function(e,o){var i=this.state;this.prevState||(this.prevState=t({},i)),t(i,"function"==typeof e?e(i,this.props):e),o&&(this._renderCallbacks=this._renderCallbacks||[]).push(o),n(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),C(this,2)},render:function(){}});var W=function(t){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state.isValid=!0,t.state.value=JSON.stringify(e.value||{},null,2),t.onChange=t.onChange.bind(t),t}return _inherits(n,m),_createClass(n,[{key:"onChange",value:function(e){var t=e.target.value,n=void 0,o=void 0;try{n=JSON.parse(t),o=!0}catch(e){o=!1}this.setState({value:t,isValid:o}),o&&this.props.onChange(n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value;t!==this.props.value&&this.setState({value:JSON.stringify(t,null,2),isValid:!0})}},{key:"render",value:function(t,n){var o=t.label,i=n.value,a={minWidth:300,width:"100%"};return n.isValid||(a.border="1px solid red"),e("paper-textarea",{label:o,value:i,style:a,"onvalue-changed":this.onChange})}}]),n}(),A=(function(){function e(e){this.value=e}function t(t){function n(i,a){try{var r=t[i](a),l=r.value;l instanceof e?Promise.resolve(l.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(r.done?"return":"normal",r.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):a=null}var i,a;this._invoke=function(e,t){return new Promise(function(o,r){var l={key:e,arg:t,resolve:o,reject:r,next:null};a?a=a.next=l:(i=a=l,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),B=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e.eventDataChanged=e.eventDataChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"eventDataChanged",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{event_data:e}))}},{key:"render",value:function(t){var n=t.trigger,o=t.localize,i=n.event_type,a=n.event_data;return e("div",null,e("paper-input",{label:o("ui.panel.config.automation.editor.triggers.type.event.event_type"),name:"event_type",value:i,"onvalue-changed":this.onChange}),e(W,{label:o("ui.panel.config.automation.editor.triggers.type.event.event_data"),value:a,onChange:this.eventDataChanged}))}}]),n}();B.defaultConfig={event_type:"",event_data:{}};var M=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(t){var n=t.trigger,o=t.localize,i=n.event;return e("div",null,e("label",{id:"eventlabel"},o("ui.panel.config.automation.editor.triggers.type.homeassistant.event")),e("paper-radio-group",{selected:i,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},e("paper-radio-button",{name:"start"},o("ui.panel.config.automation.editor.triggers.type.homeassistant.start")),e("paper-radio-button",{name:"shutdown"},o("ui.panel.config.automation.editor.triggers.type.homeassistant.shutdown"))))}}]),n}();M.defaultConfig={event:"start"};var V=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e}return _inherits(n,m),_createClass(n,[{key:"render",value:function(t){var n=t.trigger,o=t.localize,i=n.topic,a=n.payload;return e("div",null,e("paper-input",{label:o("ui.panel.config.automation.editor.triggers.type.mqtt.topic"),name:"topic",value:i,"onvalue-changed":this.onChange}),e("paper-input",{label:o("ui.panel.config.automation.editor.triggers.type.mqtt.payload"),name:"payload",value:a,"onvalue-changed":this.onChange}))}}]),n}();V.defaultConfig={topic:""};var J=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e.entityPicked=e.entityPicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"entityPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{entity_id:e.target.value}))}},{key:"render",value:function(t){var n=t.trigger,o=t.hass,i=t.localize,a=n.value_template,r=n.entity_id,l=n.below,s=n.above;return e("div",null,e("ha-entity-picker",{value:r,onChange:this.entityPicked,hass:o,allowCustomEntity:!0}),e("paper-input",{label:i("ui.panel.config.automation.editor.triggers.type.numeric_state.above"),name:"above",value:s,"onvalue-changed":this.onChange}),e("paper-input",{label:i("ui.panel.config.automation.editor.triggers.type.numeric_state.below"),name:"below",value:l,"onvalue-changed":this.onChange}),e("paper-textarea",{label:i("ui.panel.config.automation.editor.triggers.type.numeric_state.value_template"),name:"value_template",value:a,"onvalue-changed":this.onChange}))}}]),n}();J.defaultConfig={entity_id:""};var I=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e.entityPicked=e.entityPicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"entityPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{entity_id:e.target.value}))}},{key:"render",value:function(t){var n=t.trigger,o=t.hass,i=t.localize,a=n.entity_id,r=n.to,l=n.from,s=n.for;return e("div",null,e("ha-entity-picker",{value:a,onChange:this.entityPicked,hass:o,allowCustomEntity:!0}),e("paper-input",{label:i("ui.panel.config.automation.editor.triggers.type.state.from"),name:"from",value:l,"onvalue-changed":this.onChange}),e("paper-input",{label:i("ui.panel.config.automation.editor.triggers.type.state.to"),name:"to",value:r,"onvalue-changed":this.onChange}),s&&e("pre",null,"For: ",JSON.stringify(s,null,2)))}}]),n}();I.defaultConfig={entity_id:""};var F=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(t){var n=t.trigger,o=t.localize,i=n.offset,a=n.event;return e("div",null,e("label",{id:"eventlabel"},o("ui.panel.config.automation.editor.triggers.type.sun.event")),e("paper-radio-group",{selected:a,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},e("paper-radio-button",{name:"sunrise"},o("ui.panel.config.automation.editor.triggers.type.sun.sunrise")),e("paper-radio-button",{name:"sunset"},o("ui.panel.config.automation.editor.triggers.type.sun.sunset"))),e("paper-input",{label:o("ui.panel.config.automation.editor.triggers.type.sun.offset"),name:"offset",value:i,"onvalue-changed":this.onChange}))}}]),n}();F.defaultConfig={event:"sunrise"};var H=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e}return _inherits(n,m),_createClass(n,[{key:"render",value:function(t){var n=t.trigger,o=t.localize,i=n.value_template;return e("div",null,e("paper-textarea",{label:o("ui.panel.config.automation.editor.triggers.type.template.value_template"),name:"value_template",value:i,"onvalue-changed":this.onChange}))}}]),n}();H.defaultConfig={value_template:""};var $=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e}return _inherits(n,m),_createClass(n,[{key:"render",value:function(t){var n=t.trigger,o=t.localize,i=n.at;return e("div",null,e("paper-input",{label:o("ui.panel.config.automation.editor.triggers.type.time.at"),name:"at",value:i,"onvalue-changed":this.onChange}))}}]),n}();$.defaultConfig={at:""};var K=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"trigger"),e.radioGroupPicked=e.radioGroupPicked.bind(e),e.entityPicked=e.entityPicked.bind(e),e.zonePicked=e.zonePicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"entityPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{entity_id:e.target.value}))}},{key:"zonePicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{zone:e.target.value}))}},{key:"radioGroupPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,{event:e.target.selected}))}},{key:"render",value:function(t){var n=t.trigger,o=t.hass,i=t.localize,a=n.entity_id,r=n.zone,l=n.event;return e("div",null,e("ha-entity-picker",{label:i("ui.panel.config.automation.editor.triggers.type.zone.entity"),value:a,onChange:this.entityPicked,hass:o,allowCustomEntity:!0,entityFilter:w}),e("ha-entity-picker",{label:i("ui.panel.config.automation.editor.triggers.type.zone.zone"),value:r,onChange:this.zonePicked,hass:o,allowCustomEntity:!0,domainFilter:"zone"}),e("label",{id:"eventlabel"},i("ui.panel.config.automation.editor.triggers.type.zone.event")),e("paper-radio-group",{selected:l,"aria-labelledby":"eventlabel","onpaper-radio-group-changed":this.radioGroupPicked},e("paper-radio-button",{name:"enter"},i("ui.panel.config.automation.editor.triggers.type.zone.enter")),e("paper-radio-button",{name:"leave"},i("ui.panel.config.automation.editor.triggers.type.zone.leave"))))}}]),n}();K.defaultConfig={entity_id:"",zone:"",event:"enter"};var Q={event:B,state:I,homeassistant:M,mqtt:V,numeric_state:J,sun:F,template:H,time:$,zone:K},X=Object.keys(Q).sort(),Y=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.attributes.platform.value;t!==this.props.trigger.platform&&this.props.onChange(this.props.index,A({platform:t},Q[t].defaultConfig))}},{key:"render",value:function(t){var n=t.index,o=t.trigger,i=t.onChange,a=t.hass,r=t.localize,l=Q[o.platform],s=X.indexOf(o.platform);return l?e("div",null,e("paper-dropdown-menu-light",{label:r("ui.panel.config.automation.editor.triggers.type_select"),"no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:s,"oniron-select":this.typeChanged},X.map(function(t){return e("paper-item",{platform:t},r("ui.panel.config.automation.editor.triggers.type."+t+".label"))}))),e(l,{index:n,trigger:o,onChange:i,hass:a,localize:r})):e("div",null,r("ui.panel.config.automation.editor.triggers.unsupported_platform","platform",o.platform),e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),Z=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onDelete=e.onDelete.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"onDelete",value:function(){confirm(this.props.localize("ui.panel.config.automation.editor.triggers.delete_confirm"))&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(t){return e("paper-card",null,e("div",{class:"card-menu"},e("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},e("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),e("paper-listbox",{slot:"dropdown-content"},e("paper-item",{disabled:!0},t.localize("ui.panel.config.automation.editor.triggers.duplicate")),e("paper-item",{onTap:this.onDelete},t.localize("ui.panel.config.automation.editor.triggers.delete"))))),e("div",{class:"card-content"},e(Y,t)))}}]),n}(),ee=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addTrigger=e.addTrigger.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"addTrigger",value:function(){var e=this.props.trigger.concat(A({platform:"state"},I.defaultConfig));this.props.onChange(e)}},{key:"triggerChanged",value:function(e,t){var n=this.props.trigger.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(t){var n=this,o=t.trigger,i=t.hass,a=t.localize;return e("div",{class:"triggers"},o.map(function(t,o){return e(Z,{index:o,trigger:t,onChange:n.triggerChanged,hass:i,localize:a})}),e("paper-card",null,e("div",{class:"card-actions add-card"},e("paper-button",{onTap:this.addTrigger},a("ui.panel.config.automation.editor.triggers.add")))))}}]),n}(),te=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"condition"),e.entityPicked=e.entityPicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"entityPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.condition,{entity_id:e.target.value}))}},{key:"render",value:function(t){var n=t.condition,o=t.hass,i=t.localize,a=n.value_template,r=n.entity_id,l=n.below,s=n.above;return e("div",null,e("ha-entity-picker",{value:r,onChange:this.entityPicked,hass:o,allowCustomEntity:!0}),e("paper-input",{label:i("ui.panel.config.automation.editor.conditions.type.numeric_state.above"),name:"above",value:s,"onvalue-changed":this.onChange}),e("paper-input",{label:i("ui.panel.config.automation.editor.conditions.type.numeric_state.below"),name:"below",value:l,"onvalue-changed":this.onChange}),e("paper-textarea",{label:i("ui.panel.config.automation.editor.conditions.type.numeric_state.value_template"),name:"value_template",value:a,"onvalue-changed":this.onChange}))}}]),n}();te.defaultConfig={entity_id:""};var ne=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"condition"),e.entityPicked=e.entityPicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"entityPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.condition,{entity_id:e.target.value}))}},{key:"render",value:function(t){var n=t.condition,o=t.hass,i=t.localize,a=n.entity_id,r=n.state,l=n.for;return e("div",null,e("ha-entity-picker",{value:a,onChange:this.entityPicked,hass:o,allowCustomEntity:!0}),e("paper-input",{label:i("ui.panel.config.automation.editor.conditions.type.state.state"),name:"state",value:r,"onvalue-changed":this.onChange}),l&&e("pre",null,"For: ",JSON.stringify(l,null,2)))}}]),n}();ne.defaultConfig={entity_id:"",state:""};var oe=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"condition"),e.afterPicked=e.radioGroupPicked.bind(e,"after"),e.beforePicked=e.radioGroupPicked.bind(e,"before"),e}return _inherits(n,m),_createClass(n,[{key:"radioGroupPicked",value:function(e,t){var n=A({},this.props.condition);t.target.selected?n[e]=t.target.selected:delete n[e],this.props.onChange(this.props.index,n)}},{key:"render",value:function(t){var n=t.condition,o=t.localize,i=n.after,a=n.after_offset,r=n.before,l=n.before_offset;return e("div",null,e("label",{id:"beforelabel"},o("ui.panel.config.automation.editor.conditions.type.sun.before")),e("paper-radio-group",{"allow-empty-selection":!0,selected:r,"aria-labelledby":"beforelabel","onpaper-radio-group-changed":this.beforePicked},e("paper-radio-button",{name:"sunrise"},o("ui.panel.config.automation.editor.conditions.type.sun.sunrise")),e("paper-radio-button",{name:"sunset"},o("ui.panel.config.automation.editor.conditions.type.sun.sunset"))),e("paper-input",{label:o("ui.panel.config.automation.editor.conditions.type.sun.before_offset"),name:"before_offset",value:l,"onvalue-changed":this.onChange,disabled:void 0===r}),e("label",{id:"afterlabel"},o("ui.panel.config.automation.editor.conditions.type.sun.after")),e("paper-radio-group",{"allow-empty-selection":!0,selected:i,"aria-labelledby":"afterlabel","onpaper-radio-group-changed":this.afterPicked},e("paper-radio-button",{name:"sunrise"},o("ui.panel.config.automation.editor.conditions.type.sun.sunrise")),e("paper-radio-button",{name:"sunset"},o("ui.panel.config.automation.editor.conditions.type.sun.sunset"))),e("paper-input",{label:o("ui.panel.config.automation.editor.conditions.type.sun.after_offset"),name:"after_offset",value:a,"onvalue-changed":this.onChange,disabled:void 0===i}))}}]),n}();oe.defaultConfig={};var ie=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"condition"),e}return _inherits(n,m),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=t.localize,i=n.value_template;return e("div",null,e("paper-textarea",{label:o("ui.panel.config.automation.editor.conditions.type.template.value_template"),name:"value_template",value:i,"onvalue-changed":this.onChange}))}}]),n}();ie.defaultConfig={value_template:""};var ae=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"condition"),e}return _inherits(n,m),_createClass(n,[{key:"render",value:function(t){var n=t.condition,o=t.localize,i=n.after,a=n.before;return e("div",null,e("paper-input",{label:o("ui.panel.config.automation.editor.conditions.type.time.after"),name:"after",value:i,"onvalue-changed":this.onChange}),e("paper-input",{label:o("ui.panel.config.automation.editor.conditions.type.time.before"),name:"before",value:a,"onvalue-changed":this.onChange}))}}]),n}();ae.defaultConfig={};var re=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"condition"),e.entityPicked=e.entityPicked.bind(e),e.zonePicked=e.zonePicked.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"entityPicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.condition,{entity_id:e.target.value}))}},{key:"zonePicked",value:function(e){this.props.onChange(this.props.index,A({},this.props.condition,{zone:e.target.value}))}},{key:"render",value:function(t){var n=t.condition,o=t.hass,i=t.localize,a=n.entity_id,r=n.zone;return e("div",null,e("ha-entity-picker",{label:i("ui.panel.config.automation.editor.conditions.type.zone.entity"),value:a,onChange:this.entityPicked,hass:o,allowCustomEntity:!0,entityFilter:O}),e("ha-entity-picker",{label:i("ui.panel.config.automation.editor.conditions.type.zone.zone"),value:r,onChange:this.zonePicked,hass:o,allowCustomEntity:!0,domainFilter:"zone"}))}}]),n}();re.defaultConfig={entity_id:"",zone:""};var le={state:ne,numeric_state:te,sun:oe,template:ie,time:ae,zone:re},se=Object.keys(le).sort(),ue=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.attributes.condition.value;t!==this.props.condition.condition&&this.props.onChange(this.props.index,A({condition:t},le[t].defaultConfig))}},{key:"render",value:function(t){var n=t.index,o=t.condition,i=t.onChange,a=t.hass,r=t.localize,l=le[o.condition],s=se.indexOf(o.condition);return l?e("div",null,e("paper-dropdown-menu-light",{label:r("ui.panel.config.automation.editor.conditions.type_select"),"no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:s,"oniron-select":this.typeChanged},se.map(function(t){return e("paper-item",{condition:t},r("ui.panel.config.automation.editor.conditions.type."+t+".label"))}))),e(l,{index:n,condition:o,onChange:i,hass:a,localize:r})):e("div",null,r("ui.panel.config.automation.editor.conditions.unsupported_condition","condition",o.condition),e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),ce=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onDelete=e.onDelete.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"onDelete",value:function(){confirm(this.props.localize("ui.panel.config.automation.editor.conditions.delete_confirm"))&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(t){return e("paper-card",null,e("div",{class:"card-menu"},e("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},e("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),e("paper-listbox",{slot:"dropdown-content"},e("paper-item",{disabled:!0},t.localize("ui.panel.config.automation.editor.conditions.duplicate")),e("paper-item",{onTap:this.onDelete},t.localize("ui.panel.config.automation.editor.conditions.delete"))))),e("div",{class:"card-content"},e(ue,t)))}}]),n}(),pe=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addCondition=e.addCondition.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"addCondition",value:function(){var e=this.props.condition.concat({condition:"state"});this.props.onChange(e)}},{key:"conditionChanged",value:function(e,t){var n=this.props.condition.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(t){var n=this,o=t.condition,i=t.hass,a=t.localize;return e("div",{class:"triggers"},o.map(function(t,o){return e(ce,{index:o,condition:t,onChange:n.conditionChanged,hass:i,localize:a})}),e("paper-card",null,e("div",{class:"card-actions add-card"},e("paper-button",{onTap:this.addCondition},a("ui.panel.config.automation.editor.conditions.add")))))}}]),n}(),de=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.serviceChanged=e.serviceChanged.bind(e),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"serviceChanged",value:function(e){this.props.onChange(this.props.index,A({},this.props.action,{service:e.target.value}))}},{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,A({},this.props.action,{data:e}))}},{key:"render",value:function(t){var n=t.action,o=t.hass,i=t.localize,a=n.service,r=n.data;return e("div",null,e("ha-service-picker",{hass:o,value:a,onChange:this.serviceChanged}),e(W,{label:i("ui.panel.config.automation.editor.actions.type.service.service_data"),value:r,onChange:this.serviceDataChanged}))}}]),n}();de.defaultConfig={alias:"",service:"",data:{}};var he=function(t){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,m),_createClass(n,[{key:"render",value:function(t){var n=t.action,o=t.index,i=t.onChange,a=t.hass,r=t.localize;return e(ue,{condition:n,onChange:i,index:o,hass:a,localize:r})}}]),n}();he.defaultConfig=A({condition:"state"},ne.defaultConfig);var ge=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"action"),e}return _inherits(n,m),_createClass(n,[{key:"render",value:function(t){var n=t.action,o=t.localize,i=n.delay;return e("div",null,e("paper-input",{label:o("ui.panel.config.automation.editor.actions.type.delay.delay"),name:"delay",value:i,"onvalue-changed":this.onChange}))}}]),n}();ge.defaultConfig={delay:""};var fe=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"action"),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,A({},this.props.action,{data:e}))}},{key:"render",value:function(t){var n=t.action,o=t.localize,i=n.event,a=n.event_data;return e("div",null,e("paper-input",{label:o("ui.panel.config.automation.editor.actions.type.event.event"),name:"event",value:i,"onvalue-changed":this.onChange}),e(W,{label:o("ui.panel.config.automation.editor.actions.type.event.service_data"),value:a,onChange:this.serviceDataChanged}))}}]),n}();fe.defaultConfig={event:"",event_data:{}};var ve=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=k.bind(e,"action"),e.onTemplateChange=e.onTemplateChange.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"onTemplateChange",value:function(e){this.props.onChange(this.props.index,A({},this.props.trigger,_defineProperty({},e.target.name,e.target.value)))}},{key:"render",value:function(t){var n=t.action,o=t.localize,i=n.wait_template,a=n.timeout;return e("div",null,e("paper-textarea",{label:o("ui.panel.config.automation.editor.actions.type.wait_template.wait_template"),name:"wait_template",value:i,"onvalue-changed":this.onTemplateChange}),e("paper-input",{label:o("ui.panel.config.automation.editor.actions.type.wait_template.timeout"),name:"timeout",value:a,"onvalue-changed":this.onChange}))}}]),n}();ve.defaultConfig={wait_template:"",timeout:""};var _e={service:de,delay:ge,wait_template:ve,condition:he,event:fe},Ce=Object.keys(_e).sort(),ye=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.typeChanged=e.typeChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"typeChanged",value:function(e){var t=e.target.selectedItem.attributes.action.value;z(this.props.action)!==t&&this.props.onChange(this.props.index,_e[t].defaultConfig)}},{key:"render",value:function(t){var n=t.index,o=t.action,i=t.onChange,a=t.hass,r=t.localize,l=z(o),s=l&&_e[l],u=Ce.indexOf(l);return s?e("div",null,e("paper-dropdown-menu-light",{label:r("ui.panel.config.automation.editor.actions.type_select"),"no-animations":!0},e("paper-listbox",{slot:"dropdown-content",selected:u,"oniron-select":this.typeChanged},Ce.map(function(t){return e("paper-item",{action:t},r("ui.panel.config.automation.editor.actions.type."+t+".label"))}))),e(s,{index:n,action:o,onChange:i,hass:a,localize:r})):e("div",null,r("ui.panel.config.automation.editor.actions.unsupported_action","action",l),e("pre",null,JSON.stringify(o,null,2)))}}]),n}(),me=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onDelete=e.onDelete.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"onDelete",value:function(){confirm(this.props.localize("ui.panel.config.automation.editor.actions.delete_confirm"))&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(t){return e("paper-card",null,e("div",{class:"card-menu"},e("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},e("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),e("paper-listbox",{slot:"dropdown-content"},e("paper-item",{disabled:!0},t.localize("ui.panel.config.automation.editor.actions.duplicate")),e("paper-item",{onTap:this.onDelete},t.localize("ui.panel.config.automation.editor.actions.delete"))))),e("div",{class:"card-content"},e(ye,t)))}}]),n}(),be=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,t){var n=this.props.script.concat();null===t?n.splice(e,1):n[e]=t,this.props.onChange(n)}},{key:"render",value:function(t){var n=this,o=t.script,i=t.hass,a=t.localize;return e("div",{class:"script"},o.map(function(t,o){return e(me,{index:o,action:t,onChange:n.actionChanged,hass:i,localize:a})}),e("paper-card",null,e("div",{class:"card-actions add-card"},e("paper-button",{onTap:this.addAction},a("ui.panel.config.automation.editor.actions.add")))))}}]),n}(),ke=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=e.onChange.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e.conditionChanged=e.conditionChanged.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"onChange",value:function(e){this.props.onChange(A({},this.props.automation,_defineProperty({},e.target.name,e.target.value)))}},{key:"triggerChanged",value:function(e){this.props.onChange(A({},this.props.automation,{trigger:e}))}},{key:"conditionChanged",value:function(e){this.props.onChange(A({},this.props.automation,{condition:e}))}},{key:"actionChanged",value:function(e){this.props.onChange(A({},this.props.automation,{action:e}))}},{key:"render",value:function(t){var n=t.automation,o=t.isWide,i=t.hass,a=t.localize,r=n.alias,l=n.trigger,s=n.condition,u=n.action;return e("div",null,e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},r),e("span",{slot:"introduction"},a("ui.panel.config.automation.editor.introduction")),e("paper-card",null,e("div",{class:"card-content"},e("paper-input",{label:a("ui.panel.config.automation.editor.alias"),name:"alias",value:r,"onvalue-changed":this.onChange})))),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},a("ui.panel.config.automation.editor.triggers.header")),e("span",{slot:"introduction"},e("ha-markdown",{content:a("ui.panel.config.automation.editor.triggers.introduction")})),e(ee,{trigger:l,onChange:this.triggerChanged,hass:i,localize:a})),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},a("ui.panel.config.automation.editor.conditions.header")),e("span",{slot:"introduction"},e("ha-markdown",{content:a("ui.panel.config.automation.editor.conditions.introduction")})),e(pe,{condition:s||[],onChange:this.conditionChanged,hass:i,localize:a})),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},a("ui.panel.config.automation.editor.actions.header")),e("span",{slot:"introduction"},e("ha-markdown",{content:a("ui.panel.config.automation.editor.actions.introduction")})),e(be,{script:u,onChange:this.actionChanged,hass:i,localize:a})))}}]),n}(),Pe=function(t){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.onChange=e.onChange.bind(e),e.sequenceChanged=e.sequenceChanged.bind(e),e}return _inherits(n,m),_createClass(n,[{key:"onChange",value:function(e){this.props.onChange(A({},this.props.script,_defineProperty({},e.target.name,e.target.value)))}},{key:"sequenceChanged",value:function(e){this.props.onChange(A({},this.props.script,{sequence:e}))}},{key:"render",value:function(t){var n=t.script,o=t.isWide,i=t.hass,a=t.localize,r=n.alias,l=n.sequence;return e("div",null,e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},r),e("span",{slot:"introduction"},"Use scripts to execute a sequence of actions."),e("paper-card",null,e("div",{class:"card-content"},e("paper-input",{label:"Name",name:"alias",value:r,"onvalue-changed":this.onChange})))),e("ha-config-section",{"is-wide":o},e("span",{slot:"header"},"Sequence"),e("span",{slot:"introduction"},"The sequence of actions of this script.",e("p",null,e("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about available actions."))),e(be,{script:l,onChange:this.sequenceChanged,hass:i,localize:a})))}}]),n}();window.ScriptEditor=function(t,n,o){return b(e(Pe,n),t,o)},window.AutomationEditor=function(t,n,o){return b(e(ke,n),t,o)},window.unmountPreact=function(e,t){b(function(){return null},e,t)}}();</script><dom-module id="ha-automation-editor" assetpath="automation/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="backTapped"></paper-icon-button><div main-title="">[[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div></div><paper-fab slot="fab" is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="[[localize('ui.panel.config.automation.editor.save')]]" on-click="saveAutomation"></paper-fab></ha-app-layout></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),_get=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(o)},HaAutomationEditor=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,window.hassMixins.LocalizeMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(e,[{key:"ready",value:function(){this.configChanged=this.configChanged.bind(this),_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ready",this).call(this)}},{key:"disconnectedCallback",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),this._rendered&&(window.unmountPreact(this._rendered),this._rendered=null)}},{key:"configChanged",value:function(t){null!==this._rendered&&(this.config=t,this.errors=null,this.dirty=!0,this._updateComponent())}},{key:"automationChanged",value:function(t,e){var n=this;t&&(this.hass?e&&e.attributes.id===t.attributes.id||this.hass.callApi("get","config/automation/config/"+t.attributes.id).then(function(t){["trigger","condition","action"].forEach(function(e){var n=t[e];n&&!Array.isArray(n)&&(t[e]=[n])}),this.dirty=!1,this.config=t,this._updateComponent()}.bind(this)):setTimeout(function(){return n.automationChanged(t,e)},0))}},{key:"creatingNewChanged",value:function(t){t&&(this.dirty=!1,this.config={alias:this.localize("ui.panel.config.automation.editor.default_name"),trigger:[{platform:"state"}],condition:[],action:[{service:""}]},this._updateComponent())}},{key:"backTapped",value:function(){this.dirty&&!confirm(this.localize("ui.panel.config.automation.editor.unsaved_confirm"))||history.back()}},{key:"_updateComponent",value:function(){var t=this;!this._renderScheduled&&this.hass&&this.config&&(this._renderScheduled=!0,Promise.resolve().then(function(){t._rendered=window.AutomationEditor(t.$.root,{automation:t.config,onChange:t.configChanged,isWide:t.isWide,hass:t.hass,localize:t.localize},t._rendered),t._renderScheduled=!1}))}},{key:"saveAutomation",value:function(){var t=this.creatingNew?""+Date.now():this.automation.attributes.id;this.hass.callApi("post","config/automation/config/"+t,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.replaceState(null,null,"/config/automation/edit/"+t),this.fire("location-changed"))}.bind(this),function(t){throw this.errors=t.body.message,t}.bind(this))}},{key:"computeName",value:function(t,e){return t?window.hassUtil.computeStateName(t):e("ui.panel.config.automation.editor.default_name")}}],[{key:"is",get:function(){return"ha-automation-editor"}},{key:"properties",get:function(){return{hass:{type:Object,observer:"_updateComponent"},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},automation:{type:Object,observer:"automationChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(automation, localize)"},isWide:{type:Boolean,observer:"_updateComponent"},_rendered:{type:Object,value:null},_renderScheduled:{type:Boolean,value:!1}}}}]),e}();customElements.define(HaAutomationEditor.is,HaAutomationEditor);</script><dom-module id="ha-config-automation" assetpath="automation/"><template><style>ha-automation-picker,
      ha-automation-editor{height:100%;}</style><app-route route="[[route]]" pattern="/automation/edit/:automation" data="{{_routeData}}" active="{{_edittingAutomation}}"></app-route><app-route route="[[route]]" pattern="/automation/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-automation-picker hass="[[hass]]" narrow="[[narrow]]" show-menu="[[showMenu]]" automations="[[automations]]" is-wide="[[isWide]]"></ha-automation-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-automation-editor hass="[[hass]]" automation="[[automation]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-automation-editor></template></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),HaConfigAutomation=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"computeAutomation",value:function(t,e,o){if(!t||!e)return null;for(var n=0;n<t.length;n++)if(t[n].attributes.id===o.automation)return t[n];return null}},{key:"computeAutomations",value:function(t){var e=[];return Object.keys(t.states).forEach(function(o){var n=t.states[o];"automation"===window.hassUtil.computeDomain(n)&&"id"in n.attributes&&e.push(n)}),e.sort(function(t,e){var o=(t.attributes.alias||t.entity_id).toLowerCase(),n=(e.attributes.alias||e.entity_id).toLowerCase();return o<n?-1:o>n?1:0})}},{key:"computeShowEditor",value:function(t,e){return e||t}}],[{key:"is",get:function(){return"ha-config-automation"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingAutomation:Boolean,automations:{type:Array,computed:"computeAutomations(hass)"},automation:{type:Object,computed:"computeAutomation(automations, _edittingAutomation, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingAutomation, _creatingNew)"}}}}]),e}();customElements.define(HaConfigAutomation.is,HaConfigAutomation);</script><dom-module id="ha-script-picker" assetpath="script/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="_backTapped"></paper-icon-button><div main-title="">[[localize('ui.panel.config.script.caption')]]</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Script Editor</div><div slot="introduction">The script editor allows you to create and edit scripts. Please read <a href="https://home-assistant.io/docs/scripts/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick script to edit"><template is="dom-if" if="[[!scripts.length]]"><div class="card-content"><p>We couldn't find any editable scripts.</p></div></template><template is="dom-repeat" items="[[scripts]]" as="script"><paper-item><paper-item-body two-line="" on-click="scriptTapped"><div>[[computeName(script)]]</div><div secondary="">[[computeDescription(script)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab slot="fab" is-wide$="[[isWide]]" icon="mdi:plus" title="Add Script" on-click="addScript"></paper-fab></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaScriptPicker=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(window.hassMixins.EventsMixin(Polymer.Element))),_createClass(t,[{key:"scriptTapped",value:function(e){history.pushState(null,null,"/config/script/edit/"+this.scripts[e.model.index].entity_id),this.fire("location-changed")}},{key:"addScript",value:function(){history.pushState(null,null,"/config/script/new"),this.fire("location-changed")}},{key:"computeName",value:function(e){return window.hassUtil.computeStateName(e)}},{key:"computeDescription",value:function(e){return""}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-script-picker"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},scripts:{type:Array},isWide:{type:Boolean}}}}]),t}();customElements.define(HaScriptPicker.is,HaScriptPicker);</script><dom-module id="ha-script-editor" assetpath="script/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="backTapped"></paper-icon-button><div main-title="">Script [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div></div><paper-fab slot="fab" is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-click="saveScript"></paper-fab></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},HaScriptEditor=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){this.configChanged=this.configChanged.bind(this),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this)}},{key:"disconnectedCallback",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disconnectedCallback",this).call(this),this._rendered&&(window.unmountPreact(this._rendered),this._rendered=null)}},{key:"configChanged",value:function(e){null!==this._rendered&&(this.config=e,this.errors=null,this.dirty=!0,this._updateComponent())}},{key:"scriptChanged",value:function(e,t){var n=this;e&&(this.hass?t&&t.entity_id===e.entity_id||this.hass.callApi("get","config/script/config/"+window.hassUtil.computeObjectId(e)).then(function(e){var t=e.sequence;t&&!Array.isArray(t)&&(e.sequence=[t]),n.dirty=!1,n.config=e,n._updateComponent()},function(){alert("Only scripts inside scripts.yaml are editable."),history.back()}):setTimeout(function(){return n.scriptChanged(e,t)},0))}},{key:"creatingNewChanged",value:function(e){e&&(this.dirty=!1,this.config={alias:"New Script",sequence:[{service:"",data:{}}]},this._updateComponent())}},{key:"backTapped",value:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()}},{key:"_updateComponent",value:function(){var e=this;!this._renderScheduled&&this.hass&&this.config&&(this._renderScheduled=!0,Promise.resolve().then(function(){e._rendered=window.ScriptEditor(e.$.root,{script:e.config,onChange:e.configChanged,isWide:e.isWide,hass:e.hass,localize:e.localize},e._rendered),e._renderScheduled=!1}))}},{key:"saveScript",value:function(){var e=this,t=this.creatingNew?""+Date.now():window.hassUtil.computeObjectId(this.script);this.hass.callApi("post","config/script/config/"+t,this.config).then(function(){e.dirty=!1,e.creatingNew&&e.navigate("/config/script/edit/"+t,!0)},function(t){throw e.errors=t.body.message,t})}},{key:"computeName",value:function(e){return e&&window.hassUtil.computeStateName(e)}}],[{key:"is",get:function(){return"ha-script-editor"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},script:{type:Object,observer:"scriptChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(script)"},isWide:{type:Boolean,observer:"_updateComponent"},_rendered:{type:Object,value:null},_renderScheduled:{type:Boolean,value:!1}}}}]),t}();customElements.define(HaScriptEditor.is,HaScriptEditor);</script><dom-module id="ha-config-script" assetpath="script/"><template><style>ha-script-picker,
      ha-script-editor{height:100%;}</style><app-route route="[[route]]" pattern="/script/edit/:script" data="{{_routeData}}" active="{{_edittingScript}}"></app-route><app-route route="[[route]]" pattern="/script/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-script-picker hass="[[hass]]" narrow="[[narrow]]" show-menu="[[showMenu]]" scripts="[[scripts]]" is-wide="[[isWide]]"></ha-script-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-script-editor hass="[[hass]]" script="[[script]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-script-editor></template></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),HaConfigScript=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"computeScript",value:function(t,e,r){if(!t||!e)return null;for(var o=0;o<t.length;o++)if(t[o].entity_id===r.script)return t[o];return null}},{key:"computeScripts",value:function(t){var e=[];return Object.keys(t.states).forEach(function(r){var o=t.states[r];"script"===window.hassUtil.computeDomain(o)&&e.push(o)}),e.sort(function(t,e){var r=window.hassUtil.computeStateName(t),o=window.hassUtil.computeStateName(e);return r<o?-1:r>o?1:0})}},{key:"computeShowEditor",value:function(t,e){return e||t}}],[{key:"is",get:function(){return"ha-config-script"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingScript:Boolean,scripts:{type:Array,computed:"computeScripts(hass)"},script:{type:Object,computed:"computeScript(scripts, _edittingScript, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingScript, _creatingNew)"}}}}]),e}();customElements.define(HaConfigScript.is,HaConfigScript);</script><dom-module id="ha-service-description" assetpath="../../src/components/"><template>[[_getDescription(hass, domain, service)]]</template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),HaServiceDescription=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"_getDescription",value:function(e,t,r){var n=e.config.services[t];if(!n)return"";var o=n[r];return o?o.description:""}}],[{key:"is",get:function(){return"ha-service-description"}},{key:"properties",get:function(){return{hass:Object,domain:String,service:String}}}]),t}();customElements.define(HaServiceDescription.is,HaServiceDescription);</script><dom-module id="ha-form-style"><template><style>.form-group{@apply --layout-horizontal;@apply --layout-center;padding:8px 16px;}.form-group label{@apply --layout-flex-2;}.form-group .form-control{@apply --layout-flex;}.form-group.vertical{@apply --layout-vertical;@apply --layout-start;}paper-dropdown-menu.form-control{margin:-9px 0;}</style></template></dom-module><dom-module id="ozw-log" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">OZW Log</span><paper-card><div class="device-picker"><paper-input label="Number of last log lines." type="number" min="0" max="1000" step="10" value="{{numLogLines}}"></paper-input></div><div class="card-actions"><paper-button raised="" on-click="refreshLog">Refresh</paper-button></div><div class="help-text"><pre>[[ozwLogs]]</pre></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),OzwLog=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"refreshLog",value:function(){var e=this;this.ozwLogs="Loading ozw log...",this.hass.callApi("GET","zwave/ozwlog?lines="+this.numLogLines).then(function(t){e.ozwLogs=t})}}],[{key:"is",get:function(){return"ozw-log"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean,value:!1},ozwLogs:{type:String,value:"Refresh to pull log"},numLogLines:{type:Number,value:0}}}}]),t}();customElements.define(OzwLog.is,OzwLog);</script><dom-module id="ha-call-api-button" assetpath="../../src/components/buttons/"><template><ha-progress-button id="progress" progress="[[progress]]" on-click="buttonTapped" disabled="[[disabled]]"><slot></slot></ha-progress-button></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCallApiButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"buttonTapped",value:function(){var e=this;this.progress=!0;var t={method:this.method,path:this.path,data:this.data};this.hass.callApi(this.method,this.path,this.data).then(function(n){e.progress=!1,e.$.progress.actionSuccess(),t.success=!0,t.response=n},function(n){e.progress=!1,e.$.progress.actionError(),t.success=!1,t.response=n}).then(function(){e.fire("hass-api-called",t)})}}],[{key:"is",get:function(){return"ha-call-api-button"}},{key:"properties",get:function(){return{hass:Object,progress:{type:Boolean,value:!1},path:String,method:{type:String,value:"POST"},data:{type:Object,value:{}},disabled:{type:Boolean,value:!1}}}}]),t}();customElements.define(HaCallApiButton.is,HaCallApiButton);</script><dom-module id="zwave-network" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.card-actions.warning ha-call-service-button{color:var(--google-red-500);}.toggle-help-icon{position:absolute;top:-6px;right:0;color:var(--primary-color);}ha-service-description{display:block;color:grey;}[hidden]{display:none;}</style><ha-config-section is-wide="[[isWide]]"><div style="position: relative" slot="header"><span>Z-Wave Network Management</span><paper-icon-button class="toggle-help-icon" on-click="helpTap" icon="mdi:help-circle"></paper-icon-button></div><span slot="introduction">Run commands that affect the Z-Wave network. You won't get feedback on whether the command succeeded, but you can look in the OZW Log to try to figure out.</span><paper-card class="content"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node_secure">Add Node Secure</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node_secure" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node">Add Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_node">Remove Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_node" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions warning"><ha-call-service-button hass="[[hass]]" domain="zwave" service="cancel_command">Cancel Command</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="cancel_command" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_network">Heal Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="start_network">Start Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="start_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="stop_network">Stop Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="stop_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="soft_reset">Soft Reset</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="soft_reset" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_network">Test Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="test_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-api-button hass="[[hass]]" path="zwave/saveconfig">Save Config</ha-call-api-button></div></paper-card></ha-config-section></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ZwaveNetwork=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"helpTap",value:function(){this.showDescription=!this.showDescription}}],[{key:"is",get:function(){return"zwave-network"}},{key:"properties",get:function(){return{hass:{type:Object},isWide:{type:Boolean,value:!1},showDescription:{type:Boolean,value:!1}}}}]),t}();customElements.define(ZwaveNetwork.is,ZwaveNetwork);</script><dom-module id="zwave-node-information" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}paper-card{display:block;margin:0 auto;max-width:600px;}paper-button[toggles][active]{background:lightgray;}</style><div class="content"><paper-card heading="Node Information"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{nodeInfoActive}}">Show</paper-button></div><template is="dom-if" if="{{nodeInfoActive}}"><template is="dom-repeat" items="[[selectedNodeAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ZwaveNodeInformation=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"nodeChanged",value:function(e){if(this.nodes&&-1!==e){var t=this.nodes[this.selectedNode].attributes,n=[];Object.keys(t).forEach(function(e){n.push(e+": "+t[e])}),this.selectedNodeAttrs=n.sort()}}}],[{key:"is",get:function(){return"zwave-node-information"}},{key:"properties",get:function(){return{nodes:{type:Array,observer:"nodeChanged"},selectedNode:{type:Number,value:-1,observer:"nodeChanged"},selectedNodeAttrs:{type:Array},nodeInfoActive:{type:Boolean}}}}]),t}();customElements.define(ZwaveNodeInformation.is,ZwaveNodeInformation);</script><dom-module id="zwave-values" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply --layout-horizontal;@apply --layout-center-center;padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node Values"><div class="device-picker"><paper-dropdown-menu label="Value" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedValue}}"><template is="dom-repeat" items="[[values]]" as="item"><paper-item>[[computeSelectCaption(item)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsValueSelected(selectedValue)]]"><div class="card-actions"><paper-input float-label="Value Name" type="text" value="{{newValueNameInput}}" placeholder="[[computeGetValueName(selectedValue)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_value" service-data="[[computeValueNameServiceData(newValueNameInput)]]">Rename Value</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},ZwaveValues=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){var t=this;e.detail.success&&setTimeout(function(){t.refreshValues(t.selectedNode)},5e3)}},{key:"computeSelectCaption",value:function(e){return e.value.label+" (Instance: "+e.value.instance+", Index: "+e.value.index+")"}},{key:"computeGetValueName",value:function(e){return this.values[e].value.label}},{key:"computeIsValueSelected",value:function(e){return!this.nodes||-1===this.selectedNode||-1===e}},{key:"refreshValues",value:function(e){var t=[];this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(n){t.push({key:n,value:e[n]})}),this.values=t,this.selectedValueChanged(this.selectedValue)}.bind(this))}},{key:"computeValueNameServiceData",value:function(e){return-1===!this.selectedNode||-1===this.selectedValue?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.values[this.selectedValue].key,name:e}}},{key:"selectedValueChanged",value:function(e){if(-1!==!this.selectedNode&&-1!==this.selectedValue){var t=this;this.hass.callApi("GET","config/zwave/device_config/"+this.values[e].value.entity_id).then(function(n){t.entityIgnored=n.ignored||!1,t.entityPollingIntensity=t.values[e].value.poll_intensity})}}}],[{key:"is",get:function(){return"zwave-values"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array},values:{type:Array},selectedNode:{type:Number},selectedValue:{type:Number,value:-1,observer:"selectedValueChanged"}}}}]),t}();customElements.define(ZwaveValues.is,ZwaveValues);</script><dom-module id="zwave-groups" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply --layout-horizontal;@apply --layout-center-center;padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;padding-bottom:12px;}</style><paper-card class="content" heading="Node group associations"><div class="device-picker"><paper-dropdown-menu label="Group" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedGroup}}"><template is="dom-repeat" items="[[groups]]" as="state"><paper-item>[[computeSelectCaptionGroup(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[computeIsGroupSelected(selectedGroup)]]"><div class="device-picker"><paper-dropdown-menu label="Node to control" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedTargetNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="help-text"><span>Other Nodes in this group:</span><template is="dom-repeat" items="[[otherGroupNodes]]" as="state"><div>[[state]]</div></template></div><div class="help-text"><span>Max Associations:</span> <span>[[maxAssociations]]</span></div></template><template is="dom-if" if="[[computeIsTargetNodeSelected(selectedTargetNode)]]"><div class="card-actions"><template is="dom-if" if="[[!noAssociationsLeft]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]">Add To Group</ha-call-service-button></template><template is="dom-if" if="[[computeTargetInGroup(selectedGroup, selectedTargetNode)]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]">Remove From Group</ha-call-service-button></template></div></template></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),_get=function e(t,o,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,o);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,o,r)}if("value"in n)return n.value;var u=n.get;if(void 0!==u)return u.call(r)},ZwaveGroups=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshGroups(t.selectedNode)},5e3)}}},{key:"computeAssociationsLeft",value:function(e){return-1===e||this.maxAssociations===this.otherGroupNodes.length}},{key:"computeMaxAssociations",value:function(e){if(-1===e)return-1;var t=this.groups[e].value.max_associations;return t||"None"}},{key:"computeOtherGroupNodes",value:function(e){var t=this;if(-1===e)return-1;var o=Object.values(this.groups[e].value.association_instances);return o.length?o.map(function(e){if(!e.length||2!==e.length)return"Unknown Node: "+e;var o=e[0],r=e[1],n=t.nodes.find(function(e){return e.attributes.node_id===o});if(!n)return"Unknown Node (id: "+(r?o+"."+r:o)+")";var s=t.computeSelectCaption(n);return r&&(s+="/ Instance: "+r),s}):["None"]}},{key:"computeTargetInGroup",value:function(e,t){if(-1===e||-1===t)return!1;var o=Object.values(this.groups[e].value.associations);return!!o.length&&-1!==o.indexOf(this.nodes[t].attributes.node_id)}},{key:"computeSelectCaption",value:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"}},{key:"computeSelectCaptionGroup",value:function(e){return e.key+": "+e.value.label}},{key:"computeIsTargetNodeSelected",value:function(e){return this.nodes&&-1!==e}},{key:"computeIsGroupSelected",value:function(e){return this.nodes&&-1!==this.selectedNode&&-1!==e}},{key:"computeAssocServiceData",value:function(e,t){return-1===!this.groups||-1===e||-1===this.selectedNode?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,association:t,target_node_id:this.nodes[this.selectedTargetNode].attributes.node_id,group:this.groups[e].key}}},{key:"refreshGroups",value:function(e){var t=[];this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(o){t.push({key:o,value:e[o]})}),this.groups=t,this.selectedGroupChanged(this.selectedGroup)}.bind(this))}},{key:"selectedGroupChanged",value:function(e){-1!==this.selectedGroup&&-1!==e&&(this.maxAssociations=this.groups[e].value.max_associations,this.otherGroupNodes=Object.values(this.groups[e].value.associations))}}],[{key:"is",get:function(){return"zwave-groups"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array},groups:{type:Array},selectedNode:{type:Number},selectedTargetNode:{type:Number,value:-1},selectedGroup:{type:Number,value:-1,observer:"selectedGroupChanged"},otherGroupNodes:{type:Array,value:-1,computed:"computeOtherGroupNodes(selectedGroup)"},maxAssociations:{type:String,value:"",computed:"computeMaxAssociations(selectedGroup)"},noAssociationsLeft:{type:Boolean,value:!0,computed:"computeAssociationsLeft(selectedGroup)"}}}}]),t}();customElements.define(ZwaveGroups.is,ZwaveGroups);</script><dom-module id="zwave-node-config" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply --layout-horizontal;@apply --layout-center-center;padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node config options"><template is="dom-if" if="[[wakeupNode]]"><div class="card-actions"><paper-input float-label="Wakeup Interval" type="number" value="{{wakeupInput}}" placeholder="[[computeGetWakeupValue(selectedNode)]]"><div suffix="">seconds</div></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_wakeup" service-data="[[computeWakeupServiceData(wakeupInput)]]">Set Wakeup</ha-call-service-button></div></template><div class="device-picker"><paper-dropdown-menu label="Config parameter" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedConfigParameter}}"><template is="dom-repeat" items="[[config]]" as="state"><paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'List')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" dynamic-align="" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]"><div class="card-actions"><paper-input label="{{selectedConfigParameterNumValues}}" type="number" value="{{selectedConfigValue}}" max="{{configParameterMax}}" min="{{configParameterMin}}"></paper-input></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" dynamic-align="" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><div class="help-text"><span>[[configValueHelpText]]</span></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_config_parameter" service-data="[[computeSetConfigParameterServiceData(selectedConfigValue)]]">Set Config Parameter</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function e(t,a,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},ZwaveNodeConfig=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshConfig(t.selectedNode)},5e3)}}},{key:"nodesChanged",value:function(){this.nodes&&(this.wakeupNode=0===this.nodes[this.selectedNode].attributes.wake_up_interval||this.nodes[this.selectedNode].attributes.wake_up_interval,this.wakeupNode&&(0===this.nodes[this.selectedNode].attributes.wake_up_interval?this.wakeupInput="":this.wakeupInput=this.nodes[this.selectedNode].attributes.wake_up_interval))}},{key:"computeGetWakeupValue",value:function(e){return-1!==this.selectedNode&&this.nodes[e].attributes.wake_up_interval?this.nodes[e].attributes.wake_up_interval:"unknown"}},{key:"computeWakeupServiceData",value:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,value:e}}},{key:"computeConfigValueHelp",value:function(e){if(-1===e)return"";var t=this.config[e].value.help;return t||["No helptext available"]}},{key:"computeSetConfigParameterServiceData",value:function(e){if(-1===this.selectedNode||-1===this.selectedConfigParameter)return-1;var t=null;return"Short Byte Int".includes(this.selectedConfigParameterType)&&(t=parseInt(e,10)),"Bool Button".includes(this.selectedConfigParameterType)&&(t=this.selectedConfigParameterValues[e]),"List"===this.selectedConfigParameterType&&(t=this.selectedConfigParameterValues[e]),{node_id:this.nodes[this.selectedNode].attributes.node_id,parameter:this.config[this.selectedConfigParameter].key,value:t}}},{key:"selectedConfigParameterChanged",value:function(e){-1!==e&&(this.selectedConfigValue=-1,this.loadedConfigValue=-1,this.selectedConfigParameterValues=[],this.selectedConfigParameterType=this.config[e].value.type,this.configParameterMax=this.config[e].value.max,this.configParameterMin=this.config[e].value.min,this.loadedConfigValue=this.config[e].value.data,this.configValueHelpText=this.config[e].value.help,"Short Byte Int".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterNumValues=this.config[e].value.data_items,this.selectedConfigValue=this.loadedConfigValue),"Bool Button".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=["True","False"],this.config[e].value.data?this.loadedConfigValue="True":this.loadedConfigValue="False"),"List".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=this.config[e].value.data_items))}},{key:"isConfigParameterSelected",value:function(e,t){return-1!==e&&(this.config[e].value.type===t||!!t.includes(this.config[e].value.type))}},{key:"computeSelectCaptionConfigParameter",value:function(e){return e.key+": "+e.value.label}},{key:"refreshConfig",value:function(e){var t=[];this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(a){t.push({key:a,value:e[a]})}),this.config=t,this.selectedConfigParameterChanged(this.selectedConfigParameter)}.bind(this))}}],[{key:"is",get:function(){return"zwave-node-config"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array,observer:"nodesChanged"},selectedNode:{type:Number,value:-1,observer:"nodesChanged"},config:{type:Array,value:function(){return[]}},selectedConfigParameter:{type:Number,value:-1,observer:"selectedConfigParameterChanged"},configParameterMax:{type:Number,value:-1},configParameterMin:{type:Number,value:-1},configValueHelpText:{type:String,value:"",computed:"computeConfigValueHelp(selectedConfigParameter)"},selectedConfigParameterType:{type:String,value:""},selectedConfigValue:{type:Number,value:-1,observer:"computeSetConfigParameterServiceData"},selectedConfigParameterValues:{type:Array,value:function(){return[]}},selectedConfigParameterNumValues:{type:String,value:""},loadedConfigValue:{type:Number,value:-1},wakeupInput:{type:Number},wakeupNode:{type:Boolean,value:!1}}}}]),t}();customElements.define(ZwaveNodeConfig.is,ZwaveNodeConfig);</script><dom-module id="zwave-usercodes" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply --layout-horizontal;@apply --layout-center-center;padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><div class="content"><paper-card heading="Node user codes"><div class="device-picker"><paper-dropdown-menu label="Code slot" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedUserCode}}"><template is="dom-repeat" items="[[userCodes]]" as="state"><paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isUserCodeSelected(selectedUserCode)]]"><div class="card-actions"><paper-input label="User code" type="text" allowed-pattern="[0-9,a-f,x,\\]" maxlength="{{userCodeMaxLen}}" minlength="16" value="{{selectedUserCodeValue}}"></paper-input><pre>Ascii: [[computedCodeOutput]]</pre></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="lock" service="set_usercode" service-data="[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]">Set Usercode</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="lock" service="clear_usercode" service-data="[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]">Delete Usercode</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function e(t,r,o){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in s)return s.value;var i=s.get;if(void 0!==i)return i.call(o)},ZwaveUsercodes=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshUserCodes(t.selectedNode)},5e3)}}},{key:"isUserCodeSelected",value:function(e){return-1!==e}},{key:"computeSelectCaptionUserCodes",value:function(e){return e.key+": "+e.value.label}},{key:"selectedUserCodeChanged",value:function(e){if(-1!==this.selectedUserCode&&-1!==e){var t=this.userCodes[e].value.code;this.userCodeMaxLen=4*this.userCodes[e].value.length,this.selectedUserCodeValue=this.a2hex(t),this.computedCodeOutput="["+this.hex2a(this.selectedUserCodeValue)+"]"}}},{key:"computeUserCodeServiceData",value:function(e,t){if(-1===this.selectedNode||!e)return-1;var r=null,o=null;return"Add"===t&&(o=this.hex2a(e),this.computedCodeOutput="["+o+"]",r={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode,usercode:o}),"Delete"===t&&(r={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode}),r}},{key:"refreshUserCodes",value:function(e){this.selectedUserCodeValue="";var t=[];this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(r){t.push({key:r,value:e[r]})}),this.userCodes=t,this.selectedUserCodeChanged(this.selectedUserCode)}.bind(this))}},{key:"a2hex",value:function(e){for(var t=[],r="",o=0,s=e.length;o<s;o++){var n=Number(e.charCodeAt(o)).toString(16);r="0"===n?"00":n,t.push("\\x"+r)}return t.join("")}},{key:"hex2a",value:function(e){for(var t=e.toString().replace(/\\x/g,""),r="",o=0;o<t.length;o+=2)r+=String.fromCharCode(parseInt(t.substr(o,2),16));return r}}],[{key:"is",get:function(){return"zwave-usercodes"}},{key:"properties",get:function(){return{hass:{type:Object},nodes:{type:Array},selectedNode:{type:Number},userCodes:{type:Object},userCodeMaxLen:{type:Number,value:4},selectedUserCode:{type:Number,value:-1,observer:"selectedUserCodeChanged"},selectedUserCodeValue:{type:String},computedCodeOutput:{type:String,value:""}}}}]),t}();customElements.define(ZwaveUsercodes.is,ZwaveUsercodes);</script><dom-module id="ha-config-zwave" assetpath="zwave/"><template><style include="iron-flex ha-style ha-form-style">.content{margin-top:24px;}.node-info{margin-left:16px;}.help-text{padding-left:24px;padding-right:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply --layout-horizontal;@apply --layout-center-center;padding-left:24px;padding-right:24px;padding-bottom:24px;}ha-service-description{display:block;color:grey;}[hidden]{display:none;}.toggle-help-icon{position:absolute;top:6px;right:0;color:var(--primary-color);}</style><ha-app-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="_backTapped"></paper-icon-button><div main-title="">[[localize('ui.panel.config.zwave.caption')]]</div></app-toolbar></app-header><zwave-network id="zwave-network" is-wide="[[isWide]]" hass="[[hass]]"></zwave-network><ha-config-section is-wide="[[isWide]]"><div style="position: relative" slot="header"><span>Z-Wave Node Management</span><paper-icon-button class="toggle-help-icon" on-click="toggleHelp" icon="mdi:help-circle"></paper-icon-button></div><span slot="introduction">Run Z-Wave commands that affect a single node. Pick a node to see a list of available commands.</span><paper-card class="content"><div class="device-picker"><paper-dropdown-menu dynamic-align="" label="Nodes" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsNodeSelected(selectedNode)]]"><template is="dom-if" if="[[showHelp]]"><div style="color: grey; padding: 12px">Select node to view per-node options</div></template></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_node" service-data="[[computeNodeServiceData(selectedNode)]]">Refresh Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Remove Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="replace_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Replace Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="replace_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="print_node" service-data="[[computeNodeServiceData(selectedNode)]]">Print Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="print_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_node" service-data="[[computeHealNodeServiceData(selectedNode)]]">Heal Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="heal_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_node" service-data="[[computeNodeServiceData(selectedNode)]]">Test Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="test_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="card-actions"><paper-input float-label="New node name" type="text" value="{{newNodeNameInput}}" placeholder="[[computeGetNodeName(selectedNode)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_node" service-data="[[computeNodeNameServiceData(newNodeNameInput)]]">Rename Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="rename_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="device-picker"><paper-dropdown-menu label="Entities of this node" dynamic-align="" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaptionEnt(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsEntitySelected(selectedEntity)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_entity" service-data="[[computeRefreshEntityServiceData(selectedEntity)]]">Refresh Entity</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_entity" hidden$="[[!showHelp]]"></ha-service-description></div><div class="form-group"><paper-checkbox checked="{{entityIgnored}}" class="form-control">Exclude this entity from Home Assistant</paper-checkbox><paper-input disabled="{{entityIgnored}}" label="Polling intensity" type="number" min="0" value="{{entityPollingIntensity}}"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_poll_intensity" service-data="[[computePollIntensityServiceData(entityPollingIntensity)]]">Save</ha-call-service-button></div><div class="content"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{entityInfoActive}}">Entity Attributes</paper-button></div><template is="dom-if" if="{{entityInfoActive}}"><template is="dom-repeat" items="[[selectedEntityAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></div></template></template></paper-card><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-information id="zwave-node-information" nodes="[[nodes]]" selected-node="[[selectedNode]]"></zwave-node-information><zwave-values hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" values="[[values]]"></zwave-values><zwave-groups hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" groups="[[groups]]"></zwave-groups><zwave-node-config hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" config="[[config]]"></zwave-node-config></template><template is="dom-if" if="{{hasNodeUserCodes}}"><zwave-usercodes id="zwave-usercodes" hass="[[hass]]" nodes="[[nodes]]" user-codes="[[userCodes]]" selected-node="[[selectedNode]]"></zwave-usercodes></template></ha-config-section><ozw-log is-wide="[[isWide]]" hass="[[hass]]"></ozw-log></ha-app-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},HaConfigZwave=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("hass-service-called",function(t){return e.serviceCalled(t)})}},{key:"serviceCalled",value:function(e){e.detail.success&&"set_poll_intensity"===e.detail.service&&this.saveEntity()}},{key:"computeNodes",value:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(e){return e.entity_id.match("zwave[.]")}).sort(window.hassUtil.sortByName)}},{key:"computeEntities",value:function(e){if(!this.nodes||-1===e)return-1;var t=this.hass,n=this.nodes[this.selectedNode].attributes.node_id;return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return void 0!==e.attributes.node_id&&(!e.attributes.hidden&&"node_id"in e.attributes&&e.attributes.node_id===n&&!e.entity_id.match("zwave[.]"))}).sort(window.hassUtil.sortByName)}},{key:"selectedNodeChanged",value:function(e){var t=this;this.newNodeNameInput="",-1!==e&&(this.selectedConfigParameter=-1,this.selectedConfigParameterValue=-1,this.selectedGroup=-1,this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){t.config=t._objToArray(e)}),this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){t.values=t._objToArray(e)}),this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){t.groups=t._objToArray(e)}),this.hasNodeUserCodes=!1,this.notifyPath("hasNodeUserCodes"),this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){t.userCodes=t._objToArray(e),t.hasNodeUserCodes=t.userCodes.length>0,t.notifyPath("hasNodeUserCodes")}))}},{key:"selectedEntityChanged",value:function(e){if(-1!==e){var t=this;t.hass.callApi("GET","zwave/values/"+t.nodes[t.selectedNode].attributes.node_id).then(function(e){t.values=t._objToArray(e)});var n=t.entities[e].attributes.value_id,i=t.values.find(function(e){return e.key===n}),o=t.values.indexOf(i);t.hass.callApi("GET","config/zwave/device_config/"+n).then(function(e){t.entityIgnored=e.ignored||!1,t.entityPollingIntensity=t.values[o].value.poll_intensity})}}},{key:"computeSelectedEntityAttrs",value:function(e){if(-1===e)return"No entity selected";var t=this.entities[e].attributes,n=[];return Object.keys(t).forEach(function(e){n.push(e+": "+t[e])}),n.sort()}},{key:"computeSelectCaption",value:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"}},{key:"computeSelectCaptionEnt",value:function(e){return window.hassUtil.computeDomain(e)+"."+window.hassUtil.computeStateName(e)}},{key:"computeIsNodeSelected",value:function(){return this.nodes&&-1!==this.selectedNode}},{key:"computeIsEntitySelected",value:function(e){return-1===e}},{key:"computeNodeServiceData",value:function(e){return{node_id:this.nodes[e].attributes.node_id}}},{key:"computeHealNodeServiceData",value:function(e){return{node_id:this.nodes[e].attributes.node_id,return_routes:!0}}},{key:"computeGetNodeName",value:function(e){return-1!==this.selectedNode&&this.nodes[e].entity_id?this.nodes[e].attributes.node_name:-1}},{key:"computeNodeNameServiceData",value:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,name:e}}},{key:"computeRefreshEntityServiceData",value:function(e){return-1===e?-1:{entity_id:this.entities[e].entity_id}}},{key:"computePollIntensityServiceData",value:function(e){return-1===!this.selectedNode||-1===this.selectedEntity?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.entities[this.selectedEntity].attributes.value_id,poll_intensity:parseInt(e)}}},{key:"saveEntity",value:function(){var e={ignored:this.entityIgnored,polling_intensity:parseInt(this.entityPollingIntensity)};return this.hass.callApi("POST","config/zwave/device_config/"+this.entities[this.selectedEntity].entity_id,e)}},{key:"toggleHelp",value:function(){this.showHelp=!this.showHelp}},{key:"_objToArray",value:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push({key:n,value:e[n]})}),t}},{key:"_backTapped",value:function(){history.back()}}],[{key:"is",get:function(){return"ha-config-zwave"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,nodes:{type:Array,computed:"computeNodes(hass)"},selectedNode:{type:Number,value:-1,observer:"selectedNodeChanged"},config:{type:Array,value:function(){return[]}},entities:{type:Array,computed:"computeEntities(selectedNode)"},entityInfoActive:{type:Boolean},selectedEntity:{type:Number,value:-1,observer:"selectedEntityChanged"},selectedEntityAttrs:{type:Array,computed:"computeSelectedEntityAttrs(selectedEntity)"},values:{type:Array},groups:{type:Array},newNodeNameInput:{type:String},userCodes:{type:Array,value:function(){return[]}},hasNodeUserCodes:{type:Boolean,value:!1},showHelp:{type:Boolean,value:!1},entityIgnored:{type:Boolean},entityPollingIntensity:{type:Number}}}}]),t}();customElements.define(HaConfigZwave.is,HaConfigZwave);</script><dom-module id="ha-customize-array" assetpath="customize/types/"><template><style>paper-dropdown-menu{margin:-9px 0;}</style><paper-dropdown-menu label="[[item.description]]" disabled="[[item.secondary]]" selected-item-label="{{item.value}}" dynamic-align=""><paper-listbox slot="dropdown-content" selected="[[computeSelected(item)]]"><template is="dom-repeat" items="[[getOptions(item)]]" as="option"><paper-item>[[option]]</paper-item></template></paper-listbox></paper-dropdown-menu></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeArray=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"getOptions",value:function(e){var t=e.domain||"*",n=e.options[t]||e.options["*"];return n?n.sort():(this.item.type="string",this.fire("item-changed"),[])}},{key:"computeSelected",value:function(e){return this.getOptions(e).indexOf(e.value)}}],[{key:"is",get:function(){return"ha-customize-array"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeArray.is,HaCustomizeArray);</script><dom-module id="ha-customize-boolean" assetpath="customize/types/"><template><paper-checkbox disabled="[[item.secondary]]" checked="{{item.value}}">[[item.description]]</paper-checkbox></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaCustomizeBoolean=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-boolean"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeBoolean.is,HaCustomizeBoolean);</script><dom-module id="ha-customize-icon" assetpath="customize/types/"><template><style>:host{@apply --layout-horizontal;}.icon-image{border:1px solid grey;padding:8px;margin-right:20px;margin-top:10px;}</style><iron-icon class="icon-image" icon="[[item.value]]"></iron-icon><paper-input auto-validate="" pattern="(mdi:.*)?" error-message="Must start with 'mdi:'" disabled="[[item.secondary]]" label="icon" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaCustomizeIcon=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-icon"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeIcon.is,HaCustomizeIcon);</script><dom-module id="ha-customize-key-value" assetpath="customize/types/"><template><style>:host{@apply --layout-horizontal;}paper-input{@apply --layout-flex;}.key{padding-right:20px;}</style><paper-input disabled="[[item.secondary]]" class="key" label="Attribute name" value="{{item.attribute}}"></paper-input><paper-input disabled="[[item.secondary]]" label="Attribute value" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeKeyValue=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,null,[{key:"is",get:function(){return"ha-customize-key-value"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeKeyValue.is,HaCustomizeKeyValue);</script><dom-module id="ha-customize-string" assetpath="customize/types/"><template><paper-input disabled="[[item.secondary]]" label="[[getLabel(item)]]" value="{{item.value}}"></paper-input></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaCustomizeString=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"getLabel",value:function(e){return e.description+("json"===e.type?" (JSON formatted)":"")}}],[{key:"is",get:function(){return"ha-customize-string"}},{key:"properties",get:function(){return{item:{type:Object,notifies:!0}}}}]),t}();customElements.define(HaCustomizeString.is,HaCustomizeString);</script><dom-module id="ha-customize-attribute" assetpath="customize/"><template><style include="ha-form-style">:host{display:block;position:relative;padding-right:40px;}.button{position:absolute;margin-top:-20px;top:50%;right:0;}</style><div id="wrapper" class="form-group"></div><paper-icon-button class="button" icon="[[getIcon(item.secondary)]]" on-click="tapButton"></paper-icon-button></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),HaCustomizeAttribute=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"tapButton",value:function(){this.item.secondary?this.item=Object.assign({},this.item,{secondary:!1}):this.item=Object.assign({},this.item,{closed:!0})}},{key:"getIcon",value:function(e){return e?"mdi:pencil":"mdi:close"}},{key:"itemObserver",value:function(e){var t=this,i=this.$.wrapper,n=window.hassAttributeUtil.TYPE_TO_TAG[e.type].toUpperCase(),r=void 0;i.lastChild&&i.lastChild.tagName===n?r=i.lastChild:(i.lastChild&&i.removeChild(i.lastChild),this.$.child=r=document.createElement(n.toLowerCase()),r.className="form-control",r.addEventListener("item-changed",function(){t.item=Object.assign({},r.item)})),r.setProperties({item:this.item}),null===r.parentNode&&i.appendChild(r)}}],[{key:"is",get:function(){return"ha-customize-attribute"}},{key:"properties",get:function(){return{item:{type:Object,notify:!0,observer:"itemObserver"}}}}]),t}();customElements.define(HaCustomizeAttribute.is,HaCustomizeAttribute);</script><dom-module id="ha-form-customize-attributes" assetpath="customize/"><template><style>[hidden]{display:none;}</style><template is="dom-repeat" items="{{attributes}}" mutable-data=""><ha-customize-attribute item="{{item}}" hidden$="[[item.closed]]"></ha-customize-attribute></template></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),HaFormCustomizeAttributes=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.MutableData(Polymer.Element)),_createClass(e,null,[{key:"is",get:function(){return"ha-form-customize-attributes"}},{key:"properties",get:function(){return{attributes:{type:Array,notify:!0}}}}]),e}();customElements.define(HaFormCustomizeAttributes.is,HaFormCustomizeAttributes);</script><dom-module id="ha-form-customize" assetpath="customize/"><template><style include="iron-flex ha-style ha-form-style">.warning{color:red;}.attributes-text{padding-left:20px;}</style><template is="dom-if" if="[[computeShowWarning(localConfig, globalConfig)]]"><div class="warning">It seems that your configuration.yaml doesn't properly include customize.yaml<br>Changes made here won't affect your configuration.</div></template><template is="dom-if" if="[[hasLocalAttributes]]"><h4 class="attributes-text">The following attributes are already set in customize.yaml<br></h4><ha-form-customize-attributes attributes="{{localAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasGlobalAttributes]]"><h4 class="attributes-text">The following attributes are customized from outside of customize.yaml<br>Possibly via a domain, a glob or a different include.</h4><ha-form-customize-attributes attributes="{{globalAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasExistingAttributes]]"><h4 class="attributes-text">The following attributes of the entity are set programatically.<br>You can override them if you like.</h4><ha-form-customize-attributes attributes="{{existingAttributes}}"></ha-form-customize-attributes></template><template is="dom-if" if="[[hasNewAttributes]]"><h4 class="attributes-text">The following attributes weren't set. Set them if you like.</h4><ha-form-customize-attributes attributes="{{newAttributes}}"></ha-form-customize-attributes></template><div class="form-group"><paper-dropdown-menu label="Pick an attribute to override" class="flex" dynamic-align=""><paper-listbox slot="dropdown-content" selected="{{selectedNewAttribute}}"><template is="dom-repeat" items="[[newAttributesOptions]]" as="option"><paper-item>[[option]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),HaFormCustomize=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,Polymer.Element),_createClass(e,[{key:"_initOpenObject",value:function(t,e,i,r){return Object.assign({attribute:t,value:e,closed:!1,domain:window.hassUtil.computeDomain(this.entity),secondary:i,description:t},r)}},{key:"loadEntity",value:function(t){var e=this;return this.entity=t,this.hass.callApi("GET","config/customize/config/"+t.entity_id).then(function(t){e.localConfig=t.local,e.globalConfig=t.global,e.newAttributes=[]})}},{key:"saveEntity",value:function(){var t={};this.localAttributes.concat(this.globalAttributes,this.existingAttributes,this.newAttributes).forEach(function(e){if(!e.closed&&!e.secondary&&e.attribute&&e.value){var i="json"===e.type?JSON.parse(e.value):e.value;i&&(t[e.attribute]=i)}});var e=this.entity.entity_id;return this.hass.callApi("POST","config/customize/config/"+e,t)}},{key:"_computeSingleAttribute",value:function(t,e,i){var r=window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[t]||{type:window.hassAttributeUtil.UNKNOWN_TYPE};return this._initOpenObject(t,"json"===r.type?JSON.stringify(e):e,i,r)}},{key:"_computeAttributes",value:function(t,e,i){var r=this;return e.map(function(e){return r._computeSingleAttribute(e,t[e],i)})}},{key:"computeLocalAttributes",value:function(t){if(!t)return[];var e=Object.keys(t);return this._computeAttributes(t,e,!1)}},{key:"computeGlobalAttributes",value:function(t,e){if(!t||!e)return[];var i=Object.keys(t),r=Object.keys(e).filter(function(t){return!i.includes(t)});return this._computeAttributes(e,r,!0)}},{key:"computeExistingAttributes",value:function(t,e,i){if(!t||!e||!i)return[];var r=Object.keys(t),s=Object.keys(e),n=Object.keys(i.attributes).filter(function(t){return!r.includes(t)&&!s.includes(t)});return this._computeAttributes(i.attributes,n,!0)}},{key:"computeShowWarning",value:function(t,e){return!(!t||!e)&&Object.keys(t).some(function(i){return JSON.stringify(e[i])!==JSON.stringify(t[i])})}},{key:"filterFromAttributes",value:function(t){return function(e){return!t||t.every(function(t){return t.attribute!==e||t.closed})}}},{key:"getNewAttributesOptions",value:function(t,e,i,r){var s=this;return Object.keys(window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES).filter(function(t){var e=window.hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[t];return e&&(!e.domains||!s.entity||e.domains.includes(window.hassUtil.computeDomain(s.entity)))}).filter(this.filterFromAttributes(t)).filter(this.filterFromAttributes(e)).filter(this.filterFromAttributes(i)).filter(this.filterFromAttributes(r)).sort().concat("Other")}},{key:"selectedNewAttributeObserver",value:function(t){if(!(t<0)){var e=this.newAttributesOptions[t];if(t===this.newAttributesOptions.length-1){var i=this._initOpenObject("","",!1,{type:window.hassAttributeUtil.ADD_TYPE});return this.push("newAttributes",i),void(this.selectedNewAttribute=-1)}var r=this.localAttributes.findIndex(function(t){return t.attribute===e});if(r>=0)return this.set("localAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.globalAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("globalAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.existingAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("existingAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);if((r=this.newAttributes.findIndex(function(t){return t.attribute===e}))>=0)return this.set("newAttributes."+r+".closed",!1),void(this.selectedNewAttribute=-1);var s=this._computeSingleAttribute(e,"",!1);this.push("newAttributes",s),this.selectedNewAttribute=-1}}},{key:"attributesObserver",value:function(){this.hasLocalAttributes=this.localAttributes&&this.localAttributes.some(function(t){return!t.closed}),this.hasGlobalAttributes=this.globalAttributes&&this.globalAttributes.some(function(t){return!t.closed}),this.hasExistingAttributes=this.existingAttributes&&this.existingAttributes.some(function(t){return!t.closed}),this.hasNewAttributes=this.newAttributes&&this.newAttributes.some(function(t){return!t.closed}),this.newAttributesOptions=this.getNewAttributesOptions(this.localAttributes,this.globalAttributes,this.existingAttributes,this.newAttributes)}}],[{key:"is",get:function(){return"ha-form-customize"}},{key:"properties",get:function(){return{hass:{type:Object},entity:Object,localAttributes:{type:Array,computed:"computeLocalAttributes(localConfig)"},hasLocalAttributes:Boolean,globalAttributes:{type:Array,computed:"computeGlobalAttributes(localConfig, globalConfig)"},hasGlobalAttributes:Boolean,existingAttributes:{type:Array,computed:"computeExistingAttributes(localConfig, globalConfig, entity)"},hasExistingAttributes:Boolean,newAttributes:{type:Array,value:[]},hasNewAttributes:Boolean,newAttributesOptions:Array,selectedNewAttribute:{type:Number,value:-1,observer:"selectedNewAttributeObserver"},localConfig:Object,globalConfig:Object}}},{key:"observers",get:function(){return["attributesObserver(localAttributes.*, globalAttributes.*, existingAttributes.*, newAttributes.*)"]}}]),e}();customElements.define(HaFormCustomize.is,HaFormCustomize);</script><dom-module id="ha-entity-config"><template><style include="iron-flex ha-style">paper-card{display:block;}.device-picker{@apply --layout-horizontal;padding-bottom:24px;}.form-placeholder{@apply --layout-vertical;@apply --layout-center-center;height:96px;}[hidden]:{display:none;};.card-actions{@apply --layout-horizontal;@apply --layout-justified;}</style><paper-card><div class="card-content"><div class="device-picker"><paper-dropdown-menu label="[[label]]" class="flex" disabled="[[!entities.length]]"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="form-container"><template is="dom-if" if="[[computeShowPlaceholder(formState)]]"><div class="form-placeholder"><template is="dom-if" if="[[computeShowNoDevices(formState)]]">No entities found! :-(</template><template is="dom-if" if="[[computeShowSpinner(formState)]]"><paper-spinner active="" alt="[[formState]]"></paper-spinner>[[formState]]</template></div></template><div hidden$="[[!computeShowForm(formState)]]" id="form"></div></div></div><div class="card-actions"><paper-button on-click="saveEntity" disabled="[[computeShowPlaceholder(formState)]]">SAVE</paper-button><template is="dom-if" if="[[allowDelete]]"><paper-button class="warning" on-click="deleteEntity" disabled="[[computeShowPlaceholder(formState)]]">DELETE</paper-button></template></div></paper-card></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},HaEntityConfig=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"connectedCallback",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this),this.formEl=document.createElement(this.config.component),this.formEl.hass=this.hass,this.$.form.appendChild(this.formEl),this.entityChanged(this.selectedEntity)}},{key:"computeSelectCaption",value:function(e){return this.config.computeSelectCaption?this.config.computeSelectCaption(e):window.hassUtil.computeStateName(e)}},{key:"computeShowNoDevices",value:function(e){return"no-devices"===e}},{key:"computeShowSpinner",value:function(e){return"loading"===e||"saving"===e}},{key:"computeShowPlaceholder",value:function(e){return"editing"!==e}},{key:"computeShowForm",value:function(e){return"editing"===e}},{key:"hassChanged",value:function(e){this.formEl&&(this.formEl.hass=e)}},{key:"entitiesChanged",value:function(e,t){if(0!==e.length)if(t){var n=t[this.selectedEntity].entity_id,i=e.findIndex(function(e){return e.entity_id===n});-1===i?this.selectedEntity=0:i!==this.selectedEntity&&(this.selectedEntity=i)}else this.selectedEntity=0;else this.formState="no-devices"}},{key:"entityChanged",value:function(e){if(this.entities&&this.formEl){var t=this.entities[e];if(t){this.formState="loading";var n=this;this.formEl.loadEntity(t).then(function(){n.formState="editing"})}}}},{key:"saveEntity",value:function(){this.formState="saving";var e=this;this.formEl.saveEntity().then(function(){e.formState="editing"})}}],[{key:"is",get:function(){return"ha-entity-config"}},{key:"properties",get:function(){return{hass:{type:Object,observer:"hassChanged"},label:{type:String,value:"Device"},entities:{type:Array,observer:"entitiesChanged"},allowDelete:{type:Boolean,value:!1},selectedEntity:{type:Number,value:-1,observer:"entityChanged"},formState:{type:String,value:"no-devices"},config:{type:Object}}}}]),t}();customElements.define(HaEntityConfig.is,HaEntityConfig);</script><dom-module id="ha-config-customize" assetpath="customize/"><template><style include="ha-style"></style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-click="_backTapped"></paper-icon-button><div main-title="">[[localize('ui.panel.config.customize.caption')]]</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section is-wide="[[isWide]]"><span slot="header">Customization</span> <span slot="introduction">Tweak per-entity attributes.<br>Added/edited customizations will take effect immediately. Removed customizations will take effect when the entity is updated.</span><ha-entity-config hass="[[hass]]" label="Entity" entities="[[entities]]" config="[[entityConfig]]"></ha-entity-config></ha-config-section></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaConfigCustomize=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,[{key:"computeClasses",value:function(e){return e?"content":"content narrow"}},{key:"_backTapped",value:function(){history.back()}},{key:"computeEntities",value:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).sort(window.hassUtil.sortByName)}}],[{key:"is",get:function(){return"ha-config-customize"}},{key:"properties",get:function(){return{hass:Object,isWide:Boolean,entities:{type:Array,computed:"computeEntities(hass)"},entityConfig:{type:Object,value:{component:"ha-form-customize",computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" ("+window.hassUtil.computeDomain(e)+")"}}}}}}]),t}();customElements.define(HaConfigCustomize.is,HaConfigCustomize);</script><dom-module id="ha-form" assetpath="config-entries/"><template><style>.error{color:red;}</style><template is="dom-if" if="[[_isArray(schema)]]" restamp=""><template is="dom-repeat" items="[[schema]]"><ha-form data="[[_getValue(data, item)]]" schema="[[item]]" error="[[_getValue(error, item)]]" on-data-changed="_valueChanged"></ha-form></template></template><template is="dom-if" if="[[!_isArray(schema)]]" restamp=""><template is="dom-if" if="[[error]]"><div class="error">[[error]]</div></template><template is="dom-if" if="[[_equals(schema.type, &quot;string&quot;)]]" restamp=""><paper-input label="[[schema.name]]" value="{{data}}"></paper-input></template><template is="dom-if" if="[[_equals(schema.type, &quot;integer&quot;)]]" restamp=""><template is="dom-if" if="[[_isRange(schema)]]" restamp=""><div>[[schema.name]]<paper-slider pin="" value="{{data}}" min="[[schema.valueMin]]" max="[[schema.valueMax]]"></paper-slider></div></template><template is="dom-if" if="[[!_isRange(schema)]]" restamp=""><paper-input label="[[schema.name]]" value="{{data}}" type="number"></paper-input></template></template><template is="dom-if" if="[[_equals(schema.type, &quot;float&quot;)]]" restamp=""><paper-input label="[[schema.name]]" value="{{data}}"></paper-input></template><template is="dom-if" if="[[_equals(schema.type, &quot;boolean&quot;)]]" restamp=""><paper-checkbox checked="{{data}}">[[schema.name]]</paper-checkbox></template><template is="dom-if" if="[[_equals(schema.type, &quot;select&quot;)]]" restamp=""><paper-dropdown-menu label="[[schema.name]]"><paper-listbox slot="dropdown-content" attr-for-selected="item-name" selected="{{data}}"><template is="dom-repeat" items="[[schema.options]]"><paper-item item-name="[[item]]">[[item]]</paper-item></template></paper-listbox></paper-dropdown-menu></template></template></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),HaForm=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"_isArray",value:function(e){return Array.isArray(e)}},{key:"_isRange",value:function(e){return"valueMin"in e&&"valueMax"in e}},{key:"_equals",value:function(e,t){return e===t}},{key:"_getValue",value:function(e,t){return e[t.name]}},{key:"_valueChanged",value:function(e){this.set(["data",e.model.item.name],e.detail.value)}}],[{key:"is",get:function(){return"ha-form"}},{key:"properties",get:function(){return{data:{type:Object,notify:!0},schema:Object,error:Object}}}]),t}();customElements.define(HaForm.is,HaForm);</script><dom-module id="ha-config-flow" assetpath="config-entries/"><template><style include="ha-style-dialog">.error{color:red;}paper-dialog{max-width:500px;}ha-markdown img:first-child:last-child{display:block;margin:0 auto;}</style><paper-dialog id="dialog" with-backdrop="" opened="[[step]]" on-opened-changed="_openedChanged"><h2><template is="dom-if" if="[[_equals(step.type, &quot;abort&quot;)]]">Aborted</template><template is="dom-if" if="[[_equals(step.type, &quot;create_entry&quot;)]]">Success!</template><template is="dom-if" if="[[_equals(step.type, &quot;form&quot;)]]">[[step.title]]</template></h2><paper-dialog-scrollable><template is="dom-if" if="[[!step]]">Loading flow.</template><template is="dom-if" if="[[step]]"><template is="dom-if" if="[[_equals(step.type, &quot;abort&quot;)]]"><p>[[step.reason]]</p></template><template is="dom-if" if="[[_equals(step.type, &quot;create_entry&quot;)]]"><p>Created config for [[step.title]]</p></template><template is="dom-if" if="[[_equals(step.type, &quot;form&quot;)]]"><template is="dom-if" if="[[step.description]]"><ha-markdown content="[[step.description]]"></ha-markdown></template><template is="dom-if" if="[[step.errors.base]]"><div class="error">[[step.errors.base]]</div></template><ha-form data="{{stepData}}" schema="[[step.data_schema]]" error="[[step.errors]]"></ha-form></template></template></paper-dialog-scrollable><div class="buttons"><template is="dom-if" if="[[_equals(step.type, &quot;abort&quot;)]]"><paper-button on-click="_flowDone">Close</paper-button></template><template is="dom-if" if="[[_equals(step.type, &quot;create_entry&quot;)]]"><paper-button on-click="_flowDone">Close</paper-button></template><template is="dom-if" if="[[_equals(step.type, &quot;form&quot;)]]"><paper-button on-click="_submitStep">Submit</paper-button></template></div></paper-dialog></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_get=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(o)},HaConfigFlow=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.addEventListener("keypress",function(t){13===t.keyCode&&e._submitStep()}),this.$.dialog.addEventListener("iron-overlay-opened",function(e){e.target.withBackdrop&&e.target.parentNode.insertBefore(e.target.backdropElement,e.target)})}},{key:"_flowIdChanged",value:function(e){var t=this;e?this.step?this._processStep(this.step):this.hass.callApi("get","config/config_entries/flow/"+e).then(function(e){t._processStep(e),setTimeout(function(){return t.$.dialog.center()},0)}):this.setProperties({step:null,stepData:{}})}},{key:"_submitStep",value:function(){var e=this;this.hass.callApi("post","config/config_entries/flow/"+this.flowId,this.stepData).then(function(t){return e._processStep(t)})}},{key:"_processStep",value:function(e){e.errors||(e.errors={}),this.step=e,0===Object.keys(e.errors).length&&(this.stepData={})}},{key:"_flowDone",value:function(){this.fire("flow-closed",{flowFinished:!0})}},{key:"_equals",value:function(e,t){return e===t}},{key:"_openedChanged",value:function(e){this.step&&!e.detail.value&&this.fire("flow-closed",{flowFinished:["success","abort"].includes(this.step.type)})}}],[{key:"is",get:function(){return"ha-config-flow"}},{key:"properties",get:function(){return{hass:Object,step:{type:Object,notify:!0},flowId:{type:String,observer:"_flowIdChanged"},stepData:Object}}}]),t}();customElements.define(HaConfigFlow.is,HaConfigFlow);</script><dom-module id="ha-config-entries" assetpath="config-entries/"><template><style include="iron-flex ha-style">.content{padding:8px;}.entries{margin:0 -4px;}.entries paper-card{margin:4px;}</style><hass-subpage title="Integrations"><div class="content"><h1>Configured</h1><template is="dom-if" if="[[!_entries.length]]"><i>Nothing configured.</i></template><div class="entries layout horizontal wrap"><template is="dom-repeat" items="[[_entries]]"><paper-card heading="[[item.title]]"><div class="card-content">Integration: [[item.domain]]<br>State: [[item.state]]<br>Added by: [[item.source]]</div><div class="card-actions"><paper-button on-click="_removeEntry">Remove</paper-button></div></paper-card></template></div><template is="dom-if" if="[[_progress.length]]"><h1>To be finished</h1><div class="entries layout horizontal wrap"><template is="dom-repeat" items="[[_progress]]"><paper-card heading="[[item.domain]]"><div class="card-actions"><paper-button on-click="_continueFlow">Configure</paper-button></div></paper-card></template></div></template><h1>Add integration</h1><div class="entries layout horizontal wrap"><template is="dom-repeat" items="[[_handlers]]"><paper-card heading="[[item]]"><div class="card-actions"><paper-button on-click="_createFlow">Configure</paper-button></div></paper-card></template></div></div></hass-subpage><ha-config-flow hass="[[hass]]" flow-id="[[_flowId]]" step="{{_flowStep}}" on-flow-closed="_flowClose"></ha-config-flow></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},HaConfigManager=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this._loadData()}},{key:"_createFlow",value:function(e){var t=this;this.hass.callApi("post","config/config_entries/flow",{domain:e.model.item}).then(function(e){t._userCreatedFlow=!0,t.setProperties({_flowStep:e,_flowId:e.flow_id})})}},{key:"_continueFlow",value:function(e){this._userCreatedFlow=!1,this.setProperties({_flowId:e.model.item.flow_id,_flowStep:null})}},{key:"_removeEntry",value:function(e){var t=this;if(confirm("Are you sure you want to delete this integration?")){var n=e.model.item.entry_id;this.hass.callApi("delete","config/config_entries/entry/"+n).then(function(e){t._entries=t._entries.filter(function(e){return e.entry_id!==n}),e.require_restart&&alert("Restart Home Assistant to finish removing this integration")})}}},{key:"_flowClose",value:function(e){e.detail.flowFinished?this._loadData():this._userCreatedFlow&&this.hass.callApi("delete","config/config_entries/flow/"+this._flowId),this._flowId=null}},{key:"_loadData",value:function(){var e=this;this._loadEntries(),this._loadDiscovery(),this.hass.callApi("get","config/config_entries/flow_handlers").then(function(t){e._handlers=t})}},{key:"_loadEntries",value:function(){var e=this;this.hass.callApi("get","config/config_entries/entry").then(function(t){e._entries=t})}},{key:"_loadDiscovery",value:function(){var e=this;this.hass.callApi("get","config/config_entries/flow").then(function(t){e._progress=t})}}],[{key:"is",get:function(){return"ha-config-entries"}},{key:"properties",get:function(){return{hass:Object,_flowId:{type:String,value:null},_flowStep:Object,_entries:Array,_progress:Array,_handlers:Array}}}]),t}();customElements.define(HaConfigManager.is,HaConfigManager);</script></div><dom-module id="ha-panel-config"><template><app-route route="[[route]]" pattern="/:page" data="{{_routeData}}"></app-route><iron-media-query query="(min-width: 1040px)" query-matches="{{wide}}"></iron-media-query><iron-media-query query="(min-width: 1296px)" query-matches="{{wideSidebar}}"></iron-media-query><template is="dom-if" if="[[_equals(_routeData.page, &quot;core&quot;)]]" restamp=""><ha-config-core page-name="core" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-core></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;cloud&quot;)]]" restamp=""><ha-config-cloud page-name="cloud" route="[[route]]" hass="[[hass]]" is-wide="[[isWide]]" account="[[account]]"></ha-config-cloud></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;dashboard&quot;)]]"><ha-config-dashboard page-name="dashboard" hass="[[hass]]" is-wide="[[isWide]]" account="[[account]]" narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-config-dashboard></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;automation&quot;)]]" restamp=""><ha-config-automation page-name="automation" route="[[route]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-automation></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;script&quot;)]]" restamp=""><ha-config-script page-name="script" route="[[route]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-script></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;zwave&quot;)]]" restamp=""><ha-config-zwave page-name="zwave" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-zwave></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;customize&quot;)]]" restamp=""><ha-config-customize page-name="customize" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-customize></template><template is="dom-if" if="[[_equals(_routeData.page, &quot;integrations&quot;)]]" restamp=""><ha-config-entries page-name="integrations" hass="[[hass]]"></ha-config-entries></template></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_get=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},HaPanelConfig=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.NavigateMixin(Polymer.Element)),_createClass(t,[{key:"ready",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),window.hassUtil.isComponentLoaded(this.hass,"cloud")&&this.hass.callApi("get","cloud/account").then(function(t){e.account=t}),this.addEventListener("ha-account-refreshed",function(t){e.account=t.detail.account})}},{key:"computeIsWide",value:function(e,t,n){return e?t:n}},{key:"_routeChanged",value:function(e){""===e.path&&"/config"===e.prefix&&this.navigate("/config/dashboard",!0)}},{key:"_equals",value:function(e,t){return e===t}}],[{key:"is",get:function(){return"ha-panel-config"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,account:Object,route:{type:Object,observer:"_routeChanged"},_routeData:Object,wide:Boolean,wideSidebar:Boolean,isWide:{type:Boolean,computed:"computeIsWide(showMenu, wideSidebar, wide)"}}}}]),t}();customElements.define(HaPanelConfig.is,HaPanelConfig);</script></body></html>
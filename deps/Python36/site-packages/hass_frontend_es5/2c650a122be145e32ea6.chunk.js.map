{"version":3,"sources":["webpack:///./src/components/ha-paper-slider.js","webpack:///./src/components/ha-form.js","webpack:///./src/components/entity/ha-entity-picker.js","webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/util/hass-attributes-util.js","webpack:///./src/components/ha-combo-box.js","webpack:///./src/components/ha-service-picker.js","webpack:///./src/panels/config/ha-form-style.js","webpack:///./src/layouts/hass-error-screen.js","webpack:///./src/panels/config/ha-config-section.js","webpack:///./src/panels/config/js/json_textarea.js","webpack:///./src/common/preact/event.js","webpack:///./src/panels/config/js/trigger/event.js","webpack:///./src/panels/config/js/trigger/homeassistant.js","webpack:///./src/panels/config/js/trigger/mqtt.js","webpack:///./src/panels/config/js/trigger/numeric_state.js","webpack:///./src/panels/config/js/trigger/state.js","webpack:///./src/panels/config/js/trigger/sun.js","webpack:///./src/panels/config/js/trigger/template.js","webpack:///./src/panels/config/js/trigger/time.js","webpack:///./src/common/entity/has_location.js","webpack:///./src/panels/config/js/trigger/zone.js","webpack:///./src/panels/config/js/trigger/trigger_edit.js","webpack:///./src/panels/config/js/trigger/trigger_row.js","webpack:///./src/panels/config/js/trigger/index.js","webpack:///./src/panels/config/js/condition/numeric_state.js","webpack:///./src/panels/config/js/condition/state.js","webpack:///./src/panels/config/js/condition/sun.js","webpack:///./src/panels/config/js/condition/template.js","webpack:///./src/panels/config/js/condition/time.js","webpack:///./src/panels/config/js/condition/zone.js","webpack:///./src/panels/config/js/condition/condition_edit.js","webpack:///./src/panels/config/js/condition/condition_row.js","webpack:///./src/panels/config/js/condition/index.js","webpack:///./src/panels/config/js/script/call_service.js","webpack:///./src/panels/config/js/script/condition.js","webpack:///./src/panels/config/js/script/delay.js","webpack:///./src/panels/config/js/script/event.js","webpack:///./src/panels/config/js/script/wait.js","webpack:///./src/panels/config/js/script/action_edit.js","webpack:///./src/panels/config/js/script/action_row.js","webpack:///./src/panels/config/js/script/index.js","webpack:///./src/panels/config/js/automation.js","webpack:///./src/common/preact/unmount.js","webpack:///./src/panels/config/automation/ha-automation-editor.js","webpack:///./src/panels/config/automation/ha-automation-picker.js","webpack:///./src/panels/config/automation/ha-config-automation.js","webpack:///./src/components/buttons/ha-call-api-button.js","webpack:///./src/layouts/hass-subpage.js","webpack:///./src/panels/config/cloud/ha-config-cloud-account.js","webpack:///./src/panels/config/cloud/ha-config-cloud-forgot-password.js","webpack:///./src/panels/config/cloud/ha-config-cloud-login.js","webpack:///./src/panels/config/cloud/ha-config-cloud-register.js","webpack:///./src/panels/config/cloud/ha-config-cloud.js","webpack:///./src/panels/config/config-entries/ha-config-flow.js","webpack:///./src/panels/config/config-entries/ha-config-entries.js","webpack:///./src/panels/config/core/ha-config-section-core.js","webpack:///./src/components/ha-push-notifications-toggle.js","webpack:///./src/panels/config/core/ha-config-section-push-notifications.js","webpack:///./src/panels/config/core/ha-config-section-themes.js","webpack:///./src/panels/config/core/ha-config-section-translation.js","webpack:///./src/panels/config/core/ha-config-core.js","webpack:///./src/panels/config/ha-entity-config.js","webpack:///./src/panels/config/customize/types/ha-customize-array.js","webpack:///./src/panels/config/customize/types/ha-customize-boolean.js","webpack:///./src/panels/config/customize/types/ha-customize-icon.js","webpack:///./src/panels/config/customize/types/ha-customize-key-value.js","webpack:///./src/panels/config/customize/types/ha-customize-string.js","webpack:///./src/panels/config/customize/ha-customize-attribute.js","webpack:///./src/panels/config/customize/ha-form-customize-attributes.js","webpack:///./src/panels/config/customize/ha-form-customize.js","webpack:///./src/common/entity/states_sort_by_name.js","webpack:///./src/panels/config/customize/ha-config-customize.js","webpack:///./src/panels/config/dashboard/ha-config-cloud-menu.js","webpack:///./src/panels/config/dashboard/ha-config-entries-menu.js","webpack:///./src/panels/config/dashboard/ha-config-navigation.js","webpack:///./src/panels/config/dashboard/ha-config-dashboard.js","webpack:///./src/panels/config/js/script.js","webpack:///./src/panels/config/script/ha-script-editor.js","webpack:///./src/panels/config/script/ha-script-picker.js","webpack:///./src/panels/config/script/ha-config-script.js","webpack:///./src/components/ha-service-description.js","webpack:///./src/panels/config/zwave/zwave-groups.js","webpack:///./src/panels/config/zwave/zwave-log.js","webpack:///./src/panels/config/zwave/zwave-network.js","webpack:///./src/panels/config/zwave/zwave-node-config.js","webpack:///./src/panels/config/zwave/zwave-node-information.js","webpack:///./src/panels/config/zwave/zwave-usercodes.js","webpack:///./src/panels/config/zwave/zwave-values.js","webpack:///./src/panels/config/zwave/ha-config-zwave.js","webpack:///./src/panels/config/ha-panel-config.js"],"names":["PaperSliderClass","customElements","get","HaPaperSlider","tpl","document","createElement","innerHTML","template","styleEl","content","querySelector","setAttribute","define","HaForm","Object","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_8__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_6__","_createClass","key","value","val","Array","isArray","schema","a","b","obj","item","name","ev","this","set","model","detail","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__","_templateObject","data","type","notify","error","computeLabel","Function","computeError","HaEntityPicker","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_10__","_mixins_localize_mixin_js__WEBPACK_IMPORTED_MODULE_9__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_5__","label","localize","hass","domainFilter","entityFilter","entityIds","keys","states","filter","eid","substr","indexOf","entities","sort","map","state","_common_entity_compute_state_name_js__WEBPACK_IMPORTED_MODULE_8__","newVal","_hass","opened","stopPropagation","fire","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_4__","allowCustomEntity","Boolean","observer","_states","computed","autofocus","String","disabled","HaCallServiceButton","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_1__","progress","el","eventData","domain","service","serviceData","callService","then","$","actionSuccess","success","actionError","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_0__","HaProgressButton","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_3__","className","classList","container","add","setTimeout","remove","_this2","prototype","__proto__","getPrototypeOf","call","addEventListener","buttonTapped","tempClass","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","hassAttributeUtil","binary_sensor","cover","sensor","string","json","icon","boolean","array","key-value","LOGIC_STATE_ATTRIBUTES","entity_picture","friendly_name","description","emulated_hue","domains","emulated_hue_name","haaska_hidden","haaska_name","homebridge_hidden","homebridge_name","supported_features","attribution","custom_ui_more_info","custom_ui_state_card","device_class","options","DOMAIN_DEVICE_CLASS","hidden","assumed_state","initial_state","unit_of_measurement","__webpack_exports__","200","module","__webpack_require__","strings","raw","html_tag","polymer_element","events_mixin","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","freeze","ha_combo_box_HaComboBox","HaComboBox","_items","items","itemLabelPath","allowCustomValue","itemValuePath","ha_service_picker_HaServicePicker","localize_mixin","ha_service_picker_createClass","HaServicePicker","oldHass","config","services","result","forEach","push","_services","ha_service_picker_templateObject","documentContainer","head","appendChild","hass_error_screen_HassErrorScreen","HassErrorScreen","history","back","title","ha_config_section_HaConfigSection","ha_config_section_createClass","HaConfigSection","isWide","classes","ha_config_section_templateObject","narrow","showMenu","JSONTextArea","_this","isValid","JSON","stringify","onChange","bind","preact_esm","json_textarea_createClass","parsed","parse","err","setState","_ref","_ref2","_ref3","style","minWidth","width","border","onvalue-changed","onChangeEvent","prop","origData","assign","index","event_EventTrigger","EventTrigger","eventDataChanged","event_createClass","event_data","trigger","event_type","json_textarea","defaultConfig","homeassistant_HassTrigger","HassTrigger","radioGroupPicked","homeassistant_createClass","event","selected","id","aria-labelledby","onpaper-radio-group-changed","homeassistant","mqtt_createClass","mqtt_MQTTTrigger","MQTTTrigger","topic","payload","numeric_state_createClass","numeric_state_NumericStateTrigger","NumericStateTrigger","entityPicked","entity_id","value_template","below","above","state_createClass","state_StateTrigger","StateTrigger","to","trgFrom","from","trgFor","for","trigger_state","sun_createClass","sun_SunTrigger","SunTrigger","offset","template_createClass","template_TemplateTrigger","TemplateTrigger","time_createClass","time_TimeTrigger","TimeTrigger","at","hasLocation","stateObj","attributes","compute_state_domain","zone_createClass","zoneAndLocationFilter","zone_ZoneTrigger","ZoneTrigger","zonePicked","zone","trigger_zone","trigger_edit_createClass","TYPES","trigger_event","mqtt","numeric_state","sun","time","OPTIONS","TriggerEdit","typeChanged","selectedItem","platform","Comp","no-animations","slot","oniron-select","opt","trigger_row_createClass","trigger_row","_Component","TriggerRow","onDelete","confirm","class","horizontal-align","horizontal-offset","vertical-offset","onTap","trigger_edit","Trigger","addTrigger","triggerChanged","trigger_createClass","concat","newValue","splice","trg","idx","condition_numeric_state_createClass","numeric_state_NumericStateCondition","NumericStateCondition","condition","condition_state_createClass","state_StateCondition","StateCondition","cndFor","condition_state","condition_sun_createClass","sun_SunCondition","SunCondition","afterPicked","beforePicked","after","after_offset","before","before_offset","allow-empty-selection","template_TemplateCondition","TemplateCondition","condition_template_createClass","condition_time_createClass","time_TimeCondition","TimeCondition","zone_zoneAndLocationFilter","zone_ZoneCondition","ZoneCondition","condition_zone_createClass","condition_zone","condition_edit_createClass","condition_edit_TYPES","condition_numeric_state","condition_sun","condition_template","condition_time","condition_edit_OPTIONS","ConditionRow","condition_row_createClass","condition_row","condition_edit","Condition","addCondition","conditionChanged","condition_createClass","cnd","call_service_createClass","call_service_CallServiceAction","CallServiceAction","serviceChanged","serviceDataChanged","action","alias","condition_ConditionAction","script_condition_createClass","ConditionAction","delay_DelayAction","DelayAction","delay_createClass","delay","script_event_createClass","event_EventAction","EventAction","wait_WaitAction","WaitAction","onTemplateChange","wait_createClass","wait_template","timeout","action_edit_createClass","action_edit_TYPES","call_service","script_delay","wait","script_condition","script_event","action_edit_OPTIONS","getType","action_edit","Action","newType","action_row_createClass","action_row","Script","addAction","actionChanged","script_createClass","script","act","automation_createClass","js_automation","Automation","automation","is-wide","js_trigger","js_condition","js_script","unmount","mountEl","c","ha_automation_editor_HaAutomationEditor","navigate_mixin","ha_automation_editor_createClass","HaAutomationEditor","configChanged","_get","_rendered","errors","dirty","_updateComponent","oldVal","callApi","automationChanged","_this3","_renderScheduled","Promise","resolve","mergeEl","root","creatingNew","Date","now","navigate","body","message","compute_state_name","ha_automation_editor_templateObject","ha_automation_picker_HaAutomationPicker","ha_automation_picker_createClass","HaAutomationPicker","automations","ha_automation_picker_templateObject","ha_config_automation_HaConfigAutomation","ha_config_automation_createClass","HaConfigAutomation","edittingAddon","routeData","entity","entityA","entityB","nameA","toLowerCase","nameB","_edittingAutomation","_creatingNew","ha_config_automation_templateObject","route","_routeData","_routeMatches","showEditor","ha_call_api_button_HaCallApiButton","ha_call_api_button_createClass","HaCallApiButton","method","path","resp","response","ha_call_api_button_templateObject","hass_subpage_HassSubpage","hass_subpage_createClass","HassSubpage","hass_subpage_templateObject","header","ha_config_cloud_account_HaConfigCloudAccount","ha_config_cloud_account_createClass","HaConfigCloudAccount","account","date","format_date_time","newAccount","cloud","_accountUpdater","clearTimeout","ha_config_cloud_account_templateObject","ha_config_cloud_forgot_password_HaConfigCloudForgotPassword","ha_config_cloud_forgot_password_createClass","HaConfigCloudForgotPassword","_error","email","invalid","keyCode","_handleEmailPasswordReset","preventDefault","includes","_requestInProgress","flashMessage","setProperties","ha_config_cloud_forgot_password_templateObject","ha_config_cloud_login_HaConfigCloudLogin","ha_config_cloud_login_createClass","HaConfigCloudLogin","requestAnimationFrame","flashRipple","simulatedRipple","password","_handleLogin","focus","_password","errCode","code","alert","_this4","ha_config_cloud_login_templateObject","ha_config_cloud_register_HaConfigCloudRegister","ha_config_cloud_register_createClass","HaConfigCloudRegister","_handleRegister","_verificationEmailSent","ha_config_cloud_register_templateObject","LOGGED_IN_URLS","NOT_LOGGED_IN_URLS","ha_config_cloud_HaConfigCloud","ha_config_cloud_createClass","HaConfigCloud","_flashMessage","_debouncer","debounce","utils_async","timeOut","ha_config_cloud_templateObject","loadingAccount","_routeTail","_loginEmail","ha_config_flow_HaConfigFlow","ha_config_flow_createClass","HaConfigFlow","_submitStep","dialog","withBackdrop","parentNode","insertBefore","backdropElement","flowId","step","_processStep","center","stepData","flowFinished","handler","reason","step_id","ha_config_flow_templateObject","ha_config_entries_HaConfigManager","ha_config_entries_createClass","HaConfigManager","object","property","receiver","desc","getOwnPropertyDescriptor","parent","getter","_loadData","flow","_userCreatedFlow","_flowStep","_flowId","flow_id","entryId","entry_id","_entries","entry","require_restart","_loadEntries","_loadDiscovery","handlers","_handlers","_this5","entries","_this6","_progress","integration","ha_config_entries_templateObject","ha_config_section_core_HaConfigSectionCore","ha_config_section_core_createClass","HaConfigSectionCore","is_component_loaded","validating","validateLog","ha_config_section_core_templateObject","ha_push_notifications_toggle_HaPushNotificationsToggle","ha_push_notifications_toggle_createClass","HaPushNotificationsToggle","pushSupported","navigator","serviceWorker","ready","reg","pushManager","getSubscription","subscription","loading","pushChecked","_setPushSupported","subscribePushNotifications","unsubscribePushNotifications","subscribe","userVisibleOnly","sub","browserName","userAgent","browser","console","unsubscribe","catch","ha_push_notifications_toggle_templateObject","readOnly","window","location","protocol","hostname","Notification","permission","ha_config_section_push_notifications_HaConfigSectionPushNotifications","ha_config_section_push_notifications_createClass","HaConfigSectionPushNotifications","ha_config_section_push_notifications_templateObject","ha_config_section_themes_HaConfigSectionThemes","ha_config_section_themes_createClass","HaConfigSectionThemes","selectedTheme","themes","selection","ha_config_section_themes_templateObject","Number","ha_config_section_translation_HaConfigSectionTranslation","ha_config_section_translation_createClass","HaConfigSectionTranslation","translationMetadata","translations","tag","nativeName","language","languageSelection","ha_config_section_translation_templateObject","languages","ha_config_core_HaConfigCore","ha_config_core_createClass","HaConfigCore","ha_config_core_templateObject","ha_entity_config_HaEntityConfig","ha_entity_config_createClass","HaEntityConfig","formEl","component","form","entityChanged","selectedEntity","computeSelectCaption","formState","oldEntities","oldEntityId","newIndex","findIndex","ent","loadEntity","saveEntity","ha_entity_config_templateObject","allowDelete","ha_customize_array_HaCustomizeArray","ha_customize_array_createClass","HaCustomizeArray","getOptions","ha_customize_array_templateObject","notifies","ha_customize_boolean_HaCustomizeBoolean","ha_customize_boolean_createClass","HaCustomizeBoolean","ha_customize_boolean_templateObject","ha_customize_icon_HaCustomizeIcon","ha_customize_icon_createClass","HaCustomizeIcon","ha_customize_icon_templateObject","ha_customize_key_value_HaCustomizeKeyValue","ha_customize_key_value_createClass","HaCustomizeKeyValue","ha_customize_key_value_templateObject","ha_customize_string_HaCustomizeString","ha_customize_string_createClass","HaCustomizeString","ha_customize_string_templateObject","ha_customize_attribute_HaCustomizeAttribute","ha_customize_attribute_createClass","HaCustomizeAttribute","secondary","closed","wrapper","hass_attributes_util","TYPE_TO_TAG","toUpperCase","child","lastChild","tagName","removeChild","ha_customize_attribute_templateObject","ha_form_customize_attributes_HaFormCustomizeAttributes","mutable_data","ha_form_customize_attributes_createClass","HaFormCustomizeAttributes","ha_form_customize_attributes_templateObject","ha_form_customize_HaFormCustomize","ha_form_customize_createClass","HaFormCustomize","attribute","localConfig","local","globalConfig","global","newAttributes","localAttributes","globalAttributes","existingAttributes","attr","objectId","UNKNOWN_TYPE","_initOpenObject","_computeSingleAttribute","localKeys","_computeAttributes","globalKeys","entityKeys","some","every","conf","filterFromAttributes","option","newAttributesOptions","ADD_TYPE","selectedNewAttribute","hasLocalAttributes","hasGlobalAttributes","hasExistingAttributes","hasNewAttributes","getNewAttributesOptions","ha_form_customize_templateObject","sortStatesByName","ha_config_customize_HaConfigCustomize","ha_config_customize_createClass","HaConfigCustomize","ha_config_customize_templateObject","entityConfig","ha_config_cloud_menu_HaConfigCloudMenu","ha_config_cloud_menu_createClass","HaConfigCloudMenu","ha_config_cloud_menu_templateObject","ha_config_entries_menu_HaConfigEntriesMenu","ha_config_entries_menu_createClass","HaConfigEntriesMenu","ha_config_entries_menu_templateObject","CORE_PAGES","ha_config_navigation_HaConfigNavigation","ha_config_navigation_createClass","HaConfigNavigation","page","ha_config_navigation_templateObject","pages","ha_config_dashboard_HaConfigDashboard","ha_config_dashboard_createClass","HaConfigDashboard","ha_config_dashboard_templateObject","ScriptEditor","sequenceChanged","js_script_createClass","sequence","href","ha_script_editor_HaScriptEditor","ha_script_editor_createClass","HaScriptEditor","ha_script_editor_get","compute_object_id","scriptChanged","config_js_script","ha_script_editor_templateObject","ha_script_picker_HaScriptPicker","ha_script_picker_createClass","HaScriptPicker","scripts","ha_script_picker_templateObject","ha_config_script_HaConfigScript","ha_config_script_createClass","HaConfigScript","_edittingScript","ha_config_script_templateObject","ha_service_description_HaServiceDescription","ha_service_description_createClass","HaServiceDescription","domainServices","serviceObject","ha_service_description_templateObject","zwave_groups_ZwaveGroups","zwave_groups_createClass","ZwaveGroups","serviceCalled","foo","refreshGroups","selectedNode","selectedGroup","maxAssociations","otherGroupNodes","groups","max_associations","associations","values","association_instances","assoc","instance","node","nodes","find","n","node_id","caption","selectedTargetNode","query_stage","association","target_node_id","group","groupData","selectedGroupChanged","zwave_groups_templateObject","noAssociationsLeft","zwave_log_OzwLog","zwave_log_createClass","OzwLog","ozwLogs","numLogLines","info","zwave_log_templateObject","zwave_network_ZwaveNetwork","zwave_network_createClass","ZwaveNetwork","showDescription","zwave_network_templateObject","zwave_node_config_ZwaveNodeConfig","zwave_node_config_createClass","ZwaveNodeConfig","refreshConfig","wakeupNode","wake_up_interval","wakeupInput","selectedConfigParameter","help","selectedConfigValue","valueData","selectedConfigParameterType","parseInt","selectedConfigParameterValues","parameter","loadedConfigValue","configParameterMax","max","configParameterMin","min","configValueHelpText","selectedConfigParameterNumValues","data_items","configData","selectedConfigParameterChanged","zwave_node_config_templateObject","zwave_node_information_ZwaveNodeInformation","zwave_node_information_createClass","ZwaveNodeInformation","nodeAttrs","att","selectedNodeAttrs","zwave_node_information_templateObject","nodeInfoActive","zwave_usercodes_ZwaveUsercodes","zwave_usercodes_createClass","ZwaveUsercodes","refreshUserCodes","selectedUserCode","userCodes","userCodeMaxLen","selectedUserCodeValue","a2hex","computedCodeOutput","hex2a","code_slot","usercode","usercodes","selectedUserCodeChanged","str","arr","output","l","hex","charCodeAt","toString","join","hexx","hexMod","replace","fromCharCode","zwave_usercodes_templateObject","zwave_values_ZwaveValues","zwave_values_createClass","ZwaveValues","refreshValues","selectedValue","selectedValueChanged","newValueNameInput","value_id","entityIgnored","ignored","entityPollingIntensity","poll_intensity","zwave_values_templateObject","ha_config_zwave_HaConfigZwave","ha_config_zwave_createClass","HaConfigZwave","match","nodeid","newNodeNameInput","selectedConfigParameterValue","configs","_objToArray","hasNodeUserCodes","notifyPath","valueId","valueIndex","entityAttrs","return_routes","node_name","polling_intensity","showHelp","ha_config_zwave_templateObject","entityInfoActive","selectedEntityAttrs","ha_panel_config_HaPanelConfig","ha_panel_config_createClass","HaPanelConfig","wideSidebar","wide","prefix","ha_panel_config_templateObject"],"mappings":"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","file":"2c650a122be145e32ea6.chunk.js","sourcesContent":["import '@polymer/paper-slider/paper-slider.js';\n\n/**\n* @polymer\n* @customElement\n* @appliesMixin paper-slider\n*/\nconst PaperSliderClass = customElements.get('paper-slider');\n\nclass HaPaperSlider extends PaperSliderClass {\n  static get template() {\n    const tpl = document.createElement('template');\n    tpl.innerHTML = PaperSliderClass.template.innerHTML;\n    const styleEl = tpl.content.querySelector('style');\n    styleEl.setAttribute('include', 'paper-slider');\n    styleEl.innerHTML = `\n      .pin > .slider-knob > .slider-knob-inner {\n        font-size:  var(--ha-paper-slider-pin-font-size, 10px);\n        line-height: normal;\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::before {\n        top: unset;\n        margin-left: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        width: 2.2em;\n        height: 2.2em;\n\n        -webkit-transform-origin: left bottom;\n        transform-origin: left bottom;\n        -webkit-transform: rotate(-45deg) scale(0) translate(0);\n        transform: rotate(-45deg) scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::before {\n        -webkit-transform: rotate(-45deg) scale(1) translate(7px, -7px);\n        transform: rotate(-45deg) scale(1) translate(7px, -7px);\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::after {\n        top: unset;\n        font-size: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        margin-left: -1.1em;\n        width: 2.2em;\n        height: 2.1em;\n\n        -webkit-transform-origin: center bottom;\n        transform-origin: center bottom;\n        -webkit-transform: scale(0) translate(0);\n        transform: scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -10px);\n        transform: scale(1) translate(0, -10px);\n      }\n    `;\n    return tpl;\n  }\n}\ncustomElements.define('ha-paper-slider', HaPaperSlider);\n","import '@polymer/paper-checkbox/paper-checkbox.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-paper-slider.js';\nimport EventsMixin from '../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaForm extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      .error {\n        color: red;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[_isArray(schema)]]\" restamp=\"\">\n      <template is=\"dom-if\" if=\"[[error.base]]\">\n          [[computeError(error.base, schema)]]\n      </template>\n\n      <template is=\"dom-repeat\" items=\"[[schema]]\">\n        <ha-form data=\"[[_getValue(data, item)]]\" schema=\"[[item]]\" error=\"[[_getValue(error, item)]]\" on-data-changed=\"_valueChanged\" compute-label=\"[[computeLabel]]\" compute-error=\"[[computeError]]\"></ha-form>\n      </template>\n    </template>\n    <template is=\"dom-if\" if=\"[[!_isArray(schema)]]\" restamp=\"\">\n      <template is=\"dom-if\" if=\"[[error]]\">\n        <div class=\"error\">[[computeError(error, schema)]]</div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;string&quot;)]]\" restamp=\"\">\n        <paper-input label=\"[[computeLabel(schema)]]\" value=\"{{data}}\"></paper-input>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;integer&quot;)]]\" restamp=\"\">\n        <template is=\"dom-if\" if=\"[[_isRange(schema)]]\" restamp=\"\">\n          <div>\n            [[computeLabel(schema)]]\n            <ha-paper-slider pin=\"\" value=\"{{data}}\" min=\"[[schema.valueMin]]\" max=\"[[schema.valueMax]]\"></ha-paper-slider>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_isRange(schema)]]\" restamp=\"\">\n          <paper-input label=\"[[computeLabel(schema)]]\" value=\"{{data}}\" type=\"number\"></paper-input>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;float&quot;)]]\" restamp=\"\">\n        <!--TODO-->\n        <paper-input label=\"[[computeLabel(schema)]]\" value=\"{{data}}\"></paper-input>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;boolean&quot;)]]\" restamp=\"\">\n        <paper-checkbox checked=\"{{data}}\">[[computeLabel(schema)]]</paper-checkbox>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;select&quot;)]]\" restamp=\"\">\n        <paper-dropdown-menu label=\"[[computeLabel(schema)]]\">\n          <paper-listbox slot=\"dropdown-content\" attr-for-selected=\"item-name\" selected=\"{{data}}\">\n            <template is=\"dom-repeat\" items=\"[[schema.options]]\">\n              <paper-item item-name\\$=\"[[item]]\">[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </template>\n\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      data: {\n        type: Object,\n        notify: true,\n      },\n      schema: Object,\n      error: Object,\n\n      // A function that will computes the label to be displayed for a given\n      // schema object.\n      computeLabel: {\n        type: Function,\n        value: () => schema => schema && schema.name,\n      },\n\n      // A function that will computes an error message to be displayed for a\n      // given error ID, and relevant schema object\n      computeError: {\n        type: Function,\n        value: () => (error, schema) => error, // eslint-disable-line no-unused-vars\n      },\n    };\n  }\n\n  _isArray(val) {\n    return Array.isArray(val);\n  }\n\n  _isRange(schema) {\n    return ('valueMin' in schema) && ('valueMax' in schema);\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _getValue(obj, item) {\n    return obj[item.name];\n  }\n\n  _valueChanged(ev) {\n    this.set(['data', ev.model.item.name], ev.detail.value);\n  }\n}\n\ncustomElements.define('ha-form', HaForm);\n","import '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-icon-item.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@vaadin/vaadin-combo-box/vaadin-combo-box-light.js';\n\n\nimport './state-badge.js';\n\nimport computeStateName from '../../common/entity/compute_state_name.js';\nimport LocalizeMixin from '../../mixins/localize-mixin.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaEntityPicker extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <vaadin-combo-box-light\n      items=\"[[_states]]\"\n      item-value-path=\"entity_id\"\n      item-label-path=\"entity_id\"\n      value=\"{{value}}\"\n      opened=\"{{opened}}\"\n      allow-custom-value=\"[[allowCustomEntity]]\"\n      on-change='_fireChanged'\n    >\n      <paper-input autofocus=\"[[autofocus]]\" label=\"[[_computeLabel(label, localize)]]\" class=\"input\" value=\"[[value]]\" disabled=\"[[disabled]]\">\n        <paper-icon-button slot=\"suffix\" class=\"clear-button\" icon=\"hass:close\" no-ripple=\"\" hidden\\$=\"[[!value]]\">Clear</paper-icon-button>\n        <paper-icon-button slot=\"suffix\" class=\"toggle-button\" icon=\"[[_computeToggleIcon(opened)]]\" hidden=\"[[!_states.length]]\">Toggle</paper-icon-button>\n      </paper-input>\n      <template>\n        <style>\n          paper-icon-item {\n            margin: -10px;\n          }\n        </style>\n        <paper-icon-item>\n          <state-badge state-obj=\"[[item]]\" slot=\"item-icon\"></state-badge>\n          <paper-item-body two-line=\"\">\n            <div>[[_computeStateName(item)]]</div>\n            <div secondary=\"\">[[item.entity_id]]</div>\n          </paper-item-body>\n        </paper-icon-item>\n      </template>\n    </vaadin-combo-box-light>\n`;\n  }\n\n  static get properties() {\n    return {\n      allowCustomEntity: {\n        type: Boolean,\n        value: false,\n      },\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _hass: Object,\n      _states: {\n        type: Array,\n        computed: '_computeStates(_hass, domainFilter, entityFilter)',\n      },\n      autofocus: Boolean,\n      label: {\n        type: String,\n      },\n      value: {\n        type: String,\n        notify: true,\n      },\n      opened: {\n        type: Boolean,\n        value: false,\n        observer: '_openedChanged',\n      },\n      domainFilter: {\n        type: String,\n        value: null,\n      },\n      entityFilter: {\n        type: Function,\n        value: null,\n      },\n      disabled: Boolean,\n    };\n  }\n\n  _computeLabel(label, localize) {\n    return label === undefined\n      ? localize('ui.components.entity.entity-picker.entity')\n      : label;\n  }\n\n  _computeStates(hass, domainFilter, entityFilter) {\n    if (!hass) return [];\n\n    let entityIds = Object.keys(hass.states);\n\n    if (domainFilter) {\n      entityIds = entityIds.filter(eid => eid.substr(0, eid.indexOf('.')) === domainFilter);\n    }\n\n    let entities = entityIds.sort().map(key => hass.states[key]);\n\n    if (entityFilter) {\n      entities = entities.filter(entityFilter);\n    }\n\n    return entities;\n  }\n\n  _computeStateName(state) {\n    return computeStateName(state);\n  }\n\n  _openedChanged(newVal) {\n    if (!newVal) {\n      this._hass = this.hass;\n    }\n  }\n\n  _hassChanged(newVal) {\n    if (!this.opened) {\n      this._hass = newVal;\n    }\n  }\n\n  _computeToggleIcon(opened) {\n    return opened ? 'hass:menu-up' : 'hass:menu-down';\n  }\n\n  _fireChanged(ev) {\n    ev.stopPropagation();\n    this.fire('change');\n  }\n}\n\ncustomElements.define('ha-entity-picker', HaEntityPicker);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass.callService(this.domain, this.service, this.serviceData)\n      .then(function () {\n        el.progress = false;\n        el.$.progress.actionSuccess();\n        eventData.success = true;\n      }, function () {\n        el.progress = false;\n        el.$.progress.actionError();\n        eventData.success = false;\n      }).then(function () {\n        el.fire('hass-service-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-service-button', HaCallServiceButton);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      .container {\n        position: relative;\n        display: inline-block;\n      }\n\n      paper-button {\n        transition: all 1s;\n      }\n\n      .success paper-button {\n        color: white;\n        background-color: var(--google-green-500);\n        transition: none;\n      }\n\n      .error paper-button {\n        color: white;\n        background-color: var(--google-red-500);\n        transition: none;\n      }\n\n      paper-button[disabled] {\n        color: #c8c8c8;\n      }\n\n      .progress {\n        @apply --layout;\n        @apply --layout-center-center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n    </style>\n    <div class=\"container\" id=\"container\">\n      <paper-button id=\"button\" disabled=\"[[computeDisabled(disabled, progress)]]\" on-click=\"buttonTapped\">\n        <slot></slot>\n      </paper-button>\n      <template is=\"dom-if\" if=\"[[progress]]\">\n        <div class=\"progress\">\n          <paper-spinner active=\"\"></paper-spinner>\n        </div>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass('success');\n  }\n\n  actionError() {\n    this.tempClass('error');\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define('ha-progress-button', HaProgressButton);\n","const hassAttributeUtil = {};\n\nhassAttributeUtil.DOMAIN_DEVICE_CLASS = {\n  binary_sensor: [\n    'battery',\n    'cold',\n    'connectivity',\n    'door',\n    'garage_door',\n    'gas',\n    'heat',\n    'light',\n    'lock',\n    'moisture',\n    'motion',\n    'moving',\n    'occupancy',\n    'opening',\n    'plug',\n    'power',\n    'presence',\n    'problem',\n    'safety',\n    'smoke',\n    'sound',\n    'vibration',\n    'window'\n  ],\n  cover: ['garage'],\n  sensor: [\n    'battery',\n    'humidity',\n    'illuminance',\n    'temperature'\n  ],\n};\n\nhassAttributeUtil.UNKNOWN_TYPE = 'json';\nhassAttributeUtil.ADD_TYPE = 'key-value';\n\nhassAttributeUtil.TYPE_TO_TAG = {\n  string: 'ha-customize-string',\n  json: 'ha-customize-string',\n  icon: 'ha-customize-icon',\n  boolean: 'ha-customize-boolean',\n  array: 'ha-customize-array',\n  'key-value': 'ha-customize-key-value',\n};\n\n// Attributes here serve dual purpose:\n// 1) Any key of this object won't be shown in more-info window.\n// 2) Any key which has value other than undefined will appear in customization\n//    config according to its value.\nhassAttributeUtil.LOGIC_STATE_ATTRIBUTES =\n  hassAttributeUtil.LOGIC_STATE_ATTRIBUTES || {\n    entity_picture: undefined,\n    friendly_name: { type: 'string', description: 'Name' },\n    icon: { type: 'icon' },\n    emulated_hue: {\n      type: 'boolean',\n      domains: ['emulated_hue']\n    },\n    emulated_hue_name: {\n      type: 'string',\n      domains: ['emulated_hue']\n    },\n    haaska_hidden: undefined,\n    haaska_name: undefined,\n    homebridge_hidden: { type: 'boolean' },\n    homebridge_name: { type: 'string' },\n    supported_features: undefined,\n    attribution: undefined,\n    custom_ui_more_info: { type: 'string' },\n    custom_ui_state_card: { type: 'string' },\n    device_class: {\n      type: 'array',\n      options: hassAttributeUtil.DOMAIN_DEVICE_CLASS,\n      description: 'Device class',\n      domains: ['binary_sensor', 'cover', 'sensor']\n    },\n    hidden: { type: 'boolean', description: 'Hide from UI' },\n    assumed_state: {\n      type: 'boolean',\n      domains: ['switch', 'light', 'cover', 'climate', 'fan', 'group']\n    },\n    initial_state: {\n      type: 'string',\n      domains: ['automation']\n    },\n    unit_of_measurement: { type: 'string' },\n  };\n\nexport default hassAttributeUtil;\n","import '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@vaadin/vaadin-combo-box/vaadin-combo-box-light.js';\n\nimport EventsMixin from '../mixins/events-mixin.js';\n\nclass HaComboBox extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <vaadin-combo-box-light\n      items=\"[[_items]]\"\n      item-value-path=\"[[itemValuePath]]\"\n      item-label-path=\"[[itemLabelPath]]\"\n      value=\"{{value}}\"\n      opened=\"{{opened}}\"\n      allow-custom-value=\"[[allowCustomValue]]\"\n      on-change='_fireChanged'\n    >\n      <paper-input autofocus=\"[[autofocus]]\" label=\"[[label]]\" class=\"input\" value=\"[[value]]\">\n        <paper-icon-button slot=\"suffix\" class=\"clear-button\" icon=\"hass:close\" hidden\\$=\"[[!value]]\">Clear</paper-icon-button>\n        <paper-icon-button slot=\"suffix\" class=\"toggle-button\" icon=\"[[_computeToggleIcon(opened)]]\" hidden\\$=\"[[!items.length]]\">Toggle</paper-icon-button>\n      </paper-input>\n      <template>\n        <style>\n            paper-item {\n              margin: -5px -10px;\n            }\n        </style>\n        <paper-item>[[_computeItemLabel(item, itemLabelPath)]]</paper-item>\n      </template>\n    </vaadin-combo-box-light>\n`;\n  }\n\n  static get properties() {\n    return {\n      allowCustomValue: Boolean,\n      items: {\n        type: Object,\n        observer: '_itemsChanged',\n      },\n      _items: Object,\n      itemLabelPath: String,\n      itemValuePath: String,\n      autofocus: Boolean,\n      label: String,\n      opened: {\n        type: Boolean,\n        value: false,\n        observer: '_openedChanged',\n      },\n      value: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  _openedChanged(newVal) {\n    if (!newVal) {\n      this._items = this.items;\n    }\n  }\n\n  _itemsChanged(newVal) {\n    if (!this.opened) {\n      this._items = newVal;\n    }\n  }\n\n  _computeToggleIcon(opened) {\n    return opened ? 'hass:menu-up' : 'hass:menu-down';\n  }\n\n  _computeItemLabel(item, itemLabelPath) {\n    return itemLabelPath ? item[itemLabelPath] : item;\n  }\n\n  _fireChanged(ev) {\n    ev.stopPropagation();\n    this.fire('change');\n  }\n}\n\ncustomElements.define('ha-combo-box', HaComboBox);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport './ha-combo-box.js';\n\nimport LocalizeMixin from '../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaServicePicker extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-combo-box label=\"[[localize('ui.components.service-picker.service')]]\" items=\"[[_services]]\" value=\"{{value}}\" allow-custom-value=\"\"></ha-combo-box>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _services: Array,\n      value: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  _hassChanged(hass, oldHass) {\n    if (!hass) {\n      this._services = [];\n      return;\n    } else if (oldHass && hass.config.services === oldHass.config.services) {\n      return;\n    }\n    const result = [];\n\n    Object.keys(hass.config.services).sort().forEach((domain) => {\n      const services = Object.keys(hass.config.services[domain]).sort();\n\n      for (let i = 0; i < services.length; i++) {\n        result.push(`${domain}.${services[i]}`);\n      }\n    });\n\n    this._services = result;\n  }\n}\n\ncustomElements.define('ha-service-picker', HaServicePicker);\n","const documentContainer = document.createElement('template');\ndocumentContainer.setAttribute('style', 'display: none;');\n\ndocumentContainer.innerHTML = `<dom-module id=\"ha-form-style\">\n  <template>\n    <style>\n      .form-group {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        padding: 8px 16px;\n      }\n\n      .form-group label {\n        @apply --layout-flex-2;\n      }\n\n      .form-group .form-control {\n        @apply --layout-flex;\n      }\n\n      .form-group.vertical {\n        @apply --layout-vertical;\n        @apply --layout-start;\n      }\n\n      paper-dropdown-menu.form-control {\n        margin: -9px 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild(documentContainer.content);\n","import '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport '@polymer/paper-button/paper-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HassErrorScreen extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .placeholder {\n        height: 100%;\n      }\n\n      .layout {\n        height: calc(100% - 64px);\n      }\n\n      paper-button {\n        font-weight: bold;\n        color: var(--primary-color);\n      }\n    </style>\n\n    <div class=\"placeholder\">\n      <app-toolbar>\n        <div main-title=\"\">[[title]]</div>\n      </app-toolbar>\n      <div class=\"layout vertical center-center\">\n        <h3>[[error]]</h3>\n        <paper-button on-click=\"backTapped\">go back</paper-button>\n      </div>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      title: {\n        type: String,\n        value: 'Home Assistant',\n      },\n\n      error: {\n        type: String,\n        value: 'Oops! It looks like something went wrong.'\n      },\n    };\n  }\n\n  backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('hass-error-screen', HassErrorScreen);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../resources/ha-style.js';\n\nclass HaConfigSection extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding: 28px 20px 0;\n        max-width: 1040px;\n        margin: 0 auto;\n      }\n\n      .header {\n        @apply --paper-font-display1;\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 32px;\n      }\n\n      .intro {\n        @apply --paper-font-subhead;\n        width: 100%;\n        max-width: 400px;\n        margin-right: 40px;\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n\n      .narrow.content {\n        max-width: 640px;\n      }\n      .narrow .together {\n        margin-top: 20px;\n      }\n      .narrow .header {\n        @apply --paper-font-headline;\n      }\n      .narrow .intro {\n        font-size: 14px;\n        padding-bottom: 20px;\n        margin-right: 0;\n        max-width: 500px;\n      }\n    </style>\n    <div class\\$=\"[[computeContentClasses(isWide)]]\">\n      <div class=\"header\"><slot name=\"header\"></slot></div>\n      <div class\\$=\"[[computeClasses(isWide)]]\">\n        <div class=\"intro\">\n          <slot name=\"introduction\"></slot>\n        </div>\n        <div class=\"panel flex-auto\">\n          <slot></slot>\n        </div>\n      </div>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  computeContentClasses(isWide) {\n    var classes = 'content ';\n\n    return isWide ? classes : classes + 'narrow';\n  }\n\n  computeClasses(isWide) {\n    var classes = 'together layout ';\n\n    return classes + (isWide ? 'horizontal' : 'vertical narrow');\n  }\n}\n\ncustomElements.define('ha-config-section', HaConfigSection);\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-textarea.js';\n\n\nexport default class JSONTextArea extends Component {\n  constructor(props) {\n    super(props);\n    this.state.isValid = true;\n    this.state.value = JSON.stringify(props.value || {}, null, 2);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(ev) {\n    const value = ev.target.value;\n    let parsed;\n    let isValid;\n\n    try {\n      parsed = JSON.parse(value);\n      isValid = true;\n    } catch (err) {\n      // Invalid JSON\n      isValid = false;\n    }\n\n    this.setState({\n      value,\n      isValid,\n    });\n    if (isValid) {\n      this.props.onChange(parsed);\n    }\n  }\n\n  componentWillReceiveProps({ value }) {\n    if (value === this.props.value) return;\n    this.setState({\n      value: JSON.stringify(value, null, 2),\n      isValid: true,\n    });\n  }\n\n  render({ label }, { value, isValid }) {\n    const style = {\n      minWidth: 300,\n      width: '100%',\n    };\n    if (!isValid) {\n      style.border = '1px solid red';\n    }\n    return (\n      <paper-textarea\n        label={label}\n        value={value}\n        style={style}\n        onvalue-changed={this.onChange}\n      />\n    );\n  }\n}\n","export function onChangeEvent(prop, ev) {\n  const origData = this.props[prop];\n\n  if (ev.target.value === origData[ev.target.name]) {\n    return;\n  }\n\n  const data = Object.assign({}, origData);\n\n  if (ev.target.value) {\n    data[ev.target.name] = ev.target.value;\n  } else {\n    delete data[ev.target.name];\n  }\n\n  this.props.onChange(this.props.index, data);\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport JSONTextArea from '../json_textarea.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class EventTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.eventDataChanged = this.eventDataChanged.bind(this);\n  }\n\n  /* eslint-disable camelcase */\n  eventDataChanged(event_data) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event_data },\n    ));\n  }\n\n  render({ trigger, localize }) {\n    const { event_type, event_data } = trigger;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.event.event_type')}\n          name=\"event_type\"\n          value={event_type}\n          onvalue-changed={this.onChange}\n        />\n        <JSONTextArea\n          label={localize('ui.panel.config.automation.editor.triggers.type.event.event_data')}\n          value={event_data}\n          onChange={this.eventDataChanged}\n        />\n      </div>\n    );\n  }\n}\n\nEventTrigger.defaultConfig = {\n  event_type: '',\n  event_data: {},\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\n\nexport default class HassTrigger extends Component {\n  constructor() {\n    super();\n\n    this.radioGroupPicked = this.radioGroupPicked.bind(this);\n  }\n\n  radioGroupPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event: ev.target.selected },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { event } = trigger;\n    return (\n      <div>\n        <label id=\"eventlabel\">{localize('ui.panel.config.automation.editor.triggers.type.homeassistant.event')}</label>\n        <paper-radio-group\n          selected={event}\n          aria-labelledby=\"eventlabel\"\n          onpaper-radio-group-changed={this.radioGroupPicked}\n        >\n          <paper-radio-button name=\"start\">{localize('ui.panel.config.automation.editor.triggers.type.homeassistant.start')}</paper-radio-button>\n          <paper-radio-button name=\"shutdown\">{localize('ui.panel.config.automation.editor.triggers.type.homeassistant.shutdown')}</paper-radio-button>\n        </paper-radio-group>\n      </div>\n    );\n  }\n}\n\nHassTrigger.defaultConfig = {\n  event: 'start'\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class MQTTTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { topic, payload } = trigger;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.mqtt.topic')}\n          name=\"topic\"\n          value={topic}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.mqtt.payload')}\n          name=\"payload\"\n          value={payload}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nMQTTTrigger.defaultConfig = {\n  topic: ''\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class NumericStateTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, hass, localize }) {\n    const {\n      value_template, entity_id, below, above\n    } = trigger;\n\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.numeric_state.above')}\n          name=\"above\"\n          value={above}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.numeric_state.below')}\n          name=\"below\"\n          value={below}\n          onvalue-changed={this.onChange}\n        />\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.triggers.type.numeric_state.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nNumericStateTrigger.defaultConfig = {\n  entity_id: '',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-input.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class StateTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, hass, localize }) {\n    const { entity_id, to } = trigger;\n    const trgFrom = trigger.from;\n    const trgFor = trigger.for;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.state.from')}\n          name=\"from\"\n          value={trgFrom}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.state.to')}\n          name=\"to\"\n          value={to}\n          onvalue-changed={this.onChange}\n        />\n        {trgFor && <pre>For: {JSON.stringify(trgFor, null, 2)}</pre>}\n      </div>\n    );\n  }\n}\n\nStateTrigger.defaultConfig = {\n  entity_id: '',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class SunTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.radioGroupPicked = this.radioGroupPicked.bind(this);\n  }\n\n  radioGroupPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event: ev.target.selected },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { offset, event } = trigger;\n    return (\n      <div>\n        <label id=\"eventlabel\">{localize('ui.panel.config.automation.editor.triggers.type.sun.event')}</label>\n        <paper-radio-group\n          selected={event}\n          aria-labelledby=\"eventlabel\"\n          onpaper-radio-group-changed={this.radioGroupPicked}\n        >\n          <paper-radio-button name=\"sunrise\">{localize('ui.panel.config.automation.editor.triggers.type.sun.sunrise')}</paper-radio-button>\n          <paper-radio-button name=\"sunset\">{localize('ui.panel.config.automation.editor.triggers.type.sun.sunset')}</paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.sun.offset')}\n          name=\"offset\"\n          value={offset}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nSunTrigger.defaultConfig = {\n  event: 'sunrise',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TemplateTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n  }\n\n  render({ trigger, localize }) {\n    /* eslint-disable camelcase */\n    const { value_template } = trigger;\n    return (\n      <div>\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.triggers.type.template.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTemplateTrigger.defaultConfig = {\n  value_template: '',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-input.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TimeTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { at } = trigger;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.time.at')}\n          name=\"at\"\n          value={at}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTimeTrigger.defaultConfig = {\n  at: '',\n};\n","export default function hasLocation(stateObj) {\n  return ('latitude' in stateObj.attributes &&\n          'longitude' in stateObj.attributes);\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\nimport hasLocation from '../../../../common/entity/has_location.js';\nimport computeStateDomain from '../../../../common/entity/compute_state_domain.js';\n\nfunction zoneAndLocationFilter(stateObj) {\n  return hasLocation(stateObj) && computeStateDomain(stateObj) !== 'zone';\n}\n\nexport default class ZoneTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.radioGroupPicked = this.radioGroupPicked.bind(this);\n    this.entityPicked = this.entityPicked.bind(this);\n    this.zonePicked = this.zonePicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  zonePicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { zone: ev.target.value },\n    ));\n  }\n\n  radioGroupPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event: ev.target.selected },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, hass, localize }) {\n    const { entity_id, zone, event } = trigger;\n    return (\n      <div>\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.triggers.type.zone.entity')}\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n          entityFilter={zoneAndLocationFilter}\n        />\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.triggers.type.zone.zone')}\n          value={zone}\n          onChange={this.zonePicked}\n          hass={hass}\n          allowCustomEntity\n          domainFilter='zone'\n        />\n        <label id=\"eventlabel\">{localize('ui.panel.config.automation.editor.triggers.type.zone.event')}</label>\n        <paper-radio-group\n          selected={event}\n          aria-labelledby=\"eventlabel\"\n          onpaper-radio-group-changed={this.radioGroupPicked}\n        >\n          <paper-radio-button name=\"enter\">{localize('ui.panel.config.automation.editor.triggers.type.zone.enter')}</paper-radio-button>\n          <paper-radio-button name=\"leave\">{localize('ui.panel.config.automation.editor.triggers.type.zone.leave')}</paper-radio-button>\n        </paper-radio-group>\n      </div>\n    );\n  }\n}\n\nZoneTrigger.defaultConfig = {\n  entity_id: '',\n  zone: '',\n  event: 'enter',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport EventTrigger from './event.js';\nimport HassTrigger from './homeassistant.js';\nimport MQTTTrigger from './mqtt.js';\nimport NumericStateTrigger from './numeric_state.js';\nimport StateTrigger from './state.js';\nimport SunTrigger from './sun.js';\nimport TemplateTrigger from './template.js';\nimport TimeTrigger from './time.js';\nimport ZoneTrigger from './zone.js';\n\nconst TYPES = {\n  event: EventTrigger,\n  state: StateTrigger,\n  homeassistant: HassTrigger,\n  mqtt: MQTTTrigger,\n  numeric_state: NumericStateTrigger,\n  sun: SunTrigger,\n  template: TemplateTrigger,\n  time: TimeTrigger,\n  zone: ZoneTrigger,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nexport default class TriggerEdit extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const type = ev.target.selectedItem.attributes.platform.value;\n\n    if (type !== this.props.trigger.platform) {\n      this.props.onChange(this.props.index, Object.assign(\n        { platform: type },\n        TYPES[type].defaultConfig\n      ));\n    }\n  }\n\n  render({ index, trigger, onChange, hass, localize }) {\n    const Comp = TYPES[trigger.platform];\n    const selected = OPTIONS.indexOf(trigger.platform);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize('ui.panel.config.automation.editor.triggers.unsupported_platform', 'platform', trigger.platform)}\n          <pre>{JSON.stringify(trigger, null, 2)}</pre>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <paper-dropdown-menu-light label={localize('ui.panel.config.automation.editor.triggers.type_select')} no-animations>\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map(opt => <paper-item platform={opt}>{localize(`ui.panel.config.automation.editor.triggers.type.${opt}.label`)}</paper-item>)}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          trigger={trigger}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport TriggerEdit from './trigger_edit.js';\n\nexport default class TriggerRow extends Component {\n  constructor() {\n    super();\n\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onDelete() {\n    // eslint-disable-next-line\n    if (confirm(this.props.localize('ui.panel.config.automation.editor.triggers.delete_confirm'))) {\n      this.props.onChange(this.props.index, null);\n    }\n  }\n\n  render(props) {\n    return (\n      <paper-card>\n        <div class='card-menu'>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n            vertical-offset=\"-5\"\n          >\n            <paper-icon-button\n              icon=\"hass:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            />\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item disabled>{props.localize('ui.panel.config.automation.editor.triggers.duplicate')}</paper-item>\n              <paper-item onTap={this.onDelete}>{props.localize('ui.panel.config.automation.editor.triggers.delete')}</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </div>\n        <div class='card-content'>\n          <TriggerEdit {...props} />\n        </div>\n      </paper-card>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport TriggerRow from './trigger_row.js';\nimport StateTrigger from './state.js';\n\nexport default class Trigger extends Component {\n  constructor() {\n    super();\n\n    this.addTrigger = this.addTrigger.bind(this);\n    this.triggerChanged = this.triggerChanged.bind(this);\n  }\n\n  addTrigger() {\n    const trigger = this.props.trigger.concat(Object.assign(\n      { platform: 'state' },\n      StateTrigger.defaultConfig,\n    ));\n\n    this.props.onChange(trigger);\n  }\n\n  triggerChanged(index, newValue) {\n    const trigger = this.props.trigger.concat();\n\n    if (newValue === null) {\n      trigger.splice(index, 1);\n    } else {\n      trigger[index] = newValue;\n    }\n\n    this.props.onChange(trigger);\n  }\n\n  render({ trigger, hass, localize }) {\n    return (\n      <div class=\"triggers\">\n        {trigger.map((trg, idx) => (\n          <TriggerRow\n            index={idx}\n            trigger={trg}\n            onChange={this.triggerChanged}\n            hass={hass}\n            localize={localize}\n          />))}\n        <paper-card>\n          <div class='card-actions add-card'>\n            <paper-button onTap={this.addTrigger}>{localize('ui.panel.config.automation.editor.triggers.add')}</paper-button>\n          </div>\n        </paper-card>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-input/paper-textarea.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class NumericStateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const {\n      value_template, entity_id, below, above\n    } = condition;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.numeric_state.above')}\n          name=\"above\"\n          value={above}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.numeric_state.below')}\n          name=\"below\"\n          value={below}\n          onvalue-changed={this.onChange}\n        />\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.conditions.type.numeric_state.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nNumericStateCondition.defaultConfig = {\n  entity_id: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class StateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const { entity_id, state } = condition;\n    const cndFor = condition.for;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.state.state')}\n          name=\"state\"\n          value={state}\n          onvalue-changed={this.onChange}\n        />\n        {cndFor && <pre>For: {JSON.stringify(cndFor, null, 2)}</pre>}\n      </div>\n    );\n  }\n}\n\nStateCondition.defaultConfig = {\n  entity_id: '',\n  state: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class SunCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.afterPicked = this.radioGroupPicked.bind(this, 'after');\n    this.beforePicked = this.radioGroupPicked.bind(this, 'before');\n  }\n\n  radioGroupPicked(key, ev) {\n    const condition = Object.assign({}, this.props.condition);\n\n    if (ev.target.selected) {\n      condition[key] = ev.target.selected;\n    } else {\n      delete condition[key];\n    }\n\n    this.props.onChange(this.props.index, condition);\n  }\n\n  render({ condition, localize }) {\n    /* eslint-disable camelcase */\n    const {\n      after, after_offset, before, before_offset\n    } = condition;\n    return (\n      <div>\n        <label id=\"beforelabel\">{localize('ui.panel.config.automation.editor.conditions.type.sun.before')}</label>\n        <paper-radio-group\n          allow-empty-selection\n          selected={before}\n          aria-labelledby=\"beforelabel\"\n          onpaper-radio-group-changed={this.beforePicked}\n        >\n          <paper-radio-button name=\"sunrise\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunrise')}</paper-radio-button>\n          <paper-radio-button name=\"sunset\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunset')}</paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.sun.before_offset')}\n          name=\"before_offset\"\n          value={before_offset}\n          onvalue-changed={this.onChange}\n          disabled={before === undefined}\n        />\n\n        <label id=\"afterlabel\">{localize('ui.panel.config.automation.editor.conditions.type.sun.after')}</label>\n        <paper-radio-group\n          allow-empty-selection\n          selected={after}\n          aria-labelledby=\"afterlabel\"\n          onpaper-radio-group-changed={this.afterPicked}\n        >\n          <paper-radio-button name=\"sunrise\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunrise')}</paper-radio-button>\n          <paper-radio-button name=\"sunset\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunset')}</paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.sun.after_offset')}\n          name=\"after_offset\"\n          value={after_offset}\n          onvalue-changed={this.onChange}\n          disabled={after === undefined}\n        />\n      </div>\n    );\n  }\n}\n\nSunCondition.defaultConfig = {\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TemplateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n  }\n\n  render({ condition, localize }) {\n    /* eslint-disable camelcase */\n    const { value_template } = condition;\n    return (\n      <div>\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.conditions.type.template.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTemplateCondition.defaultConfig = {\n  value_template: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TimeCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, localize }) {\n    const { after, before } = condition;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.time.after')}\n          name=\"after\"\n          value={after}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.time.before')}\n          name=\"before\"\n          value={before}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTimeCondition.defaultConfig = {\n};\n","import { h, Component } from 'preact';\nimport '../../../../components/entity/ha-entity-picker.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\nimport hasLocation from '../../../../common/entity/has_location.js';\nimport computeStateDomain from '../../../../common/entity/compute_state_domain.js';\n\nfunction zoneAndLocationFilter(stateObj) {\n  return hasLocation(stateObj) && computeStateDomain(stateObj) !== 'zone';\n}\n\nexport default class ZoneCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.entityPicked = this.entityPicked.bind(this);\n    this.zonePicked = this.zonePicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  zonePicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { zone: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const { entity_id, zone } = condition;\n    return (\n      <div>\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.conditions.type.zone.entity')}\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n          entityFilter={zoneAndLocationFilter}\n        />\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.conditions.type.zone.zone')}\n          value={zone}\n          onChange={this.zonePicked}\n          hass={hass}\n          allowCustomEntity\n          domainFilter='zone'\n        />\n      </div>\n    );\n  }\n}\n\nZoneCondition.defaultConfig = {\n  entity_id: '',\n  zone: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-item/paper-item.js';\n\nimport NumericStateCondition from './numeric_state.js';\nimport StateCondition from './state.js';\nimport SunCondition from './sun.js';\nimport TemplateCondition from './template.js';\nimport TimeCondition from './time.js';\nimport ZoneCondition from './zone.js';\n\nconst TYPES = {\n  state: StateCondition,\n  numeric_state: NumericStateCondition,\n  sun: SunCondition,\n  template: TemplateCondition,\n  time: TimeCondition,\n  zone: ZoneCondition,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nexport default class ConditionRow extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const type = ev.target.selectedItem.attributes.condition.value;\n\n    if (type !== this.props.condition.condition) {\n      this.props.onChange(this.props.index, Object.assign(\n        { condition: type },\n        TYPES[type].defaultConfig\n      ));\n    }\n  }\n\n  render({ index, condition, onChange, hass, localize }) {\n    const Comp = TYPES[condition.condition];\n    const selected = OPTIONS.indexOf(condition.condition);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize('ui.panel.config.automation.editor.conditions.unsupported_condition', 'condition', condition.condition)}\n          <pre>{JSON.stringify(condition, null, 2)}</pre>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <paper-dropdown-menu-light label={localize('ui.panel.config.automation.editor.conditions.type_select')} no-animations>\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map(opt => <paper-item condition={opt}>{localize(`ui.panel.config.automation.editor.conditions.type.${opt}.label`)}</paper-item>)}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          condition={condition}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-item/paper-item.js';\n\nimport ConditionEdit from './condition_edit.js';\n\nexport default class ConditionRow extends Component {\n  constructor() {\n    super();\n\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onDelete() {\n    // eslint-disable-next-line\n    if (confirm(this.props.localize('ui.panel.config.automation.editor.conditions.delete_confirm'))) {\n      this.props.onChange(this.props.index, null);\n    }\n  }\n\n  render(props) {\n    return (\n      <paper-card>\n        <div class='card-menu'>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n            vertical-offset=\"-5\"\n          >\n            <paper-icon-button\n              icon=\"hass:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            />\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item disabled>{props.localize('ui.panel.config.automation.editor.conditions.duplicate')}</paper-item>\n              <paper-item onTap={this.onDelete}>{props.localize('ui.panel.config.automation.editor.conditions.delete')}</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </div>\n        <div class='card-content'>\n          <ConditionEdit {...props} />\n        </div>\n      </paper-card>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport ConditionRow from './condition_row.js';\n\nexport default class Condition extends Component {\n  constructor() {\n    super();\n\n    this.addCondition = this.addCondition.bind(this);\n    this.conditionChanged = this.conditionChanged.bind(this);\n  }\n\n  addCondition() {\n    const condition = this.props.condition.concat({\n      condition: 'state',\n    });\n\n    this.props.onChange(condition);\n  }\n\n  conditionChanged(index, newValue) {\n    const condition = this.props.condition.concat();\n\n    if (newValue === null) {\n      condition.splice(index, 1);\n    } else {\n      condition[index] = newValue;\n    }\n\n    this.props.onChange(condition);\n  }\n\n  render({ condition, hass, localize }) {\n    return (\n      <div class=\"triggers\">\n        {condition.map((cnd, idx) => (\n          <ConditionRow\n            index={idx}\n            condition={cnd}\n            onChange={this.conditionChanged}\n            hass={hass}\n            localize={localize}\n          />))}\n        <paper-card>\n          <div class='card-actions add-card'>\n            <paper-button onTap={this.addCondition}>{localize('ui.panel.config.automation.editor.conditions.add')}</paper-button>\n          </div>\n        </paper-card>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '../../../../components/ha-service-picker.js';\n\nimport JSONTextArea from '../json_textarea.js';\n\nexport default class CallServiceAction extends Component {\n  constructor() {\n    super();\n\n    this.serviceChanged = this.serviceChanged.bind(this);\n    this.serviceDataChanged = this.serviceDataChanged.bind(this);\n  }\n\n  serviceChanged(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.action,\n      { service: ev.target.value },\n    ));\n  }\n\n  serviceDataChanged(data) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.action,\n      { data },\n    ));\n  }\n\n  render({ action, hass, localize }) {\n    const { service, data } = action;\n\n    return (\n      <div>\n        <ha-service-picker\n          hass={hass}\n          value={service}\n          onChange={this.serviceChanged}\n        />\n        <JSONTextArea\n          label={localize('ui.panel.config.automation.editor.actions.type.service.service_data')}\n          value={data}\n          onChange={this.serviceDataChanged}\n        />\n      </div>\n    );\n  }\n}\n\nCallServiceAction.defaultConfig = {\n  alias: '',\n  service: '',\n  data: {}\n};\n","import { h, Component } from 'preact';\n\nimport StateCondition from '../condition/state.js';\nimport ConditionEdit from '../condition/condition_edit.js';\n\nexport default class ConditionAction extends Component {\n  // eslint-disable-next-line\n  render({ action, index, onChange, hass, localize }) {\n    return (\n      <ConditionEdit\n        condition={action}\n        onChange={onChange}\n        index={index}\n        hass={hass}\n        localize={localize}\n      />\n    );\n  }\n}\n\nConditionAction.defaultConfig = Object.assign(\n  { condition: 'state' },\n  StateCondition.defaultConfig,\n);\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class DelayAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'action');\n  }\n\n  render({ action, localize }) {\n    const { delay } = action;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.actions.type.delay.delay')}\n          name=\"delay\"\n          value={delay}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nDelayAction.defaultConfig = {\n  delay: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport JSONTextArea from '../json_textarea.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class EventAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'action');\n    this.serviceDataChanged = this.serviceDataChanged.bind(this);\n  }\n\n  serviceDataChanged(data) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.action,\n      { data },\n    ));\n  }\n\n  render({ action, localize }) {\n    /* eslint-disable camelcase */\n    const { event, event_data } = action;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.actions.type.event.event')}\n          name=\"event\"\n          value={event}\n          onvalue-changed={this.onChange}\n        />\n        <JSONTextArea\n          label={localize('ui.panel.config.automation.editor.actions.type.event.service_data')}\n          value={event_data}\n          onChange={this.serviceDataChanged}\n        />\n      </div>\n    );\n  }\n}\n\nEventAction.defaultConfig = {\n  event: '',\n  event_data: {},\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class WaitAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'action');\n    this.onTemplateChange = this.onTemplateChange.bind(this);\n  }\n\n  // Gets fired on mount. If empty, onChangeEvent removes attribute.\n  // Without the attribute this action is no longer matched to this component.\n  onTemplateChange(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { [ev.target.name]: ev.target.value },\n    ));\n  }\n\n  render({ action, localize }) {\n    /* eslint-disable camelcase */\n    const { wait_template, timeout } = action;\n    return (\n      <div>\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.actions.type.wait_template.wait_template')}\n          name=\"wait_template\"\n          value={wait_template}\n          onvalue-changed={this.onTemplateChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.actions.type.wait_template.timeout')}\n          name=\"timeout\"\n          value={timeout}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nWaitAction.defaultConfig = {\n  wait_template: '',\n  timeout: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-item/paper-item.js';\n\nimport CallServiceAction from './call_service.js';\nimport ConditionAction from './condition.js';\nimport DelayAction from './delay.js';\nimport EventAction from './event.js';\nimport WaitAction from './wait.js';\n\nconst TYPES = {\n  service: CallServiceAction,\n  delay: DelayAction,\n  wait_template: WaitAction,\n  condition: ConditionAction,\n  event: EventAction,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nfunction getType(action) {\n  const keys = Object.keys(TYPES);\n  for (let i = 0; i < keys.length; i++) {\n    if (keys[i] in action) {\n      return keys[i];\n    }\n  }\n  return null;\n}\n\nexport default class Action extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const newType = ev.target.selectedItem.attributes.action.value;\n    const oldType = getType(this.props.action);\n\n    if (oldType !== newType) {\n      this.props.onChange(this.props.index, TYPES[newType].defaultConfig);\n    }\n  }\n\n  render({ index, action, onChange, hass, localize }) {\n    const type = getType(action);\n    const Comp = type && TYPES[type];\n    const selected = OPTIONS.indexOf(type);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize('ui.panel.config.automation.editor.actions.unsupported_action', 'action', type)}\n          <pre>{JSON.stringify(action, null, 2)}</pre>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <paper-dropdown-menu-light label={localize('ui.panel.config.automation.editor.actions.type_select')} no-animations>\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map(opt => <paper-item action={opt}>{localize(`ui.panel.config.automation.editor.actions.type.${opt}.label`)}</paper-item>)}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          action={action}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport ActionEdit from './action_edit.js';\n\nexport default class Action extends Component {\n  constructor() {\n    super();\n\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onDelete() {\n    // eslint-disable-next-line\n    if (confirm(this.props.localize('ui.panel.config.automation.editor.actions.delete_confirm'))) {\n      this.props.onChange(this.props.index, null);\n    }\n  }\n\n  render(props) {\n    return (\n      <paper-card>\n        <div class='card-menu'>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n            vertical-offset=\"-5\"\n          >\n            <paper-icon-button\n              icon=\"hass:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            />\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item disabled>{props.localize('ui.panel.config.automation.editor.actions.duplicate')}</paper-item>\n              <paper-item onTap={this.onDelete}>{props.localize('ui.panel.config.automation.editor.actions.delete')}</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </div>\n        <div class='card-content'>\n          <ActionEdit {...props} />\n        </div>\n      </paper-card>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport ActionRow from './action_row.js';\n\nexport default class Script extends Component {\n  constructor() {\n    super();\n\n    this.addAction = this.addAction.bind(this);\n    this.actionChanged = this.actionChanged.bind(this);\n  }\n\n  addAction() {\n    const script = this.props.script.concat({\n      service: '',\n    });\n\n    this.props.onChange(script);\n  }\n\n  actionChanged(index, newValue) {\n    const script = this.props.script.concat();\n\n    if (newValue === null) {\n      script.splice(index, 1);\n    } else {\n      script[index] = newValue;\n    }\n\n    this.props.onChange(script);\n  }\n\n  render({ script, hass, localize }) {\n    return (\n      <div class=\"script\">\n        {script.map((act, idx) => (\n          <ActionRow\n            index={idx}\n            action={act}\n            onChange={this.actionChanged}\n            hass={hass}\n            localize={localize}\n          />))}\n        <paper-card>\n          <div class='card-actions add-card'>\n            <paper-button onTap={this.addAction}>{localize('ui.panel.config.automation.editor.actions.add')}</paper-button>\n          </div>\n        </paper-card>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '../ha-config-section.js';\nimport '../../../components/ha-markdown.js';\n\nimport Trigger from './trigger/index.js';\nimport Condition from './condition/index.js';\nimport Script from './script/index.js';\n\nexport default class Automation extends Component {\n  constructor() {\n    super();\n\n    this.onChange = this.onChange.bind(this);\n    this.triggerChanged = this.triggerChanged.bind(this);\n    this.conditionChanged = this.conditionChanged.bind(this);\n    this.actionChanged = this.actionChanged.bind(this);\n  }\n\n  onChange(ev) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { [ev.target.name]: ev.target.value },\n    ));\n  }\n\n  triggerChanged(trigger) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { trigger },\n    ));\n  }\n\n  conditionChanged(condition) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { condition },\n    ));\n  }\n\n  actionChanged(action) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { action },\n    ));\n  }\n\n  render({ automation, isWide, hass, localize }) {\n    const {\n      alias, trigger, condition, action\n    } = automation;\n\n    return (\n      <div>\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{alias}</span>\n          <span slot='introduction'>\n            {localize('ui.panel.config.automation.editor.introduction')}\n          </span>\n          <paper-card>\n            <div class='card-content'>\n              <paper-input\n                label={localize('ui.panel.config.automation.editor.alias')}\n                name=\"alias\"\n                value={alias}\n                onvalue-changed={this.onChange}\n              />\n            </div>\n          </paper-card>\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{localize('ui.panel.config.automation.editor.triggers.header')}</span>\n          <span slot='introduction'>\n            <ha-markdown content={localize('ui.panel.config.automation.editor.triggers.introduction')} />\n          </span>\n          <Trigger\n            trigger={trigger}\n            onChange={this.triggerChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{localize('ui.panel.config.automation.editor.conditions.header')}</span>\n          <span slot='introduction'>\n            <ha-markdown content={localize('ui.panel.config.automation.editor.conditions.introduction')} />\n          </span>\n          <Condition\n            condition={condition || []}\n            onChange={this.conditionChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{localize('ui.panel.config.automation.editor.actions.header')}</span>\n          <span slot='introduction'>\n            <ha-markdown content={localize('ui.panel.config.automation.editor.actions.introduction')} />\n          </span>\n          <Script\n            script={action}\n            onChange={this.actionChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n      </div>\n    );\n  }\n}\n","import { render } from 'preact';\n\nexport default function unmount(mountEl) {\n  render(() => null, mountEl);\n}\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-fab/paper-fab.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { h, render } from 'preact';\n\nimport '../../../layouts/ha-app-layout.js';\n\nimport Automation from '../js/automation.js';\nimport unmountPreact from '../../../common/preact/unmount.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nfunction AutomationEditor(mountEl, props, mergeEl) {\n  return render(h(Automation, props), mountEl, mergeEl);\n}\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaAutomationEditor extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      .errors {\n        padding: 20px;\n        font-weight: bold;\n        color: var(--google-red-500);\n      }\n      .content {\n        padding-bottom: 20px;\n      }\n      paper-card {\n        display: block;\n      }\n      .triggers,\n      .script {\n        margin-top: -16px;\n      }\n      .triggers paper-card,\n      .script paper-card {\n        margin-top: 16px;\n      }\n      .add-card paper-button {\n        display: block;\n        text-align: center;\n      }\n      .card-menu {\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 1;\n        color: var(--primary-text-color);\n      }\n      .card-menu paper-item {\n        cursor: pointer;\n      }\n      span[slot=introduction] a {\n        color: var(--primary-color);\n      }\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n        margin-bottom: -80px;\n        transition: margin-bottom .3s;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      paper-fab[dirty] {\n        margin-bottom: 0;\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[name]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class=\"content\">\n        <template is=\"dom-if\" if=\"[[errors]]\">\n          <div class=\"errors\">[[errors]]</div>\n        </template>\n        <div id=\"root\"></div>\n      </div>\n      <paper-fab slot=\"fab\" is-wide\\$=\"[[isWide]]\" dirty\\$=\"[[dirty]]\" icon=\"hass:content-save\" title=\"[[localize('ui.panel.config.automation.editor.save')]]\" on-click=\"saveAutomation\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_updateComponent',\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      errors: {\n        type: Object,\n        value: null,\n      },\n\n      dirty: {\n        type: Boolean,\n        value: false,\n      },\n\n      config: {\n        type: Object,\n        value: null,\n      },\n\n      automation: {\n        type: Object,\n        observer: 'automationChanged',\n      },\n\n      creatingNew: {\n        type: Boolean,\n        observer: 'creatingNewChanged',\n      },\n\n      name: {\n        type: String,\n        computed: 'computeName(automation, localize)'\n      },\n\n      isWide: {\n        type: Boolean,\n        observer: '_updateComponent',\n      },\n\n      _rendered: {\n        type: Object,\n        value: null,\n      },\n\n      _renderScheduled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    this.configChanged = this.configChanged.bind(this);\n    super.ready(); // This call will initialize preact.\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._rendered) {\n      unmountPreact(this._rendered);\n      this._rendered = null;\n    }\n  }\n\n  configChanged(config) {\n    // onChange gets called a lot during initial rendering causing recursing calls.\n    if (this._rendered === null) return;\n    this.config = config;\n    this.errors = null;\n    this.dirty = true;\n    this._updateComponent();\n  }\n\n  automationChanged(newVal, oldVal) {\n    if (!newVal) return;\n    if (!this.hass) {\n      setTimeout(() => this.automationChanged(newVal, oldVal), 0);\n      return;\n    }\n    if (oldVal && oldVal.attributes.id === newVal.attributes.id) {\n      return;\n    }\n    this.hass.callApi('get', 'config/automation/config/' + newVal.attributes.id)\n      .then(function (config) {\n        // Normalize data: ensure trigger, action and condition are lists\n        // Happens when people copy paste their automations into the config\n        ['trigger', 'condition', 'action'].forEach(function (key) {\n          var value = config[key];\n          if (value && !Array.isArray(value)) {\n            config[key] = [value];\n          }\n        });\n        this.dirty = false;\n        this.config = config;\n        this._updateComponent();\n      }.bind(this));\n  }\n\n  creatingNewChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n    this.dirty = false;\n    this.config = {\n      alias: this.localize('ui.panel.config.automation.editor.default_name'),\n      trigger: [\n        { platform: 'state' },\n      ],\n      condition: [],\n      action: [\n        { service: '' },\n      ],\n    };\n    this._updateComponent();\n  }\n\n  backTapped() {\n    if (this.dirty &&\n        // eslint-disable-next-line\n        !confirm(this.localize('ui.panel.config.automation.editor.unsaved_confirm'))) {\n      return;\n    }\n    history.back();\n  }\n\n  _updateComponent() {\n    if (this._renderScheduled || !this.hass || !this.config) return;\n    this._renderScheduled = true;\n    Promise.resolve().then(() => {\n      this._rendered = AutomationEditor(this.$.root, {\n        automation: this.config,\n        onChange: this.configChanged,\n        isWide: this.isWide,\n        hass: this.hass,\n        localize: this.localize,\n      }, this._rendered);\n      this._renderScheduled = false;\n    });\n  }\n\n  saveAutomation() {\n    var id = this.creatingNew ? '' + Date.now() : this.automation.attributes.id;\n    this.hass.callApi('post', 'config/automation/config/' + id, this.config).then(function () {\n      this.dirty = false;\n\n      if (this.creatingNew) {\n        this.navigate(`/config/automation/edit/${id}`, true);\n      }\n    }.bind(this), function (errors) {\n      this.errors = errors.body.message;\n      throw errors;\n    }.bind(this));\n  }\n\n  computeName(automation, localize) {\n    return automation\n      ? computeStateName(automation)\n      : localize('ui.panel.config.automation.editor.default_name');\n  }\n}\n\ncustomElements.define('ha-automation-editor', HaAutomationEditor);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-fab/paper-fab.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-markdown.js';\nimport '../../../layouts/ha-app-layout.js';\n\nimport '../ha-config-section.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaAutomationPicker extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      :host {\n        display: block;\n      }\n\n      paper-item {\n        cursor: pointer;\n      }\n\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      a {\n        color: var(--primary-color);\n      }\n\n      ha-markdown p {\n        margin: 0px;\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.automation.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <ha-config-section is-wide=\"[[isWide]]\">\n        <div slot=\"header\">[[localize('ui.panel.config.automation.picker.header')]]</div>\n        <div slot=\"introduction\">\n          <ha-markdown content=\"[[localize('ui.panel.config.automation.picker.introduction')]]\"></ha-markdown>\n        </div>\n\n        <paper-card heading=\"[[localize('ui.panel.config.automation.picker.pick_automation')]]\">\n          <template is=\"dom-if\" if=\"[[!automations.length]]\">\n            <div class=\"card-content\">\n              <p>[[localize('ui.panel.config.automation.picker.no_automations')]]</p>\n            </div>\n          </template>\n          <template is=\"dom-repeat\" items=\"[[automations]]\" as=\"automation\">\n            <paper-item>\n              <paper-item-body two-line=\"\" on-click=\"automationTapped\">\n                <div>[[computeName(automation)]]</div>\n                <div secondary=\"\">[[computeDescription(automation)]]</div>\n              </paper-item-body>\n              <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n            </paper-item>\n          </template>\n        </paper-card>\n      </ha-config-section>\n\n      <paper-fab slot=\"fab\" is-wide\\$=\"[[isWide]]\" icon=\"hass:plus\" title=\"[[localize('ui.panel.config.automation.picker.add_automation')]]\" on-click=\"addAutomation\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      automations: {\n        type: Array,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n    };\n  }\n\n  automationTapped(ev) {\n    this.navigate('/config/automation/edit/' + this.automations[ev.model.index].attributes.id);\n  }\n\n  addAutomation() {\n    this.navigate('/config/automation/new');\n  }\n\n  computeName(automation) {\n    return computeStateName(automation);\n  }\n\n  // Still thinking of something to add here.\n  // eslint-disable-next-line\n  computeDescription(automation) {\n    return '';\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-automation-picker', HaAutomationPicker);\n","import '@polymer/app-route/app-route.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-automation-editor.js';\nimport './ha-automation-picker.js';\n\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\n\nclass HaConfigAutomation extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      ha-automation-picker,\n      ha-automation-editor {\n        height: 100%;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/automation/edit/:automation\" data=\"{{_routeData}}\" active=\"{{_edittingAutomation}}\"></app-route>\n    <app-route route=\"[[route]]\" pattern=\"/automation/new\" active=\"{{_creatingNew}}\"></app-route>\n\n    <template is=\"dom-if\" if=\"[[!showEditor]]\">\n      <ha-automation-picker hass=\"[[hass]]\" narrow=\"[[narrow]]\" show-menu=\"[[showMenu]]\" automations=\"[[automations]]\" is-wide=\"[[isWide]]\"></ha-automation-picker>\n    </template>\n\n    <template is=\"dom-if\" if=\"[[showEditor]]\" restamp=\"\">\n      <ha-automation-editor hass=\"[[hass]]\" automation=\"[[automation]]\" is-wide=\"[[isWide]]\" creating-new=\"[[_creatingNew]]\"></ha-automation-editor>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n      route: Object,\n      isWide: Boolean,\n      _routeData: Object,\n      _routeMatches: Boolean,\n      _creatingNew: Boolean,\n      _edittingAutomation: Boolean,\n\n      automations: {\n        type: Array,\n        computed: 'computeAutomations(hass)',\n      },\n\n      automation: {\n        type: Object,\n        computed: 'computeAutomation(automations, _edittingAutomation, _routeData)',\n      },\n\n      showEditor: {\n        type: Boolean,\n        computed: 'computeShowEditor(_edittingAutomation, _creatingNew)',\n      }\n    };\n  }\n\n  computeAutomation(automations, edittingAddon, routeData) {\n    if (!automations || !edittingAddon) {\n      return null;\n    }\n    for (var i = 0; i < automations.length; i++) {\n      if (automations[i].attributes.id === routeData.automation) {\n        return automations[i];\n      }\n    }\n    return null;\n  }\n\n  computeAutomations(hass) {\n    var automations = [];\n\n    Object.keys(hass.states).forEach(function (key) {\n      var entity = hass.states[key];\n\n      if (computeStateDomain(entity) === 'automation' &&\n          'id' in entity.attributes) {\n        automations.push(entity);\n      }\n    });\n\n    return automations.sort(function entitySortBy(entityA, entityB) {\n      var nameA = (entityA.attributes.alias ||\n                   entityA.entity_id).toLowerCase();\n      var nameB = (entityB.attributes.alias ||\n                   entityB.entity_id).toLowerCase();\n\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n\n  computeShowEditor(_edittingAutomation, _creatingNew) {\n    return _creatingNew || _edittingAutomation;\n  }\n}\n\ncustomElements.define('ha-config-automation', HaConfigAutomation);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallApiButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\" disabled=\"[[disabled]]\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      path: String,\n\n      method: {\n        type: String,\n        value: 'POST',\n      },\n\n      data: {\n        type: Object,\n        value: {},\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    const eventData = {\n      method: this.method,\n      path: this.path,\n      data: this.data,\n    };\n\n    this.hass.callApi(this.method, this.path, this.data)\n      .then((resp) => {\n        this.progress = false;\n        this.$.progress.actionSuccess();\n        eventData.success = true;\n        eventData.response = resp;\n      }, (resp) => {\n        this.progress = false;\n        this.$.progress.actionError();\n        eventData.success = false;\n        eventData.response = resp;\n      }).then(() => {\n        this.fire('hass-api-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-api-button', HaCallApiButton);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HassSubpage extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"ha-style\"></style>\n    <app-header-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[header]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <slot></slot>\n    </app-header-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      header: String\n    };\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('hass-subpage', HassSubpage);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-api-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\n\nimport formatDateTime from '../../../common/datetime/format_date_time.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudAccount extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 24px;\n      }\n      paper-card {\n        display: block;\n      }\n      .account-row {\n        display: flex;\n        padding: 0 16px;\n      }\n      paper-button {\n        align-self: center;\n      }\n      .soon {\n        font-style: italic;\n        margin-top: 24px;\n        text-align: center;\n      }\n      .nowrap {\n        white-space: nowrap;;\n      }\n      .wrap {\n        white-space: normal;\n      }\n      .status {\n        text-transform: capitalize;\n        padding: 16px;\n      }\n      paper-button {\n        color: var(--primary-color);\n        font-weight: 500;\n      }\n      a {\n        color: var(--primary-color);\n      }\n    </style>\n    <hass-subpage header=\"Cloud Account\">\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Home Assistant Cloud</span>\n          <span slot=\"introduction\">\n            Thank you for supporting Home Assistant. It's because of people like you that we are able to run this project and make a great home automation experience for everyone. Thank you!\n          </span>\n\n          <paper-card heading=\"Account\">\n            <div class=\"account-row\">\n              <paper-item-body two-line=\"\">\n                [[account.email]]\n                <div secondary=\"\" class=\"wrap\">\n                  <span class=\"nowrap\">Subscription expires on </span>\n                  <span class=\"nowrap\">[[_formatExpiration(account.sub_exp)]]</span>\n                </div>\n              </paper-item-body>\n              <paper-button on-click=\"handleLogout\">Sign out</paper-button>\n            </div>\n\n            <div class=\"account-row\">\n              <paper-item-body>\n                Cloud connection status\n              </paper-item-body>\n              <div class=\"status\">[[account.cloud]]</div>\n            </div>\n          </paper-card>\n        </ha-config-section>\n\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Integrations</span>\n          <span slot=\"introduction\">\n            Integrations for Home Assistant Cloud allow you to connect with services in the cloud\n            without having to expose your Home Assistant instance publicly on the internet.\n          </span>\n\n          <paper-card heading=\"Alexa\">\n            <div class=\"card-content\">\n              With the Alexa integration for Home Assistant Cloud you'll be able to control all your Home Assistant devices via any Alexa-enabled device.\n              <ul>\n                <li>\n                  <a href=\"https://alexa.amazon.com/spa/index.html#skills/dp/B0772J1QKB/?ref=skill_dsk_skb_sr_2\" target=\"_blank\">\n                    Activate the Home Assistant skill for Alexa\n                  </a>\n                </li>\n                <li>\n                  <a href=\"https://www.home-assistant.io/cloud/alexa/\" target=\"_blank\">\n                    Config documentation\n                  </a>\n                </li>\n              </ul>\n              <p><em>This integration requires an Alexa-enabled device like the Amazon Echo.</em></p>\n            </div>\n          </paper-card>\n\n          <paper-card heading=\"Google Assistant\">\n            <div class=\"card-content\">\n              With the Google Assistant integration for Home Assistant Cloud you'll be able to control all your Home Assistant devices via any Google Assistant-enabled device.\n              <ul>\n                <li>\n                  <a href=\"https://assistant.google.com/services/a/uid/00000091fd5fb875\" target=\"_blank\">\n                    Activate the Home Assistant skill for Google Assistant\n                  </a>\n                </li>\n                <li>\n                  <a href=\"https://www.home-assistant.io/cloud/google_assistant/\" target=\"_blank\">\n                    Config documentation\n                  </a>\n                </li>\n              </ul>\n              <p><em>This integration requires a Google Assistant-enabled device like the Google Home or Android phone.</em></p>\n            </div>\n            <div class=\"card-actions\">\n              <ha-call-api-button hass=\"[[hass]]\" path=\"cloud/google_actions/sync\">Sync devices</ha-call-api-button>\n            </div>\n          </paper-card>\n        </ha-config-section>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: {\n        type: Object,\n        observer: '_accountChanged',\n      },\n    };\n  }\n\n  handleLogout() {\n    this.hass.callApi('post', 'cloud/logout').then(() => this.fire('ha-account-refreshed', { account: null }));\n  }\n\n  _formatExpiration(date) {\n    return formatDateTime(new Date(date));\n  }\n\n  _accountChanged(newAccount) {\n    if (!newAccount || newAccount.cloud !== 'connecting') {\n      if (this._accountUpdater) {\n        clearTimeout(this._accountUpdater);\n        this._accountUpdater = null;\n      }\n      return;\n    } else if (this._accountUpdater) {\n      return;\n    }\n    setTimeout(() => {\n      this._accountUpdater = null;\n      this.hass.callApi('get', 'cloud/account')\n        .then(account => this.fire('ha-account-refreshed', { account }));\n    }, 5000);\n  }\n}\n\ncustomElements.define('ha-config-cloud-account', HaConfigCloudAccount);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-progress-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudForgotPassword extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 24px;\n      }\n\n      paper-card {\n        display: block;\n        max-width: 600px;\n        margin: 0 auto;\n        margin-top: 24px;\n      }\n      h1 {\n        @apply --paper-font-headline;\n        margin: 0;\n      }\n      .error {\n        color: var(--google-red-500);\n      }\n      .card-actions {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .card-actions a {\n        color: var(--primary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <hass-subpage header=\"Forgot Password\">\n      <div class=\"content\">\n        <paper-card>\n          <div class=\"card-content\">\n            <h1>Forgot your password?</h1>\n            <p>\n              Enter your email address and we will send you a link to reset your password.\n            </p>\n            <div class=\"error\" hidden\\$=\"[[!_error]]\">[[_error]]</div>\n            <paper-input autofocus=\"\" id=\"email\" label=\"E-mail\" value=\"{{email}}\" type=\"email\" on-keydown=\"_keyDown\" error-message=\"Invalid email\"></paper-input>\n          </div>\n          <div class=\"card-actions\">\n            <ha-progress-button on-click=\"_handleEmailPasswordReset\" progress=\"[[_requestInProgress]]\">Send reset email</ha-progress-button>\n          </div>\n        </paper-card>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      email: {\n        type: String,\n        notify: true,\n        observer: '_emailChanged'\n      },\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      _error: {\n        type: String,\n        value: '',\n      }\n    };\n  }\n\n  _emailChanged() {\n    this._error = '';\n    this.$.email.invalid = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleEmailPasswordReset();\n      ev.preventDefault();\n    }\n  }\n\n  _handleEmailPasswordReset() {\n    if (!this.email || !this.email.includes('@')) {\n      this.$.email.invalid = true;\n    }\n\n    if (this.$.email.invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass.callApi('post', 'cloud/forgot_password', {\n      email: this.email,\n    }).then(() => {\n      this._requestInProgress = false;\n      this.fire('cloud-done', {\n        flashMessage: 'Check your email for instructions on how to reset your password.'\n      });\n    }, err => this.setProperties({\n      _requestInProgress: false,\n      _error: err && err.body && err.body.message ?\n        err.body.message : 'Unknown error',\n    }));\n  }\n}\n\ncustomElements.define('ha-config-cloud-forgot-password', HaConfigCloudForgotPassword);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-ripple/paper-ripple.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-progress-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudLogin extends\n  NavigateMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 24px;\n      }\n      [slot=introduction] a {\n        color: var(--primary-color);\n      }\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n      paper-card:last-child {\n        margin-top: 24px;\n      }\n      h1 {\n        @apply --paper-font-headline;\n        margin: 0;\n      }\n      .error {\n        color: var(--google-red-500);\n      }\n      .card-actions {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      [hidden] {\n        display: none;\n      }\n      .flash-msg {\n        padding-right: 44px;\n      }\n      .flash-msg paper-icon-button {\n        position: absolute;\n        top: 8px;\n        right: 8px;\n        color: var(--secondary-text-color);\n      }\n    </style>\n    <hass-subpage header=\"Cloud Login\">\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Home Assistant Cloud</span>\n          <span slot=\"introduction\">\n            The Home Assistant Cloud allows your local Home Assistant instance to connect with cloud-only services like Amazon Alexa.\n            <p><a href=\"https://www.home-assistant.io/components/cloud/\" target=\"_blank\">Learn more</a></p>\n          </span>\n\n          <paper-card hidden\\$=\"[[!flashMessage]]\">\n            <div class=\"card-content flash-msg\">\n              [[flashMessage]]\n              <paper-icon-button icon=\"hass:close\" on-click=\"_dismissFlash\">Dismiss</paper-icon-button>\n              <paper-ripple id=\"flashRipple\" noink=\"\"></paper-ripple>\n            </div>\n          </paper-card>\n\n          <paper-card>\n            <div class=\"card-content\">\n              <h1>Sign In</h1>\n              <div class=\"error\" hidden\\$=\"[[!_error]]\">[[_error]]</div>\n              <paper-input label=\"Email\" id=\"email\" type=\"email\" value=\"{{email}}\" on-keydown=\"_keyDown\" error-message=\"Invalid email\"></paper-input>\n              <paper-input id=\"password\" label=\"Password\" value=\"{{_password}}\" type=\"password\" on-keydown=\"_keyDown\" error-message=\"Passwords are at least 8 characters\"></paper-input>\n            </div>\n            <div class=\"card-actions\">\n              <ha-progress-button on-click=\"_handleLogin\" progress=\"[[_requestInProgress]]\">Sign in</ha-progress-button>\n              <button class=\"link\" hidden=\"[[_requestInProgress]]\" on-click=\"_handleForgotPassword\">forgot password?</button>\n            </div>\n          </paper-card>\n\n          <paper-card>\n            <paper-item on-click=\"_handleRegister\">\n              <paper-item-body two-line=\"\">\n                Create Account\n                <div secondary=\"\">Get up and running quickly.</div>\n              </paper-item-body>\n              <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n            </paper-item>\n          </paper-card>\n        </ha-config-section>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      email: {\n        type: String,\n        notify: true,\n      },\n      _password: {\n        type: String,\n        value: '',\n      },\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      flashMessage: {\n        type: String,\n        notify: true,\n      },\n      _error: String,\n    };\n  }\n\n  static get observers() {\n    return [\n      '_inputChanged(email, _password)'\n    ];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.flashMessage) {\n      // Wait for DOM to be drawn\n      requestAnimationFrame(() =>\n        requestAnimationFrame(() =>\n          this.$.flashRipple.simulatedRipple()));\n    }\n  }\n\n  _inputChanged() {\n    this.$.email.invalid = false;\n    this.$.password.invalid = false;\n    this._error = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleLogin();\n      ev.preventDefault();\n    }\n  }\n\n  _handleLogin() {\n    let invalid = false;\n\n    if (!this.email || !this.email.includes('@')) {\n      this.$.email.invalid = true;\n      this.$.email.focus();\n      invalid = true;\n    }\n\n    if (this._password.length < 8) {\n      this.$.password.invalid = true;\n\n      if (!invalid) {\n        invalid = true;\n        this.$.password.focus();\n      }\n    }\n\n    if (invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass.callApi('post', 'cloud/login', {\n      email: this.email,\n      password: this._password,\n    }).then((account) => {\n      this.fire('ha-account-refreshed', { account: account });\n      this.setProperties({\n        email: '',\n        _password: '',\n      });\n    }, (err) => {\n      // Do this before setProperties because changing it clears errors.\n      this._password = '';\n\n      const errCode = err && err.body && err.body.code;\n      if (errCode === 'PasswordChangeRequired') {\n        alert('You need to change your password before logging in.');\n        this.navigate('/config/cloud/forgot-password');\n        return;\n      }\n\n      const props = {\n        _requestInProgress: false,\n        _error: (err && err.body && err.body.message) ? err.body.message : 'Unknown error',\n      };\n\n      if (errCode === 'UserNotConfirmed') {\n        props._error = 'You need to confirm your email before logging in.';\n      }\n\n      this.setProperties(props);\n      this.$.email.focus();\n    });\n  }\n\n  _handleRegister() {\n    this.flashMessage = '';\n    this.navigate('/config/cloud/register');\n  }\n\n  _handleForgotPassword() {\n    this.flashMessage = '';\n    this.navigate('/config/cloud/forgot-password');\n  }\n\n  _dismissFlash() {\n    // give some time to let the ripple finish.\n    setTimeout(() => { this.flashMessage = ''; }, 200);\n  }\n}\n\ncustomElements.define('ha-config-cloud-login', HaConfigCloudLogin);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-progress-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudRegister extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      a {\n        color: var(--primary-color);\n      }\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n      paper-card:last-child {\n        margin-top: 24px;\n      }\n      h1 {\n        @apply --paper-font-headline;\n        margin: 0;\n      }\n      .error {\n        color: var(--google-red-500);\n      }\n      .card-actions {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <hass-subpage header=\"Register Account\">\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Register with the Home Assistant Cloud</span>\n          <span slot=\"introduction\">\n            Register today to easily connect with the Home Assistant Cloud. This will allow you to unlock great new services and functionality, like Amazon Alexa integration.\n\n            <p>\n              By registering an account you agree to the following terms and conditions.\n              </p><ul>\n                <li><a href=\"https://home-assistant.io/tos/\" target=\"_blank\">Terms and Conditions</a></li>\n                <li><a href=\"https://home-assistant.io/privacy/\" target=\"_blank\">Privacy Policy</a></li>\n              </ul>\n            <p></p>\n          </span>\n\n          <paper-card>\n            <div class=\"card-content\">\n              <div class=\"header\">\n                <h1>Register</h1>\n                <div class=\"error\" hidden\\$=\"[[!_error]]\">[[_error]]</div>\n              </div>\n              <paper-input autofocus=\"\" id=\"email\" label=\"Email address\" type=\"email\" value=\"{{email}}\" on-keydown=\"_keyDown\" error-message=\"Invalid email\"></paper-input>\n              <paper-input id=\"password\" label=\"Password\" value=\"{{_password}}\" type=\"password\" on-keydown=\"_keyDown\" error-message=\"Your password needs to be at least 8 characters\"></paper-input>\n            </div>\n            <div class=\"card-actions\">\n              <ha-progress-button on-click=\"_handleRegister\" progress=\"[[_requestInProgress]]\">Create Account</ha-progress-button>\n              <button class=\"link\" hidden=\"[[_requestInProgress]]\" on-click=\"_handleResendVerifyEmail\">Resend confirmation email</button>\n            </div>\n          </paper-card>\n        </ha-config-section>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      email: {\n        type: String,\n        notify: true,\n      },\n\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      _password: {\n        type: String,\n        value: '',\n      },\n      _error: {\n        type: String,\n        value: '',\n      },\n    };\n  }\n\n  static get observers() {\n    return [\n      '_inputChanged(email, _password)'\n    ];\n  }\n\n  _inputChanged() {\n    this._error = '';\n    this.$.email.invalid = false;\n    this.$.password.invalid = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleRegister();\n      ev.preventDefault();\n    }\n  }\n\n  _handleRegister() {\n    let invalid = false;\n\n    if (!this.email || !this.email.includes('@')) {\n      this.$.email.invalid = true;\n      this.$.email.focus();\n      invalid = true;\n    }\n\n    if (this._password.length < 8) {\n      this.$.password.invalid = true;\n\n      if (!invalid) {\n        invalid = true;\n        this.$.password.focus();\n      }\n    }\n\n    if (invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass.callApi('post', 'cloud/register', {\n      email: this.email,\n      password: this._password,\n    }).then(() => this._verificationEmailSent(), (err) => {\n      // Do this before setProperties because changing it clears errors.\n      this._password = '';\n\n      this.setProperties({\n        _requestInProgress: false,\n        _error: err && err.body && err.body.message ? err.body.message : 'Unknown error'\n      });\n    });\n  }\n\n  _handleResendVerifyEmail() {\n    if (!this.email) {\n      this.$.email.invalid = true;\n      return;\n    }\n\n    this.hass.callApi('post', 'cloud/resend_confirm', {\n      email: this.email,\n    }).then(() => this._verificationEmailSent(), err => this.setProperties({\n      _error: err && err.body && err.body.message ? err.body.message : 'Unknown error'\n    }));\n  }\n\n  _verificationEmailSent() {\n    this.setProperties({\n      _requestInProgress: false,\n      _password: '',\n    });\n    this.fire('cloud-done', {\n      flashMessage: 'Account created! Check your email for instructions on how to activate your account.'\n    });\n  }\n}\n\ncustomElements.define('ha-config-cloud-register', HaConfigCloudRegister);\n","import '@polymer/app-route/app-route.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport '../ha-config-section.js';\nimport './ha-config-cloud-account.js';\nimport './ha-config-cloud-forgot-password.js';\nimport './ha-config-cloud-login.js';\nimport './ha-config-cloud-register.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\nconst LOGGED_IN_URLS = [\n  '/cloud/account',\n];\nconst NOT_LOGGED_IN_URLS = [\n  '/cloud/login',\n  '/cloud/register',\n  '/cloud/forgot-password',\n];\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigCloud extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n  <app-route route=\"[[route]]\" pattern=\"/cloud/:page\" data=\"{{_routeData}}\" tail=\"{{_routeTail}}\"></app-route>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;account&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-account hass=\"[[hass]]\" account=\"[[account]]\" is-wide=\"[[isWide]]\"></ha-config-cloud-account>\n  </template>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;login&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-login page-name=\"login\" hass=\"[[hass]]\" is-wide=\"[[isWide]]\" email=\"{{_loginEmail}}\" flash-message=\"{{_flashMessage}}\"></ha-config-cloud-login>\n  </template>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;register&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-register page-name=\"register\" hass=\"[[hass]]\" is-wide=\"[[isWide]]\" email=\"{{_loginEmail}}\"></ha-config-cloud-register>\n  </template>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;forgot-password&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-forgot-password page-name=\"forgot-password\" hass=\"[[hass]]\" email=\"{{_loginEmail}}\"></ha-config-cloud-forgot-password>\n  </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      loadingAccount: {\n        type: Boolean,\n        value: false\n      },\n      account: {\n        type: Object,\n      },\n      _flashMessage: {\n        type: String,\n        value: '',\n      },\n\n      route: Object,\n\n      _routeData: Object,\n      _routeTail: Object,\n      _loginEmail: String,\n    };\n  }\n\n  static get observers() {\n    return [\n      '_checkRoute(route, account)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('cloud-done', (ev) => {\n      this._flashMessage = ev.detail.flashMessage;\n      this.navigate('/config/cloud/login');\n    });\n  }\n\n  _checkRoute(route) {\n    if (!route || route.path.substr(0, 6) !== '/cloud') return;\n\n    this._debouncer = Debouncer.debounce(\n      this._debouncer,\n      timeOut.after(0),\n      () => {\n        if (!this.account && !NOT_LOGGED_IN_URLS.includes(route.path)) {\n          this.navigate('/config/cloud/login', true);\n        } else if (this.account && !LOGGED_IN_URLS.includes(route.path)) {\n          this.navigate('/config/cloud/account', true);\n        }\n      }\n    );\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-config-cloud', HaConfigCloud);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js';\nimport '@polymer/paper-dialog/paper-dialog.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-form.js';\nimport '../../../components/ha-markdown.js';\nimport '../../../resources/ha-style.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigFlow extends\n  LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style-dialog\">\n      .error {\n        color: red;\n      }\n      paper-dialog {\n        max-width: 500px;\n      }\n      ha-markdown img:first-child:last-child {\n        display: block;\n        margin: 0 auto;\n      }\n    </style>\n    <paper-dialog id=\"dialog\" with-backdrop=\"\" opened=\"[[step]]\" on-opened-changed=\"_openedChanged\">\n      <h2>\n        <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;abort&quot;)]]\">\n          Aborted\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;create_entry&quot;)]]\">\n          Success!\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;form&quot;)]]\">\n          [[_computeStepTitle(localize, step)]]\n        </template>\n      </h2>\n      <paper-dialog-scrollable>\n        <template is=\"dom-if\" if=\"[[!step]]\">\n          Loading flow.\n        </template>\n        <template is=\"dom-if\" if=\"[[step]]\">\n          <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;abort&quot;)]]\">\n            <p>[[_computeStepAbortedReason(localize, step)]]</p>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;create_entry&quot;)]]\">\n            <p>Created config for [[step.title]]</p>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;form&quot;)]]\">\n            <template is=\"dom-if\" if=\"[[_computeStepDescription(localize, step)]]\">\n              <ha-markdown content=\"[[_computeStepDescription(localize, step)]]\"></ha-markdown>\n            </template>\n\n            <ha-form data=\"{{stepData}}\" schema=\"[[step.data_schema]]\" error=\"[[step.errors]]\" compute-label=\"[[_computeLabelCallback(localize, step)]]\" compute-error=\"[[_computeErrorCallback(localize, step)]]\"></ha-form>\n          </template>\n        </template>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;abort&quot;)]]\">\n          <paper-button on-click=\"_flowDone\">Close</paper-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;create_entry&quot;)]]\">\n          <paper-button on-click=\"_flowDone\">Close</paper-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(step.type, &quot;form&quot;)]]\">\n          <paper-button on-click=\"_submitStep\">Submit</paper-button>\n        </template>\n      </div>\n    </paper-dialog>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      step: {\n        type: Object,\n        notify: true,\n      },\n      flowId: {\n        type: String,\n        observer: '_flowIdChanged'\n      },\n      /*\n       * Store user entered data.\n       */\n      stepData: Object,\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('keypress', (ev) => {\n      if (ev.keyCode === 13) {\n        this._submitStep();\n      }\n    });\n    // Fix for overlay showing on top of dialog.\n    this.$.dialog.addEventListener('iron-overlay-opened', (ev) => {\n      if (ev.target.withBackdrop) {\n        ev.target.parentNode.insertBefore(ev.target.backdropElement, ev.target);\n      }\n    });\n  }\n\n  _flowIdChanged(flowId) {\n    if (!flowId) {\n      this.setProperties({\n        step: null,\n        stepData: {},\n      });\n      return;\n\n    // Check if parent passed in step data to use.\n    } else if (this.step) {\n      this._processStep(this.step);\n      return;\n    }\n\n    this.hass.callApi('get', `config/config_entries/flow/${flowId}`)\n      .then((step) => {\n        this._processStep(step);\n        // When the flow changes, center the dialog.\n        // Don't do it on each step or else the dialog keeps bouncing.\n        setTimeout(() => this.$.dialog.center(), 0);\n      });\n  }\n\n  _submitStep() {\n    this.hass.callApi('post', `config/config_entries/flow/${this.flowId}`, this.stepData)\n      .then(step => this._processStep(step));\n  }\n\n  _processStep(step) {\n    if (!step.errors) step.errors = {};\n    this.step = step;\n    // We got a new form if there are no errors.\n    if (Object.keys(step.errors).length === 0) {\n      this.stepData = {};\n    }\n  }\n\n  _flowDone() {\n    this.fire('flow-closed', {\n      flowFinished: true\n    });\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _openedChanged(ev) {\n    // Closed dialog by clicking on the overlay\n    if (this.step && !ev.detail.value) {\n      this.fire('flow-closed', {\n        flowFinished: ['success', 'abort'].includes(this.step.type)\n      });\n    }\n  }\n\n  _computeStepAbortedReason(localize, step) {\n    return localize(`component.${step.handler}.config.abort.${step.reason}`);\n  }\n\n  _computeStepTitle(localize, step) {\n    return localize(`component.${step.handler}.config.step.${step.step_id}.title`);\n  }\n\n  _computeStepDescription(localize, step) {\n    return localize(`component.${step.handler}.config.step.${step.step_id}.description`);\n  }\n\n  _computeLabelCallback(localize, step) {\n    // Returns a callback for ha-form to calculate labels per schema object\n    return schema => localize(`component.${step.handler}.config.step.${step.step_id}.data.${schema.name}`);\n  }\n\n  _computeErrorCallback(localize, step) {\n    // Returns a callback for ha-form to calculate error messages\n    return error => localize(`component.${step.handler}.config.error.${error}`);\n  }\n}\n\ncustomElements.define('ha-config-flow', HaConfigFlow);\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport './ha-config-flow.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigManager extends\n  LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n  <style include=\"iron-flex ha-style\">\n    paper-button {\n      color: var(--primary-color);\n      font-weight: 500;\n      top: 3px;\n      margin-right: -.57em;\n    }\n    paper-card:last-child {\n      margin-top: 12px;\n    }\n    .config-entry-row {\n      display: flex;\n      padding: 0 16px;\n    }\n  </style>\n\n  <hass-subpage header=\"Integrations\">\n    <template is=\"dom-if\" if=\"[[_progress.length]]\">\n      <ha-config-section is-wide=\"[[isWide]]\">\n        <span slot=\"header\">In Progress</span>\n        <paper-card>\n          <template is=\"dom-repeat\" items=\"[[_progress]]\">\n            <div class=\"config-entry-row\">\n              <paper-item-body>\n                [[_computeIntegrationTitle(localize, item.handler)]]\n              </paper-item-body>\n              <paper-button on-click=\"_continueFlow\">Configure</paper-button>\n            </div>\n          </template>\n        </paper-card>\n      </ha-config-section>\n    </template>\n\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">Configured</span>\n      <paper-card>\n        <template is=\"dom-if\" if=\"[[!_entries.length]]\">\n          <div class=\"config-entry-row\">\n            <paper-item-body>\n              Nothing configured yet\n            </paper-item-body>\n          </div>\n        </template>\n        <template is=\"dom-repeat\" items=\"[[_entries]]\">\n          <div class=\"config-entry-row\">\n            <paper-item-body three-line=\"\">\n              [[item.title]]\n              <div secondary=\"\">Integration: [[_computeIntegrationTitle(localize, item.domain)]]</div>\n              <div secondary=\"\">Added by: [[item.source]]</div>\n              <div secondary=\"\">State: [[item.state]]</div>\n            </paper-item-body>\n            <paper-button on-click=\"_removeEntry\">Remove</paper-button>\n          </div>\n        </template>\n      </paper-card>\n    </ha-config-section>\n\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">Available</span>\n      <paper-card>\n        <template is=\"dom-repeat\" items=\"[[_handlers]]\">\n          <div class=\"config-entry-row\">\n            <paper-item-body>\n              [[_computeIntegrationTitle(localize, item)]]\n            </paper-item-body>\n            <paper-button on-click=\"_createFlow\">Configure</paper-button>\n          </div>\n        </template>\n      </paper-card>\n    </ha-config-section>\n  </hass-subpage>\n\n  <ha-config-flow hass=\"[[hass]]\" flow-id=\"[[_flowId]]\" step=\"{{_flowStep}}\" on-flow-closed=\"_flowClose\"></ha-config-flow>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n\n      _flowId: {\n        type: String,\n        value: null,\n      },\n      /*\n       * The step of the current selected flow, if available.\n       */\n      _flowStep: Object,\n\n      /**\n       * Existing entries.\n       */\n      _entries: Array,\n\n      /**\n       * Current flows that are in progress and have not been started by a user.\n       * For example, can be discovered devices that require more config.\n       */\n      _progress: Array,\n\n      _handlers: Array,\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._loadData();\n  }\n\n  _createFlow(ev) {\n    this.hass.callApi('post', 'config/config_entries/flow', { handler: ev.model.item })\n      .then((flow) => {\n        this._userCreatedFlow = true;\n        this.setProperties({\n          _flowStep: flow,\n          _flowId: flow.flow_id,\n        });\n      });\n  }\n\n  _continueFlow(ev) {\n    this._userCreatedFlow = false;\n    this.setProperties({\n      _flowId: ev.model.item.flow_id,\n      _flowStep: null,\n    });\n  }\n\n  _removeEntry(ev) {\n    if (!confirm('Are you sure you want to delete this integration?')) return;\n\n    const entryId = ev.model.item.entry_id;\n\n    this.hass.callApi('delete', `config/config_entries/entry/${entryId}`)\n      .then((result) => {\n        this._entries = this._entries.filter(entry => entry.entry_id !== entryId);\n        if (result.require_restart) {\n          alert('Restart Home Assistant to finish removing this integration');\n        }\n      });\n  }\n\n  _flowClose(ev) {\n    // Was the flow completed?\n    if (ev.detail.flowFinished) {\n      this._loadData();\n\n    // Remove a flow if it was not finished and was started by the user\n    } else if (this._userCreatedFlow) {\n      this.hass.callApi('delete', `config/config_entries/flow/${this._flowId}`);\n    }\n\n    this._flowId = null;\n  }\n\n  _loadData() {\n    this._loadEntries();\n    this._loadDiscovery();\n    this.hass.callApi('get', 'config/config_entries/flow_handlers')\n      .then((handlers) => { this._handlers = handlers; });\n  }\n\n  _loadEntries() {\n    this.hass.callApi('get', 'config/config_entries/entry')\n      .then((entries) => { this._entries = entries; });\n  }\n\n  _loadDiscovery() {\n    this.hass.callApi('get', 'config/config_entries/flow')\n      .then((progress) => { this._progress = progress; });\n  }\n\n  _computeIntegrationTitle(localize, integration) {\n    return localize(`component.${integration}.config.title`);\n  }\n}\n\ncustomElements.define('ha-config-entries', HaConfigManager);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigSectionCore extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .validate-container {\n        @apply --layout-vertical;\n        @apply --layout-center-center;\n        height: 140px;\n      }\n\n      .validate-result {\n        color: var(--google-green-500);\n        font-weight: 500;\n        margin-bottom: 1em;\n      }\n\n      .config-invalid {\n        margin: 1em 0;\n      }\n\n      .config-invalid .text {\n        color: var(--google-red-500);\n        font-weight: 500;\n      }\n\n      .config-invalid paper-button {\n        float: right;\n      }\n\n      .validate-log {\n        white-space: pre-wrap;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.core.header')]]</span>\n      <span slot=\"introduction\">[[localize('ui.panel.config.core.section.core.introduction')]]</span>\n\n      <paper-card heading=\"[[localize('ui.panel.config.core.section.core.validation.heading')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.config.core.section.core.validation.introduction')]]\n          <template is=\"dom-if\" if=\"[[!validateLog]]\">\n            <div class=\"validate-container\">\n              <template is=\"dom-if\" if=\"[[!validating]]\">\n                <template is=\"dom-if\" if=\"[[isValid]]\">\n                  <div class=\"validate-result\" id=\"result\">\n                    [[localize('ui.panel.config.core.section.core.validation.valid')]]\n                  </div>\n                </template>\n                <paper-button raised=\"\" on-click=\"validateConfig\">\n                  [[localize('ui.panel.config.core.section.core.validation.check_config')]]\n                </paper-button>\n              </template>\n              <template is=\"dom-if\" if=\"[[validating]]\">\n                <paper-spinner active=\"\"></paper-spinner>\n              </template>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[validateLog]]\">\n            <div class=\"config-invalid\">\n              <span class=\"text\">\n                [[localize('ui.panel.config.core.section.core.validation.invalid')]]\n              </span>\n              <paper-button raised=\"\" on-click=\"validateConfig\">\n                [[localize('ui.panel.config.core.section.core.validation.check_config')]]\n              </paper-button>\n            </div>\n            <div id=\"configLog\" class=\"validate-log\">[[validateLog]]</div>\n          </template>\n        </div>\n      </paper-card>\n\n      <paper-card heading=\"[[localize('ui.panel.config.core.section.core.reloading.heading')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.config.core.section.core.reloading.introduction')]]\n        </div>\n        <div class=\"card-actions\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"homeassistant\" service=\"reload_core_config\">[[localize('ui.panel.config.core.section.core.reloading.core')]]\n          </ha-call-service-button>\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"group\" service=\"reload\" hidden\\$=\"[[!groupLoaded(hass)]]\">[[localize('ui.panel.config.core.section.core.reloading.group')]]\n          </ha-call-service-button>\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"automation\" service=\"reload\" hidden\\$=\"[[!automationLoaded(hass)]]\">[[localize('ui.panel.config.core.section.core.reloading.automation')]]\n          </ha-call-service-button>\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"script\" service=\"reload\" hidden\\$=\"[[!scriptLoaded(hass)]]\">[[localize('ui.panel.config.core.section.core.reloading.script')]]\n          </ha-call-service-button>\n        </div>\n      </paper-card>\n\n      <paper-card heading=\"[[localize('ui.panel.config.core.section.core.server_management.heading')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.config.core.section.core.server_management.introduction')]]\n        </div>\n        <div class=\"card-actions warning\">\n          <ha-call-service-button class=\"warning\" hass=\"[[hass]]\" domain=\"homeassistant\" service=\"restart\">[[localize('ui.panel.config.core.section.core.server_management.restart')]]\n          </ha-call-service-button>\n          <ha-call-service-button class=\"warning\" hass=\"[[hass]]\" domain=\"homeassistant\" service=\"stop\">[[localize('ui.panel.config.core.section.core.server_management.stop')]]\n          </ha-call-service-button>\n        </div>\n      </paper-card>\n\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n\n      validating: {\n        type: Boolean,\n        value: false,\n      },\n\n      isValid: {\n        type: Boolean,\n        value: null,\n      },\n\n      validateLog: {\n        type: String,\n        value: '',\n      },\n    };\n  }\n\n  groupLoaded(hass) {\n    return isComponentLoaded(hass, 'group');\n  }\n\n  automationLoaded(hass) {\n    return isComponentLoaded(hass, 'automation');\n  }\n\n  scriptLoaded(hass) {\n    return isComponentLoaded(hass, 'script');\n  }\n\n  validateConfig() {\n    this.validating = true;\n    this.validateLog = '';\n    this.isValid = null;\n\n    this.hass.callApi('POST', 'config/core/check_config').then((result) => {\n      this.validating = false;\n      this.isValid = result.result === 'valid';\n\n      if (!this.isValid) {\n        this.validateLog = result.errors;\n      }\n    });\n  }\n}\n\ncustomElements.define('ha-config-section-core', HaConfigSectionCore);\n","import '@polymer/paper-toggle-button/paper-toggle-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaPushNotificationsToggle extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <paper-toggle-button hidden\\$=\"[[!pushSupported]]\" disabled=\"[[loading]]\" checked=\"{{pushChecked}}\"></paper-toggle-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: { type: Object, value: null },\n      pushSupported: {\n        type: Boolean,\n        readOnly: true,\n        notify: true,\n        value: (\n          'serviceWorker' in navigator && 'PushManager' in window &&\n            (document.location.protocol === 'https:' ||\n              document.location.hostname === 'localhost' ||\n              document.location.hostname === '127.0.0.1')\n        )\n      },\n      pushChecked: {\n        type: Boolean,\n        value: 'Notification' in window && Notification.permission === 'granted',\n        observer: 'handlePushChange',\n      },\n      loading: {\n        type: Boolean,\n        value: true,\n      }\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (!this.pushSupported) return;\n\n    navigator.serviceWorker.ready.then(\n      (reg) => {\n        reg.pushManager.getSubscription().then((subscription) => {\n          this.loading = false;\n          this.pushChecked = !!subscription;\n        });\n      },\n      () => {\n        // no service worker.\n        this._setPushSupported(false);\n      }\n    );\n  }\n  handlePushChange(pushChecked) {\n    if (!this.pushSupported) return;\n    if (pushChecked) {\n      this.subscribePushNotifications();\n    } else {\n      this.unsubscribePushNotifications();\n    }\n  }\n  subscribePushNotifications() {\n    navigator.serviceWorker.ready\n      .then(reg => reg.pushManager.subscribe({ userVisibleOnly: true }))\n      .then(\n        (sub) => {\n          let browserName;\n          if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n            browserName = 'firefox';\n          } else {\n            browserName = 'chrome';\n          }\n\n          return this.hass.callApi('POST', 'notify.html5', {\n            subscription: sub,\n            browser: browserName\n          });\n        },\n        (err) => {\n          let message;\n          if (err.message && err.message.indexOf('gcm_sender_id') !== -1) {\n            message = 'Please setup the notify.html5 platform.';\n          } else {\n            message = 'Notification registration failed.';\n          }\n\n          /* eslint-disable no-console */\n          console.error(err);\n          /* eslint-enable no-console */\n\n          this.fire('hass-notification', { message: message });\n          this.pushChecked = false;\n        }\n      );\n  }\n  unsubscribePushNotifications() {\n    navigator.serviceWorker.ready\n      .then(reg => reg.pushManager.getSubscription())\n      .then((sub) => {\n        if (!sub) return Promise.resolve();\n\n        return this.hass\n          .callApi('DELETE', 'notify.html5', { subscription: sub })\n          .then(() => {\n            sub.unsubscribe();\n          });\n      })\n      .catch((err) => {\n        /* eslint-disable no-console */\n        console.error('Error in unsub push', err);\n        /* eslint-enable no-console */\n\n        this.fire('hass-notification', {\n          message: 'Failed unsubscribing for push notifications.'\n        });\n      });\n  }\n}\n\ncustomElements.define('ha-push-notifications-toggle', HaPushNotificationsToggle);\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport '@polymer/iron-label/iron-label.js';\nimport '@polymer/paper-card/paper-card.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-push-notifications-toggle.js';\n\nimport '../ha-config-section.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigSectionPushNotifications extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex iron-flex-alignment iron-positioning\">\n      ha-push-notifications-toggle {\n        margin-left: 16px;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.push_notifications.header')]]</span>\n      <span slot=\"introduction\">\n        [[localize('ui.panel.config.core.section.push_notifications.introduction')]]\n      </span>\n\n      <paper-card>\n        <div class=\"card-content\">\n          <iron-label class=\"horizontal layout\">\n            [[localize('ui.panel.config.core.section.push_notifications.push_notifications')]]\n            <ha-push-notifications-toggle hass=\"[[hass]]\" push-supported=\"{{pushSupported}}\"></ha-push-notifications-toggle>\n          </iron-label>\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      pushSupported: {\n        type: Boolean,\n        notify: true,\n      },\n    };\n  }\n}\n\ncustomElements.define('ha-config-section-push-notifications', HaConfigSectionPushNotifications);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigSectionThemes extends\n  LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.themes.header')]]</span>\n      <span slot=\"introduction\">\n        [[localize('ui.panel.config.core.section.themes.introduction')]]\n      </span>\n\n      <paper-card>\n        <div class=\"card-content\">\n          <paper-dropdown-menu label=\"[[localize('ui.panel.config.core.section.themes.header')]]\" dynamic-align=\"\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTheme}}\">\n              <template is=\"dom-repeat\" items=\"[[themes]]\" as=\"theme\">\n                <paper-item>[[theme]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n\n      themes: {\n        type: Array,\n        computed: 'computeThemes(hass)',\n      },\n\n      selectedTheme: {\n        type: Number,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\n      'selectionChanged(hass, selectedTheme)',\n    ];\n  }\n\n  ready() {\n    super.ready();\n    if (this.hass.selectedTheme && this.themes.indexOf(this.hass.selectedTheme) > 0) {\n      this.selectedTheme = this.themes.indexOf(this.hass.selectedTheme);\n    } else if (!this.hass.selectedTheme) {\n      this.selectedTheme = 0;\n    }\n  }\n\n  computeThemes(hass) {\n    if (!hass) return [];\n    return ['Backend-selected', 'default'].concat(Object.keys(hass.themes.themes).sort());\n  }\n\n  selectionChanged(hass, selection) {\n    if (selection > 0 && selection < this.themes.length) {\n      if (hass.selectedTheme !== this.themes[selection]) {\n        this.fire('settheme', this.themes[selection]);\n      }\n    } else if (selection === 0 && hass.selectedTheme !== '') {\n      this.fire('settheme', '');\n    }\n  }\n}\n\ncustomElements.define('ha-config-section-themes', HaConfigSectionThemes);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigSectionTranslation extends\n  LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.translation.header')]]</span>\n      <span slot=\"introduction\">\n        [[localize('ui.panel.config.core.section.translation.introduction')]]\n      </span>\n\n      <paper-card>\n        <div class=\"card-content\">\n          <paper-dropdown-menu label=\"[[localize('ui.panel.config.core.section.translation.language')]]\" dynamic-align=\"\">\n            <paper-listbox slot=\"dropdown-content\" attr-for-selected=\"language-tag\" selected=\"{{languageSelection}}\">\n              <template is=\"dom-repeat\" items=\"[[languages]]\">\n                <paper-item language-tag\\$=\"[[item.tag]]\">[[item.nativeName]]</paper-item>\n              </template>\n            </paper-listbox>\n          &gt;</paper-dropdown-menu>\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n      languageSelection: {\n        type: String,\n        observer: 'languageSelectionChanged',\n      },\n      languages: {\n        type: Array,\n        computed: 'computeLanguages(hass)',\n      },\n    };\n  }\n  static get observers() { return ['setLanguageSelection(language)']; }\n\n  computeLanguages(hass) {\n    if (!hass || !hass.translationMetadata) {\n      return [];\n    }\n    return Object.keys(hass.translationMetadata.translations).map(key => ({\n      tag: key,\n      nativeName: hass.translationMetadata.translations[key].nativeName,\n    }));\n  }\n\n  setLanguageSelection(language) {\n    this.languageSelection = language;\n  }\n\n  languageSelectionChanged(newVal) {\n    // Only fire event if language was changed. This prevents select updates when\n    // responding to hass changes.\n    if (newVal !== this.language) {\n      this.fire('hass-language-select', { language: newVal });\n    }\n  }\n}\n\ncustomElements.define('ha-config-section-translation', HaConfigSectionTranslation);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../layouts/ha-app-layout.js';\nimport '../../../resources/ha-style.js';\n\nimport './ha-config-section-core.js';\nimport './ha-config-section-push-notifications.js';\nimport './ha-config-section-themes.js';\nimport './ha-config-section-translation.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigCore extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 32px;\n      }\n\n      .border {\n        margin: 32px auto 0;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n        max-width: 1040px;\n      }\n\n      .narrow .border {\n        max-width: 640px;\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.core.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class\\$=\"[[computeClasses(isWide)]]\">\n        <ha-config-section-core is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ha-config-section-core>\n\n        <template is=\"dom-if\" if=\"[[pushSupported]]\">\n          <div class=\"border\"></div>\n          <ha-config-section-push-notifications is-wide=\"[[isWide]]\" hass=\"[[hass]]\" push-supported=\"{{pushSupported}}\"></ha-config-section-push-notifications>\n        </template>\n        <template is=\"dom-if\" if=\"[[computeIsTranslationLoaded(hass)]]\">\n          <div class=\"border\"></div>\n          <ha-config-section-translation is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ha-config-section-translation>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[computeIsThemesLoaded(hass)]]\">\n          <div class=\"border\"></div>\n          <ha-config-section-themes is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ha-config-section-themes>\n        </template>\n\n      </div>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      pushSupported: {\n        type: Boolean,\n        value: true,\n      },\n    };\n  }\n\n  computeClasses(isWide) {\n    return isWide ? 'content' : 'content narrow';\n  }\n\n  computeIsZwaveLoaded(hass) {\n    return isComponentLoaded(hass, 'config.zwave');\n  }\n\n  computeIsTranslationLoaded(hass) {\n    return hass.translationMetadata &&\n      Object.keys(hass.translationMetadata.translations).length;\n  }\n\n  computeIsThemesLoaded(hass) {\n    return hass.themes && hass.themes.themes &&\n      Object.keys(hass.themes.themes).length;\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-config-core', HaConfigCore);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateName from '../../common/entity/compute_state_name.js';\n\nclass HaEntityConfig extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      paper-card {\n        display: block;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        padding-bottom: 24px;\n      }\n\n      .form-placeholder {\n        @apply --layout-vertical;\n        @apply --layout-center-center;\n        height: 96px;\n      }\n\n      [hidden]: {\n        display: none;\n      }\n\n      .card-actions {\n        @apply --layout-horizontal;\n        @apply --layout-justified;\n      }\n    </style>\n    <paper-card>\n      <div class=\"card-content\">\n        <div class=\"device-picker\">\n          <paper-dropdown-menu label=\"[[label]]\" class=\"flex\" disabled=\"[[!entities.length]]\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedEntity}}\">\n              <template is=\"dom-repeat\" items=\"[[entities]]\" as=\"state\">\n                <paper-item>[[computeSelectCaption(state)]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n\n        <div class=\"form-container\">\n          <template is=\"dom-if\" if=\"[[computeShowPlaceholder(formState)]]\">\n            <div class=\"form-placeholder\">\n              <template is=\"dom-if\" if=\"[[computeShowNoDevices(formState)]]\">\n                No entities found! :-(\n              </template>\n\n              <template is=\"dom-if\" if=\"[[computeShowSpinner(formState)]]\">\n                <paper-spinner active=\"\" alt=\"[[formState]]\"></paper-spinner>\n                [[formState]]\n              </template>\n            </div>\n          </template>\n\n          <div hidden\\$=\"[[!computeShowForm(formState)]]\" id=\"form\"></div>\n        </div>\n      </div>\n      <div class=\"card-actions\">\n        <paper-button on-click=\"saveEntity\" disabled=\"[[computeShowPlaceholder(formState)]]\">SAVE</paper-button>\n        <template is=\"dom-if\" if=\"[[allowDelete]]\">\n          <paper-button class=\"warning\" on-click=\"deleteEntity\" disabled=\"[[computeShowPlaceholder(formState)]]\">DELETE</paper-button>\n        </template>\n      </div>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: 'hassChanged',\n      },\n\n      label: {\n        type: String,\n        value: 'Device',\n      },\n\n      entities: {\n        type: Array,\n        observer: 'entitiesChanged',\n      },\n\n      allowDelete: {\n        type: Boolean,\n        value: false,\n      },\n\n      selectedEntity: {\n        type: Number,\n        value: -1,\n        observer: 'entityChanged',\n      },\n\n      formState: {\n        type: String,\n        // no-devices, loading, saving, editing\n        value: 'no-devices',\n      },\n\n      config: {\n        type: Object,\n      }\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.formEl = document.createElement(this.config.component);\n    this.formEl.hass = this.hass;\n    this.$.form.appendChild(this.formEl);\n    this.entityChanged(this.selectedEntity);\n  }\n\n  computeSelectCaption(stateObj) {\n    return this.config.computeSelectCaption ?\n      this.config.computeSelectCaption(stateObj) :\n      computeStateName(stateObj);\n  }\n\n  computeShowNoDevices(formState) {\n    return formState === 'no-devices';\n  }\n\n  computeShowSpinner(formState) {\n    return formState === 'loading' || formState === 'saving';\n  }\n\n  computeShowPlaceholder(formState) {\n    return formState !== 'editing';\n  }\n\n  computeShowForm(formState) {\n    return formState === 'editing';\n  }\n\n  hassChanged(hass) {\n    if (this.formEl) {\n      this.formEl.hass = hass;\n    }\n  }\n\n  entitiesChanged(entities, oldEntities) {\n    if (entities.length === 0) {\n      this.formState = 'no-devices';\n      return;\n    } else if (!oldEntities) {\n      this.selectedEntity = 0;\n      return;\n    }\n\n    var oldEntityId = oldEntities[this.selectedEntity].entity_id;\n\n    var newIndex = entities.findIndex(function (ent) {\n      return ent.entity_id === oldEntityId;\n    });\n\n    if (newIndex === -1) {\n      this.selectedEntity = 0;\n    } else if (newIndex !== this.selectedEntity) {\n      // Entity moved index\n      this.selectedEntity = newIndex;\n    }\n  }\n\n  entityChanged(index) {\n    if (!this.entities || !this.formEl) return;\n    var entity = this.entities[index];\n    if (!entity) return;\n\n    this.formState = 'loading';\n    var el = this;\n    this.formEl.loadEntity(entity)\n      .then(function () {\n        el.formState = 'editing';\n      });\n  }\n\n  saveEntity() {\n    this.formState = 'saving';\n    var el = this;\n    this.formEl.saveEntity()\n      .then(function () {\n        el.formState = 'editing';\n      });\n  }\n}\n\ncustomElements.define('ha-entity-config', HaEntityConfig);\n","import '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCustomizeArray extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      paper-dropdown-menu {\n        margin: -9px 0;\n      }\n    </style>\n    <paper-dropdown-menu label=\"[[item.description]]\" disabled=\"[[item.secondary]]\" selected-item-label=\"{{item.value}}\" dynamic-align=\"\">\n      <paper-listbox slot=\"dropdown-content\" selected=\"[[computeSelected(item)]]\">\n        <template is=\"dom-repeat\" items=\"[[getOptions(item)]]\" as=\"option\">\n          <paper-item>[[option]]</paper-item>\n        </template>\n      </paper-listbox>\n    </paper-dropdown-menu>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n\n  getOptions(item) {\n    const domain = item.domain || '*';\n    const options = item.options[domain] || item.options['*'];\n    if (!options) {\n      this.item.type = 'string';\n      this.fire('item-changed');\n      return [];\n    }\n    return options.sort();\n  }\n\n  computeSelected(item) {\n    const options = this.getOptions(item);\n    return options.indexOf(item.value);\n  }\n}\ncustomElements.define('ha-customize-array', HaCustomizeArray);\n","import '@polymer/paper-checkbox/paper-checkbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeBoolean extends PolymerElement {\n  static get template() {\n    return html`\n    <paper-checkbox disabled=\"[[item.secondary]]\" checked=\"{{item.value}}\">\n      [[item.description]]\n    </paper-checkbox>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n}\ncustomElements.define('ha-customize-boolean', HaCustomizeBoolean);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeIcon extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        @apply --layout-horizontal;\n      }\n      .icon-image {\n        border: 1px solid grey;\n        padding: 8px;\n        margin-right: 20px;\n        margin-top: 10px;\n      }\n    </style>\n    <iron-icon class=\"icon-image\" icon=\"[[item.value]]\"></iron-icon>\n    <paper-input auto-validate=\"\" pattern=\"(hass:.*)?\" error-message=\"Must start with 'hass:'\" disabled=\"[[item.secondary]]\" label=\"icon\" value=\"{{item.value}}\">\n    </paper-input>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n}\ncustomElements.define('ha-customize-icon', HaCustomizeIcon);\n","import '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeKeyValue extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        @apply --layout-horizontal;\n      }\n      paper-input {\n        @apply --layout-flex;\n      }\n      .key {\n        padding-right: 20px;\n      }\n    </style>\n    <paper-input disabled=\"[[item.secondary]]\" class=\"key\" label=\"Attribute name\" value=\"{{item.attribute}}\">\n    </paper-input>\n    <paper-input disabled=\"[[item.secondary]]\" label=\"Attribute value\" value=\"{{item.value}}\">\n    </paper-input>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n}\ncustomElements.define('ha-customize-key-value', HaCustomizeKeyValue);\n","import '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeString extends PolymerElement {\n  static get template() {\n    return html`\n    <paper-input disabled=\"[[item.secondary]]\" label=\"[[getLabel(item)]]\" value=\"{{item.value}}\">\n    </paper-input>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n\n  getLabel(item) {\n    return item.description + (item.type === 'json' ? ' (JSON formatted)' : '');\n  }\n}\ncustomElements.define('ha-customize-string', HaCustomizeString);\n","import '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport hassAttributeUtil from '../../../util/hass-attributes-util.js';\nimport '../ha-form-style.js';\nimport './types/ha-customize-array.js';\nimport './types/ha-customize-boolean.js';\nimport './types/ha-customize-icon.js';\nimport './types/ha-customize-key-value.js';\nimport './types/ha-customize-string.js';\n\nclass HaCustomizeAttribute extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"ha-form-style\">\n      :host {\n        display: block;\n        position: relative;\n        padding-right: 40px;\n      }\n\n      .button {\n        position: absolute;\n        margin-top: -20px;\n        top: 50%;\n        right: 0;\n      }\n    </style>\n    <div id=\"wrapper\" class=\"form-group\"></div>\n    <paper-icon-button class=\"button\" icon=\"[[getIcon(item.secondary)]]\" on-click=\"tapButton\"></paper-icon-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notify: true,\n        observer: 'itemObserver',\n      }\n    };\n  }\n\n  tapButton() {\n    if (this.item.secondary) {\n      this.item = Object.assign({}, this.item, { secondary: false });\n    } else {\n      this.item = Object.assign({}, this.item, { closed: true });\n    }\n  }\n\n  getIcon(secondary) {\n    return secondary ? 'hass:pencil' : 'hass:close';\n  }\n\n  itemObserver(item) {\n    const wrapper = this.$.wrapper;\n    const tag = hassAttributeUtil.TYPE_TO_TAG[item.type].toUpperCase();\n    let child;\n    if (wrapper.lastChild && wrapper.lastChild.tagName === tag) {\n      child = wrapper.lastChild;\n    } else {\n      if (wrapper.lastChild) {\n        wrapper.removeChild(wrapper.lastChild);\n      }\n      // Creating an element with upper case works fine in Chrome, but in FF it doesn't immediately\n      // become a defined Custom Element. Polymer does that in some later pass.\n      this.$.child = child = document.createElement(tag.toLowerCase());\n      child.className = 'form-control';\n      child.addEventListener('item-changed', () => {\n        this.item = Object.assign({}, child.item);\n      });\n    }\n    child.setProperties({ item: this.item });\n    if (child.parentNode === null) {\n      wrapper.appendChild(child);\n    }\n  }\n}\ncustomElements.define('ha-customize-attribute', HaCustomizeAttribute);\n","import { MutableData } from '@polymer/polymer/lib/mixins/mutable-data.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-customize-attribute.js';\n\nclass HaFormCustomizeAttributes extends MutableData(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <template is=\"dom-repeat\" items=\"{{attributes}}\" mutable-data=\"\">\n      <ha-customize-attribute item=\"{{item}}\" hidden\\$=\"[[item.closed]]\">\n      </ha-customize-attribute>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      attributes: {\n        type: Array,\n        notify: true,\n      },\n    };\n  }\n}\ncustomElements.define('ha-form-customize-attributes', HaFormCustomizeAttributes);\n","import '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport hassAttributeUtil from '../../../util/hass-attributes-util.js';\nimport './ha-form-customize-attributes.js';\n\nimport computeStateDomain from '../../../common/entity/compute_state_domain';\n\nclass HaFormCustomize extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style ha-form-style\">\n      .warning {\n        color: red;\n      }\n\n      .attributes-text {\n        padding-left: 20px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[computeShowWarning(localConfig, globalConfig)]]\">\n      <div class=\"warning\">\n        It seems that your configuration.yaml doesn't properly include customize.yaml<br>\n        Changes made here won't affect your configuration.\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasLocalAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes are already set in customize.yaml<br>\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{localAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasGlobalAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes are customized from outside of customize.yaml<br>\n        Possibly via a domain, a glob or a different include.\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{globalAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasExistingAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes of the entity are set programatically.<br>\n        You can override them if you like.\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{existingAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasNewAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes weren't set. Set them if you like.\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{newAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <div class=\"form-group\">\n      <paper-dropdown-menu label=\"Pick an attribute to override\" class=\"flex\" dynamic-align=\"\">\n        <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedNewAttribute}}\">\n          <template is=\"dom-repeat\" items=\"[[newAttributesOptions]]\" as=\"option\">\n            <paper-item>[[option]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entity: Object,\n\n      localAttributes: {\n        type: Array,\n        computed: 'computeLocalAttributes(localConfig)',\n      },\n      hasLocalAttributes: Boolean,\n\n      globalAttributes: {\n        type: Array,\n        computed: 'computeGlobalAttributes(localConfig, globalConfig)',\n      },\n      hasGlobalAttributes: Boolean,\n\n      existingAttributes: {\n        type: Array,\n        computed: 'computeExistingAttributes(localConfig, globalConfig, entity)',\n      },\n      hasExistingAttributes: Boolean,\n\n      newAttributes: {\n        type: Array,\n        value: [],\n      },\n      hasNewAttributes: Boolean,\n\n      newAttributesOptions: Array,\n      selectedNewAttribute: {\n        type: Number,\n        value: -1,\n        observer: 'selectedNewAttributeObserver',\n      },\n\n      localConfig: Object,\n      globalConfig: Object,\n    };\n  }\n\n  static get observers() {\n    return [\n      'attributesObserver(localAttributes.*, globalAttributes.*, existingAttributes.*, newAttributes.*)',\n    ];\n  }\n\n  _initOpenObject(key, value, secondary, config) {\n    return Object.assign({\n      attribute: key,\n      value: value,\n      closed: false,\n      domain: computeStateDomain(this.entity),\n      secondary: secondary,\n      description: key,\n    }, config);\n  }\n\n  loadEntity(entity) {\n    this.entity = entity;\n    return this.hass.callApi('GET', 'config/customize/config/' + entity.entity_id)\n      .then((data) => {\n        this.localConfig = data.local;\n        this.globalConfig = data.global;\n        this.newAttributes = [];\n      });\n  }\n\n  saveEntity() {\n    const data = {};\n    const attrs = this.localAttributes\n      .concat(this.globalAttributes, this.existingAttributes, this.newAttributes);\n    attrs.forEach((attr) => {\n      if (attr.closed || attr.secondary || !attr.attribute || !attr.value) return;\n      const value = attr.type === 'json' ? JSON.parse(attr.value) : attr.value;\n      if (!value) return;\n      data[attr.attribute] = value;\n    });\n\n    const objectId = this.entity.entity_id;\n    return this.hass.callApi('POST', 'config/customize/config/' + objectId, data);\n  }\n\n  _computeSingleAttribute(key, value, secondary) {\n    const config = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[key]\n        || { type: hassAttributeUtil.UNKNOWN_TYPE };\n    return this._initOpenObject(key, config.type === 'json' ? JSON.stringify(value) : value, secondary, config);\n  }\n\n  _computeAttributes(config, keys, secondary) {\n    return keys.map(key => this._computeSingleAttribute(key, config[key], secondary));\n  }\n\n  computeLocalAttributes(localConfig) {\n    if (!localConfig) return [];\n    const localKeys = Object.keys(localConfig);\n    const result = this._computeAttributes(localConfig, localKeys, false);\n    return result;\n  }\n\n  computeGlobalAttributes(localConfig, globalConfig) {\n    if (!localConfig || !globalConfig) return [];\n    const localKeys = Object.keys(localConfig);\n    const globalKeys = Object.keys(globalConfig).filter(key => !localKeys.includes(key));\n    return this._computeAttributes(globalConfig, globalKeys, true);\n  }\n\n  computeExistingAttributes(localConfig, globalConfig, entity) {\n    if (!localConfig || !globalConfig || !entity) return [];\n    const localKeys = Object.keys(localConfig);\n    const globalKeys = Object.keys(globalConfig);\n    const entityKeys = Object.keys(entity.attributes)\n      .filter(key => !localKeys.includes(key) && !globalKeys.includes(key));\n    return this._computeAttributes(entity.attributes, entityKeys, true);\n  }\n\n  computeShowWarning(localConfig, globalConfig) {\n    if (!localConfig || !globalConfig) return false;\n    return Object.keys(localConfig)\n      .some(key => JSON.stringify(globalConfig[key]) !== JSON.stringify(localConfig[key]));\n  }\n\n  filterFromAttributes(attributes) {\n    return key => !attributes || attributes.every(attr => attr.attribute !== key || attr.closed);\n  }\n\n  getNewAttributesOptions(localAttributes, globalAttributes, existingAttributes, newAttributes) {\n    const knownKeys =\n        Object.keys(hassAttributeUtil.LOGIC_STATE_ATTRIBUTES)\n          .filter((key) => {\n            const conf = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[key];\n            return conf && (!conf.domains || !this.entity ||\n                              conf.domains.includes(computeStateDomain(this.entity)));\n          })\n          .filter(this.filterFromAttributes(localAttributes))\n          .filter(this.filterFromAttributes(globalAttributes))\n          .filter(this.filterFromAttributes(existingAttributes))\n          .filter(this.filterFromAttributes(newAttributes));\n    return knownKeys.sort().concat('Other');\n  }\n\n  selectedNewAttributeObserver(selected) {\n    if (selected < 0) return;\n    const option = this.newAttributesOptions[selected];\n    if (selected === this.newAttributesOptions.length - 1) {\n      // The \"Other\" option.\n      const attr = this._initOpenObject('', '', false /* secondary */, { type: hassAttributeUtil.ADD_TYPE });\n      this.push('newAttributes', attr);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    let result = this.localAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('localAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.globalAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('globalAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.existingAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('existingAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.newAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('newAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    const attr = this._computeSingleAttribute(option, '', false /* secondary */);\n    this.push('newAttributes', attr);\n    this.selectedNewAttribute = -1;\n  }\n\n  attributesObserver() {\n    this.hasLocalAttributes =\n        this.localAttributes && this.localAttributes.some(attr => !attr.closed);\n    this.hasGlobalAttributes =\n        this.globalAttributes && this.globalAttributes.some(attr => !attr.closed);\n    this.hasExistingAttributes =\n        this.existingAttributes && this.existingAttributes.some(attr => !attr.closed);\n    this.hasNewAttributes =\n        this.newAttributes && this.newAttributes.some(attr => !attr.closed);\n    this.newAttributesOptions = this.getNewAttributesOptions(\n      this.localAttributes,\n      this.globalAttributes,\n      this.existingAttributes,\n      this.newAttributes\n    );\n  }\n}\ncustomElements.define('ha-form-customize', HaFormCustomize);\n","/**\n * Sort function to help sort states by name\n *\n * Usage:\n *   const states = [state1, state2]\n *   states.sort(statesSortByName);\n */\nimport computeStateName from './compute_state_name.js';\n\nexport default function sortStatesByName(entityA, entityB) {\n  const nameA = computeStateName(entityA);\n  const nameB = computeStateName(entityB);\n  if (nameA < nameB) {\n    return -1;\n  }\n  if (nameA > nameB) {\n    return 1;\n  }\n  return 0;\n}\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport '../ha-entity-config.js';\nimport './ha-form-customize.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport sortByName from '../../../common/entity/states_sort_by_name.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigCustomize extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n    </style>\n\n    <app-header-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.customize.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class\\$=\"[[computeClasses(isWide)]]\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Customization</span>\n          <span slot=\"introduction\">\n            Tweak per-entity attributes.<br>\n            Added/edited customizations will take effect immediately. Removed customizations will take effect when the entity is updated.\n          </span>\n          <ha-entity-config hass=\"[[hass]]\" label=\"Entity\" entities=\"[[entities]]\" config=\"[[entityConfig]]\">\n          </ha-entity-config>\n        </ha-config-section>\n      </div>\n    </app-header-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n\n      entities: {\n        type: Array,\n        computed: 'computeEntities(hass)',\n      },\n\n      entityConfig: {\n        type: Object,\n        value: {\n          component: 'ha-form-customize',\n          computeSelectCaption: stateObj =>\n            computeStateName(stateObj) + ' (' + computeStateDomain(stateObj) + ')'\n        }\n      },\n    };\n  }\n\n  computeClasses(isWide) {\n    return isWide ? 'content' : 'content narrow';\n  }\n\n  _backTapped() {\n    history.back();\n  }\n\n  computeEntities(hass) {\n    return Object.keys(hass.states)\n      .map(key => hass.states[key])\n      .sort(sortByName);\n  }\n}\ncustomElements.define('ha-config-customize', HaConfigCustomize);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigCloudMenu extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex\">\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <paper-card>\n      <paper-item on-click=\"_navigate\">\n        <paper-item-body two-line=\"\">\n          Home Assistant Cloud\n          <template is=\"dom-if\" if=\"[[account]]\">\n            <div secondary=\"\">Logged in as [[account.email]]</div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!account]]\">\n            <div secondary=\"\">Not logged in</div>\n          </template>\n        </paper-item-body>\n        <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n      </paper-item>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: Object,\n    };\n  }\n\n  _navigate() {\n    this.navigate('/config/cloud');\n  }\n}\n\ncustomElements.define('ha-config-cloud-menu', HaConfigCloudMenu);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigEntriesMenu extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex\">\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <paper-card>\n      <paper-item on-click=\"_navigate\">\n        <paper-item-body two-line=\"\">\n          Integrations\n          <div secondary=\"\">EXPERIMENTAL – Manage connected devices and services</div>\n        </paper-item-body>\n        <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n      </paper-item>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: Object,\n    };\n  }\n\n  _navigate() {\n    this.navigate('/config/integrations');\n  }\n}\n\ncustomElements.define('ha-config-entries-menu', HaConfigEntriesMenu);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\n\nconst CORE_PAGES = [\n  'core',\n  'customize',\n];\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaConfigNavigation extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n  <style include=\"iron-flex\">\n    paper-card {\n      display: block;\n    }\n    paper-item {\n      cursor: pointer;\n    }\n  </style>\n  <paper-card>\n    <template is=\"dom-repeat\" items=\"[[pages]]\">\n      <template is=\"dom-if\" if=\"[[_computeLoaded(hass, item)]]\">\n        <paper-item on-click=\"_navigate\">\n          <paper-item-body two-line=\"\">\n            [[_computeCaption(item, localize)]]\n            <div secondary=\"\">[[_computeDescription(item, localize)]]</div>\n          </paper-item-body>\n          <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n        </paper-item>\n      </template>\n    </template>\n  </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      pages: {\n        type: Array,\n        value: [\n          'core',\n          'customize',\n          'automation',\n          'script',\n          'zwave',\n        ],\n      }\n    };\n  }\n\n  _computeLoaded(hass, page) {\n    return CORE_PAGES.includes(page) || isComponentLoaded(hass, page);\n  }\n\n  _computeCaption(page, localize) {\n    return localize(`ui.panel.config.${page}.caption`);\n  }\n\n  _computeDescription(page, localize) {\n    return localize(`ui.panel.config.${page}.description`);\n  }\n\n  _navigate(ev) {\n    this.navigate('/config/' + ev.model.item);\n  }\n}\n\ncustomElements.define('ha-config-navigation', HaConfigNavigation);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-menu-button.js';\n\nimport '../ha-config-section.js';\nimport './ha-config-cloud-menu.js';\nimport './ha-config-entries-menu.js';\nimport './ha-config-navigation.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigDashboard extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 32px;\n      }\n    </style>\n\n    <app-header-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <ha-menu-button narrow=\"[[narrow]]\" show-menu=\"[[showMenu]]\"></ha-menu-button>\n          <div main-title=\"\">[[localize('panel.configuration')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">[[localize('ui.panel.config.header')]]</span>\n          <span slot=\"introduction\">[[localize('ui.panel.config.introduction')]]</span>\n\n          <template is=\"dom-if\" if=\"[[computeIsLoaded(hass, &quot;cloud&quot;)]]\">\n            <ha-config-cloud-menu hass=\"[[hass]]\" account=\"[[account]]\"></ha-config-cloud-menu>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[computeIsLoaded(hass, &quot;config.config_entries&quot;)]]\">\n            <ha-config-entries-menu hass=\"[[hass]]\"></ha-config-entries-menu>\n          </template>\n\n          <ha-config-navigation hass=\"[[hass]]\"></ha-config-navigation>\n        </ha-config-section>\n      </div>\n    </app-header-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n    };\n  }\n\n  computeIsLoaded(hass, component) {\n    return isComponentLoaded(hass, component);\n  }\n}\n\ncustomElements.define('ha-config-dashboard', HaConfigDashboard);\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '../ha-config-section.js';\n\nimport Script from './script/index.js';\n\nexport default class ScriptEditor extends Component {\n  constructor() {\n    super();\n\n    this.onChange = this.onChange.bind(this);\n    this.sequenceChanged = this.sequenceChanged.bind(this);\n  }\n\n  onChange(ev) {\n    this.props.onChange(Object.assign(\n      {}, this.props.script,\n      { [ev.target.name]: ev.target.value }\n    ));\n  }\n\n  sequenceChanged(sequence) {\n    this.props.onChange(Object.assign(\n      {}, this.props.script,\n      { sequence },\n    ));\n  }\n\n  render({ script, isWide, hass, localize }) {\n    const { alias, sequence } = script;\n\n    return (\n      <div>\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{alias}</span>\n          <span slot='introduction'>\n            Use scripts to execute a sequence of actions.\n          </span>\n          <paper-card>\n            <div class='card-content'>\n              <paper-input\n                label=\"Name\"\n                name=\"alias\"\n                value={alias}\n                onvalue-changed={this.onChange}\n              />\n            </div>\n          </paper-card>\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>Sequence</span>\n          <span slot='introduction'>\n            The sequence of actions of this script.\n            <p><a href=\"https://home-assistant.io/docs/scripts/\" target=\"_blank\">\n              Learn more about available actions.\n            </a></p>\n          </span>\n          <Script\n            script={sequence}\n            onChange={this.sequenceChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n      </div>\n    );\n  }\n}\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-fab/paper-fab.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { h, render } from 'preact';\n\nimport '../../../layouts/ha-app-layout.js';\n\nimport Script from '../js/script.js';\nimport unmountPreact from '../../../common/preact/unmount.js';\n\nimport computeObjectId from '../../../common/entity/compute_object_id.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nfunction ScriptEditor(mountEl, props, mergeEl) {\n  return render(h(Script, props), mountEl, mergeEl);\n}\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaScriptEditor extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      .errors {\n        padding: 20px;\n        font-weight: bold;\n        color: var(--google-red-500);\n      }\n      .content {\n        padding-bottom: 20px;\n      }\n      paper-card {\n        display: block;\n      }\n      .triggers,\n      .script {\n        margin-top: -16px;\n      }\n      .triggers paper-card,\n      .script paper-card {\n        margin-top: 16px;\n      }\n      .add-card paper-button {\n        display: block;\n        text-align: center;\n      }\n      .card-menu {\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 1;\n        color: var(--primary-text-color);\n      }\n      .card-menu paper-item {\n        cursor: pointer;\n      }\n      span[slot=introduction] a {\n        color: var(--primary-color);\n      }\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n        margin-bottom: -80px;\n        transition: margin-bottom .3s;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      paper-fab[dirty] {\n        margin-bottom: 0;\n      }\n    </style>\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"backTapped\"></paper-icon-button>\n          <div main-title=\"\">Script [[name]]</div>\n        </app-toolbar>\n      </app-header>\n      <div class=\"content\">\n        <template is=\"dom-if\" if=\"[[errors]]\">\n          <div class=\"errors\">[[errors]]</div>\n        </template>\n        <div id=\"root\"></div>\n      </div>\n      <paper-fab slot=\"fab\" is-wide\\$=\"[[isWide]]\" dirty\\$=\"[[dirty]]\" icon=\"hass:content-save\" title=\"Save\" on-click=\"saveScript\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      errors: {\n        type: Object,\n        value: null,\n      },\n\n      dirty: {\n        type: Boolean,\n        value: false,\n      },\n\n      config: {\n        type: Object,\n        value: null,\n      },\n\n      script: {\n        type: Object,\n        observer: 'scriptChanged',\n      },\n\n      creatingNew: {\n        type: Boolean,\n        observer: 'creatingNewChanged',\n      },\n\n      name: {\n        type: String,\n        computed: 'computeName(script)'\n      },\n\n      isWide: {\n        type: Boolean,\n        observer: '_updateComponent',\n      },\n\n      _rendered: {\n        type: Object,\n        value: null,\n      },\n\n      _renderScheduled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    this.configChanged = this.configChanged.bind(this);\n    super.ready(); // This call will initialize preact.\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._rendered) {\n      unmountPreact(this._rendered);\n      this._rendered = null;\n    }\n  }\n\n  configChanged(config) {\n    // onChange gets called a lot during initial rendering causing recursing calls.\n    if (this._rendered === null) return;\n    this.config = config;\n    this.errors = null;\n    this.dirty = true;\n    this._updateComponent();\n  }\n\n  scriptChanged(newVal, oldVal) {\n    if (!newVal) return;\n    if (!this.hass) {\n      setTimeout(() => this.scriptChanged(newVal, oldVal), 0);\n      return;\n    }\n    if (oldVal && oldVal.entity_id === newVal.entity_id) {\n      return;\n    }\n    this.hass.callApi('get', 'config/script/config/' + computeObjectId(newVal.entity_id))\n      .then((config) => {\n        // Normalize data: ensure sequence is a list\n        // Happens when people copy paste their scripts into the config\n        var value = config.sequence;\n        if (value && !Array.isArray(value)) {\n          config.sequence = [value];\n        }\n\n        this.dirty = false;\n        this.config = config;\n        this._updateComponent();\n      }, () => {\n        alert('Only scripts inside scripts.yaml are editable.');\n        history.back();\n      });\n  }\n\n  creatingNewChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n    this.dirty = false;\n    this.config = {\n      alias: 'New Script',\n      sequence: [\n        { service: '', data: {} },\n      ],\n    };\n    this._updateComponent();\n  }\n\n  backTapped() {\n    if (this.dirty &&\n        // eslint-disable-next-line\n        !confirm('You have unsaved changes. Are you sure you want to leave?')) {\n      return;\n    }\n    history.back();\n  }\n\n  _updateComponent() {\n    if (this._renderScheduled || !this.hass || !this.config) return;\n    this._renderScheduled = true;\n    Promise.resolve().then(() => {\n      this._rendered = ScriptEditor(this.$.root, {\n        script: this.config,\n        onChange: this.configChanged,\n        isWide: this.isWide,\n        hass: this.hass,\n        localize: this.localize,\n      }, this._rendered);\n      this._renderScheduled = false;\n    });\n  }\n\n  saveScript() {\n    var id = this.creatingNew ?\n      '' + Date.now() : computeObjectId(this.script.entity_id);\n    this.hass.callApi('post', 'config/script/config/' + id, this.config).then(() => {\n      this.dirty = false;\n\n      if (this.creatingNew) {\n        this.navigate(`/config/script/edit/${id}`, true);\n      }\n    }, (errors) => {\n      this.errors = errors.body.message;\n      throw errors;\n    });\n  }\n\n  computeName(script) {\n    return script && computeStateName(script);\n  }\n}\n\ncustomElements.define('ha-script-editor', HaScriptEditor);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-fab/paper-fab.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../layouts/ha-app-layout.js';\n\nimport '../ha-config-section.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaScriptPicker extends LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      :host {\n        display: block;\n      }\n\n      paper-item {\n        cursor: pointer;\n      }\n\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      a {\n        color: var(--primary-color);\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.script.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <ha-config-section is-wide=\"[[isWide]]\">\n        <div slot=\"header\">Script Editor</div>\n        <div slot=\"introduction\">\n          The script editor allows you to create and edit scripts.\n          Please read <a href=\"https://home-assistant.io/docs/scripts/editor/\" target=\"_blank\">the instructions</a> to make sure that you have configured Home Assistant correctly.\n        </div>\n\n        <paper-card heading=\"Pick script to edit\">\n          <template is=\"dom-if\" if=\"[[!scripts.length]]\">\n            <div class=\"card-content\">\n              <p>We couldn't find any editable scripts.</p>\n            </div>\n          </template>\n          <template is=\"dom-repeat\" items=\"[[scripts]]\" as=\"script\">\n            <paper-item>\n              <paper-item-body two-line=\"\" on-click=\"scriptTapped\">\n                <div>[[computeName(script)]]</div>\n                <div secondary=\"\">[[computeDescription(script)]]</div>\n              </paper-item-body>\n              <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n            </paper-item>\n          </template>\n        </paper-card>\n      </ha-config-section>\n\n      <paper-fab slot=\"fab\" is-wide\\$=\"[[isWide]]\" icon=\"hass:plus\" title=\"Add Script\" on-click=\"addScript\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      scripts: {\n        type: Array,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n    };\n  }\n\n  scriptTapped(ev) {\n    this.navigate('/config/script/edit/' + this.scripts[ev.model.index].entity_id);\n  }\n\n  addScript() {\n    this.navigate('/config/script/new');\n  }\n\n  computeName(script) {\n    return computeStateName(script);\n  }\n\n  // Still thinking of something to add here.\n  // eslint-disable-next-line\n  computeDescription(script) {\n    return '';\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-script-picker', HaScriptPicker);\n","import '@polymer/app-route/app-route.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-script-editor.js';\nimport './ha-script-picker.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\n\nclass HaConfigScript extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      ha-script-picker,\n      ha-script-editor {\n        height: 100%;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/script/edit/:script\" data=\"{{_routeData}}\" active=\"{{_edittingScript}}\"></app-route>\n    <app-route route=\"[[route]]\" pattern=\"/script/new\" active=\"{{_creatingNew}}\"></app-route>\n\n    <template is=\"dom-if\" if=\"[[!showEditor]]\">\n      <ha-script-picker hass=\"[[hass]]\" narrow=\"[[narrow]]\" show-menu=\"[[showMenu]]\" scripts=\"[[scripts]]\" is-wide=\"[[isWide]]\"></ha-script-picker>\n    </template>\n\n    <template is=\"dom-if\" if=\"[[showEditor]]\" restamp=\"\">\n      <ha-script-editor hass=\"[[hass]]\" script=\"[[script]]\" is-wide=\"[[isWide]]\" creating-new=\"[[_creatingNew]]\"></ha-script-editor>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n      route: Object,\n      isWide: Boolean,\n      _routeData: Object,\n      _routeMatches: Boolean,\n      _creatingNew: Boolean,\n      _edittingScript: Boolean,\n\n      scripts: {\n        type: Array,\n        computed: 'computeScripts(hass)',\n      },\n\n      script: {\n        type: Object,\n        computed: 'computeScript(scripts, _edittingScript, _routeData)',\n      },\n\n      showEditor: {\n        type: Boolean,\n        computed: 'computeShowEditor(_edittingScript, _creatingNew)',\n      }\n    };\n  }\n\n  computeScript(scripts, edittingAddon, routeData) {\n    if (!scripts || !edittingAddon) {\n      return null;\n    }\n    for (var i = 0; i < scripts.length; i++) {\n      if (scripts[i].entity_id === routeData.script) {\n        return scripts[i];\n      }\n    }\n    return null;\n  }\n\n  computeScripts(hass) {\n    var scripts = [];\n\n    Object.keys(hass.states).forEach(function (key) {\n      var entity = hass.states[key];\n\n      if (computeStateDomain(entity) === 'script') {\n        scripts.push(entity);\n      }\n    });\n\n    return scripts.sort(function entitySortBy(entityA, entityB) {\n      var nameA = computeStateName(entityA);\n      var nameB = computeStateName(entityB);\n\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n\n  computeShowEditor(_edittingScript, _creatingNew) {\n    return _creatingNew || _edittingScript;\n  }\n}\n\ncustomElements.define('ha-config-script', HaConfigScript);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaServiceDescription extends PolymerElement {\n  static get template() {\n    return html`\n    [[_getDescription(hass, domain, service)]]\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      domain: String,\n      service: String,\n    };\n  }\n\n  _getDescription(hass, domain, service) {\n    var domainServices = hass.config.services[domain];\n    if (!domainServices) return '';\n    var serviceObject = domainServices[service];\n    if (!serviceObject) return '';\n    return serviceObject.description;\n  }\n}\n\ncustomElements.define('ha-service-description', HaServiceDescription);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nclass ZwaveGroups extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 12px;\n      }\n    </style>\n    <paper-card class=\"content\" heading=\"Node group associations\">\n      <!--TODO make api for getting groups and members-->\n      <div class=\"device-picker\">\n        <paper-dropdown-menu label=\"Group\" dynamic-align=\"\" class=\"flex\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedGroup}}\">\n            <template is=\"dom-repeat\" items=\"[[groups]]\" as=\"state\">\n              <paper-item>[[computeSelectCaptionGroup(state)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </div>\n      <template is=\"dom-if\" if=\"[[computeIsGroupSelected(selectedGroup)]]\">\n        <div class=\"device-picker\">\n          <paper-dropdown-menu label=\"Node to control\" dynamic-align=\"\" class=\"flex\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTargetNode}}\">\n              <template is=\"dom-repeat\" items=\"[[nodes]]\" as=\"state\">\n                <paper-item>[[computeSelectCaption(state)]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n\n        <div class=\"help-text\">\n          <span>Other Nodes in this group:</span>\n          <template is=\"dom-repeat\" items=\"[[otherGroupNodes]]\" as=\"state\">\n            <div>[[state]]</div>\n          </template>\n        </div>\n        <div class=\"help-text\">\n          <span>Max Associations:</span>\n          <span>[[maxAssociations]]</span>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[computeIsTargetNodeSelected(selectedTargetNode)]]\">\n        <div class=\"card-actions\">\n          <template is=\"dom-if\" if=\"[[!noAssociationsLeft]]\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"change_association\" service-data=\"[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]\">Add To Group</ha-call-service-button>\n          </template>\n          <template is=\"dom-if\" if=\"[[computeTargetInGroup(selectedGroup, selectedTargetNode)]]\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"change_association\" service-data=\"[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]\">Remove From Group</ha-call-service-button>\n          </template>\n        </div>\n      </template>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n      },\n\n      groups: {\n        type: Array,\n      },\n\n      selectedNode: {\n        type: Number,\n      },\n\n      selectedTargetNode: {\n        type: Number,\n        value: -1\n      },\n\n      selectedGroup: {\n        type: Number,\n        value: -1,\n        observer: 'selectedGroupChanged'\n      },\n\n      otherGroupNodes: {\n        type: Array,\n        value: -1,\n        computed: 'computeOtherGroupNodes(selectedGroup)'\n      },\n\n      maxAssociations: {\n        type: String,\n        value: '',\n        computed: 'computeMaxAssociations(selectedGroup)'\n      },\n\n      noAssociationsLeft: {\n        type: Boolean,\n        value: true,\n        computed: 'computeAssociationsLeft(selectedGroup)'\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    if (ev.detail.success) {\n      var foo = this;\n      setTimeout(function () {\n        foo.refreshGroups(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  computeAssociationsLeft(selectedGroup) {\n    if (selectedGroup === -1) return true;\n    return (this.maxAssociations === this.otherGroupNodes.length);\n  }\n\n  computeMaxAssociations(selectedGroup) {\n    if (selectedGroup === -1) return -1;\n    var maxAssociations = this.groups[selectedGroup].value.max_associations;\n    if (!maxAssociations) return 'None';\n    return maxAssociations;\n  }\n\n  computeOtherGroupNodes(selectedGroup) {\n    if (selectedGroup === -1) return -1;\n    var associations = Object.values(this.groups[selectedGroup].value.association_instances);\n    if (!associations.length) return ['None'];\n    return associations.map((assoc) => {\n      if (!assoc.length || assoc.length !== 2) {\n        return 'Unknown Node: ' + assoc;\n      }\n      const id = assoc[0];\n      const instance = assoc[1];\n      const node = this.nodes.find(n => n.attributes.node_id === id);\n      if (!node) {\n        return 'Unknown Node (id: ' + (instance ? id + '.' + instance : id) + ')';\n      }\n      let caption = this.computeSelectCaption(node);\n      if (instance) {\n        caption += '/ Instance: ' + instance;\n      }\n      return caption;\n    });\n  }\n\n  computeTargetInGroup(selectedGroup, selectedTargetNode) {\n    if (selectedGroup === -1 || selectedTargetNode === -1) return false;\n    const associations = Object.values(this.groups[selectedGroup].value.associations);\n    if (!associations.length) return false;\n    return associations.indexOf(this.nodes[selectedTargetNode].attributes.node_id) !== -1;\n  }\n\n  computeSelectCaption(stateObj) {\n    return computeStateName(stateObj) + ' (Node:' +\n      stateObj.attributes.node_id + ' ' +\n      stateObj.attributes.query_stage + ')';\n  }\n\n  computeSelectCaptionGroup(stateObj) {\n    return (stateObj.key + ': ' + stateObj.value.label);\n  }\n\n  computeIsTargetNodeSelected(selectedTargetNode) {\n    return this.nodes && selectedTargetNode !== -1;\n  }\n\n  computeIsGroupSelected(selectedGroup) {\n    return this.nodes && this.selectedNode !== -1 && selectedGroup !== -1;\n  }\n\n  computeAssocServiceData(selectedGroup, type) {\n    if (!this.groups === -1 || selectedGroup === -1 || this.selectedNode === -1) return -1;\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      association: type,\n      target_node_id: this.nodes[this.selectedTargetNode].attributes.node_id,\n      group: this.groups[selectedGroup].key\n    };\n  }\n\n  refreshGroups(selectedNode) {\n    var groupData = [];\n    this.hass.callApi('GET', 'zwave/groups/' + this.nodes[selectedNode].attributes.node_id).then(function (groups) {\n      Object.keys(groups).forEach(function (key) {\n        groupData.push({\n          key: key,\n          value: groups[key],\n        });\n      });\n      this.groups = groupData;\n      this.selectedGroupChanged(this.selectedGroup);\n    }.bind(this));\n  }\n\n  selectedGroupChanged(selectedGroup) {\n    if (this.selectedGroup === -1 || selectedGroup === -1) return;\n    this.maxAssociations = this.groups[selectedGroup].value.max_associations;\n    this.otherGroupNodes = Object.values(this.groups[selectedGroup].value.associations);\n  }\n}\n\ncustomElements.define('zwave-groups', ZwaveGroups);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-checkbox/paper-checkbox.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../ha-config-section.js';\n\nclass OzwLog extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">OZW Log</span>\n      <paper-card>\n      <div class=\"device-picker\">\n        <paper-input label=\"Number of last log lines.\" type=\"number\" min=\"0\" max=\"1000\" step=\"10\" value=\"{{numLogLines}}\">\n        </paper-input>\n      </div>\n      <div class=\"card-actions\">\n        <paper-button raised=\"\" on-click=\"refreshLog\">Refresh</paper-button>\n      </div>\n      <div class=\"help-text\">\n             <pre>[[ozwLogs]]</pre>\n      </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n\n      ozwLogs: {\n        type: String,\n        value: 'Refresh to pull log'\n      },\n\n      numLogLines: {\n        type: Number,\n        value: 0\n      },\n    };\n  }\n\n  refreshLog() {\n    this.ozwLogs = 'Loading ozw log...';\n    this.hass.callApi('GET', 'zwave/ozwlog?lines=' + this.numLogLines)\n      .then((info) => {\n        this.ozwLogs = info;\n      });\n  }\n}\n\ncustomElements.define('ozw-log', OzwLog);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-api-button.js';\nimport '../../../components/buttons/ha-call-service-button.js';\nimport '../../../components/ha-service-description.js';\nimport '../ha-config-section.js';\n\nclass ZwaveNetwork extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .card-actions.warning ha-call-service-button {\n        color: var(--google-red-500);\n      }\n\n      .toggle-help-icon {\n        position: absolute;\n        top: -6px;\n        right: 0;\n        color: var(--primary-color);\n      }\n\n      ha-service-description {\n        display: block;\n        color: grey;\n      }\n\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <div style=\"position: relative\" slot=\"header\">\n        <span>Z-Wave Network Management</span>\n        <paper-icon-button class=\"toggle-help-icon\" on-click=\"helpTap\" icon=\"hass:help-circle\"></paper-icon-button>\n\n      </div>\n      <span slot=\"introduction\">\n        Run commands that affect the Z-Wave network. You won't get feedback on whether the command succeeded, but you can look in the OZW Log to try to figure out.\n      </span>\n\n\n      <paper-card class=\"content\">\n        <div class=\"card-actions\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node_secure\">Add Node Secure</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node_secure\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node\">Add Node</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_node\">Remove Node</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_node\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n\n        </div>\n        <div class=\"card-actions warning\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"cancel_command\">Cancel Command</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"cancel_command\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n\n        </div>\n        <div class=\"card-actions\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"heal_network\">Heal Network</ha-call-service-button>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"start_network\">Start Network</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"start_network\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"stop_network\">Stop Network</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"stop_network\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"soft_reset\">Soft Reset</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"soft_reset\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"test_network\">Test Network</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"test_network\" hidden\\$=\"[[!showDescription]]\"></ha-service-description>\n          <ha-call-api-button hass=\"[[hass]]\" path=\"zwave/saveconfig\">Save Config</ha-call-api-button>\n\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n\n      showDescription: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  helpTap() {\n    this.showDescription = !this.showDescription;\n  }\n}\n\ncustomElements.define('zwave-network', ZwaveNetwork);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass ZwaveNodeConfig extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n      }\n    </style>\n    <div class=\"content\">\n      <paper-card heading=\"Node config options\">\n        <template is=\"dom-if\" if=\"[[wakeupNode]]\">\n          <div class=\"card-actions\">\n            <paper-input float-label=\"Wakeup Interval\" type=\"number\" value=\"{{wakeupInput}}\" placeholder=\"[[computeGetWakeupValue(selectedNode)]]\">\n               <div suffix=\"\">seconds</div>\n            </paper-input>\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"set_wakeup\" service-data=\"[[computeWakeupServiceData(wakeupInput)]]\">Set Wakeup</ha-call-service-button>\n          </div>\n        </template>\n        <div class=\"device-picker\">\n        <paper-dropdown-menu label=\"Config parameter\" dynamic-align=\"\" class=\"flex\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedConfigParameter}}\">\n            <template is=\"dom-repeat\" items=\"[[config]]\" as=\"state\">\n              <paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        </div>\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'List')]]\">\n          <div class=\"device-picker\">\n            <paper-dropdown-menu label=\"Config value\" dynamic-align=\"\" class=\"flex\" placeholder=\"{{loadedConfigValue}}\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedConfigValue}}\">\n                <template is=\"dom-repeat\" items=\"[[selectedConfigParameterValues]]\" as=\"state\">\n                  <paper-item>[[state]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]\">\n          <div class=\"card-actions\">\n            <paper-input label=\"{{selectedConfigParameterNumValues}}\" type=\"number\" value=\"{{selectedConfigValue}}\" max=\"{{configParameterMax}}\" min=\"{{configParameterMin}}\">\n            </paper-input>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]\">\n          <div class=\"device-picker\">\n            <paper-dropdown-menu label=\"Config value\" class=\"flex\" dynamic-align=\"\" placeholder=\"{{loadedConfigValue}}\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedConfigValue}}\">\n                <template is=\"dom-repeat\" items=\"[[selectedConfigParameterValues]]\" as=\"state\">\n                  <paper-item>[[state]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n          </div>\n        </template>\n        <div class=\"help-text\">\n          <span>[[configValueHelpText]]</span>\n        </div>\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]\">\n          <div class=\"card-actions\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"set_config_parameter\" service-data=\"[[computeSetConfigParameterServiceData(selectedConfigValue)]]\">Set Config Parameter</ha-call-service-button>\n          </div>\n        </template>\n      </paper-card>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n        observer: 'nodesChanged'\n      },\n\n      selectedNode: {\n        type: Number,\n        value: -1,\n        observer: 'nodesChanged'\n      },\n\n      config: {\n        type: Array,\n        value: function () {\n          return [];\n        }\n      },\n\n      selectedConfigParameter: {\n        type: Number,\n        value: -1,\n        observer: 'selectedConfigParameterChanged'\n      },\n\n      configParameterMax: {\n        type: Number,\n        value: -1\n      },\n\n      configParameterMin: {\n        type: Number,\n        value: -1\n      },\n\n      configValueHelpText: {\n        type: String,\n        value: '',\n        computed: 'computeConfigValueHelp(selectedConfigParameter)'\n      },\n\n      selectedConfigParameterType: {\n        type: String,\n        value: ''\n      },\n\n      selectedConfigValue: {\n        type: Number,\n        value: -1,\n        observer: 'computeSetConfigParameterServiceData'\n      },\n\n      selectedConfigParameterValues: {\n        type: Array,\n        value: function () {\n          return [];\n        }\n      },\n\n      selectedConfigParameterNumValues: {\n        type: String,\n        value: ''\n      },\n\n      loadedConfigValue: {\n        type: Number,\n        value: -1\n      },\n\n      wakeupInput: {\n        type: Number,\n      },\n\n      wakeupNode: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    if (ev.detail.success) {\n      var foo = this;\n      setTimeout(function () {\n        foo.refreshConfig(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  nodesChanged() {\n    if (!this.nodes) return;\n    this.wakeupNode = (this.nodes[this.selectedNode].attributes.wake_up_interval === 0 ||\n      this.nodes[this.selectedNode].attributes.wake_up_interval);\n    if (this.wakeupNode) {\n      if (this.nodes[this.selectedNode].attributes.wake_up_interval === 0) this.wakeupInput = '';\n      else this.wakeupInput = this.nodes[this.selectedNode].attributes.wake_up_interval;\n    }\n  }\n\n  computeGetWakeupValue(selectedNode) {\n    if (this.selectedNode === -1 ||\n      !this.nodes[selectedNode].attributes.wake_up_interval) return 'unknown';\n    return (this.nodes[selectedNode].attributes.wake_up_interval);\n  }\n\n  computeWakeupServiceData(wakeupInput) {\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      value: wakeupInput\n    };\n  }\n\n  computeConfigValueHelp(selectedConfigParameter) {\n    if (selectedConfigParameter === -1) return '';\n    var helpText = this.config[selectedConfigParameter].value.help;\n    if (!helpText) return ['No helptext available'];\n    return helpText;\n  }\n\n  computeSetConfigParameterServiceData(selectedConfigValue) {\n    if (this.selectedNode === -1 || this.selectedConfigParameter === -1) return -1;\n    var valueData = null;\n    if (('Short Byte Int').includes(this.selectedConfigParameterType)) {\n      valueData = parseInt(selectedConfigValue, 10);\n    } if (('Bool Button').includes(this.selectedConfigParameterType)) {\n      valueData = this.selectedConfigParameterValues[selectedConfigValue];\n    } if (this.selectedConfigParameterType === 'List') {\n      valueData = this.selectedConfigParameterValues[selectedConfigValue];\n    }\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      parameter: this.config[this.selectedConfigParameter].key,\n      value: valueData\n    };\n  }\n\n  selectedConfigParameterChanged(selectedConfigParameter) {\n    if (selectedConfigParameter === -1) return;\n    this.selectedConfigValue = -1;\n    this.loadedConfigValue = -1;\n    this.selectedConfigParameterValues = [];\n    this.selectedConfigParameterType = this.config[selectedConfigParameter].value.type;\n    this.configParameterMax = this.config[selectedConfigParameter].value.max;\n    this.configParameterMin = this.config[selectedConfigParameter].value.min;\n    this.loadedConfigValue = this.config[selectedConfigParameter].value.data;\n    this.configValueHelpText = this.config[selectedConfigParameter].value.help;\n    if (('Short Byte Int').includes(this.selectedConfigParameterType)) {\n      this.selectedConfigParameterNumValues = this.config[selectedConfigParameter].value.data_items;\n      this.selectedConfigValue = this.loadedConfigValue;\n    }\n    if (('Bool Button').includes(this.selectedConfigParameterType)) {\n      this.selectedConfigParameterValues = ['True', 'False'];\n      if (this.config[selectedConfigParameter].value.data) {\n        this.loadedConfigValue = 'True';\n      } else this.loadedConfigValue = 'False';\n    }\n    if (('List').includes(this.selectedConfigParameterType)) {\n      this.selectedConfigParameterValues = this.config[selectedConfigParameter].value.data_items;\n    }\n  }\n\n  isConfigParameterSelected(selectedConfigParameter, type) {\n    if (selectedConfigParameter === -1) return false;\n    if (this.config[selectedConfigParameter].value.type === type) return true;\n    if (type.includes(this.config[selectedConfigParameter].value.type)) return true;\n    return false;\n  }\n\n  computeSelectCaptionConfigParameter(stateObj) {\n    return (stateObj.key + ': ' + stateObj.value.label);\n  }\n\n  refreshConfig(selectedNode) {\n    var configData = [];\n    this.hass.callApi('GET', 'zwave/config/' + this.nodes[selectedNode].attributes.node_id).then(function (config) {\n      Object.keys(config).forEach(function (key) {\n        configData.push({\n          key: key,\n          value: config[key],\n        });\n      });\n      this.config = configData;\n      this.selectedConfigParameterChanged(this.selectedConfigParameter);\n    }.bind(this));\n  }\n}\n\ncustomElements.define('zwave-node-config', ZwaveNodeConfig);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass ZwaveNodeInformation extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      .node-info {\n        margin-left: 16px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      paper-button[toggles][active] {\n        background: lightgray;\n      }\n\n    </style>\n\n    <div class=\"content\">\n      <paper-card heading=\"Node Information\">\n      <div class=\"card-actions\">\n        <paper-button toggles=\"\" raised=\"\" noink=\"\" active=\"{{nodeInfoActive}}\">Show</paper-button>\n      </div>\n      <template is=\"dom-if\" if=\"{{nodeInfoActive}}\">\n        <template is=\"dom-repeat\" items=\"[[selectedNodeAttrs]]\" as=\"state\">\n          <div class=\"node-info\">\n            <span>[[state]]</span>\n          </div>\n        </template>\n      </template>\n      </paper-card>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      nodes: {\n        type: Array,\n        observer: 'nodeChanged'\n      },\n\n      selectedNode: {\n        type: Number,\n        value: -1,\n        observer: 'nodeChanged'\n      },\n\n      selectedNodeAttrs: {\n        type: Array,\n      },\n\n      nodeInfoActive: {\n        type: Boolean,\n      },\n    };\n  }\n\n  nodeChanged(selectedNode) {\n    if (!this.nodes || selectedNode === -1) return;\n    var nodeAttrs = this.nodes[this.selectedNode].attributes;\n    var att = [];\n    Object.keys(nodeAttrs).forEach(function (key) {\n      att.push(key + ': ' + nodeAttrs[key]);\n    });\n    this.selectedNodeAttrs = att.sort();\n  }\n}\n\ncustomElements.define('zwave-node-information', ZwaveNodeInformation);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass ZwaveUsercodes extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n    </style>\n      <div class=\"content\">\n        <paper-card heading=\"Node user codes\">\n          <div class=\"device-picker\">\n          <paper-dropdown-menu label=\"Code slot\" dynamic-align=\"\" class=\"flex\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedUserCode}}\">\n              <template is=\"dom-repeat\" items=\"[[userCodes]]\" as=\"state\">\n                <paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n          </div>\n\n          <template is=\"dom-if\" if=\"[[isUserCodeSelected(selectedUserCode)]]\">\n            <div class=\"card-actions\">\n              <paper-input label=\"User code\" type=\"text\" allowed-pattern=\"[0-9,a-f,x,\\\\\\\\]\" maxlength=\"{{userCodeMaxLen}}\" minlength=\"16\" value=\"{{selectedUserCodeValue}}\">\n              </paper-input>\n              <pre>Ascii: [[computedCodeOutput]]</pre>\n            </div>\n            <div class=\"card-actions\">\n              <ha-call-service-button hass=\"[[hass]]\" domain=\"lock\" service=\"set_usercode\" service-data=\"[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]\">Set Usercode</ha-call-service-button>\n              <ha-call-service-button hass=\"[[hass]]\" domain=\"lock\" service=\"clear_usercode\" service-data=\"[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]\">Delete Usercode</ha-call-service-button>\n            </div>\n          </template>\n        </paper-card>\n      </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n      },\n\n      selectedNode: {\n        type: Number,\n      },\n\n      userCodes: {\n        type: Object,\n      },\n\n      userCodeMaxLen: {\n        type: Number,\n        value: 4\n      },\n\n      selectedUserCode: {\n        type: Number,\n        value: -1,\n        observer: 'selectedUserCodeChanged'\n      },\n\n      selectedUserCodeValue: {\n        type: String,\n      },\n\n      computedCodeOutput: {\n        type: String,\n        value: ''\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    if (ev.detail.success) {\n      var foo = this;\n      setTimeout(function () {\n        foo.refreshUserCodes(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  isUserCodeSelected(selectedUserCode) {\n    if (selectedUserCode === -1) return false;\n    return true;\n  }\n\n  computeSelectCaptionUserCodes(stateObj) {\n    return (stateObj.key + ': ' + stateObj.value.label);\n  }\n\n  selectedUserCodeChanged(selectedUserCode) {\n    if (this.selectedUserCode === -1 || selectedUserCode === -1) return;\n    var value = this.userCodes[selectedUserCode].value.code;\n    this.userCodeMaxLen = (this.userCodes[selectedUserCode].value.length * 4);\n    this.selectedUserCodeValue = this.a2hex(value);\n    this.computedCodeOutput = '[' + this.hex2a(this.selectedUserCodeValue) + ']';\n  }\n\n  computeUserCodeServiceData(selectedUserCodeValue, type) {\n    if (this.selectedNode === -1 || !selectedUserCodeValue) return -1;\n    var serviceData = null;\n    var valueData = null;\n    if (type === 'Add') {\n      valueData = this.hex2a(selectedUserCodeValue);\n      this.computedCodeOutput = '[' + valueData + ']';\n      serviceData = {\n        node_id: this.nodes[this.selectedNode].attributes.node_id,\n        code_slot: this.selectedUserCode,\n        usercode: valueData\n      };\n    }\n    if (type === 'Delete') {\n      serviceData = {\n        node_id: this.nodes[this.selectedNode].attributes.node_id,\n        code_slot: this.selectedUserCode\n      };\n    }\n    return serviceData;\n  }\n\n  refreshUserCodes(selectedNode) {\n    this.selectedUserCodeValue = '';\n    var userCodes = [];\n    this.hass.callApi('GET', 'zwave/usercodes/' + this.nodes[selectedNode].attributes.node_id).then(function (usercodes) {\n      Object.keys(usercodes).forEach(function (key) {\n        userCodes.push({\n          key: key,\n          value: usercodes[key],\n        });\n      });\n      this.userCodes = userCodes;\n      this.selectedUserCodeChanged(this.selectedUserCode);\n    }.bind(this));\n  }\n\n  a2hex(str) {\n    var arr = [];\n    var output = '';\n    for (var i = 0, l = str.length; i < l; i++) {\n      var hex = Number(str.charCodeAt(i)).toString(16);\n      if (hex === '0') {\n        output = '00';\n      } else {\n        output = hex;\n      }\n      arr.push('\\\\x' + output);\n    }\n    return arr.join('');\n  }\n\n  hex2a(hexx) {\n    var hex = hexx.toString();\n    var hexMod = hex.replace(/\\\\x/g, '');\n    var str = '';\n    for (var i = 0; i < hexMod.length; i += 2) {\n      str += String.fromCharCode(parseInt(hexMod.substr(i, 2), 16));\n    }\n    return str;\n  }\n}\n\ncustomElements.define('zwave-usercodes', ZwaveUsercodes);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass ZwaveValues extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n      }\n    </style>\n    <div class=\"content\">\n      <paper-card heading=\"Node Values\">\n        <div class=\"device-picker\">\n        <paper-dropdown-menu label=\"Value\" dynamic-align=\"\" class=\"flex\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedValue}}\">\n             <template is=\"dom-repeat\" items=\"[[values]]\" as=\"item\">\n              <paper-item>[[computeSelectCaption(item)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        </div>\n        <template is=\"dom-if\" if=\"[[!computeIsValueSelected(selectedValue)]]\">\n          <div class=\"card-actions\">\n            <paper-input float-label=\"Value Name\" type=\"text\" value=\"{{newValueNameInput}}\" placeholder=\"[[computeGetValueName(selectedValue)]]\">\n            </paper-input>\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"rename_value\" service-data=\"[[computeValueNameServiceData(newValueNameInput)]]\">Rename Value</ha-call-service-button>\n\n          </div>\n        </template>\n      </paper-card>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n      },\n\n      values: {\n        type: Array,\n      },\n\n      selectedNode: {\n        type: Number,\n      },\n\n      selectedValue: {\n        type: Number,\n        value: -1,\n        observer: 'selectedValueChanged'\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    var foo = this;\n    if (ev.detail.success) {\n      setTimeout(function () {\n        foo.refreshValues(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  computeSelectCaption(item) {\n    return item.value.label + ' (Instance: ' + item.value.instance + ', Index: ' + item.value.index + ')';\n  }\n\n  computeGetValueName(selectedValue) {\n    return this.values[selectedValue].value.label;\n  }\n\n  computeIsValueSelected(selectedValue) {\n    return (!this.nodes || this.selectedNode === -1 || selectedValue === -1);\n  }\n\n  refreshValues(selectedNode) {\n    var valueData = [];\n    this.hass.callApi('GET', 'zwave/values/' + this.nodes[selectedNode].attributes.node_id).then(function (values) {\n      Object.keys(values).forEach(function (key) {\n        valueData.push({\n          key: key,\n          value: values[key],\n        });\n      });\n      this.values = valueData;\n      this.selectedValueChanged(this.selectedValue);\n    }.bind(this));\n  }\n\n  computeValueNameServiceData(newValueNameInput) {\n    if (!this.selectedNode === -1 || this.selectedValue === -1) return -1;\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      value_id: this.values[this.selectedValue].key,\n      name: newValueNameInput,\n    };\n  }\n\n  selectedValueChanged(selectedValue) {\n    if (!this.selectedNode === -1 || this.selectedValue === -1) return;\n    var el = this;\n    this.hass.callApi('GET', 'config/zwave/device_config/' + this.values[selectedValue].value.entity_id)\n      .then(function (data) {\n        el.entityIgnored = data.ignored || false;\n        el.entityPollingIntensity = el.values[selectedValue].value.poll_intensity;\n      });\n  }\n}\n\ncustomElements.define('zwave-values', ZwaveValues);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\nimport '../../../components/ha-menu-button.js';\nimport '../../../components/ha-service-description.js';\nimport '../../../layouts/ha-app-layout.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport '../ha-form-style.js';\nimport './zwave-groups.js';\nimport './zwave-log.js';\nimport './zwave-network.js';\nimport './zwave-node-config.js';\nimport './zwave-node-information.js';\nimport './zwave-usercodes.js';\nimport './zwave-values.js';\n\nimport sortByName from '../../../common/entity/states_sort_by_name.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigZwave extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style ha-form-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      .node-info {\n        margin-left: 16px;\n      }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n      }\n\n      ha-service-description {\n        display: block;\n        color: grey;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      .toggle-help-icon {\n        position: absolute;\n        top: 6px;\n        right: 0;\n        color: var(--primary-color);\n      }\n    </style>\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.zwave.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <zwave-network id=\"zwave-network\" is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></zwave-network>\n\n      <!--Node card-->\n      <ha-config-section is-wide=\"[[isWide]]\">\n        <div style=\"position: relative\" slot=\"header\">\n          <span>Z-Wave Node Management</span>\n          <paper-icon-button class=\"toggle-help-icon\" on-click=\"toggleHelp\" icon=\"hass:help-circle\"></paper-icon-button>\n\n        </div>\n        <span slot=\"introduction\">\n          Run Z-Wave commands that affect a single node. Pick a node to see a list of available commands.\n        </span>\n\n        <paper-card class=\"content\">\n          <div class=\"device-picker\">\n            <paper-dropdown-menu dynamic-align=\"\" label=\"Nodes\" class=\"flex\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedNode}}\">\n                <template is=\"dom-repeat\" items=\"[[nodes]]\" as=\"state\">\n                  <paper-item>[[computeSelectCaption(state)]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n          </div>\n            <template is=\"dom-if\" if=\"[[!computeIsNodeSelected(selectedNode)]]\">\n              <template is=\"dom-if\" if=\"[[showHelp]]\">\n                <div style=\"color: grey; padding: 12px\">Select node to view per-node options</div>\n              </template>\n            </template>\n\n          <template is=\"dom-if\" if=\"[[computeIsNodeSelected(selectedNode)]]\">\n          <div class=\"card-actions\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Refresh Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_node\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_failed_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Remove Failed Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_failed_node\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"replace_failed_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Replace Failed Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"replace_failed_node\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"print_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Print Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"print_node\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"heal_node\" service-data=\"[[computeHealNodeServiceData(selectedNode)]]\">Heal Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"heal_node\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"test_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Test Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"test_node\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n          </div>\n          <div class=\"card-actions\">\n            <paper-input float-label=\"New node name\" type=\"text\" value=\"{{newNodeNameInput}}\" placeholder=\"[[computeGetNodeName(selectedNode)]]\">\n            </paper-input>\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"rename_node\" service-data=\"[[computeNodeNameServiceData(newNodeNameInput)]]\">Rename Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"rename_node\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n           </div>\n\n           <div class=\"device-picker\">\n            <paper-dropdown-menu label=\"Entities of this node\" dynamic-align=\"\" class=\"flex\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedEntity}}\">\n                <template is=\"dom-repeat\" items=\"[[entities]]\" as=\"state\">\n                  <paper-item>[[computeSelectCaptionEnt(state)]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n           </div>\n           <template is=\"dom-if\" if=\"[[!computeIsEntitySelected(selectedEntity)]]\">\n           <div class=\"card-actions\">\n             <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_entity\" service-data=\"[[computeRefreshEntityServiceData(selectedEntity)]]\">Refresh Entity</ha-call-service-button>\n             <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_entity\" hidden\\$=\"[[!showHelp]]\"></ha-service-description>\n           </div>\n           <div class=\"form-group\">\n             <paper-checkbox checked=\"{{entityIgnored}}\" class=\"form-control\">\n             Exclude this entity from Home Assistant\n             </paper-checkbox>\n             <paper-input disabled=\"{{entityIgnored}}\" label=\"Polling intensity\" type=\"number\" min=\"0\" value=\"{{entityPollingIntensity}}\">\n             </paper-input>\n           </div>\n           <div class=\"card-actions\">\n             <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"set_poll_intensity\" service-data=\"[[computePollIntensityServiceData(entityPollingIntensity)]]\">Save</ha-call-service-button>\n           </div>\n           <div class=\"content\">\n             <div class=\"card-actions\">\n               <paper-button toggles=\"\" raised=\"\" noink=\"\" active=\"{{entityInfoActive}}\">Entity Attributes</paper-button>\n             </div>\n             <template is=\"dom-if\" if=\"{{entityInfoActive}}\">\n               <template is=\"dom-repeat\" items=\"[[selectedEntityAttrs]]\" as=\"state\">\n                 <div class=\"node-info\">\n                   <span>[[state]]</span>\n                 </div>\n               </template>\n             </template>\n           </div>\n\n           </template>\n          </template>\n        </paper-card>\n\n        <template is=\"dom-if\" if=\"[[computeIsNodeSelected(selectedNode)]]\">\n          <!--Node info card-->\n          <zwave-node-information id=\"zwave-node-information\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\"></zwave-node-information>\n\n          <!--Value card-->\n          <zwave-values hass=\"[[hass]]\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\" values=\"[[values]]\"></zwave-values>\n\n          <!--Group card-->\n          <zwave-groups hass=\"[[hass]]\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\" groups=\"[[groups]]\"></zwave-groups>\n\n          <!--Config card-->\n          <zwave-node-config hass=\"[[hass]]\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\" config=\"[[config]]\"></zwave-node-config>\n        </template>\n\n        <!--User Codes-->\n        <template is=\"dom-if\" if=\"{{hasNodeUserCodes}}\">\n          <zwave-usercodes id=\"zwave-usercodes\" hass=\"[[hass]]\" nodes=\"[[nodes]]\" user-codes=\"[[userCodes]]\" selected-node=\"[[selectedNode]]\"></zwave-usercodes>\n      </template>\n      </ha-config-section>\n\n\n\n      <!--Ozw log-->\n      <ozw-log is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ozw-log>\n\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n\n      nodes: {\n        type: Array,\n        computed: 'computeNodes(hass)'\n      },\n\n      selectedNode: {\n        type: Number,\n        value: -1,\n        observer: 'selectedNodeChanged'\n      },\n\n      config: {\n        type: Array,\n        value: function () {\n          return [];\n        }\n      },\n\n      entities: {\n        type: Array,\n        computed: 'computeEntities(selectedNode)',\n      },\n\n      entityInfoActive: {\n        type: Boolean,\n      },\n\n      selectedEntity: {\n        type: Number,\n        value: -1,\n        observer: 'selectedEntityChanged',\n      },\n\n      selectedEntityAttrs: {\n        type: Array,\n        computed: 'computeSelectedEntityAttrs(selectedEntity)'\n      },\n\n      values: {\n        type: Array,\n      },\n\n      groups: {\n        type: Array,\n      },\n\n      newNodeNameInput: {\n        type: String,\n      },\n\n      userCodes: {\n        type: Array,\n        value: function () {\n          return [];\n        },\n      },\n\n      hasNodeUserCodes: {\n        type: Boolean,\n        value: false,\n      },\n\n      showHelp: {\n        type: Boolean,\n        value: false,\n      },\n\n      entityIgnored: {\n        type: Boolean,\n      },\n\n      entityPollingIntensity: {\n        type: Number,\n        value: 0,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    var el = this;\n    if ((ev.detail.success) && (ev.detail.service === 'set_poll_intensity')) {\n      el.saveEntity();\n    }\n  }\n\n  computeNodes(hass) {\n    return Object.keys(hass.states)\n      .map(function (key) { return hass.states[key]; })\n      .filter(function (ent) {\n        return ((ent.entity_id).match('zwave[.]'));\n      })\n      .sort(sortByName);\n  }\n\n  computeEntities(selectedNode) {\n    if (!this.nodes || selectedNode === -1) return -1;\n    var hass = this.hass;\n    var nodeid = this.nodes[this.selectedNode].attributes.node_id;\n    return Object.keys(hass.states)\n      .map(function (key) { return hass.states[key]; })\n      .filter(function (ent) {\n        if (ent.attributes.node_id === undefined) {\n          return false;\n        }\n        return (!ent.attributes.hidden &&\n                'node_id' in ent.attributes &&\n                ent.attributes.node_id === nodeid &&\n                (!(ent.entity_id).match('zwave[.]')));\n      })\n      .sort(sortByName);\n  }\n\n  selectedNodeChanged(selectedNode) {\n    this.newNodeNameInput = '';\n\n    if (selectedNode === -1) return;\n    this.selectedConfigParameter = -1;\n    this.selectedConfigParameterValue = -1;\n    this.selectedGroup = -1;\n\n    this.hass.callApi('GET', 'zwave/config/' + this.nodes[selectedNode].attributes.node_id).then((configs) => {\n      this.config = this._objToArray(configs);\n    });\n\n    this.hass.callApi('GET', 'zwave/values/' + this.nodes[selectedNode].attributes.node_id).then((values) => {\n      this.values = this._objToArray(values);\n    });\n\n    this.hass.callApi('GET', 'zwave/groups/' + this.nodes[selectedNode].attributes.node_id).then((groups) => {\n      this.groups = this._objToArray(groups);\n    });\n\n    this.hasNodeUserCodes = false;\n    this.notifyPath('hasNodeUserCodes');\n    this.hass.callApi('GET', 'zwave/usercodes/' + this.nodes[selectedNode].attributes.node_id).then((usercodes) => {\n      this.userCodes = this._objToArray(usercodes);\n      this.hasNodeUserCodes = this.userCodes.length > 0;\n      this.notifyPath('hasNodeUserCodes');\n    });\n  }\n\n  selectedEntityChanged(selectedEntity) {\n    if (selectedEntity === -1) return;\n    var el = this;\n    el.hass.callApi('GET', 'zwave/values/' + el.nodes[el.selectedNode].attributes.node_id).then((values) => {\n      el.values = el._objToArray(values);\n    });\n\n    var valueId = el.entities[selectedEntity].attributes.value_id;\n    var valueData = el.values.find(function (obj) { return obj.key === valueId; });\n    var valueIndex = el.values.indexOf(valueData);\n    el.hass.callApi('GET', 'config/zwave/device_config/' + valueId)\n      .then(function (data) {\n        el.entityIgnored = data.ignored || false;\n        el.entityPollingIntensity = el.values[valueIndex].value.poll_intensity;\n      });\n  }\n\n  computeSelectedEntityAttrs(selectedEntity) {\n    if (selectedEntity === -1) return 'No entity selected';\n    var entityAttrs = this.entities[selectedEntity].attributes;\n    var att = [];\n    Object.keys(entityAttrs).forEach(function (key) {\n      att.push(key + ': ' + entityAttrs[key]);\n    });\n    return att.sort();\n  }\n\n  computeSelectCaption(stateObj) {\n    return computeStateName(stateObj) + ' (Node:' +\n      stateObj.attributes.node_id + ' ' +\n      stateObj.attributes.query_stage + ')';\n  }\n\n  computeSelectCaptionEnt(stateObj) {\n    return (computeStateDomain(stateObj) + '.'\n            + computeStateName(stateObj));\n  }\n\n  computeIsNodeSelected() {\n    return (this.nodes && this.selectedNode !== -1);\n  }\n\n  computeIsEntitySelected(selectedEntity) {\n    return (selectedEntity === -1);\n  }\n\n  computeNodeServiceData(selectedNode) {\n    return { node_id: this.nodes[selectedNode].attributes.node_id };\n  }\n\n  computeHealNodeServiceData(selectedNode) {\n    return {\n      node_id: this.nodes[selectedNode].attributes.node_id,\n      return_routes: true\n    };\n  }\n\n  computeGetNodeName(selectedNode) {\n    if (this.selectedNode === -1 ||\n      !this.nodes[selectedNode].entity_id) return -1;\n    return this.nodes[selectedNode].attributes.node_name;\n  }\n\n  computeNodeNameServiceData(newNodeNameInput) {\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      name: newNodeNameInput\n    };\n  }\n\n  computeRefreshEntityServiceData(selectedEntity) {\n    if (selectedEntity === -1) return -1;\n    return { entity_id: this.entities[selectedEntity].entity_id };\n  }\n\n  computePollIntensityServiceData(entityPollingIntensity) {\n    if (!this.selectedNode === -1 || this.selectedEntity === -1) return -1;\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      value_id: this.entities[this.selectedEntity].attributes.value_id,\n      poll_intensity: parseInt(entityPollingIntensity),\n    };\n  }\n\n  saveEntity() {\n    var data = {\n      ignored: this.entityIgnored,\n      polling_intensity: parseInt(this.entityPollingIntensity),\n    };\n    return this.hass.callApi('POST', 'config/zwave/device_config/' + this.entities[this.selectedEntity].entity_id, data);\n  }\n\n  toggleHelp() {\n    this.showHelp = !this.showHelp;\n  }\n\n  _objToArray(obj) {\n    var array = [];\n    Object.keys(obj).forEach(function (key) {\n      array.push({\n        key: key,\n        value: obj[key],\n      });\n    });\n    return array;\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-config-zwave', HaConfigZwave);\n","import '@polymer/app-route/app-route.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../layouts/hass-error-screen.js';\n\nimport './automation/ha-config-automation.js';\nimport './cloud/ha-config-cloud.js';\nimport './config-entries/ha-config-entries.js';\nimport './core/ha-config-core.js';\nimport './customize/ha-config-customize.js';\nimport './dashboard/ha-config-dashboard.js';\nimport './script/ha-config-script.js';\nimport './zwave/ha-config-zwave.js';\n\nimport isComponentLoaded from '../../common/config/is_component_loaded.js';\nimport NavigateMixin from '../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaPanelConfig extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <app-route\n      route='[[route]]'\n      pattern='/:page'\n      data=\"{{_routeData}}\"\n    ></app-route>\n\n    <iron-media-query query=\"(min-width: 1040px)\" query-matches=\"{{wide}}\">\n    </iron-media-query>\n    <iron-media-query query=\"(min-width: 1296px)\" query-matches=\"{{wideSidebar}}\">\n    </iron-media-query>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"core\")]]' restamp>\n      <ha-config-core\n        page-name='core'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-core>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"cloud\")]]' restamp>\n      <ha-config-cloud\n        page-name='cloud'\n        route='[[route]]'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n        account='[[account]]'\n      ></ha-config-cloud>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"dashboard\")]]'>\n      <ha-config-dashboard\n        page-name='dashboard'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n        account='[[account]]'\n        narrow='[[narrow]]'\n        show-menu='[[showMenu]]'\n      ></ha-config-dashboard>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"automation\")]]' restamp>\n      <ha-config-automation\n        page-name='automation'\n        route='[[route]]'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-automation>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"script\")]]' restamp>\n      <ha-config-script\n        page-name='script'\n        route='[[route]]'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-script>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"zwave\")]]' restamp>\n      <ha-config-zwave\n        page-name='zwave'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-zwave>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"customize\")]]' restamp>\n      <ha-config-customize\n        page-name='customize'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-customize>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"integrations\")]]' restamp>\n      <ha-config-entries\n        page-name='integrations'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-entries>\n    </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n      account: Object,\n\n      route: {\n        type: Object,\n        observer: '_routeChanged',\n      },\n\n      _routeData: Object,\n\n      wide: Boolean,\n      wideSidebar: Boolean,\n\n      isWide: {\n        type: Boolean,\n        computed: 'computeIsWide(showMenu, wideSidebar, wide)'\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (isComponentLoaded(this.hass, 'cloud')) {\n      this.hass.callApi('get', 'cloud/account').then((account) => { this.account = account; });\n    }\n    this.addEventListener('ha-account-refreshed', (ev) => {\n      this.account = ev.detail.account;\n    });\n  }\n\n  computeIsWide(showMenu, wideSidebar, wide) {\n    return showMenu ? wideSidebar : wide;\n  }\n\n  _routeChanged(route) {\n    if (route.path === '' && route.prefix === '/config') {\n      this.navigate('/config/dashboard', true);\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-panel-config', HaPanelConfig);\n"],"sourceRoot":""}